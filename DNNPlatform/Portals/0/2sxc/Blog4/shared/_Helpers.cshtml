@inherits ToSic.Sxc.Dnn.RazorComponent
@using ToSic.Razor.Blade;

@functions {
  /**
  * Returns a safe url to a post details page
  */
  public dynamic LinkToDetailsPage(dynamic post) {
    var detailsPageTabId = Text.Has(App.Settings.DetailsPage)
      ? int.Parse((AsEntity(App.Settings).GetBestValue("DetailsPage")).Split(':')[1])
      : Dnn.Tab.TabID;

    return Tags.SafeUrl(Link.To(pageId: detailsPageTabId, parameters: "details=" + post.UrlKey));
  }
}
