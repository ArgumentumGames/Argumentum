{"version":3,"sources":["config.min.js"],"names":["runningInDnn","location","href","indexOf","window","$eavUIConfig","languages","fallbackLanguage","$","moduleElement","document","manageInfo","parseJSON","find","attr","manage","lng","i18nRoot","applicationRoot","defaultLanguage","langPrimary","currentLanguage","lang","substring","$2sxc","urlParams","require","JSON","parse","angular","module","constant","factory","$location","sxc","portalRoot","systemRoot","appRoot","AppInstanceId","dialogClass","getUrlPrefix","area","result","url","resolveServiceUrl","substr","length","endsWith","pipelineDesigner","outDataSource","className","in","name","description","visualDesignerData","Top","Left","Width","defaultPipeline","dataSources","entityGuid","partAssemblyAndType","streamWiring","From","Out","To","In","metadataOfAttribute","metadataOfApp","metadataOfEntity","metadataOfContentType","metadataOfZone","metadataOfCmsObject","versionInfo","get","contentType","defaultScope","template","formly","inputTypeReplacementMap","string-wysiwyg","inputTypeReconfig","field","config","InputTypeConfig","applyChanges","InputType","Assets","merged","Metadata","defaults","EnableEdit","EnableCreate","EnableAddExisting","EnableRemove","EnableDelete","forEach","value","key","undefined","String","prototype","searchString","position","subjectString","this","toString","isFinite","Math","floor","lastIndex"],"mappings":"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","file":"config.min.js","sourcesContent":["// EavGlobalConfigurationProvider providers default global values for the EAV angular system\r\n// The ConfigurationProvider in 2sxc is not the same as in the EAV project.\r\n\r\n// the following config-stuff is not in angular, because some settings are needed in dialogs which are not built with angularJS yet.\r\n// they are included in the same file for conveniance and to motivate the remaining dialogs to get migrated to AngularJS\r\n\r\n(function () {\r\n    var runningInDnn = location.href.indexOf(\"ui.html\") === -1;\r\n\r\n    // will contain some settings which are filled in different ways\r\n    window.$eavUIConfig = {\r\n        languages: {\r\n            fallbackLanguage: \"en\" // just for the resources files of eav/2sxc\r\n        }\r\n    };\r\n\r\n    if (runningInDnn) { // in dnn-page there is a jquery, which also allows us to find attributes\r\n        // in jQuery-Mode I have to wait till the document is ready\r\n        $(function () {\r\n            var moduleElement = $(document);\r\n            var manageInfo = $.parseJSON($(moduleElement.find(\"div[data-2sxc]\")[0]).attr(\"data-2sxc\")).manage;\r\n            var lng = window.$eavUIConfig.languages;\r\n            lng.i18nRoot = manageInfo.applicationRoot + \"desktopmodules/tosic_sexycontent/dist/i18n/\";\r\n            lng.defaultLanguage = manageInfo.langPrimary;\r\n            lng.currentLanguage = manageInfo.lang;\r\n            lng.languages = manageInfo.languages;\r\n        });\r\n    } else {\r\n        var lng = window.$eavUIConfig.languages;\r\n        lng.i18nRoot = location.href.substring(0, location.href.indexOf(\"dist/dnn/ui.html\")) + \"dist/i18n/\";\r\n        lng.defaultLanguage = $2sxc.urlParams.require(\"langpri\");   // the primary content-language - for first translation \r\n        lng.currentLanguage = $2sxc.urlParams.require(\"lang\");      // the current ui language used for i18n and/or for content\r\n        lng.languages = JSON.parse($2sxc.urlParams.require(\"langs\"));\r\n    }\r\n})();\r\n\r\nif (window.angular) // needed because the file is also included in older non-angular dialogs\r\n    angular.module(\"EavConfiguration\", [])\r\n        .constant(\"languages\", window.$eavUIConfig.languages)\r\n        .factory(\"eavConfig\", [\"$location\", \"sxc\", \"portalRoot\", \"systemRoot\", \"appRoot\", \"AppInstanceId\", function ($location, sxc, portalRoot, systemRoot, appRoot, AppInstanceId) {\r\n            return {\r\n                dialogClass: \"dnnFormPopup\",\r\n                getUrlPrefix: function (area) {\r\n                    var result = \"\";\r\n                    if (area === \"api\") {\r\n                        var url = sxc.resolveServiceUrl(\"eav/\");\r\n                        result = url.substr(0, url.length - 5);\r\n                    }\r\n\r\n                    if (area === \"system\") result = systemRoot;                    // used to link to JS-stuff and similar\r\n                    if (area === \"zone\") result = portalRoot;                    // used to link to the site-root (like an image)\r\n                    if (area === \"app\") result = appRoot;                       // used to find the app-root of something inside an app\r\n                    if (area === \"dialog\") result = systemRoot + \"dnn\";            // note: not tested yet\r\n                    if (area === \"dialog-page\") result = systemRoot + \"dnn/ui.html\";    // note: not tested yet\r\n                    if (result.endsWith(\"/\")) result = result.substring(0, result.length - 1);\r\n\r\n                    return result;\r\n                },\r\n                pipelineDesigner: {\r\n                    outDataSource: {\r\n                        className: \"SexyContentTemplate\",\r\n                        in: [\"ListContent\", \"Default\"],\r\n                        name: \"2sxc Target (View or API)\",\r\n                        description: \"The template/script which will show this data\",\r\n                        visualDesignerData: { Top: 20, Left: 200, Width: 700 }\r\n                    },\r\n                    defaultPipeline: {\r\n                        dataSources: [\r\n                            {\r\n                                entityGuid: \"unsaved1\",\r\n                                partAssemblyAndType: \"ToSic.Eav.DataSources.Caches.ICache, ToSic.Eav.DataSources\",\r\n                                visualDesignerData: { Top: 440, Left: 440 }\r\n                            }, {\r\n                                entityGuid: \"unsaved2\",\r\n                                partAssemblyAndType: \"ToSic.Eav.DataSources.PublishingFilter, ToSic.Eav.DataSources\",\r\n                                visualDesignerData: { Top: 300, Left: 440 }\r\n                            }, {\r\n                                entityGuid: \"unsaved3\",\r\n                                partAssemblyAndType: \"ToSic.SexyContent.DataSources.ModuleDataSource, ToSic.SexyContent\",\r\n                                visualDesignerData: { Top: 170, Left: 440 }\r\n                            }\r\n                        ],\r\n                        streamWiring: [\r\n                            { From: \"unsaved1\", Out: \"Default\", To: \"unsaved2\", In: \"Default\" },\r\n                            { From: \"unsaved1\", Out: \"Drafts\", To: \"unsaved2\", In: \"Drafts\" },\r\n                            { From: \"unsaved1\", Out: \"Published\", To: \"unsaved2\", In: \"Published\" },\r\n                            { From: \"unsaved2\", Out: \"Default\", To: \"unsaved3\", In: \"Default\" },\r\n                            { From: \"unsaved3\", Out: \"ListContent\", To: \"Out\", In: \"ListContent\" },\r\n                            { From: \"unsaved3\", Out: \"Default\", To: \"Out\", In: \"Default\" }\r\n                        ]\r\n                    },\r\n                    // 2019-03-12 2dm disabled as not needed any more, and could cause trouble - see https://github.com/2sic/2sxc/issues/1710\r\n                    // testParameters: \"[Module:ModuleID]=\" + AppInstanceId\r\n                },\r\n                metadataOfAttribute: 2,\r\n                metadataOfApp: 3,\r\n                metadataOfEntity: 4,\r\n                metadataOfContentType: 5,\r\n                metadataOfZone: 6,\r\n                metadataOfCmsObject: 10,\r\n\r\n                versionInfo: \"v\" + $2sxc.urlParams.get(\"sxcver\"),\r\n\r\n                contentType: {\r\n                    defaultScope: \"2SexyContent\",\r\n                    template: \"2SexyContent-Template\"\r\n                },\r\n\r\n                // use this to set defaults for field types OR to provide an alternat type if one is deprecated\r\n                formly: {\r\n                    inputTypeReplacementMap: {\r\n                        \"string-wysiwyg\": \"string-wysiwyg-tinymce\"\r\n                    },\r\n                    // used to inject additional / change config if necessary\r\n                    inputTypeReconfig: function (field) {\r\n                        var config = field.InputTypeConfig || {}; // note: can be null\r\n                        var applyChanges = false;\r\n                        switch (field.InputType) {\r\n                            case \"string-wysiwyg-tinymce\":\r\n                                config.Assets = \"//cdn.tinymce.com/4.6/tinymce.min.js\\n\" +\r\n                                    \"../edit/extensions/field-string-wysiwyg-tinymce/set.js\";\r\n                                applyChanges = true;\r\n                                break;\r\n                            case \"entity-default\":\r\n                                var merged = field.Metadata.merged;\r\n                                var defaults = {\r\n                                    EnableEdit: true,\r\n                                    EnableCreate: true,\r\n                                    EnableAddExisting: true,\r\n                                    EnableRemove: true,\r\n                                    EnableDelete: false\r\n                                };\r\n                                angular.forEach(defaults, function (value, key) {\r\n                                    if (merged[key] === null || merged[key] === undefined)\r\n                                        merged[key] = defaults[key];\r\n                                });\r\n                                break;\r\n                            case \"unknown\": // server default if not defined\r\n                                break;\r\n                            default:        // default if not defined in this list\r\n                                break;\r\n\r\n                        }\r\n                        if (applyChanges && !field.InputTypeConfig) field.InputTypeConfig = config;\r\n                    }\r\n                }\r\n            };\r\n        }]);\r\n\r\n// Polyfill for String.endsWith from https://developer.mozilla.org/de/docs/Web/JavaScript/Reference/Global_Objects/String/endsWith\r\nif (!String.prototype.endsWith) {\r\n    String.prototype.endsWith = function (searchString, position) {\r\n        var subjectString = this.toString();\r\n        if (typeof position !== 'number' || !isFinite(position) || Math.floor(position) !== position || position > subjectString.length) {\r\n            position = subjectString.length;\r\n        }\r\n        position -= searchString.length;\r\n        var lastIndex = subjectString.indexOf(searchString, position);\r\n        return lastIndex !== -1 && lastIndex === position;\r\n    };\r\n}"],"sourceRoot":"/source/"}