!function(){angular.module("Adam",["SxcServices","EavConfiguration","EavServices"])}(),function(){angular.module("Adam",[]).directive("adamHint",function(){return{restrict:"E",replace:!1,transclude:!1,templateUrl:"adam/adam-hint.html"}})}(),angular.module("Adam").factory("adamSvc",["$http","eavConfig","sxc","svcCreator","appRoot","appId","sanitizeSvc","$filter",function(e,t,n,i,a,o,r,l){return function(t,s,d,c,u){c=r.sanitizePath(c),allowEdit=!1;var m={url:n.resolveServiceUrl("app-content/"+t+"/"+s+"/"+d),subfolder:c,folders:[],adamRoot:a.substr(0,a.indexOf("2sxc"))};return getSubfolder=function(e,t){return t&&e&&(e.usePortalRoot||e.isLibrary)?t:""},checkAllowEdit=function(e){var t=l("filter")(e,{Name:"."},!0)[0];t?allowEdit=t.AllowEdit:allowEdit=!1},m.getAllowEdit=function(){return allowEdit},m.uploadUrl=function(e){e=getSubfolder(u,r.sanitizePath(e));var t=""===e?m.url:m.url+"?subfolder="+e;return t+=(-1===t.indexOf("?")?"?":"&")+"usePortalRoot="+u.usePortalRoot+"&appId="+o},m.addFullPath=function(e,t){e.fullPath=e.Path,e.Path&&-1===e.Path.toLowerCase().indexOf(m.adamRoot.toLowerCase())&&(e.fullPath=m.adamRoot+e.Path)},m=angular.extend(m,i.implementLiveList(function(){return e.get(m.url+"/items",{params:{subfolder:getSubfolder(u,m.subfolder),usePortalRoot:u.usePortalRoot,appId:o}}).then(function(e){return angular.forEach(e.data,m.addFullPath),checkAllowEdit(e.data),e})})),m.addFolder=function(t){return e.post(m.url+"/folder",{},{params:{subfolder:m.subfolder,newFolder:r.sanitizeName(t),usePortalRoot:u.usePortalRoot,appId:o}}).then(m.liveListReload)},m.goIntoFolder=function(e){m.folders.push(e);for(var t=e.Path.split("/"),n="",i=0;i<m.folders.length;i++)n=t[t.length-i-2]+"/"+n;return n=n.replace("//","/"),"/"===n[n.length-1]&&(n=n.substr(0,n.length-1)),n=c?c+"/"+n:n,e.Subfolder=n,m.subfolder=n,m.liveListReload(),n},m.goUp=function(){return m.folders.length>0&&m.folders.pop(),m.folders.length>0?m.subfolder=m.folders[m.folders.length-1].Subfolder:m.subfolder=c||"",m.liveListReload(),m.subfolder},m["delete"]=function(t){return e.get(m.url+"/delete",{params:{subfolder:getSubfolder(u,m.subfolder),isFolder:t.IsFolder,id:t.Id,usePortalRoot:u.usePortalRoot,appId:o}}).then(m.liveListReload)},m.rename=function(t,n){return e.get(m.url+"/rename",{params:{subfolder:getSubfolder(u,m.subfolder),isFolder:t.IsFolder,id:t.Id,usePortalRoot:u.usePortalRoot,newName:r.sanitizeName(n),appId:o}}).then(m.liveListReload)},m.reload=m.liveListReload,m}}]),function(){"use strict";function e(e,t,n,i,a,o,r,l,s){var d=this;d.debug=n,d.clipboardPasteImageFunctionalityDisabled=!0;var c=function(){d.contentTypeName=e.contentTypeName,d.entityGuid=e.entityGuid,d.fieldName=e.fieldName,d.subFolder=e.subFolder||"",d.showImagesOnly=e.showImagesOnly=e.showImagesOnly||!1,d.folderDepth="undefined"!=typeof e.folderDepth&&null!==e.folderDepth?e.folderDepth:2,d.showFolders=!!d.folderDepth,d.allowAssetsInRoot=e.allowAssetsInRoot||!0,d.metadataContentTypes=e.metadataContentTypes||"",l.enabled("f6b8d6da-4744-453b-9543-0de499aa2352").then(function(e){e&&(d.clipboardPasteImageFunctionalityDisabled=!1)})};c(),d.show=!1,d.appRoot=o,d.adamModeConfig=e.adamModeConfig,d.disabled=e.ngDisabled,d.enableSelect=e.enableSelect!==!1,d.activate=function(){e.autoLoad&&d.toggle(),e.registerSelf&&e.registerSelf(d)},d.svc=t(d.contentTypeName,d.entityGuid,d.fieldName,d.subFolder,e.adamModeConfig),d.allowEdit=function(){return d.svc.getAllowEdit()},d.refresh=d.svc.liveListReload,d.get=function(){d.items=d.svc.liveList(),d.folders=d.svc.folders,d.svc.liveListReload()},d.toggle=function(t){c();var n=!1;t&&(JSON.stringify(t)!==d.oldConfig&&(n=!0),d.oldConfig=JSON.stringify(t),d.showImagesOnly=t.showImagesOnly,e.adamModeConfig.usePortalRoot=!!t.usePortalRoot),d.show=n||!d.show,d.show||(e.adamModeConfig.usePortalRoot=!1),e.adamModeConfig.usePortalRoot&&(d.showFolders=!0,d.folderDepth=99),d.show&&d.get()},d.openUpload=function(){d.dropzone.openUpload()},d.select=function(t){!d.disabled&&d.enableSelect&&e.updateCallback(t)},d.addFolder=function(){if(!d.disabled){var e=window.prompt("Please enter a folder name");e&&d.svc.addFolder(e).then(d.refresh)["catch"](function(e){console.error(e),s.error("permission denied","can't create new folder")})}},d.del=function(e){if(!d.disabled){var t=window.confirm("Are you sure you want to delete this item?");t&&d.svc["delete"](e)["catch"](function(e){console.error(e),s.error("permission denied","can't delete")})}},d.rename=function(e){var t=window.prompt("Rename the file / folder to: ",e.Name);t&&d.svc.rename(e,t)["catch"](function(e){console.error(e),s.error("permission denied","can't rename")})},d.goIntoFolder=function(e){var t=d.svc.goIntoFolder(e);d.subFolder=t},d.goUp=function(){d.subFolder=d.svc.goUp()},d.currentFolderDepth=function(){return d.svc.folders.length},d.allowCreateFolder=function(){return d.allowEdit()&&d.svc.folders.length<d.folderDepth},d.editMetadata=function(e){var t=[d._itemDefinition(e,d.getMetadataType(e))];a.openEditItems(t,d.refresh)},d.getMetadataType=function(e){var t;return"folder"===e.Type?(t=d.metadataContentTypes.match(/^(folder)(:)([^\n]*)/im),t?t[3]:null):(t=d.metadataContentTypes.match(/^([^:\n]*)(\n|$)/im),t?t[1]:null)},d._itemDefinition=function(e,t){var n="EditFormTitle.Metadata";return 0!==e.MetadataId?{EntityId:e.MetadataId,Title:n}:{ContentTypeName:t,Metadata:{Key:("folder"===e.Type?"folder":"file")+":"+e.Id,KeyType:"string",TargetType:i.metadataOfCmsObject},Title:n,Prefill:{EntityTitle:e.Name}}},d.icon=function(e){return r.getIconClass(e.Name)},d.allowedFileTypes=[],e.fileFilter&&(d.allowedFileTypes=e.fileFilter.split(",").map(function(e){return e.replace("*","").trim()})),d.fileEndingFilter=function(e){if(0===d.allowedFileTypes.length)return!0;var t=e.Name.match(/(?:\.([^.]+))?$/)[0];return-1!=d.allowedFileTypes.indexOf(t)},d.activate()}e.$inject=["$scope","adamSvc","debugState","eavConfig","eavAdminDialogs","appRoot","fileType","featuresSvc","toastr"];var t=angular.module("Adam");t.controller("BrowserController",e)}(),function(){angular.module("Adam").directive("adamBrowser",function(){return{restrict:"E",templateUrl:"adam/browser.html",transclude:!1,require:"^dropzone",link:function(e,t,n,i){i.adam=e.vm,e.vm.dropzone=i},scope:{contentTypeName:"=",entityGuid:"=",fieldName:"=",subFolder:"=",folderDepth:"=",metadataContentTypes:"=",allowAssetsInRoot:"=",showImagesOnly:"=?",adamModeConfig:"=",fileFilter:"=?",autoLoad:"=",updateCallback:"=",registerSelf:"=",enableSelect:"=",ngDisabled:"="},controller:"BrowserController",controllerAs:"vm"}})}(),function(){angular.module("Adam").directive("dropzoneUploadPreview",function(){return{restrict:"E",templateUrl:"adam/dropzone-upload-preview.html",replace:!0,transclude:!1}})}(),function(){angular.module("Adam").directive("dropzone",["sxc","tabId","AppInstanceId","ContentBlockId","dragClass","adamSvc","$timeout","$translate","featuresSvc","toastr",function(e,t,n,i,a,o,r,l,s,d){function c(e,a,d,c){function u(e,t){s.enabled("f6b8d6da-4744-453b-9543-0de499aa2352").then(function(n){n&&m(e,t)})}function m(e,t){var n;return(n=e.querySelector("div > div[contenteditable]"))?(n.pastableContenteditable(),void n.addEventListener("handleImage",function(e,n){p(e,n,t)})):(n=e.querySelector("div > div.after-preview > div > input"))?(n.pastableTextarea(),n.addEventListener("handleImage",function(e,n){p(e,n,t)}),n=e,n.pastableNonInputable(),void n.addEventListener("handleImage",function(e,n){p(e,n,t)})):(n=e.querySelector("div.paste-image"),n?(n=e,n.pastableNonInputable(),void n.addEventListener("handleImage",function(e,n){p(e,n,t)})):void 0)}function p(e,t,n){e.detail&&!t&&(t=e.detail);var i=e.imageFileName?e.imageFileName:e.detail.imageFileName,a=g(t,i);n.processFile(a)}function g(e,t){var n=e.file;try{if(document.documentMode||/Edge/.test(navigator.userAgent)||/MSIE/.test(navigator.userAgent)||/rv:11/.test(navigator.userAgent))n=new Blob([e.file],{type:e.file.type}),n.lastModifiedDate=e.file.lastModifiedDate,n.name=t;else{var i=new FormData;i.append("file",e.file,t),n=i.get("file")}}catch(a){console.log("paste image error",a)}return n}var f=e.$parent.to.header,v=e.$parent.options.key,h=f.Guid,b=e.$parent.to.settings.merged.Paths,y=o(f.ContentTypeName,h,v,b,e.$parent.vm.adamModeConfig),w=y.url,k={url:w,urlRoot:w,maxFilesize:1e4,paramName:"uploadfile",maxThumbnailFilesize:10,headers:{ModuleId:n,TabId:t,ContentBlockId:i,RequestVerificationToken:window.$.ServicesFramework(0).getAntiForgeryValue()},dictDefaultMessage:"",addRemoveLinks:!1,previewsContainer:".field-"+v.toLowerCase()+" .dropzone-previews",clickable:".field-"+v.toLowerCase()+" .invisible-clickable"},x={addedfile:function(t){r(function(){e.$apply(function(){e.uploading=!0})})},drop:function(e){},processing:function(e){this.options.url=y.uploadUrl(c.adam.subFolder)},success:function(t,n){n.Success?(y.addFullPath(n),e.$parent.afterUpload(n)):alert("Upload failed because: "+n.Error)},error:function(e,t,n){alert(l.instant("Errors.AdamUploadError"))},queuecomplete:function(t){0===this.getUploadingFiles().length&&0===this.getQueuedFiles().length&&(e.uploading=!1,c.adam.refresh())}};r(function(){var t=new Dropzone(a[0],k);angular.forEach(x,function(e,n){t.on(n,e)}),e.processDropzone=function(){t.processQueue()},e.resetDropzone=function(){t.removeAllFiles()},c.openUpload=function(){t.hiddenFileInput.click()},c.processFile=function(e){t.processFile(e)},u(a[0],t)},0)}function u(){var e=this;e.adam={show:!1,subFolder:"",refresh:function(){}}}return{restrict:"C",link:c,controller:u}}])}(),function(){function e(){var e=document.createElement("div");return e.setAttribute("contenteditable",!0),e.setAttribute("aria-hidden",!0),e.setAttribute("tabindex",-1),e.style.width=1,e.style.height=1,e.style.position="fixed",e.style.left=-100,e.style.overflow="hidden",e.style.opacity=1e-17,e}var t=function(e,t){return(e.matches||e.matchesSelector||e.msMatchesSelector||e.mozMatchesSelector||e.webkitMatchesSelector||e.oMatchesSelector).call(e,t)},n=function(e,n){var i,a,o=e.nodeName.toLowerCase();return/^(input|select|textarea|button|object)$/.test(o)?(a=!e.disabled,a&&(i=e.closest("fieldset"),i&&(a=!i.disabled))):a="a"===o?e.href||n:n,a=a||t(e,"[contenteditable]")},i=function(){function t(e,t){function n(e,t,n){var i;/MSIE/.test(navigator.userAgent)||/rv:11/.test(navigator.userAgent)?(i=document.createEvent("CustomEvent"),i.initCustomEvent(t,!0,!0,n)):i=new CustomEvent(t,{detail:n}),e.dispatchEvent(i)}this._container=e,this._target=t,this._target.classList.add("pastable"),this._container.addEventListener("paste",function(e){return function(t){var i,a,o,r,l,s,d;if(e.originalEvent=t,e._paste_event_fired=!0,t.clipboardData&&(a=t.clipboardData,a.items))for(s=null,e.originalEvent.pastedTypes=[],d=a.items,i=r=0,l=d.length;l>r;i=++r)if(o=d[i],o.type.match(/^image\//)){t.preventDefault(),t.stopPropagation();var c="image";if(!/MSIE/.test(navigator.userAgent)&&!/rv:11/.test(navigator.userAgent)){if(c=window.prompt("Enter clipboard image file name: ",c),null===c)return t.preventDefault(),void t.stopImmediatePropagation();0===c.trim().length&&(c="image")}c.endsWith(".png")===!1&&(c+=".png");try{var u=o.getAsFile();n(e._target,"handleImage",{file:u,originalEvent:e.originalEvent,imageFileName:c})}catch(m){console.log("clipboard paste image error",m),t.stopImmediatePropagation()}break}}}(this))}return t.prototype._target=null,t.prototype._container=null,t.mountNonInputable=function(i){var a=e();i.appendChild(a);var o=new t(a,i);return i.addEventListener("click",function(e){return function(e){return n(e.target,!1)?void 0:void o._container.focus()}}(this)),o._container.addEventListener("focus",function(e){return function(){i.classList.add("pastable-focus")}}(this)),o._container.addEventListener("blur",function(e){return function(){i.classList.remove("pastable-focus")}}(this)),o},t.mountTextarea=function(n){var i,a;if((DataTransfer?DataTransfer.prototype:void 0)&&((i=Object.getOwnPropertyDescriptor)&&(a=i.call(Object,DataTransfer.prototype,"items"))?a.get:void 0))return void this.mountContenteditable(n);var o=new t(e().insertBefore(n),n),r=!1;return n.addEventListener("keyup",function(e){17!==e.keyCode&&224!==e.keyCode||(r=!1)}),n.addEventListener("keydown",function(e){17!==e.keyCode&&224!==e.keyCode||(r=!0),e.ctrlKey&&e.metaKey&&(r=e.ctrlKey||e.metaKey),r&&86===e.keyCode&&(o._textarea_focus_stolen=!0,o._container.focus(),o._paste_event_fired=!1,setTimeout(function(e){return function(){return o._paste_event_fired?void 0:(n.focus(),void(o._textarea_focus_stolen=!1))}}(this),1))}),n.addEventListener("paste",function(e){return function(){}}(this)),n.addEventListener("focus",function(e){return function(){return o._textarea_focus_stolen?void 0:void n.classList.add("pastable-focus")}}(this)),n.addEventListener("blur",function(e){return function(){return o._textarea_focus_stolen?void 0:void n.classList.remove("pastable-focus")}}(this)),o},t.mountContenteditable=function(e){var n=new t(e,e);return e.addEventListener("focus",function(t){return function(){e.classList.add("pastable-focus")}}(this)),e.addEventListener("blur",function(t){return function(){e.classList.remove("pastable-focus")}}(this)),n},t}();Element.prototype.paste=function(e){var t=i.mountNonInputable(e);return t._container},Element.prototype.pastableNonInputable=function(){var e=this;e._pastable||t(e,"textarea, input, [contenteditable]")||(i.mountNonInputable(e),e._pastable=!0)},Element.prototype.pastableTextarea=function(){var e=this;e._pastable||t(e,"textarea, input")===!1||(i.mountTextarea(e),e._pastable=!0)},Element.prototype.pastableContenteditable=function(){var e=this;e._pastable||t(e,"[contenteditable]")===!1||(i.mountContenteditable(e),e._pastable=!0)}}.call(this),angular.module("Adam").factory("sanitizeSvc",function(){removeFromStart=function(e,t){if(!e)return e;for(;e.substring(0,1)===t;)e=e.substring(1);return e},removeFromEnd=function(e,t){if(!e)return e;for(;e.substring(e.length-1,e.length)===t;)e=e.substring(0,e.length-1);return e},cleanBadPath=function(e){if(!e)return e;var t="_",n=/[\?<>\\:\*\|":]/g,i=/[\x00-\x1f\x80-\x9f]/g,a=/^\.+$/,o=/^(con|prn|aux|nul|com[0-9]|lpt[0-9])(\..*)?$/i,r=/[\. ]+$/;return e.replace(n,t).replace(i,t).replace(a,t).replace(o,t).replace(r,t)};var e={};return e.sanitizePath=function(e){return e?(e=removeFromStart(e,"/"),e=removeFromEnd(e,"/"),e=removeFromStart(e,"\\"),e=removeFromEnd(e,"\\"),e=cleanBadPath(e)):e},e.sanitizeName=function(t){if(!t)return t;var n="_",i=/\//g;return e.sanitizePath(t).replace(i,n)},e}),function(){"use strict";angular.module("sxcFieldTemplates",["formly","formlyBootstrap","ui.bootstrap","ui.tree","2sxc4ng","SxcEditTemplates","EavConfiguration","SxcServices","eavFieldTemplates","Adam","oc.lazyLoad"])}(),angular.module("eavFieldTemplates").config(["formlyConfigProvider","defaultFieldWrappers",function(e,t){e.setType({name:"custom-json-editor",template:'<div>Warning: this is still work-in-progres, there is no json validation, use at own risk.<textarea rows="{{vm.settings.Rows}}" class="form-control material" ng-model="value.Value" style="white-space: pre"></textarea></div>',wrapper:t,controller:"FieldTemplate-CustomJson as vm"})}]).controller("FieldTemplate-CustomJson",["$scope",function(e){var t=this,n=t.settings=e.options.templateOptions.settings.merged;n.Rows=n.Rows||10}]),angular.module("sxcFieldTemplates").factory("dnnBridgeSvc",["$uibModal","$http","appId","promiseToastr",function(e,t,n,i){var a={};return a.open=function(t,n,i){var a="pagepicker",o={params:n,valueChanged:i,dialogType:a};return o.valueChanged=function(e){o.modalInstance.close(),i(e)},o.params.CurrentValue=t,console.log("before open page picker"),console.log(e),o.modalInstance=e.open({templateUrl:"fields/dnn-bridge/hyperlink-default-pagepicker.html",resolve:{bridge:function(){return o}},controller:["$scope","bridge",function(e,t){e.bridge=t}],windowClass:"sxc-dialog-filemanager"}),console.log("after open page picker"),o.modalInstance},a.getUrlOfId=function(e,i,a,o){var r=e.toLowerCase();return-1!==r.indexOf("file:")||-1!==r.indexOf("page:")?t.get("dnn/Hyperlink/ResolveHyperlink?hyperlink="+encodeURIComponent(e)+(a?"&guid="+a:"")+(i?"&contentType="+i:"")+(o?"&field="+o:"")+"&appId="+n):null},a}]),function(){"use strict";angular.module("sxcFieldTemplates").directive("webFormsBridge",["sxc","portalRoot",function(e,t){var n=t+"Default.aspx?tabid="+$2sxc.urlParams.require("tid")+"&ctl=webformsbridge&mid="+e.id+"&dnnprintmode=true&SkinSrc=%5bG%5dSkins%2f_default%2fNo+Skin&ContainerSrc=%5bG%5dContainers%2f_default%2fNo+Container";return{restrict:"A",scope:{type:"@bridgeType",bridge:"=webFormsBridge",bridgeSyncHeight:"@bridgeSyncHeight"},link:function(e,t,i){var a="";e.bridge.params&&(a=Object.keys(e.bridge.params).map(function(t){return null!==e.bridge.params[t]&&""!==e.bridge.params[t]?[t,e.bridge.params[t]].map(encodeURIComponent).join("="):void 0}).join("&")),t[0].src=n+"&type="+e.type+(e.bridge.params?"&"+a:""),t.on("load",function(){var n=t[0].contentWindow||t[0];if(!n.connectBridge)return alert("can't connect to the dialog - you are probably running a new DNN (v.8+) and didn't activate the old Telerik components. Please install these in the host > extensions to get this to work");if(n.connectBridge(e.bridge),"true"===e.bridgeSyncHeight){var i=function(){t.css("height",""),t.css("height",n.document.body.scrollHeight+"px")};i(),n.$(n.document).ready(function(){i()}),n.$(n.document).on("triggerbridgeresize",function(){window.setTimeout(i,0)})}})}}}])}(),function(){"use strict";angular.module("sxcFieldTemplates").config(["formlyConfigProvider","defaultFieldWrappers",function(e,t){var n=t.slice(0);n.splice(t.indexOf("eavLocalization"),1),e.setType({name:"entity-content-blocks",templateUrl:"fields/entity/entity-default.html",wrapper:n,controller:"FieldTemplate-EntityContentBlockCtrl"})}]).controller("FieldTemplate-EntityContentBlockCtrl",["$controller","$scope","$http","$filter","$translate","$uibModal","appId","eavAdminDialogs","eavDefaultValueService",function(e,t,n,i,a,o,r,l,s){t.to.settings.merged.EnableRemove=!0,t.to.settings.merged.AllowMultiValue=!0,t.to.settings.merged.EnableAddExisting=!1,t.to.settings.merged.EnableCreate=!1,t.to.settings.merged.EnableEdit=!1,t.to.settings.merged.EntityType="ContentGroupReference",t.to.enableCollapseField=!0,t.to.collapseField=!0,e("FieldTemplate-EntityCtrl",{$scope:t});t.model[t.options.key].Values[0].Value}])}(),function(){"use strict";angular.module("sxcFieldTemplates").config(["formlyConfigProvider","fieldWrappersWithPreview",function(e,t){e.setType({name:"hyperlink-default",templateUrl:"fields/hyperlink/hyperlink-default.html",wrapper:t,controller:"FieldTemplate-HyperlinkCtrl as vm"})}]).controller("FieldTemplate-HyperlinkCtrl",["$uibModal","$scope","$http","appId","sxc","adamSvc","debugState","dnnBridgeSvc","fileType",function(e,t,n,i,a,o,r,l,s){function d(){var e=t.to.settings.merged;void 0!==e.ShowAdam&&null!==e.ShowAdam||(e.ShowAdam=!0),void 0!==e.Buttons&&null!==e.Buttons||(e.Buttons="adam,more")}var c=this;c.debug=r,c.testLink="",c.isImage=function(){return s.isImage(c.testLink)},c.thumbnailUrl=function(e,t){var n=c.testLink;1===e&&(n+="?w=64&h=64&mode=crop"),2===e&&(n+="?w=500&h=400&mode=max");var i=t?'"':"";return i+n+i},c.icon=function(){return s.getIconClass(c.testLink)},c.tooltipUrl=function(e){return e.replace(/\//g,"/&#8203;")},c.adamModeConfig={usePortalRoot:!1},console.log("debug from hyperlink",t),d(),t.$watch("value.Value",function(e,n){if(e){var i=l.getUrlOfId(e,t.to.header.ContentTypeName,t.to.header.Guid,t.options.key);i?i.then(function(e){e.data&&(c.testLink=e.data)}):c.testLink=e}}),c.processResultOfPagePicker=function(e){t.$apply(function(){e&&(t.value.Value="page:"+e.id)})},c.openPageDialog=function(){l.open(t.value.Value,{Paths:t.to.settings.merged?t.to.settings.merged.Paths:"",FileFilter:t.to.settings.merged?t.to.settings.merged.FileFilter:""},c.processResultOfPagePicker)},c.registerAdam=function(e){c.adam=e},c.setValue=function(e){t.to.settings.merged.ServerResourceMapping&&"url"===t.to.settings.merged.ServerResourceMapping?t.value.Value=e.fullPath||e.Path:t.value.Value="file:"+e.Id},t.afterUpload=c.setValue,c.toggleAdam=function(e,t){c.adam.toggle({showImagesOnly:t,usePortalRoot:e})}}])}(),function(){"use strict";angular.module("sxcFieldTemplates").config(["formlyConfigProvider","defaultFieldWrappersNoFloat",function(e,t){e.setType({name:"hyperlink-library",templateUrl:"fields/hyperlink/hyperlink-library.html",wrapper:t,controller:"FieldTemplate-Library as vm"})}]).controller("FieldTemplate-Library",["$uibModal","$scope","$http","sxc","adamSvc","debugState",function(e,t,n,i,a,o){var r=this;r.debug=o,r.modalInstance=null,r.testLink="",r.adamModeConfig={usePortalRoot:!1,isLibrary:!0},r.registerAdam=function(e){r.adam=e},t.afterUpload=function(e){},r.toggleAdam=function(){r.adam.toggle()}}])}(),function(){var e="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split("");Math.uuid=function(t,n){var i,a=e,o=[];if(n=n||a.length,t)for(i=0;t>i;i++)o[i]=a[0|Math.random()*n];else{var r;for(o[8]=o[13]=o[18]=o[23]="-",o[14]="4",i=0;36>i;i++)o[i]||(r=0|16*Math.random(),o[i]=a[19==i?3&r|8:r])}return o.join("")},Math.uuidFast=function(){for(var t,n=e,i=new Array(36),a=0,o=0;36>o;o++)8==o||13==o||18==o||23==o?i[o]="-":14==o?i[o]="4":(2>=a&&(a=33554432+16777216*Math.random()|0),t=15&a,a>>=4,i[o]=n[19==o?3&t|8:t]);return i.join("")},Math.uuidCompact=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0,n="x"==e?t:3&t|8;return n.toString(16)})}}(),angular.module("sxcFieldTemplates").config(["formlyConfigProvider","fieldWrappersWithPreview",function(e,t){e.setType({name:"string-font-icon-picker",templateUrl:"fields/string/string-font-icon-picker.html",wrapper:t,controller:"FieldTemplate-String-Font-Icon-Picker as vm"})}]).controller("FieldTemplate-String-Font-Icon-Picker",["$scope","debugState","$ocLazyLoad","appRoot",function(e,t,n,i){function a(e){var t=e.length,n=[],i={};if(!e)return n;for(var a=0;a<document.styleSheets.length;a++){var o=document.styleSheets[a].rules||document.styleSheets[a].cssRules;if(o)for(var r=0;r<o.length;r++)if(o[r].selectorText&&o[r].selectorText.substring(0,t)===e){var l=o[r].selectorText,s=l.substring(0,l.indexOf(":")).replace(".","");i[s]||(n.push({rule:o[r],"class":s}),i[s]=!0)}}return n}function o(e){e=e||"";var t=e.replace("[App:Path]",i).replace(/([\w])\/\/([\w])/g,"$1/$2"),a=t?t.split("\n"):[];return n.load(a)}var r=angular.extend(this,{iconFilter:"",prefix:"",previewPrefix:"",icons:[],useTestValues:!1,selectorIsOpen:!1});r.setIcon=function(t){e.value.Value=t,r.selectorIsOpen=!1,e.form.$setDirty()},r.activate=function(){var n=e.to.settings["string-font-icon-picker"];r.files=n?n.Files||"":"",r.prefix=n?n.CssPrefix||"":"",r.previewPrefix=n?n.PreviewCss||"":"",r.useTestValues&&angular.extend(r,{iconFilter:"",prefix:".glyphicon-",previewPrefix:"glyphicon"}),o(r.files).then(function(){r.icons=a(r.prefix)}),r.debug=t,t.on&&console.log(e.options.templateOptions)},r.activate()}]),function(){var e={init:function(t){e.context=t;var n=t.$injector,i=n.get("appDialogConfigSvc");i.getDialogSettings().then(function(e){var n=e.data;n.IsContent&&(t.formVm.formFields[t.field.SortOrder].templateOptions.disabled=!0,t.formVm.formFields[20].templateOptions.disabled=!0)})}};window["2sxc-template-picker-custom-script-for-name-field"]=e}(),angular.module("sxcFieldTemplates").config(["formlyConfigProvider","defaultFieldWrappers",function(e,t){e.setType({name:"string-template-picker",templateUrl:"fields/string/string-template-picker.html",wrapper:t,controller:"FieldTemplate-String-TemplatePicker"})}]).controller("FieldTemplate-String-TemplatePicker",["$scope","appAssetsSvc","appId","fieldMask",function(e,t,n,i){function a(){e.to.settings.merged||(e.to.settings.merged={}),e.setFileConfig("Token"),e.options&&e.options.value()&&angular.forEach(e.options.value().Values,function(e,t){e.Value=e.Value.replace("\\","/")}),e.typeWatcher=i("[Type]",e,e.setFileConfig),e.locWatcher=i("[Location]",e,e.onLocationChange),e.templates=[],e.svcApp=t(n,!1),e.svcGlobal=t(n,!0),e.onLocationChange()}e.readyToUse=function(){return e.typeWatcher.value&&e.locWatcher.value},e.setFileConfig=function(t){var n={Token:{ext:".html",prefix:"",suggestion:"yourfile.html",body:'<p>You successfully created your own template. Start editing it by hovering the "Manage" button and opening the "Edit Template" dialog.</p>'},"C# Razor":{ext:".cshtml",prefix:"_",suggestion:"_yourfile.cshtml",body:'<p>You successfully created your own template. Start editing it by hovering the "Manage" button and opening the "Edit Template" dialog.</p>'}};e.file=n[t]},e.onLocationChange=function(t){e.svcCurrent="Host File System"===t?e.svcGlobal:e.svcApp,e.templates=e.svcCurrent.liveList()},e.add=function(){var t=prompt("enter new file name",e.file.suggestion);if(t){var n="";t=t.replace("\\","/");var i=t.lastIndexOf("/");i>-1&&(n=t.substring(0,i+1),t=t.substring(i+1)),t.endsWith(e.file.ext)||(t+=e.file.ext),""!==e.file.prefix&&t[0]!==e.file.prefix&&(t=e.file.prefix+t);var a=n+t;console.log(a),e.svcCurrent.create(a,e.file.body).then(function(){e.value.Value=a})}},a()}]).filter("isValidFile",function(){return function(e,t){var n=[];return angular.forEach(e,function(e){e.slice(e.length-t.length)===t&&n.push(e)}),n}}),function(){"use strict";angular.module("sxcFieldTemplates").config(["formlyConfigProvider",function(e){e.setType({name:"string-wysiwyg-adv",templateUrl:"fields/string/string-wysiwyg-adv.html",wrapper:["eavLabel","bootstrapHasError","eavLocalization","collapsible"]})}])}(),function(){"use strict";angular.module("sxcFieldTemplates").config(["formlyConfigProvider",function(e){e.setType({name:"string-wysiwyg-dnn",templateUrl:"fields/string/string-wysiwyg-dnn.html",wrapper:["eavLabel","bootstrapHasError","eavLocalization","collapsible"],controller:"FieldTemplate-WysiwygCtrl as vm"})}]).controller("FieldTemplate-WysiwygCtrl",["$scope",function(e){var t=this;t.bridge={initialValue:"",initialReadOnly:!1,onChanged:function(t){e.$apply(function(){e.value.Value=t})},setValue:function(e){t.bridge.initialValue=e},setReadOnly:function(e){t.bridge.initialReadOnly=e}},e.$watch("value.Value",function(e,n){e!==n&&t.bridge.setValue(e)}),e.$watch("to.disabled",function(e,n){e!==n&&t.bridge.setReadOnly(e)})}])}(),function(){"use strict";function e(e,t,n,i,a,o,r,l){function s(t){u.editor=t,e.tinymceOptions.language&&n.addTranslations(t,e.tinymceOptions.language),i.addButtons(u),o.addButtons(u),c(t)}function d(e){e.$watch("to.disabled",function(t,n){t!==n&&null!==u.editor&&(e.tinymceOptions.readonly=t,e.$broadcast("$tinymce:refresh"))})}function c(t){if(e.fields.length!==e.index+1){var n=e.fields[e.index+1];"entity-content-blocks"===n.type&&(t.enableContentBlocks=!0)}}var u=this;u.enableContentBlocks=!0;var m={enableContentBlocks:!1};u.adamModeConfig={usePortalRoot:!1},u.activate=function(){c(m),e.tinymceOptions=angular.extend(a.getDefaultOptions(m),{setup:s}),l.enabled("1b13e0e6-a346-4454-a1e6-2fb18c047d20").then(function(t){t&&(e.tinymceOptions=angular.extend(e.tinymceOptions,a.getPasteWysiwygAbilityOption))})["catch"](function(){}).then(function(){o.attachAdam(u,e),r.attach(u,e);var n=t.currentLanguage.substr(0,2);a.languages.indexOf(n)>=0&&angular.extend(e.tinymceOptions,{language:n,language_url:"../i18n/lib/tinymce/"+n+".js"}),d(e)})},u.activate()}e.$inject=["$scope","languages","tinyMceHelpers","tinyMceToolbars","tinyMceConfig","tinyMceAdam","tinyMceDnnBridge","featuresSvc"],angular.module("sxcFieldTemplates").config(["formlyConfigProvider","defaultFieldWrappers",function(e,t){e.setType({name:"string-wysiwyg-tinymce",templateUrl:"fields/string/string-wysiwyg-tinymce.html",wrapper:t,controller:"FieldWysiwygTinyMce as vm"})}]).controller("FieldWysiwygTinyMce",e)}(),angular.module("sxcFieldTemplates").factory("tinyMceAdam",function(){function e(e,t){e.registerAdam=function(t){e.adam=t},e.setValue=function(t,n){void 0===n&&(n=e.adamModeImage);var i=t.Name.substr(0,t.Name.lastIndexOf(".")),a=n?'<img src="'+t.fullPath+'" + alt="'+i+'">':'<a href="'+t.fullPath+'">'+i+"</a>";e.editor.insertContent(a)},t.afterUpload=function(t){e.setValue(t,"image"===t.Type)},e.toggleAdam=function(n,i){e.adamModeImage=n,e.adam.toggle({showImagesOnly:n,usePortalRoot:i}),t.$apply()}}function t(e){var t=e.editor;t.addButton("linkfiles",{type:"splitbutton",icon:" eav-icon-file-pdf",title:"Link.AdamFile.Tooltip",onclick:function(){e.toggleAdam(!1)},menu:[{text:"Link.AdamFile",tooltip:"Link.AdamFile.Tooltip",icon:" eav-icon-file-pdf",onclick:function(){e.toggleAdam(!1,!1)}},{text:"Link.DnnFile",tooltip:"Link.DnnFile.Tooltip",icon:" eav-icon-file",onclick:function(){e.toggleAdam(!1,!0)}}]}),t.addButton("images",{type:"splitbutton",text:"",icon:"image",onclick:function(){e.toggleAdam(!0)},menu:[{text:"Image.AdamImage",tooltip:"Image.AdamImage.Tooltip",icon:"image",onclick:function(){e.toggleAdam(!0)}},{text:"Image.DnnImage",tooltip:"Image.DnnImage.Tooltip",icon:"image",onclick:function(){e.toggleAdam(!0,!0)}},{text:"Insert/edit image",icon:"image",onclick:function(){t.execCommand("mceImage")}},{icon:"alignleft",tooltip:"Align left",onclick:function(){t.execCommand("JustifyLeft")}},{icon:"aligncenter",tooltip:"Align center",onclick:function(){t.execCommand("JustifyCenter")}},{icon:"alignright",tooltip:"Align right",onclick:function(){t.execCommand("JustifyRight")}}]})}return{attachAdam:e,addButtons:t}}),angular.module("sxcFieldTemplates").factory("tinyMceConfig",["beta",function(e){function t(e){return modes={standard:{menubar:!1,toolbar:" undo redo removeformat | bold formatgroup | h1 h2 hgroup | listgroup | linkfiles linkgroup | "+(e.enableContentBlocks?" addcontentblock ":"")+"modeadvanced ",contextmenu:"charmap hr"+(e.enableContentBlocks?" addcontentblock":"")},advanced:{menubar:!0,toolbar:" undo redo removeformat | styleselect | bold italic | h1 h2 hgroup | bullist numlist outdent indent | images linkfiles linkgrouppro | code modestandard ",contextmenu:"link image | charmap hr adamimage"}},modes}var n={cdnRoot:"//cdn.tinymce.com/4",imgSizes:[100,75,70,66,60,50,40,33,30,25,10],defaultLanguage:"en",languages:"de,es,fr,it,uk,nl".split(","),plugins:["code","contextmenu","autolink","tabfocus","image","link","paste","anchor","charmap","hr","media","nonbreaking","searchreplace","table","lists","textpattern"],validateAlso:"@[class],i,hr[sxc|guid]"};return n.getDefaultOptions=function(e){var i=t(e);return{baseURL:n.cdnRoot,inline:!0,automatic_uploads:!1,modes:i,menubar:i.standard.menubar,toolbar:i.standard.toolbar,plugins:n.plugins.join(" "),contextmenu:i.standard.contextmenu,autosave_ask_before_unload:!1,extended_valid_elements:n.validateAlso,custom_elements:"hr",relative_urls:!1,default_link_target:"_blank",object_resizing:!1,skin:"lightgray",theme:"modern",language:n.defaultLanguage,debounce:!1,paste_as_text:!0}},n.getPasteWysiwygAbilityOption={paste_as_text:!1,paste_enable_default_filters:!0,paste_create_paragraphs:!0,paste_create_linebreaks:!1,paste_force_cleanup_wordpaste:!0,paste_use_dialog:!0,paste_auto_cleanup_on_paste:!0,paste_convert_middot_lists:!0,paste_convert_headers_to_strong:!1,paste_remove_spans:!0,paste_remove_styles:!0,paste_postprocess:function(e,t){try{for(var n=t.node.getElementsByTagName("a"),i=0;i<n.length;i++)n[i].hasAttribute("target")===!1&&n[i].setAttribute("target","_blank")}catch(a){console.error("error in paste postprocess - will only log but not throw",a)}}},n}]),angular.module("sxcFieldTemplates").factory("tinyMceDnnBridge",["dnnBridgeSvc",function(e){function t(t,n){t.processResultOfDnnBridge=function(i){n.$apply(function(){if(i){var n=t.editor.selection.getContent(),a=e.getUrlOfId("page:"+(i.id||i.FileId));return a.then(function(e){t.editor.insertContent('<a href="'+e.data+'">'+(n||i.name)+"</a>")})}})},t.openDnnDialog=function(n){e.open("",{Paths:null,FileFilter:null},t.processResultOfDnnBridge);
}}return{attach:t}}]),angular.module("sxcFieldTemplates").factory("tinyMceHelpers",["$translate","tinyMceConfig",function(e,t){function n(n,i){var a=t.defaultLanguage,o=[],r={},l="Extension.TinyMce.",s=l.length,d=e.getTranslationTable(a);for(var c in d)0===c.indexOf(l)&&o.push(c);for(var u=e.instant(o),m=0;m<o.length;m++)r[o[m].substring(s)]=u[o[m]];tinymce.addI18n(i,r)}var i={addTranslations:n};return i}]),angular.module("sxcFieldTemplates").factory("tinyMceToolbars",["tinyMceConfig",function(e){function t(t){function n(e){return function(){function t(){l.formatter.formatChanged(e,function(e){n.active(e)})}var n=this;l.formatter?t():l.on("init",t())}}function i(t,n){for(var i={},a=0;a<e.imgSizes.length;a++)i["imgwidth"+e.imgSizes[a]]=[{selector:"img",collapsed:!1,styles:{width:e.imgSizes[a]+"%"}}];t.formatter.register(i)}function a(e){l.settings.toolbar=l.settings.modes[e].toolbar,l.settings.menubar=l.settings.modes[e].menubar,l.theme.panel.remove(),l.theme.renderUI(l),l.execCommand("mceFocus"),document.getElementById("dummyfocus").focus(),setTimeout(function(){l.focus()},100)}function o(e){return function(){l.formatter.apply("imgwidth"+e)}}function r(e){return function(t){var n=l.dom.is(t,e)&&l.getBody().contains(t);return n}}var l=t.editor;l.on("init",function(){i(l,t)});var s={type:"splitbutton",icon:"link",title:"Link",onPostRender:n("link"),onclick:function(){l.execCommand("mceLink")},menu:[{icon:"link",text:"Link",onclick:function(){l.execCommand("mceLink")}},{text:"Link.Page",tooltip:"Link.Page.Tooltip",icon:" eav-icon-sitemap",onclick:function(){t.openDnnDialog("pagepicker")}}]},d=angular.copy(s);d.menu.push({icon:" eav-icon-anchor",text:"Anchor",tooltip:"Link.Anchor.Tooltip",onclick:function(){l.execCommand("mceAnchor")}}),l.addButton("linkgroup",s),l.addButton("linkgrouppro",d),l.addButton("images",{type:"splitbutton",text:"",icon:"image",onclick:function(){t.toggleAdam(!0)},menu:[{text:"Image.AdamImage",tooltip:"Image.AdamImage.Tooltip",icon:"image",onclick:function(){t.toggleAdam(!0)}},{text:"Image.DnnImage",tooltip:"Image.DnnImage.Tooltip",icon:"image",onclick:function(){t.toggleAdam(!0,!0)}},{text:"Insert/edit image",icon:"image",onclick:function(){l.execCommand("mceImage")}},{icon:"alignleft",tooltip:"Align left",onclick:function(){l.execCommand("JustifyLeft")}},{icon:"aligncenter",tooltip:"Align center",onclick:function(){l.execCommand("JustifyCenter")}},{icon:"alignright",tooltip:"Align right",onclick:function(){l.execCommand("JustifyRight")}}]}),l.addButton("formatgroup",{type:"splitbutton",tooltip:"Italic",text:"",icon:"italic",cmd:"italic",onPostRender:n("italic"),menu:[{icon:"strikethrough",text:"Strikethrough",onclick:function(){l.execCommand("strikethrough")}},{icon:"superscript",text:"Superscript",onclick:function(){l.execCommand("superscript")}},{icon:"subscript",text:"Subscript",onclick:function(){l.execCommand("subscript")}}]}),l.addButton("listgroup",{type:"splitbutton",tooltip:"Numbered list",text:"",icon:"numlist",cmd:"InsertOrderedList",onPostRender:n("numlist"),menu:[{icon:"bullist",text:"Bullet list",onPostRender:n("bullist"),onclick:function(){l.execCommand("InsertUnorderedList")}},{icon:"outdent",text:"Outdent",onclick:function(){l.execCommand("Outdent")}},{icon:"indent",text:"Indent",onclick:function(){l.execCommand("Indent")}}]}),l.addButton("modestandard",{icon:" eav-icon-cancel",tooltip:"SwitchMode.Standard",onclick:function(){a("standard")}}),l.addButton("modeadvanced",{icon:" eav-icon-pro",tooltip:"SwitchMode.Pro",onclick:function(){a("advanced")}}),[["pre","Preformatted","Preformatted"],["p","Paragraph","Paragraph"],["code","Code","Code"],["h1","Heading 1","H1"],["h2","Heading 2","H2"],["h3","Heading 3","H3"],["h4","Heading 4","Heading 4"],["h5","Heading 5","Heading 5"],["h6","Heading 6","Heading 6"]].forEach(function(e){l.addButton(e[0],{tooltip:e[1],text:e[2],onclick:function(){l.execCommand("mceToggleFormat",!1,e[0])},onPostRender:function(){var t=this,n=function(){l.formatter.formatChanged(e[0],function(e){t.active(e)})};l.formatter?n():l.on("init",n)}})}),l.addButton("hgroup",angular.extend({},l.buttons.h3,{type:"splitbutton",menu:[l.buttons.h4,l.buttons.h5,l.buttons.h6,l.buttons.p]})),l.addButton("addcontentblock",{icon:" eav-icon-content-block",classes:"btn-addcontentblock",tooltip:"ContentBlock.Add",onclick:function(){var e=Math.uuid().toLowerCase();t.editor.insertContent('<hr sxc="sxc-content-block" guid="'+e+'" />')}}),l.addButton("alignimgleft",{icon:" eav-icon-align-left",tooltip:"Align left",cmd:"JustifyLeft",onPostRender:n("alignleft")}),l.addButton("alignimgcenter",{icon:" eav-icon-align-center",tooltip:"Align center",cmd:"justifycenter",onPostRender:n("aligncenter")}),l.addButton("alignimgright",{icon:" eav-icon-align-right",tooltip:"Align right",cmd:"justifyright",onPostRender:n("alignright")});for(var c=[],u=0;u<e.imgSizes.length;u++){var m={icon:" eav-icon-resize-horizontal",tooltip:e.imgSizes[u]+"%",text:e.imgSizes[u]+"%",onclick:o(e.imgSizes[u]),onPostRender:n("imgwidth"+e.imgSizes[u])};l.addButton("imgresize"+e.imgSizes[u],m),c.push(m)}l.addButton("resizeimg100",{icon:" eav-icon-resize-horizontal",tooltip:"100%",onclick:function(){l.formatter.apply("imgwidth100")},onPostRender:n("imgwidth100")}),l.addButton("imgresponsive",angular.extend({},l.buttons.resizeimg100,{type:"splitbutton",menu:c})),l.addContextToolbar(r("a"),"link unlink"),l.addContextToolbar(r("img"),"image | alignimgleft alignimgcenter alignimgright imgresponsive | removeformat | remove"),l.addContextToolbar(r("li,ol,ul"),"bullist numlist | outdent indent")}var n={addButtons:t};return n}]),angular.module("SxcEditTemplates",[]).run(["$templateCache",function(e){e.put("adam/adam-hint.html",'<div class="small pull-right">\r\n    <span style="opacity: 0.5">drop files here -</span>\r\n    <a href="http://2sxc.org/help?tag=adam" target="_blank" uib-tooltip="ADAM is the Automatic Digital Assets Manager - click to discover more">\r\n        <i class="eav-icon-apple"></i>\r\n        Adam\r\n    </a>\r\n    <span style="opacity: 0.5"> is sponsored with\r\n    <i class="eav-icon-heart"></i> by\r\n    <a tabindex="-1" href="http://2sic.com/" target="_blank">\r\n        2sic.com\r\n    </a>\r\n    </span>\r\n</div>\r\n'),e.put("adam/browser.html",'<div ng-if="vm.show" ng-class="\'adam-scope-\' + (vm.adamModeConfig.usePortalRoot ? \'site\' : field)">\r\n    <!-- info for dropping stuff here -->\r\n    <div ng-show="vm.allowEdit()" class="dz-preview dropzone-adam" ng-disabled="vm.disabled" uib-tooltip="{{\'Edit.Fields.Hyperlink.Default.AdamUploadLabel\' | translate }}" ng-click="vm.openUpload()">\r\n        <div class="dz-image adam-browse-background-icon adam-browse-background" xstyle="background-color: whitesmoke">\r\n            <i class="eav-icon-up-circled2"></i>\r\n            <div class="adam-short-label">upload to<i ng-class="vm.adamModeConfig.usePortalRoot ? \'eav-icon-globe\' : \'eav-icon-apple\'" style="font-size: larger"></i></div>\r\n        </div>\r\n    </div>\r\n\r\n    <!-- info for paste image from clipboard here -->\r\n    <div ng-show="!vm.clipboardPasteImageFunctionalityDisabled && vm.allowEdit()" class="dz-preview dropzone-adam paste-image" ng-disabled="vm.clipboardPasteImageFunctionalityDisabled" uib-tooltip="click here and press [Ctrl]+[V] to paste image from clipboard">\r\n        <div class="dz-image adam-browse-background-icon adam-browse-background" xstyle="background-color: whitesmoke">\r\n            <i class="eav-icon-file-image"></i>\r\n            <div class="adam-short-label">paste image</div>\r\n        </div>\r\n    </div>\r\n\r\n    <!-- add folder - not always shown -->\r\n    <div ng-show="vm.allowCreateFolder() || vm.debug.on" class="dz-preview" ng-disabled="vm.disabled" ng-click="vm.addFolder()">\r\n        <div class="dz-image adam-browse-background-icon adam-browse-background">\r\n            <div class="">\r\n                <i class="eav-icon-folder-empty"></i>\r\n                <div class="adam-short-label">new folder</div>\r\n            </div>\r\n        </div>\r\n        <div class="adam-background adam-browse-background-icon">\r\n            <i class="eav-icon-plus" style="font-size: 2em; top: 13px; position: relative;"></i>\r\n        </div>\r\n        <div class="dz-details" style="opacity: 1">\r\n\r\n        </div>\r\n    </div>\r\n\r\n    <!-- browse up a folder - not always shown -->\r\n    <div ng-show="vm.showFolders || vm.debug.on" class="dz-preview" ng-disabled="vm.disabled" ng-if="vm.folders.length > 0" ng-click="vm.goUp()">\r\n        <div class="dz-image  adam-browse-background-icon adam-browse-background">\r\n            <i class="eav-icon-folder-empty"></i>\r\n            <div class="adam-short-label">up</div>\r\n        </div>\r\n        <div class="adam-background adam-browse-background-icon">\r\n            <i class="eav-icon-level-up" style="font-size: 2em; top: 13px; position: relative;"></i>\r\n        </div>\r\n    </div>\r\n\r\n    <!-- folder list - not always shown -->\r\n    <div ng-show="vm.showFolders || vm.debug.on" class="dz-preview"\r\n         ng-repeat="item in vm.items | filter: { IsFolder: true } | filter: { Name: \'!.\' } | filter: { Name: \'!2sxc\' } | filter: { Name: \'!adam\' } | orderBy:\'Name\'"\r\n         ng-click="vm.goIntoFolder(item)">\r\n        <div class="dz-image adam-blur adam-browse-background-icon adam-browse-background">\r\n            <i class="eav-icon-folder-empty"></i>\r\n            <div class="short-label">{{ item.Name }}</div>\r\n        </div>\r\n\r\n        <div class="dz-details file-type-{{item.Type}}">\r\n            <span ng-show="vm.allowEdit()" ng-click="vm.del(item)" stop-event="click" class="adam-delete-button"><i class="eav-icon-cancel"></i></span>\r\n            <span ng-show="vm.allowEdit()" ng-click="vm.rename(item)" stop-event="click" class="adam-rename-button"><i class="eav-icon-pencil"></i></span>\r\n            <div class="adam-full-name-area">\r\n                <div class="adam-full-name">{{ item.Name }}</div>\r\n            </div>\r\n        </div>\r\n\r\n        <span class="adam-tag" ng-class="{\'metadata-exists\': item.MetadataId > 0}"\r\n              ng-click="vm.editMetadata(item)"\r\n              ng-if="vm.getMetadataType(item)"\r\n              stop-event="click"\r\n              uib-tooltip="{{vm.getMetadataType(item)}}:{{item.MetadataId}}">\r\n            <i class="eav-icon-tag" style="font-size: larger"></i>\r\n        </span>\r\n    </div>\r\n\r\n\r\n    <!-- files -->\r\n    <div class="dz-preview" ng-class="{ \'dz-success\': value.Value.toLowerCase() == \'file:\' + item.Id }"\r\n        ng-repeat="item in (vm.items | filter: vm.fileEndingFilter | filter: { IsFolder: false }) | filter: (vm.showImagesOnly ? {Type: \'image\'} : {})  | orderBy:\'Name\'"\r\n        ng-click="vm.select(item)"\r\n        ng-disabled="vm.disabled || !vm.enableSelect">\r\n        <div ng-if="item.Type !== \'image\'" class="dz-image adam-blur  adam-browse-background-icon adam-browse-background">\r\n            <i ng-class="vm.icon(item)"></i>\r\n            <div class="adam-short-label">{{ item.Name }}</div>\r\n        </div>\r\n        <div ng-if="item.Type === \'image\'" class="dz-image">\r\n            <img data-dz-thumbnail="" alt="{{ item.Id + \':\' + item.Name\r\n}}" ng-src="{{ item.fullPath + \'?w=120&h=120&mode=crop\' }}">\r\n        </div>\r\n\r\n\r\n\r\n        <div class="dz-details file-type-{{item.Type}}">\r\n            <span ng-show="vm.allowEdit()" ng-click="vm.del(item)" stop-event="click" class="adam-delete-button"><i class="eav-icon-cancel"></i></span>\r\n            <span ng-show="vm.allowEdit()" ng-click="vm.rename(item)" stop-event="click" class="adam-rename-button"><i class="eav-icon-pencil"></i></span>\r\n            <div class="adam-full-name-area">\r\n                <div class="adam-full-name">{{ item.Name }}</div>\r\n            </div>\r\n            <div class="dz-filename adam-short-label">\r\n                <span>#{{ item.Id }} - {{ (item.Size / 1024).toFixed(0) }} kb</span>\r\n            </div>\r\n            <a class="adam-link-button" target="_blank" ng-href="{{ item.fullPath }}">\r\n                <i class="eav-icon-link-ext" style="font-size: larger"></i>\r\n            </a>\r\n        </div>\r\n\r\n        <span class="adam-tag" ng-class="{\'metadata-exists\': item.MetadataId > 0}"\r\n              ng-click="vm.editMetadata(item)"\r\n              ng-if="vm.getMetadataType(item)"\r\n              stop-event="click"\r\n              uib-tooltip="{{vm.getMetadataType(item)}}:{{item.MetadataId}}">\r\n            <i class="eav-icon-tag" style="font-size: larger"></i>\r\n        </span>\r\n\r\n\r\n        <div class="dz-success-mark">\r\n            <svg width="54px" height="54px" viewBox="0 0 54 54" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">\r\n                <title>Check</title>\r\n                <defs></defs>\r\n                <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" sketch:type="MSPage">\r\n                    <path d="M23.5,31.8431458 L17.5852419,25.9283877 C16.0248253,24.3679711 13.4910294,24.366835 11.9289322,25.9289322 C10.3700136,27.4878508 10.3665912,30.0234455 11.9283877,31.5852419 L20.4147581,40.0716123 C20.5133999,40.1702541 20.6159315,40.2626649 20.7218615,40.3488435 C22.2835669,41.8725651 24.794234,41.8626202 26.3461564,40.3106978 L43.3106978,23.3461564 C44.8771021,21.7797521 44.8758057,19.2483887 43.3137085,17.6862915 C41.7547899,16.1273729 39.2176035,16.1255422 37.6538436,17.6893022 L23.5,31.8431458 Z M27,53 C41.3594035,53 53,41.3594035 53,27 C53,12.6405965 41.3594035,1 27,1 C12.6405965,1 1,12.6405965 1,27 C1,41.3594035 12.6405965,53 27,53 Z" id="Oval-2" stroke-opacity="0.198794158" stroke="#747474" fill-opacity="0.816519475" fill="#FFFFFF" sketch:type="MSShapeGroup"></path>\r\n                </g>\r\n            </svg>\r\n        </div>\r\n    </div>\r\n\r\n</div>'),e.put("adam/dropzone-upload-preview.html",'<div ng-show="uploading">\r\n    <div class="dropzone-previews">\r\n    </div>\r\n    <span class="invisible-clickable" data-note="just a fake, invisible area for dropzone"></span>\r\n</div>'),e.put("fields/dnn-bridge/hyperlink-default-pagepicker.html",'<div>\r\n	<div class="modal-header">\r\n		<h3 class="modal-title" translate="Edit.Fields.Hyperlink.PagePicker.Title"></h3>\r\n	</div>\r\n	<div class="modal-body" style="height:370px; width:600px">\r\n		<iframe style="width:100%; height: 350px; border: 0;" web-forms-bridge="bridge" bridge-type="pagepicker" bridge-sync-height="false"></iframe>\r\n	</div>\r\n	<div class="modal-footer"></div>\r\n</div>'),e.put("fields/hyperlink/hyperlink-default.html",'<div class="dropzone">\r\n    <div class="clearfix">\r\n        <div ng-if="value.Value && vm.isImage()"\r\n             class="thumbnail-before-input"\r\n             ng-style="{ \'background-image\': \'url(\' + vm.thumbnailUrl(1, true) + \')\' }"\r\n             ng-mouseover="vm.showPreview = true"\r\n             ng-mouseleave="vm.showPreview = false">\r\n        </div>\r\n\r\n        <div ng-if="value.Value && !vm.isImage()"\r\n           class="thumbnail-before-input icon-before-input">\r\n            <a href="{{vm.testLink}}"\r\n               target="_blank" tabindex="-1"\r\n               tooltip-html="{{vm.tooltipUrl(vm.testLink)}}"\r\n               tooltip-placement="right"\r\n               ng-class="vm.icon()">\r\n            </a>            \r\n        </div>\r\n        <div ng-if="!value.Value"\r\n             class="thumbnail-before-input empty-placeholder">\r\n        </div>\r\n        <div class="after-preview">\r\n            <div class="input-group" uib-dropdown>\r\n                <input type="text" class="form-control input-lg" ng-model="value.Value" uib-tooltip="{{\'Edit.Fields.Hyperlink.Default.Tooltip1\' | translate }}\r\n{{\'Edit.Fields.Hyperlink.Default.Tooltip2\' | translate }}\r\nADAM - sponsored with ♥ by 2sic.com">\r\n                <span class="input-group-btn" style="vertical-align: top;">\r\n                    <div style="width: 6px;"></div>\r\n                    <button ng-if="to.settings[\'merged\'].Buttons.indexOf(\'adam\') > -1" type="button" class="btn btn-default icon-field-button" ng-disabled="to.disabled" uib-tooltip="{{\'Edit.Fields.Hyperlink.Default.AdamUploadLabel\' | translate }}" ng-click="vm.toggleAdam()">\r\n                        <i class="eav-icon-apple"></i>\r\n                    </button>\r\n                    <button ng-if="to.settings[\'merged\'].Buttons.indexOf(\'page\') > -1" type="button" class="btn btn-default icon-field-button" ng-disabled="to.disabled" uib-tooltip="{{\'Edit.Fields.Hyperlink.Default.PageLabel\' | translate }}" ng-click="vm.openPageDialog()">\r\n                        <i class="eav-icon-sitemap"></i>\r\n                    </button>\r\n                    <button ng-if="to.settings[\'merged\'].Buttons.indexOf(\'more\') > -1" tabindex="-1" type="button" class="btn btn-default uib-dropdown-toggle icon-field-button" uib-dropdown-toggle ng-disabled="to.disabled">\r\n                        <i class="eav-icon-options"></i>\r\n                    </button>\r\n                </span>\r\n                <ul class="dropdown-menu pull-right" uib-dropdown-menu role="menu">\r\n                    <li role="menuitem" ng-if="to.settings[\'merged\'].ShowAdam"><a class="dropzone-adam" ng-click="vm.toggleAdam(false)" href="javascript:void(0);"><i class="eav-icon-apple"></i> <span translate="Edit.Fields.Hyperlink.Default.MenuAdam"></span></a></li>\r\n                    <li role="menuitem" ng-if="to.settings[\'merged\'].ShowPagePicker"><a ng-click="vm.openPageDialog()" href="javascript:void(0)"><i class="eav-icon-sitemap" xicon="home"></i> <span translate="Edit.Fields.Hyperlink.Default.MenuPage"></span></a></li>\r\n                    <li role="menuitem" ng-if="to.settings[\'merged\'].ShowImageManager"><a ng-click="vm.toggleAdam(true, true)" href="javascript:void(0)"><i class="eav-icon-file-image" xicon="picture"></i> <span translate="Edit.Fields.Hyperlink.Default.MenuImage"></span></a></li>\r\n                    <li role="menuitem" ng-if="to.settings[\'merged\'].ShowFileManager"><a ng-click="vm.toggleAdam(true, false)" href="javascript:void(0)"><i class="eav-icon-file" xicon="file"></i> <span translate="Edit.Fields.Hyperlink.Default.MenuDocs"></span></a></li>\r\n                </ul>\r\n            </div>\r\n            <div ng-if="vm.showPreview" style="position: relative">\r\n                <div style="position: absolute; z-index: 100; background: white; top: 10px; text-align: center; left: 0; right: 0;">\r\n                    <img ng-src="{{vm.thumbnailUrl(2)}}" />\r\n                </div>\r\n            </div>\r\n\r\n            <adam-hint class="field-hints"></adam-hint>\r\n            <div ng-if="value.Value" class="field-hints">\r\n                <a href="{{vm.testLink}}" target="_blank" tabindex="-1" tooltip-html="{{vm.tooltipUrl(vm.testLink)}}">\r\n                    <span>&nbsp;... {{vm.testLink.substr(vm.testLink.lastIndexOf("/"), 100)}}</span>\r\n                </a>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n    <div>\r\n        <!-- The ADAM file browser, requires the uploader wrapped around it -->\r\n        <adam-browser content-type-name="to.header.ContentTypeName"\r\n                      entity-guid="to.header.Guid"\r\n                      field-name="options.key"\r\n                      auto-load="false"\r\n                      folder-depth="0"\r\n                      sub-folder="to.settings[\'merged\'].Paths"\r\n                      update-callback="vm.setValue"\r\n                      register-self="vm.registerAdam"\r\n                      adam-mode-config="vm.adamModeConfig"\r\n                      ng-disabled="to.disabled"\r\n                      file-filter="to.settings[\'merged\'].FileFilter"></adam-browser>\r\n\r\n        <!-- the preview of the uploader -->\r\n        <dropzone-upload-preview></dropzone-upload-preview>\r\n\r\n    </div>\r\n</div>'),e.put("fields/hyperlink/hyperlink-library.html",'<div>\r\n    <div class="dropzone">\r\n        <!-- The ADAM file browser, requires the uploader wrapped around it -->\r\n        <adam-browser\r\n            content-type-name="to.header.ContentTypeName"\r\n            entity-guid="to.header.Guid"\r\n            field-name="options.key"\r\n            auto-load="true"\r\n            sub-folder=""\r\n            folder-depth="to.settings.merged.FolderDepth"\r\n            metadata-content-types="to.settings.merged.MetadataContentTypes"\r\n            allow-assets-in-root="to.settings.merged.allowAssetsInRoot"\r\n            enable-select="false"\r\n            update-callback="vm.setValue"\r\n            register-self="vm.registerAdam"\r\n            adam-mode-config="vm.adamModeConfig">\r\n        </adam-browser>\r\n\r\n        <!-- the preview of the uploader -->\r\n        <dropzone-upload-preview></dropzone-upload-preview>\r\n\r\n    </div>\r\n</div>'),e.put("fields/string/string-font-icon-picker.html",'<div>\r\n    <div uib-dropdown uib-keyboard-nav auto-close="outsideClick" is-open="vm.selectorIsOpen">\r\n        <div class="thumbnail-before-input icon-preview">\r\n            <button type="button" class="" uib-tooltip="{{value.Value}}" uib-dropdown-toggle>\r\n                <i class="{{vm.previewPrefix}} {{value.Value}}" ng-show="value.Value"></i>\r\n                <span ng-show="!value.Value">&nbsp;&nbsp;</span>\r\n            </button>\r\n        </div>\r\n        <div class="input-group" uib-dropdown-toggle>\r\n            <input type="text" class="form-control input-lg" ng-model="value.Value" ng-disabled="false" >\r\n        </div>\r\n        <!-- the search ui -->\r\n        <ul class="dropdown-menu icons-menu-columns" role="menu" uib-dropdown-menu>\r\n            <li class="input-group">\r\n                <span class="input-group-addon btn-default btn" ng-click="vm.selectorIsOpen = false; value.Value = \'\'">\r\n                    <i class="eav-icon-cancel"></i>\r\n                </span>\r\n                <input type="search" ng-model="vm.iconFilter" class="form-control input-lg" placeholder="search..." />\r\n            </li>\r\n\r\n            <li ng-repeat="icn in vm.icons" role="menuitem"\r\n                ng-show="icn.class.indexOf(vm.iconFilter) !== -1">\r\n                <a ng-click="vm.setIcon(icn.class)" xng-click="value.Value = icn.class; vm.selectorIsOpen = false;">\r\n                    <i class="{{vm.previewPrefix}} {{icn.class}}"></i> <span uib-tooltip="{{icn.class}}">...{{icn.class.substring(vm.prefix.length-1,25)}}</span>\r\n                </a>\r\n            </li>\r\n        </ul>\r\n    </div>\r\n    <div ng-if="vm.debug.on">Infos: found {{vm.icons.length}} items for prefix "{{vm.prefix}}" and will use "{{vm.previewPrefix}}" as a preview class. Selected is "{{value.Value}}" and files are: {{vm.files}}</div>\r\n</div> '),e.put("fields/string/string-template-picker.html",'<div>\r\n    <div class="input-group">\r\n\r\n        <select class="form-control input-material material"\r\n                ng-model="value.Value"\r\n                ng-disabled="!readyToUse()">\r\n            <option value="">(no file selected)</option>\r\n            <option ng-repeat="item in templates | isValidFile:file.ext"\r\n                    ng-selected="{{item == value.Value}}"\r\n                    value="{{item}}">\r\n                {{item}}\r\n            </option>\r\n        </select>\r\n        <span class="input-group-btn" style="vertical-align: top;">\r\n            <button class="btn btn-default icon-field-button" type="button" ng-click="add()" ng-disabled="!readyToUse()">\r\n                <span class="eav-icon-plus"></span>\r\n            </button>\r\n        </span>\r\n    </div>\r\n</div>'),e.put("fields/string/string-wysiwyg-adv.html","<div>\r\n    this would be an advanced, configurable WYSIWYG. It does not exist yet :). \r\n</div>"),e.put("fields/string/string-wysiwyg-dnn.html",'<iframe style="width:100%; border: 0;" web-forms-bridge="vm.bridge" bridge-type="wysiwyg" bridge-sync-height="true"></iframe>'),e.put("fields/string/string-wysiwyg-tinymce.html",'<div>\r\n    <div class="dropzone">\r\n        <div> <!-- needed because after a refresh, the editor can\'t be placed at the same location -->\r\n            <div ui-tinymce="tinymceOptions" ng-model="value.Value" class="field-string-wysiwyg-mce-box"></div>\r\n        </div>\r\n\r\n        <!-- the ADAM file browser requires the uploader wrapped around it -->\r\n        <adam-browser content-type-name="to.header.ContentTypeName"\r\n                      entity-guid="to.header.Guid"\r\n                      field-name="options.key"\r\n                      auto-load="false"\r\n                      folder-depth="0"\r\n                      sub-folder=""\r\n                      update-callback="vm.setValue"\r\n                      register-self="vm.registerAdam"\r\n                      show-images-only="vm.adamModeImage"\r\n                      ng-disabled="to.disabled" adam-mode-config="vm.adamModeConfig"></adam-browser>\r\n\r\n        <!-- dummy item to set focus on in script-->\r\n        <span id="dummyfocus" tabindex="-1"></span>\r\n\r\n        <!-- the preview of the uploader -->\r\n        <dropzone-upload-preview></dropzone-upload-preview>\r\n        <adam-hint class="field-hints"></adam-hint>\r\n\r\n    </div>\r\n</div>')}]);
//# sourceMappingURL=sxc-edit.min.js.map
