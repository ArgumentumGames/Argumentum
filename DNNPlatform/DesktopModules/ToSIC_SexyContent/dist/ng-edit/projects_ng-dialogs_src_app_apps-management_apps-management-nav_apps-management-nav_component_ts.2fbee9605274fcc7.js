"use strict";(self.webpackChunkng_dialogs=self.webpackChunkng_dialogs||[]).push([["projects_ng-dialogs_src_app_apps-management_apps-management-nav_apps-management-nav_component_ts"],{3237:(S,b,s)=>{s.r(b),s.d(b,{AppsManagementNavComponent:()=>it});var r=s(2977),p=s(6317),g=s(116),d=s(635),v=s(4874),m=s(7714),Z=s(679),I=s(7854),A=s(8598),e=s(3184),C=s(5758),c=s(5469),u=s(7317),h=s(785),x=s(5590),_=s(6362),L=s(2379),Q=s(6562),G=s(5388),z=s(7858),N=s(3575),w=s(2528),K=s(5286),O=s(1961),T=s(587),q=s(4770),X=s(4683),j=s(3135);function V(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",15)(1,"div",16),e._uU(2),e.qZA(),e.TgZ(3,"div",17)(4,"span",18),e.NdJ("click",function(){const l=e.CHM(t).$implicit;return e.oxw(2).copyToClipboard(l.value)}),e._uU(5),e.qZA()()()}if(2&i){const t=o.$implicit;e.xp6(2),e.Oqu(t.label),e.xp6(2),e.Q6J("tippy",t.value),e.xp6(1),e.Oqu(t.value)}}function ee(i,o){if(1&i&&(e.TgZ(0,"a",20),e._uU(1,"manage"),e.qZA()),2&i){const t=e.oxw().$implicit;e.Q6J("routerLink",t.link)}}function te(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",15)(1,"div",16),e._uU(2),e.qZA(),e.TgZ(3,"div",17)(4,"span",18),e.NdJ("click",function(){const l=e.CHM(t).$implicit;return e.oxw(2).copyToClipboard(l.value)}),e._uU(5),e.qZA(),e.YNc(6,ee,2,1,"a",19),e.qZA()()}if(2&i){const t=o.$implicit;e.xp6(2),e.Oqu(t.label),e.xp6(2),e.Q6J("tippy",t.value),e.xp6(1),e.Oqu(t.value),e.xp6(1),e.Q6J("ngIf",t.link)}}function ne(i,o){1&i&&(e.TgZ(0,"app-field-hint",22),e._uU(1," Only positive whole numbers "),e.qZA()),2&i&&e.Q6J("isError",!0)}function ie(i,o){if(1&i&&(e.ynx(0),e.YNc(1,ne,2,1,"app-field-hint",21),e.BQk()),2&i){e.oxw();const t=e.MAs(85);e.xp6(1),e.Q6J("ngIf",t.errors.pattern)}}function ae(i,o){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"mat-card")(2,"mat-card-header")(3,"div",1)(4,"mat-icon"),e._uU(5,"settings_applications"),e.qZA()(),e.TgZ(6,"mat-card-title"),e._uU(7,"Platform"),e.qZA(),e.TgZ(8,"mat-card-subtitle"),e._uU(9,"What you are running"),e.qZA()(),e.TgZ(10,"mat-card-content"),e.YNc(11,V,6,3,"div",2),e._UZ(12,"div",3),e.TgZ(13,"h4"),e._uU(14,"Global Settings"),e.qZA(),e.TgZ(15,"p"),e._uU(16," This includes both pre-defined SystemSettings as well as custom Settings. It will affect the entire Installation. See "),e.TgZ(17,"a",4),e._uU(18,"docs"),e.qZA(),e._uU(19,". "),e.qZA(),e.TgZ(20,"div",5)(21,"button",6),e.NdJ("click",function(){return e.CHM(t),e.oxw().openGlobalSettings()}),e.TgZ(22,"mat-icon"),e._uU(23,"open_in_new"),e.qZA(),e.TgZ(24,"span"),e._uU(25,"Open Global Settings"),e.qZA()()()()(),e.TgZ(26,"mat-card")(27,"mat-card-header")(28,"div",1)(29,"mat-icon"),e._uU(30,"public"),e.qZA()(),e.TgZ(31,"mat-card-title"),e._uU(32,"This Site"),e.qZA(),e.TgZ(33,"mat-card-subtitle"),e._uU(34,"The current Site you're on"),e.qZA()(),e.TgZ(35,"mat-card-content"),e.YNc(36,te,7,4,"div",2),e._UZ(37,"div",3),e.TgZ(38,"h4"),e._uU(39,"Site Settings"),e.qZA(),e.TgZ(40,"p"),e._uU(41," This includes both pre-defined SystemSettings as well as custom Settings. It will affect the entire Site / Portal. See "),e.TgZ(42,"a",4),e._uU(43,"docs"),e.qZA(),e._uU(44,". "),e.qZA(),e.TgZ(45,"div",5)(46,"button",6),e.NdJ("click",function(){return e.CHM(t),e.oxw().openSiteSettings()}),e.TgZ(47,"mat-icon"),e._uU(48,"open_in_new"),e.qZA(),e.TgZ(49,"span"),e._uU(50,"Open Site Settings"),e.qZA()()()()(),e.TgZ(51,"mat-card")(52,"mat-card-header")(53,"div",1)(54,"mat-icon"),e._uU(55,"speed"),e.qZA()(),e.TgZ(56,"mat-card-title"),e._uU(57,"2sxc Insights"),e.qZA(),e.TgZ(58,"mat-card-subtitle"),e._uU(59,"See what's happening under the hood"),e.qZA()(),e.TgZ(60,"mat-card-content")(61,"h4"),e._uU(62,"2sxc Insights for Super Users"),e.qZA(),e.TgZ(63,"p"),e._uU(64," This is to access a special section to see what is really in the server memory. It's intended for extensive debugging - see also "),e.TgZ(65,"a",7),e._uU(66,"this blog post"),e.qZA(),e._uU(67,". "),e.qZA(),e.TgZ(68,"div",5)(69,"button",6),e.NdJ("click",function(){return e.CHM(t),e.oxw().openInsights()}),e.TgZ(70,"mat-icon"),e._uU(71,"open_in_new"),e.qZA(),e.TgZ(72,"span"),e._uU(73,"Open 2sxc Insights"),e.qZA()()(),e._UZ(74,"div",3),e.TgZ(75,"h4"),e._uU(76,"Activate Page Level Logging"),e.qZA(),e.TgZ(77,"form",8,9),e.NdJ("ngSubmit",function(){e.CHM(t);const a=e.MAs(78);return e.oxw().activatePageLog(a)}),e.TgZ(79,"div"),e._uU(80," This will place insights-logs in the HTML of the user output for users with ?debug=true in the url. It can only be activated for short periods of time. "),e.qZA(),e.TgZ(81,"mat-form-field",10)(82,"mat-label"),e._uU(83,"Duration in Minutes"),e.qZA(),e.TgZ(84,"input",11,12),e.NdJ("ngModelChange",function(a){return e.CHM(t),e.oxw().pageLogDuration=a}),e.qZA()(),e.YNc(86,ie,2,1,"ng-container",0),e.TgZ(87,"div",13)(88,"button",14),e._uU(89," Activate "),e.qZA()()()()(),e.BQk()}if(2&i){const t=o.ngIf,n=e.MAs(78),a=e.MAs(85),l=e.oxw();e.xp6(11),e.Q6J("ngForOf",t.systemInfos),e.xp6(25),e.Q6J("ngForOf",t.siteInfos),e.xp6(48),e.Q6J("pattern",l.positiveWholeNumber)("ngModel",l.pageLogDuration)("disabled",t.loading),e.xp6(2),e.Q6J("ngIf",a.touched&&a.errors),e.xp6(2),e.Q6J("disabled",!n.valid||t.loading)}}let oe=(()=>{class i{constructor(t,n,a,l){this.zoneService=t,this.snackBar=n,this.dialogService=a,this.sxcInsightsService=l,this.positiveWholeNumber=/^[1-9][0-9]*$/}ngOnInit(){this.systemInfoSet$=new p.X(void 0),this.languages$=new p.X(void 0),this.loading$=new p.X(!1),this.buildTemplateVars(),this.getSystemInfo(),this.getLanguages()}ngOnDestroy(){this.systemInfoSet$.complete(),this.languages$.complete(),this.loading$.complete()}copyToClipboard(t){(0,G.v)(t),this.snackBar.open("Copied to clipboard",null,{duration:2e3})}openSiteSettings(){const t=this.dialogSettings.Context.Site.PrimaryApp;this.dialogService.openAppAdministration(t.ZoneId,t.AppId,"app")}openGlobalSettings(){const t=this.dialogSettings.Context.System.PrimaryApp;this.dialogService.openAppAdministration(t.ZoneId,t.AppId,"app")}openInsights(){window.open(window.$2sxc.http.apiUrl("sys/insights/help"),"_blank")}activatePageLog(t){this.loading$.next(!0),this.snackBar.open("Activating..."),this.sxcInsightsService.activatePageLog(this.pageLogDuration).subscribe(n=>{this.loading$.next(!1),this.snackBar.open(n,null,{duration:4e3})}),document.activeElement instanceof HTMLElement&&document.activeElement.blur(),t.resetForm()}getSystemInfo(){this.zoneService.getSystemInfo().subscribe({error:()=>{this.systemInfoSet$.next(void 0)},next:t=>{this.systemInfoSet$.next(t)}})}getLanguages(){this.zoneService.getLanguages().subscribe({error:()=>{this.languages$.next(void 0)},next:t=>{this.languages$.next(t)}})}buildTemplateVars(){const t=this.systemInfoSet$.pipe((0,d.U)(a=>null==a?void 0:[{label:"CMS",value:`2sxc v.${a.System.EavVersion}`},{label:"Platform",value:`${a.System.Platform} v.${a.System.PlatformVersion}`},{label:"Zones",value:a.System.Zones.toString()},{label:"Fingerprint",value:a.System.Fingerprint}])),n=(0,Q.a)([this.systemInfoSet$,this.languages$]).pipe((0,d.U)(([a,l])=>{if(null==a||null==l)return;const f=l.length,y=l.filter(at=>at.IsEnabled).length;return[{label:"Zone",value:a.Site.ZoneId.toString()},{label:"Site",value:a.Site.SiteId.toString()},{label:"Languages",value:`${y}/${f}`,link:"languages"},{label:"Apps",value:a.Site.Apps.toString(),link:"list"}]}));this.templateVars$=(0,Q.a)([t,n,this.loading$]).pipe((0,d.U)(([a,l,f])=>({systemInfos:a,siteInfos:l,loading:f})))}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(N.b),e.Y36(w.ux),e.Y36(z.x),e.Y36(K.a))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-system-info"]],inputs:{dialogSettings:"dialogSettings"},decls:2,vars:3,consts:[[4,"ngIf"],["mat-card-avatar",""],["class","info-row",4,"ngFor","ngForOf"],[1,"card-content-separator"],["href","http://r.2sxc.org/settings","target","_blank"],[1,"card-actions"],["mat-button","",3,"click"],["href","https://2sxc.org/en/blog/post/using-2sxc-insights","target","_blank"],[1,"activate-log-form",3,"ngSubmit"],["activateLogForm","ngForm"],["appearance","standard","color","accent"],["matInput","","type","number","min","0","required","","name","Duration",3,"pattern","ngModel","disabled","ngModelChange"],["duration","ngModel"],[1,"form-actions"],["mat-raised-button","","type","submit","color","accent",3,"disabled"],[1,"info-row"],[1,"info-row__label"],[1,"info-row__value"],[3,"tippy","click"],["class","info-row__link",3,"routerLink",4,"ngIf"],[1,"info-row__link",3,"routerLink"],[3,"isError",4,"ngIf"],[3,"isError"]],template:function(t,n){1&t&&(e.YNc(0,ae,90,7,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,n.templateVars$))},directives:[_.O5,O.a8,O.dk,O.kc,x.Hw,O.n5,O.$j,O.dn,_.sg,h.$,u.lW,r.yS,T._Y,T.JL,T.F,q.KE,q.hX,X.Nt,T.qQ,T.wV,T.Fj,T.Q7,T.c5,T.JJ,T.On,j.Y],pipes:[_.Ov],styles:["[_nghost-%COMP%]{display:flex;flex-wrap:wrap;padding-top:40px}.mat-card[_ngcontent-%COMP%]{width:400px;margin-right:24px;margin-bottom:24px}.mat-card-avatar[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{width:40px;height:40px;font-size:40px}.mat-card-title[_ngcontent-%COMP%]{font-size:20px;font-weight:500}.mat-card-subtitle[_ngcontent-%COMP%]{font-size:14px}.mat-card-content[_ngcontent-%COMP%]{font-size:14px;margin-top:12px}.card-content-separator[_ngcontent-%COMP%]{height:8px}.card-actions[_ngcontent-%COMP%]{margin-right:-8px;margin-left:-8px}.card-actions[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{margin-right:4px}.info-row[_ngcontent-%COMP%]{display:flex;overflow-wrap:anywhere;margin-top:4px;margin-bottom:4px}.info-row__label[_ngcontent-%COMP%]{flex:1;font-weight:500}.info-row__value[_ngcontent-%COMP%]{flex:2}.info-row__value[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{cursor:pointer}.info-row__link[_ngcontent-%COMP%]{margin-left:4px}.activate-log-form[_ngcontent-%COMP%]   .mat-form-field[_ngcontent-%COMP%]{height:auto}.activate-log-form[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]{margin-top:8px;display:flex;justify-content:flex-end}"]}),i})();var E=s(253),k=s(2673),M=s(3158),D=s(745),F=s(1203),J=s(1361),R=s(5578),H=s(9119),se=s(5137),re=s(4628),le=s(1130),U=s(2796);function ce(i,o){1&i&&(e.TgZ(0,"mat-icon"),e._uU(1,"foundation"),e.qZA())}function pe(i,o){1&i&&(e.TgZ(0,"mat-icon"),e._uU(1,"holiday_village"),e.qZA())}function ge(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",9),e.NdJ("click",function(){return e.CHM(t),e.oxw().openLightspeed()}),e.TgZ(1,"mat-icon"),e._uU(2,"bolt"),e.qZA()()}if(2&i){const t=e.oxw();e.Q6J("tippy",t.app.Lightspeed.Title)}}function de(i,o){1&i&&(e.TgZ(0,"div",10)(1,"mat-icon"),e._uU(2,"bolt"),e.qZA()())}function ue(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",11),e.NdJ("click",function(){return e.CHM(t),e.oxw().flushCache()}),e.TgZ(1,"mat-icon"),e._uU(2,"cached"),e.qZA(),e.TgZ(3,"span"),e._uU(4,"Flush cache"),e.qZA()(),e.TgZ(5,"button",12),e.NdJ("click",function(){return e.CHM(t),e.oxw().deleteApp()}),e.TgZ(6,"mat-icon"),e._uU(7,"delete"),e.qZA(),e.TgZ(8,"span"),e._uU(9,"Delete"),e.qZA()()}if(2&i){const t=e.oxw();e.xp6(5),e.Q6J("disabled",!t.app.IsApp)}}let me=(()=>{class i{agInit(t){this.params=t,this.app=this.params.data}refresh(t){return!0}openLightspeed(){this.params.onOpenLightspeed(this.app)}flushCache(){this.params.onFlush(this.app)}deleteApp(){this.params.onDelete(this.app)}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-apps-list-actions"]],decls:12,vars:7,consts:[[1,"actions-component"],[1,"like-button","icon",3,"tippy","tippyDisabled"],[4,"ngIf"],["class","like-button","matRipple","",3,"tippy","click",4,"ngIf"],["class","like-button disabled","tippy","Lightspeed is disabled",4,"ngIf"],["matRipple","","tippy","More",1,"like-button","highlight",3,"matMenuTriggerFor"],[1,"grid-more-menu"],["menu","matMenu"],["matMenuContent",""],["matRipple","",1,"like-button",3,"tippy","click"],["tippy","Lightspeed is disabled",1,"like-button","disabled"],["mat-menu-item","",3,"click"],["mat-menu-item","",3,"disabled","click"]],template:function(t,n){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1),e.YNc(2,ce,2,0,"mat-icon",2),e.YNc(3,pe,2,0,"mat-icon",2),e.qZA(),e.YNc(4,ge,3,1,"div",3),e.YNc(5,de,3,0,"div",4),e.TgZ(6,"div",5)(7,"mat-icon"),e._uU(8,"more_horiz"),e.qZA()()(),e.TgZ(9,"mat-menu",6,7),e.YNc(11,ue,10,1,"ng-template",8),e.qZA()),2&t){const a=e.MAs(10);e.xp6(1),e.Q6J("tippy",n.app.IsGlobal?"This app is global":n.app.IsInherited?"This app is inherited":"")("tippyDisabled",!n.app.IsGlobal&&!n.app.IsInherited),e.xp6(1),e.Q6J("ngIf",n.app.IsGlobal),e.xp6(1),e.Q6J("ngIf",n.app.IsInherited),e.xp6(1),e.Q6J("ngIf",null==n.app.Lightspeed?null:n.app.Lightspeed.IsEnabled),e.xp6(1),e.Q6J("ngIf",!(null!=n.app.Lightspeed&&n.app.Lightspeed.IsEnabled)),e.xp6(1),e.Q6J("matMenuTriggerFor",a)}},directives:[h.$,_.O5,x.Hw,le.wG,U.p6,U.VK,U.KA,U.OP],styles:[""]}),i})(),fe=(()=>{class i{agInit(t){this.value=t.value}refresh(t){return!0}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-apps-list-show"]],decls:4,vars:2,consts:[[1,"icon-container"],[1,"like-button","icon",3,"tippy"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"mat-icon"),e._uU(3),e.qZA()()()),2&t&&(e.xp6(1),e.Q6J("tippy",n.value?"Show this app to users":"Don't show this app to users"),e.xp6(2),e.Oqu(n.value?"visibility":"visibility_off"))},directives:[h.$,x.Hw],styles:[""]}),i})();var P=s(1350),he=s(1529),Y=s(7465);const _e=function(i){return{"fab-opened":i}};let ve=(()=>{class i{constructor(t,n,a,l,f){this.router=t,this.route=n,this.appsListService=a,this.snackBar=l,this.context=f,this.fabOpen$=new p.X(!1),this.gridOptions=this.buildGridOptions(),this.refreshApps$=new E.x,this.subscription=new m.w0}ngOnInit(){this.apps$=this.refreshApps$.pipe((0,v.O)(void 0),(0,k.w)(()=>this.appsListService.getAll().pipe((0,M.K)(()=>(0,D.of)(void 0)))),(0,F.B)()),this.refreshOnChildClosed()}ngOnDestroy(){this.fabOpen$.complete(),this.refreshApps$.complete(),this.subscription.unsubscribe()}openChange(t){this.fabOpen$.next(t)}browseCatalog(){window.open("https://2sxc.org/apps","_blank")}createApp(){this.router.navigate(["create"],{relativeTo:this.route.firstChild})}createInheritedApp(){this.router.navigate(["create-inherited"],{relativeTo:this.route.firstChild})}importApp(t){this.router.navigate(["import"],{relativeTo:this.route.firstChild,state:{files:t}})}deleteApp(t){const n=prompt(`This cannot be undone. To really delete this app, type 'yes!' or type/paste the app-name here. Are you sure want to delete '${t.Name}' (${t.Id})?`);null!==n&&(n===t.Name||"yes!"===n?(this.snackBar.open("Deleting..."),this.appsListService.delete(t.Id).subscribe({error:()=>{this.snackBar.open("Delete failed. Please check console for more information",void 0,{duration:3e3}),this.refreshApps$.next()},next:()=>{this.snackBar.open("Deleted",void 0,{duration:2e3}),this.refreshApps$.next()}})):alert("Input did not match - will not delete"))}flushApp(t){!confirm(`Flush the App Cache for ${t.Name} (${t.Id})?`)||(this.snackBar.open("Flushing cache..."),this.appsListService.flushCache(t.Id).subscribe({error:()=>{this.snackBar.open("Cache flush failed. Please check console for more information",void 0,{duration:3e3})},next:()=>{this.snackBar.open("Cache flushed",void 0,{duration:2e3})}}))}openLightspeed(t){if(!t.Lightspeed)return;const a=(0,se.f)({items:[{EntityId:t.Lightspeed.Id}]});this.router.navigate([`${this.context.zoneId}/${t.Id}/edit/${a}`],{relativeTo:this.route.firstChild})}openApp(t){this.router.navigate([t.Id.toString()],{relativeTo:this.route.firstChild})}refreshOnChildClosed(){this.subscription.add(this.router.events.pipe((0,g.h)(t=>t instanceof r.m2),(0,v.O)(!!this.route.snapshot.firstChild.firstChild),(0,d.U)(()=>!!this.route.snapshot.firstChild.firstChild),(0,Z.G)(),(0,g.h)(([t,n])=>t&&!n)).subscribe(()=>{this.refreshApps$.next()}))}buildGridOptions(){return Object.assign(Object.assign({},H.f),{columnDefs:[{headerName:"ID",field:"Id",width:70,headerClass:"dense",cellClass:"id-action no-padding no-outline".split(" "),sortable:!0,filter:"agNumberColumnFilter",valueGetter:n=>n.data.Id,cellRenderer:R.m,cellRendererParams:{tooltipGetter:a=>`ID: ${a.Id}\nGUID: ${a.Guid}`}},{field:"Show",width:70,headerClass:"dense",cellClass:"icons no-outline".split(" "),sortable:!0,filter:J.U,valueGetter:n=>!n.data.IsHidden,cellRenderer:fe},{field:"Name",flex:2,minWidth:250,cellClass:"apps-list-primary-action highlight".split(" "),sortable:!0,sort:"asc",filter:"agTextColumnFilter",valueGetter:n=>n.data.Name,onCellClicked:n=>{this.openApp(n.data)},cellRenderer:n=>{const a=n.data;return`\n            <div class="container">\n              ${a.Thumbnail?`<img class="image logo" src="${a.Thumbnail}?w=40&h=40&mode=crop"></img>`:'<div class="image logo"><span class="material-icons-outlined">star_border</span></div>'}\n              <div class="text">${n.value}</div>\n            </div>\n            `}},{field:"Folder",flex:2,minWidth:250,cellClass:"no-outline",sortable:!0,filter:"agTextColumnFilter",valueGetter:n=>n.data.Folder},{field:"Version",width:78,headerClass:"dense",cellClass:"no-outline",sortable:!0,filter:"agTextColumnFilter",valueGetter:n=>n.data.Version},{field:"Items",width:70,headerClass:"dense",cellClass:"number-cell no-outline".split(" "),sortable:!0,filter:"agNumberColumnFilter",valueGetter:n=>n.data.Items},{width:122,cellClass:"secondary-action no-padding".split(" "),pinned:"right",cellRenderer:me,cellRendererParams:(()=>({onDelete:a=>this.deleteApp(a),onFlush:a=>this.flushApp(a),onOpenLightspeed:a=>this.openLightspeed(a)}))()}]})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(r.F0),e.Y36(r.gz),e.Y36(re.A),e.Y36(w.ux),e.Y36(A._))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-apps-list"]],decls:24,vars:14,consts:[[1,"grid-wrapper","mat-tab-grid-wrapper"],["appDragAndDrop","",1,"ag-theme-material",3,"rowData","gridOptions","allowedFileTypes","filesDropped"],[1,"grid-more-actions-box"],[1,"grid-fab",3,"ngClass","openChange"],[3,"spin"],["mat-fab",""],[1,"spin180"],["mat-mini-fab","","label","Find more apps",3,"click"],["mat-mini-fab","","label","Create inherited app",3,"click"],["mat-mini-fab","","label","Import app",3,"click"],["mat-mini-fab","","label","Create app",3,"click"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"ag-grid-angular",1),e.NdJ("filesDropped",function(l){return n.importApp(l)}),e.ALo(2,"async"),e.qZA(),e._UZ(3,"div",2),e.TgZ(4,"eco-fab-speed-dial",3),e.NdJ("openChange",function(l){return n.openChange(l)}),e.ALo(5,"async"),e.TgZ(6,"eco-fab-speed-dial-trigger",4)(7,"button",5)(8,"mat-icon",6),e._uU(9),e.ALo(10,"async"),e.qZA()()(),e.TgZ(11,"eco-fab-speed-dial-actions")(12,"button",7),e.NdJ("click",function(){return n.browseCatalog()}),e.TgZ(13,"mat-icon"),e._uU(14,"search"),e.qZA()(),e.TgZ(15,"button",8),e.NdJ("click",function(){return n.createInheritedApp()}),e.TgZ(16,"mat-icon"),e._uU(17,"holiday_village"),e.qZA()(),e.TgZ(18,"button",9),e.NdJ("click",function(){return n.importApp()}),e.TgZ(19,"mat-icon"),e._uU(20,"cloud_upload"),e.qZA()(),e.TgZ(21,"button",10),e.NdJ("click",function(){return n.createApp()}),e.TgZ(22,"mat-icon"),e._uU(23,"add"),e.qZA()()()()()),2&t&&(e.xp6(1),e.Q6J("rowData",e.lcZ(2,6,n.apps$))("gridOptions",n.gridOptions)("allowedFileTypes","zip"),e.xp6(3),e.Q6J("ngClass",e.VKq(12,_e,e.lcZ(5,8,n.fabOpen$))),e.xp6(2),e.Q6J("spin",!0),e.xp6(3),e.Oqu(e.lcZ(10,10,n.fabOpen$)?"close":"add"))},directives:[P.N8,he.z,Y.W7,_.mk,Y.YI,u.lW,x.Hw,Y.Lp],pipes:[_.Ov],styles:[""]}),i})();var B=s(6623);let Ce=(()=>{class i{agInit(t){this.params=t,this.value=this.params.value}refresh(t){return!0}toggleLanguage(t){this.params.onToggleLanguage(this.params.data,t.checked)}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-site-languages-status"]],decls:1,vars:1,consts:[[3,"checked","change"]],template:function(t,n){1&t&&(e.TgZ(0,"mat-slide-toggle",0),e.NdJ("change",function(l){return n.toggleLanguage(l)}),e.qZA()),2&t&&e.Q6J("checked",n.value)},directives:[B.Rr],styles:["[_nghost-%COMP%]{height:100%;display:flex;padding-left:8px;padding-right:8px;align-items:center}.mat-slide-toggle[_ngcontent-%COMP%]{padding-top:0}"]}),i})(),be=(()=>{class i{constructor(t){this.zoneService=t,this.gridOptions=this.buildGridOptions(),this.refreshLanguages$=new E.x}ngOnInit(){this.languages$=this.refreshLanguages$.pipe((0,v.O)(void 0),(0,k.w)(()=>this.zoneService.getLanguages().pipe((0,M.K)(()=>(0,D.of)(void 0)))),(0,F.B)())}ngOnDestroy(){this.refreshLanguages$.complete()}toggleLanguage(t,n){this.zoneService.toggleLanguage(t.Code,n).subscribe({error:()=>{this.refreshLanguages$.next()},next:()=>{this.refreshLanguages$.next()}})}buildGridOptions(){return Object.assign(Object.assign({},H.f),{columnDefs:[{headerName:"ID",field:"Id",width:70,headerClass:"dense",cellClass:"id-action no-padding no-outline".split(" "),sortable:!0,filter:"agTextColumnFilter",valueGetter:n=>n.data.Code,cellRenderer:R.m,cellRendererParams:{tooltipGetter:a=>`ID: ${a.Code}`}},{field:"Name",flex:2,minWidth:250,cellClass:"primary-action highlight no-outline".split(" "),sortable:!0,sort:"asc",filter:"agTextColumnFilter",valueGetter:n=>n.data.Culture,onCellClicked:n=>{const a=n.data;this.toggleLanguage(a,!a.IsEnabled)}},{field:"Status",width:72,headerClass:"dense",cellClass:"no-padding no-outline".split(" "),sortable:!0,filter:J.U,valueGetter:n=>n.data.IsEnabled,cellRenderer:Ce,cellRendererParams:(()=>({onToggleLanguage:(a,l)=>this.toggleLanguage(a,l)}))()}]})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(N.b))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-site-languages"]],decls:4,vars:4,consts:[[1,"grid-wrapper","mat-tab-grid-wrapper"],[1,"ag-theme-material",3,"rowData","gridOptions"],[1,"grid-more-actions-box"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e._UZ(1,"ag-grid-angular",1),e.ALo(2,"async"),e._UZ(3,"div",2),e.qZA()),2&t&&(e.xp6(1),e.Q6J("rowData",e.lcZ(2,2,n.languages$))("gridOptions",n.gridOptions))},directives:[P.N8],pipes:[_.Ov],styles:[""]}),i})();var xe=s(9337),Te=s(8977),Ze=s(1640),Ae=s(8947),ye=s(5266),Ie=s(3862),Oe=s(3119),Se=s(845);function Le(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",6)(1,"div",7),e._uU(2,"ID"),e.qZA(),e.TgZ(3,"div",8)(4,"span",9),e.NdJ("click",function(){const l=e.CHM(t).ngIf;return e.oxw().copyToClipboard(l)}),e._uU(5),e.qZA()()()}if(2&i){const t=o.ngIf;e.xp6(4),e.Q6J("tippy",t),e.xp6(1),e.Oqu(t)}}function we(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",6)(1,"div",7),e._uU(2,"GUID"),e.qZA(),e.TgZ(3,"div",8)(4,"span",9),e.NdJ("click",function(){const l=e.CHM(t).ngIf;return e.oxw().copyToClipboard(l)}),e._uU(5),e.qZA()()()}if(2&i){const t=o.ngIf;e.xp6(4),e.Q6J("tippy",t),e.xp6(1),e.Oqu(t)}}function Me(i,o){if(1&i&&(e.TgZ(0,"div",6)(1,"div",7),e._uU(2,"Security Rating"),e.qZA(),e.TgZ(3,"div",10)(4,"span"),e._uU(5),e.qZA()()()),2&i){const t=o.ngIf;e.xp6(5),e.Oqu(t)}}let De=(()=>{class i{constructor(t,n,a){this.dialogData=t,this.dialogRef=n,this.snackBar=a}closeDialog(){this.dialogRef.close()}copyToClipboard(t){(0,G.v)(t),this.snackBar.open("Copied to clipboard",null,{duration:2e3})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(C.WI),e.Y36(C.so),e.Y36(w.ux))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-feature-details-dialog"]],decls:13,vars:7,consts:[["mat-dialog-title",""],[1,"dialog-title-box"],["mat-icon-button","","tippy","Close dialog",3,"click"],[1,"dialog-description",3,"innerHtml"],[1,"info-box"],["class","info-row",4,"ngIf"],[1,"info-row"],[1,"info-row__label"],[1,"info-row__value","click"],[3,"tippy","click"],[1,"info-row__value"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div"),e._uU(3),e.qZA(),e.TgZ(4,"button",2),e.NdJ("click",function(){return n.closeDialog()}),e.TgZ(5,"mat-icon"),e._uU(6,"close"),e.qZA()()()(),e._UZ(7,"p",3),e.ALo(8,"safeHtml"),e.TgZ(9,"div",4),e.YNc(10,Le,6,2,"div",5),e.YNc(11,we,6,2,"div",5),e.YNc(12,Me,6,1,"div",5),e.qZA()),2&t&&(e.xp6(3),e.Oqu(n.dialogData.feature.Name),e.xp6(4),e.Q6J("innerHtml",e.lcZ(8,5,n.dialogData.feature.Description),e.oJD),e.xp6(3),e.Q6J("ngIf",n.dialogData.feature.NameId),e.xp6(1),e.Q6J("ngIf",n.dialogData.feature.Guid),e.xp6(1),e.Q6J("ngIf",n.dialogData.feature.Security.Impact+": "+n.dialogData.feature.Security.Message))},directives:[C.uh,u.lW,h.$,x.Hw,_.O5],pipes:[Se.z],styles:[".info-box[_ngcontent-%COMP%]{margin-top:32px}.info-row[_ngcontent-%COMP%]{display:flex;overflow-wrap:anywhere;margin-top:4px;margin-bottom:4px;font-size:14px}.info-row__label[_ngcontent-%COMP%]{flex:1;font-weight:500}.info-row__value[_ngcontent-%COMP%]{flex:2}.info-row__value.click[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{cursor:pointer}"]}),i})(),Fe=(()=>{class i{agInit(t){this.value=t.value,this.feature=t.data}refresh(t){return!0}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-features-list-enabled-reason"]],decls:2,vars:2,consts:[[3,"tippy"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e._uU(1),e.qZA()),2&t&&(e.Q6J("tippy",n.feature.EnabledReasonDetailed),e.xp6(1),e.Oqu(n.value))},directives:[h.$],styles:[""]}),i})(),Ue=(()=>{class i{agInit(t){this.value=t.value}refresh(t){return!0}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-features-list-enabled"]],decls:3,vars:1,consts:[[1,"icon-container"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"mat-icon"),e._uU(2),e.qZA()()),2&t&&(e.xp6(2),e.Oqu(n.value?"check_box":"check_box_outline_blank"))},directives:[x.Hw],styles:[""]}),i})();const Pe=function(i,o){return{"toggle-false":i,"toggle-null":o}};let $e=(()=>{class i{agInit(t){this.params=t,this.value=this.params.value,this.disabled=this.params.isDisabled()}refresh(t){return this.disabled=this.params.isDisabled(),!0}toggle(){const t=this.params.data;let n;switch(this.value){case!1:n=null;break;case null:n=!0;break;case!0:n=!1}this.value=n,this.params.onToggle(t,n)}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-features-status"]],decls:1,vars:6,consts:[[3,"checked","disabled","ngClass","change"]],template:function(t,n){1&t&&(e.TgZ(0,"mat-slide-toggle",0),e.NdJ("change",function(){return n.toggle()}),e.qZA()),2&t&&e.Q6J("checked",n.value)("disabled",n.disabled)("ngClass",e.WLB(3,Pe,!1===n.value,null===n.value))},directives:[B.Rr,_.mk],styles:["[_nghost-%COMP%]{height:100%;display:flex;padding-left:12px;padding-right:12px;align-items:center}.mat-slide-toggle[_ngcontent-%COMP%]{padding-top:0}  .toggle-false .mat-slide-toggle-bar{background-color:orange}  .toggle-null .mat-slide-toggle-thumb-container{margin-left:8px}"]}),i})();var $=s(6531);let Ne=(()=>{class i{constructor(t){this.itemsCount=0,this.headerHeight=32,this.rowHeight=48,this.maxRows=100,this.extraHeight=2,this.element=t.nativeElement}ngOnChanges(t){null!=t.itemsCount&&(this.element.style.height=`${this.headerHeight+(0===this.itemsCount?2:this.itemsCount>this.maxRows?this.maxRows:this.itemsCount)*this.rowHeight+this.extraHeight}px`)}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(e.SBq))},i.\u0275dir=e.lG2({type:i,selectors:[["","appAgGridHeight",""]],inputs:{itemsCount:"itemsCount",headerHeight:"headerHeight",rowHeight:"rowHeight",maxRows:"maxRows"},features:[e.TTD]}),i})(),Ee=(()=>{class i{transform(t){return Array.isArray(t)?[...t].sort((a,l)=>a.Priority<l.Priority?-1:a.Priority>l.Priority?1:0):t}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275pipe=e.Yjl({name:"licensesOrder",type:i,pure:!0}),i})(),ke=(()=>{class i{transform(t){return`${t.Features.filter(n=>n.Enabled).length}/${t.Features.length}`}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275pipe=e.Yjl({name:"activeFeaturesCount",type:i,pure:!0}),i})();function Je(i,o){if(1&i&&(e.ynx(0),e._UZ(1,"ag-grid-angular",11),e.BQk()),2&i){const t=e.oxw().$implicit,n=e.oxw(2);e.xp6(1),e.Q6J("rowData",t.Features)("gridOptions",n.gridOptions)("itemsCount",null==t.Features?null:t.Features.length)}}function Re(i,o){if(1&i&&(e.TgZ(0,"mat-expansion-panel",null,5)(2,"mat-expansion-panel-header")(3,"mat-panel-title")(4,"mat-icon",6),e._uU(5),e.qZA(),e.TgZ(6,"div")(7,"div",7)(8,"span"),e._uU(9),e.qZA(),e.TgZ(10,"span",8),e._uU(11),e.ALo(12,"activeFeaturesCount"),e.qZA()(),e.TgZ(13,"div",9),e._uU(14),e.qZA()()()(),e.YNc(15,Je,2,3,"ng-container",10),e.qZA()),2&i){const t=o.$implicit,n=e.MAs(1);e.xp6(4),e.Q6J("tippy",t.IsEnabled?"License is active":"License is not active"),e.xp6(1),e.hij(" ",t.IsEnabled?"check_circle_outline":"cancel"," "),e.xp6(4),e.Oqu(t.Name),e.xp6(2),e.Oqu(e.lcZ(12,6,t)),e.xp6(3),e.Oqu(t.Description),e.xp6(1),e.Q6J("ngIf",n.expanded)}}function He(i,o){if(1&i&&(e.TgZ(0,"mat-accordion",3),e.YNc(1,Re,16,8,"mat-expansion-panel",4),e.ALo(2,"licensesOrder"),e.qZA()),2&i){const t=o.ngIf,n=e.oxw();e.xp6(1),e.Q6J("ngForOf",e.lcZ(2,2,t))("ngForTrackBy",n.trackLicenses)}}function Ye(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",16),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2).ngIf;return e.oxw().openLicenseRegistration(a.systemInfoSet)}),e.TgZ(1,"mat-icon"),e._uU(2,"app_registration"),e.qZA(),e.TgZ(3,"span"),e._uU(4,"Register"),e.qZA()()}}function Qe(i,o){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"button",13),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).retrieveLicense()}),e.TgZ(2,"mat-icon"),e._uU(3,"cloud_download"),e.qZA(),e.TgZ(4,"span"),e._uU(5,"License"),e.qZA()(),e.TgZ(6,"button",14),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).openLicenseUpload()}),e.TgZ(7,"mat-icon"),e._uU(8,"cloud_upload"),e.qZA(),e.TgZ(9,"span"),e._uU(10,"License"),e.qZA()(),e.YNc(11,Ye,5,0,"button",15),e.BQk()}if(2&i){const t=e.oxw().ngIf;e.xp6(11),e.Q6J("ngIf",t.systemInfoSet)}}function Ge(i,o){if(1&i&&(e.TgZ(0,"div",12),e.YNc(1,Qe,12,1,"ng-container",10),e.qZA()),2&i){const t=o.ngIf;e.xp6(1),e.Q6J("ngIf",t.debugEnabled)}}const qe=function(i,o){return{debugEnabled:i,systemInfoSet:o}};let Be=(()=>{class i{constructor(t,n,a,l,f,y,W){this.featuresConfigService=t,this.dialog=n,this.viewContainerRef=a,this.changeDetectorRef=l,this.globalConfigService=f,this.snackBar=y,this.zoneService=W,this.disabled$=new p.X(!1),this.debugEnabled$=this.globalConfigService.getDebugEnabled$(),this.gridOptions=this.buildGridOptions(),this.refreshLicenses$=new E.x,this.subscription=new m.w0}ngOnInit(){this.licenses$=this.refreshLicenses$.pipe((0,v.O)(void 0),(0,k.w)(()=>this.featuresConfigService.getLicenses().pipe((0,M.K)(()=>(0,D.of)(void 0)))),(0,xe.b)(()=>this.disabled$.next(!1)),(0,F.B)()),this.systemInfoSet$=this.zoneService.getSystemInfo().pipe((0,M.K)(()=>(0,D.of)(void 0)),(0,F.B)()),this.subscription.add(this.disabled$.pipe((0,Te.x)()).subscribe(()=>{var t;null===(t=this.gridRef)||void 0===t||t.api.refreshCells({force:!0,columns:["Status"]})}))}ngOnDestroy(){this.disabled$.complete(),this.subscription.unsubscribe()}trackLicenses(t,n){return n.Guid}retrieveLicense(){this.featuresConfigService.retrieveLicense().subscribe({error:()=>{this.snackBar.open("Failed to retrieve license. Please check console for more information",void 0,{duration:3e3})},next:t=>{this.snackBar.open(`License ${t.Success?"Info":"Error"}: ${t.Message}`,void 0,{duration:t.Success?3e3:1e5,panelClass:t.Success?void 0:"snackbar-error"})}})}openLicenseUpload(){this.dialog.open(Ie.U,{data:{title:"Upload license",description:"",allowedFileTypes:"json",upload$:a=>this.featuresConfigService.uploadLicense(a[0])},autoFocus:!1,viewContainerRef:this.viewContainerRef,width:"650px"}).afterClosed().subscribe(a=>{a&&this.refreshLicenses$.next()})}openLicenseRegistration(t){window.open(`https://patrons.2sxc.org/register?fingerprint=${t.System.Fingerprint}`,"_blank")}showFeatureDetails(t){this.dialog.open(De,{autoFocus:!1,data:{feature:t},viewContainerRef:this.viewContainerRef,width:"650px"}),this.changeDetectorRef.markForCheck()}toggleFeature(t,n){this.disabled$.next(!0),(0,Ze.D)([this.featuresConfigService.saveFeatures([{FeatureGuid:t.Guid,Enabled:n}]),(0,Ae.H)(100)]).subscribe({error:()=>{this.refreshLicenses$.next()},next:()=>{this.refreshLicenses$.next()}})}buildGridOptions(){return Object.assign(Object.assign({},H.f),{columnDefs:[{headerName:"ID",field:"Id",width:200,headerClass:"dense",cellClass:"id-action no-padding no-outline".split(" "),sortable:!0,filter:"agTextColumnFilter",valueGetter:n=>n.data.NameId,cellRenderer:R.m,cellRendererParams:{tooltipGetter:a=>`NameId: ${a.NameId}\nGUID: ${a.Guid}`}},{field:"Name",flex:3,minWidth:250,cellClass:"primary-action highlight".split(" "),sortable:!0,filter:"agTextColumnFilter",onCellClicked:n=>{this.showFeatureDetails(n.data)},valueGetter:n=>n.data.Name},{field:"Enabled",width:80,headerClass:"dense",cellClass:"no-outline",sortable:!0,filter:J.U,cellRenderer:Ue,valueGetter:n=>n.data.Enabled},{field:"EnabledReason",headerName:"Reason",flex:1,minWidth:150,cellClass:"no-outline",sortable:!0,filter:"agTextColumnFilter",cellRenderer:Fe,valueGetter:n=>n.data.EnabledReason},{field:"Expires",width:100,cellClass:"no-outline",sortable:!0,filter:"agTextColumnFilter",valueGetter:n=>{var a;const f=null===(a=n.data.Expires)||void 0===a?void 0:a.split("T")[0];return(null==f?void 0:f.startsWith("9999"))?"never":f}},{field:"Status",headerName:"",width:62,cellClass:"secondary-action no-outline no-padding".split(" "),pinned:"right",cellRenderer:$e,valueGetter:n=>n.data.EnabledStored,cellRendererParams:()=>({isDisabled:()=>this.disabled$.value,onToggle:(a,l)=>this.toggleFeature(a,l)})}]})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(Oe.G),e.Y36(C.uw),e.Y36(e.s_b),e.Y36(e.sBO),e.Y36(ye.bE),e.Y36(w.ux),e.Y36(N.b))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-license-info"]],viewQuery:function(t,n){if(1&t&&e.Gf(P.N8,5),2&t){let a;e.iGM(a=e.CRH())&&(n.gridRef=a.first)}},decls:6,vars:11,consts:[["multi","",4,"ngIf"],[1,"spacer"],["class","actions-box",4,"ngIf"],["multi",""],[4,"ngFor","ngForOf","ngForTrackBy"],["panel",""],[1,"panel-icon",3,"tippy"],[1,"panel-title"],[1,"active-features-count"],[1,"panel-description"],[4,"ngIf"],["appAgGridHeight","",1,"ag-theme-material",3,"rowData","gridOptions","itemsCount"],[1,"actions-box"],["mat-button","","color","accent","tippy","Retrieve licenses",3,"click"],["mat-button","","color","accent","tippy","Upload license",3,"click"],["mat-button","","color","accent","tippy","Register",3,"click",4,"ngIf"],["mat-button","","color","accent","tippy","Register",3,"click"]],template:function(t,n){1&t&&(e.YNc(0,He,3,4,"mat-accordion",0),e.ALo(1,"async"),e._UZ(2,"div",1),e.YNc(3,Ge,2,1,"div",2),e.ALo(4,"async"),e.ALo(5,"async")),2&t&&(e.Q6J("ngIf",e.lcZ(1,2,n.licenses$)),e.xp6(3),e.Q6J("ngIf",e.WLB(8,qe,e.lcZ(4,4,n.debugEnabled$),e.lcZ(5,6,n.systemInfoSet$))))},directives:[_.O5,$.pp,_.sg,$.ib,$.yz,$.yK,x.Hw,h.$,P.N8,Ne,u.lW],pipes:[_.Ov,Ee,ke],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;height:100%;padding-top:20px;box-sizing:border-box;position:relative}.mat-expansion-panel-header[_ngcontent-%COMP%]{padding-top:4px;padding-bottom:4px}.mat-expansion-panel-header[_ngcontent-%COMP%]     .mat-content{max-height:100%}.mat-expansion-panel-header-title[_ngcontent-%COMP%]{display:flex;align-items:center}.panel-icon[_ngcontent-%COMP%]{margin-right:16px}.panel-title[_ngcontent-%COMP%]{font-size:14px}.active-features-count[_ngcontent-%COMP%]{display:inline-block;margin-left:8px;color:#fff;font-size:12px;border-radius:12px;padding:2px 6px;background-color:#002753;border:1px solid rgba(29,39,61,.44);box-sizing:border-box;-webkit-user-select:none;user-select:none;white-space:nowrap}.panel-description[_ngcontent-%COMP%]{padding-top:4px;font-size:12px;color:#0000008a;overflow:hidden}.actions-box[_ngcontent-%COMP%]{margin-top:8px}.actions-box[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{margin-right:4px}"]}),i})();function We(i,o){1&i&&(e.TgZ(0,"div",12)(1,"mat-icon"),e._uU(2,"settings"),e.qZA(),e.TgZ(3,"span"),e._uU(4,"System"),e.qZA()())}function ze(i,o){if(1&i&&e._UZ(0,"app-system-info",13),2&i){const t=e.oxw().ngIf;e.Q6J("dialogSettings",t)}}function Ke(i,o){1&i&&(e.TgZ(0,"div",14)(1,"mat-icon"),e._uU(2,"star_border"),e.qZA(),e.TgZ(3,"span"),e._uU(4,"Apps"),e.qZA()())}function Xe(i,o){1&i&&e._UZ(0,"app-apps-list")}function je(i,o){1&i&&(e.TgZ(0,"div",15)(1,"mat-icon"),e._uU(2,"translate"),e.qZA(),e.TgZ(3,"span"),e._uU(4,"Languages"),e.qZA()())}function Ve(i,o){1&i&&e._UZ(0,"app-site-languages")}function et(i,o){1&i&&(e.TgZ(0,"div",16)(1,"mat-icon"),e._uU(2,"tune"),e.qZA(),e.TgZ(3,"span"),e._uU(4,"Extensions / Features"),e.qZA()())}function tt(i,o){1&i&&e._UZ(0,"app-license-info")}function nt(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-tab-group",5),e.NdJ("selectedTabChange",function(a){return e.CHM(t),e.oxw().changeTab(a)}),e.ALo(1,"async"),e.TgZ(2,"mat-tab"),e.YNc(3,We,5,0,"div",6),e.YNc(4,ze,1,1,"app-system-info",7),e.qZA(),e.TgZ(5,"mat-tab"),e.YNc(6,Ke,5,0,"div",8),e.YNc(7,Xe,1,0,"app-apps-list",9),e.qZA(),e.TgZ(8,"mat-tab"),e.YNc(9,je,5,0,"div",10),e.YNc(10,Ve,1,0,"app-site-languages",9),e.qZA(),e.TgZ(11,"mat-tab"),e.YNc(12,et,5,0,"div",11),e.YNc(13,tt,1,0,"app-license-info",9),e.qZA()()}if(2&i){const t=e.oxw();e.Q6J("selectedIndex",e.lcZ(1,1,t.tabIndex$))}}let it=(()=>{class i{constructor(t,n,a,l,f){this.dialogRef=t,this.router=n,this.route=a,this.context=l,this.appDialogConfigService=f,this.zoneId=this.context.zoneId,this.dialogSettings$=new p.X(void 0),this.tabs=["system","list","languages","license"],this.tabIndex$=this.router.events.pipe((0,g.h)(y=>y instanceof r.m2),(0,d.U)(()=>this.tabs.indexOf(this.route.snapshot.firstChild.url[0].path)),(0,g.h)(y=>y>=0),(0,v.O)(this.tabs.indexOf(this.route.snapshot.firstChild.url[0].path))),this.subscription=new m.w0}ngOnInit(){this.fetchDialogSettings(),this.refreshOnChildClosed()}ngOnDestroy(){this.dialogSettings$.complete(),this.subscription.unsubscribe()}closeDialog(){this.dialogRef.close()}changeTab(t){this.router.navigate([this.tabs[t.index]],{relativeTo:this.route})}fetchDialogSettings(){this.appDialogConfigService.getDialogSettings(0).subscribe(t=>{this.dialogSettings$.next(t)})}refreshOnChildClosed(){this.subscription.add(this.router.events.pipe((0,g.h)(t=>t instanceof r.m2),(0,v.O)(!!this.route.snapshot.firstChild.firstChild),(0,d.U)(()=>!!this.route.snapshot.firstChild.firstChild),(0,Z.G)(),(0,g.h)(([t,n])=>t&&!n)).subscribe(()=>{this.fetchDialogSettings()}))}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(C.so),e.Y36(r.F0),e.Y36(r.gz),e.Y36(A._),e.Y36(I.Kw))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-apps-management-nav"]],decls:11,vars:4,consts:[["appToggleDebug","",1,"nav-component-wrapper"],["mat-dialog-title",""],[1,"dialog-title-box"],["mat-icon-button","","tippy","Close dialog",3,"click"],["class","mat-tab-group-max-height","dynamicHeight","","color","accent",3,"selectedIndex","selectedTabChange",4,"ngIf"],["dynamicHeight","","color","accent",1,"mat-tab-group-max-height",3,"selectedIndex","selectedTabChange"],["class","mat-tab-label-box","tippy","System Info",4,"matTabLabel"],[3,"dialogSettings",4,"matTabContent"],["class","mat-tab-label-box","tippy","Apps",4,"matTabLabel"],[4,"matTabContent"],["class","mat-tab-label-box","tippy","Languages",4,"matTabLabel"],["class","mat-tab-label-box","tippy","Extensions and Features",4,"matTabLabel"],["tippy","System Info",1,"mat-tab-label-box"],[3,"dialogSettings"],["tippy","Apps",1,"mat-tab-label-box"],["tippy","Languages",1,"mat-tab-label-box"],["tippy","Extensions and Features",1,"mat-tab-label-box"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div"),e._uU(4),e.qZA(),e.TgZ(5,"button",3),e.NdJ("click",function(){return n.closeDialog()}),e.TgZ(6,"mat-icon"),e._uU(7,"close"),e.qZA()()()(),e._UZ(8,"router-outlet"),e.YNc(9,nt,14,3,"mat-tab-group",4),e.ALo(10,"async"),e.qZA()),2&t&&(e.xp6(4),e.hij("Manage Zone ",n.zoneId,""),e.xp6(5),e.Q6J("ngIf",e.lcZ(10,2,n.dialogSettings$)))},directives:[c.D,C.uh,u.lW,h.$,x.Hw,r.lC,_.O5,L.SP,L.uX,L.uD,L.Vc,oe,ve,be,Be],pipes:[_.Ov],styles:[""]}),i})()},3135:(S,b,s)=>{s.d(b,{Y:()=>C});var r=s(3184),p=s(6362),g=s(4770);function d(c,u){1&c&&r.GkF(0)}function v(c,u){if(1&c&&(r.TgZ(0,"mat-hint"),r.YNc(1,d,1,0,"ng-container",3),r.qZA()),2&c){r.oxw();const h=r.MAs(4);r.xp6(1),r.Q6J("ngTemplateOutlet",h)}}function m(c,u){1&c&&r.GkF(0)}function Z(c,u){if(1&c&&(r.TgZ(0,"mat-error"),r.YNc(1,m,1,0,"ng-container",3),r.qZA()),2&c){r.oxw();const h=r.MAs(4);r.xp6(1),r.Q6J("ngTemplateOutlet",h)}}function I(c,u){1&c&&r.Hsn(0)}const A=function(c){return{"hint-box__short":c}},e=["*"];let C=(()=>{class c{constructor(){this.isError=!1,this.isShort=!0}toggleIsShort(){this.isShort=!this.isShort}}return c.\u0275fac=function(h){return new(h||c)},c.\u0275cmp=r.Xpm({type:c,selectors:[["app-field-hint"]],inputs:{isError:"isError"},ngContentSelectors:e,decls:5,vars:6,consts:[[1,"hint-box",3,"ngClass","ngSwitch","click"],[4,"ngSwitchCase"],["content",""],[4,"ngTemplateOutlet"]],template:function(h,x){1&h&&(r.F$t(),r.TgZ(0,"div",0),r.NdJ("click",function(){return x.toggleIsShort()}),r.YNc(1,v,2,1,"mat-hint",1),r.YNc(2,Z,2,1,"mat-error",1),r.qZA(),r.YNc(3,I,1,0,"ng-template",null,2,r.W1O)),2&h&&(r.Q6J("ngClass",r.VKq(4,A,x.isShort))("ngSwitch",x.isError),r.xp6(1),r.Q6J("ngSwitchCase",!1),r.xp6(1),r.Q6J("ngSwitchCase",!0))},directives:[p.mk,p.RF,p.n9,g.bx,p.tP,g.TO],styles:[".hint-box[_ngcontent-%COMP%]{margin-top:4px}.hint-box[_ngcontent-%COMP%]   .mat-hint[_ngcontent-%COMP%], .hint-box[_ngcontent-%COMP%]   .mat-error[_ngcontent-%COMP%]{font-size:12px;display:block}.hint-box__short[_ngcontent-%COMP%]   .mat-hint[_ngcontent-%COMP%], .hint-box__short[_ngcontent-%COMP%]   .mat-error[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}"]}),c})()},5578:(S,b,s)=>{s.d(b,{m:()=>A});var r=s(5388),p=s(3184),g=s(2528),d=s(1130),v=s(785),m=s(6362),Z=s(5590);const I=function(e,C){return{"align-start":e,"align-end":C}};let A=(()=>{class e{constructor(c){this.snackBar=c}agInit(c){this.id=c.value,this.align="number"==typeof this.id?"end":"start",this.tooltip=c.tooltipGetter(c.data)}refresh(c){return!0}copy(){(0,r.v)(this.tooltip),this.snackBar.open("Copied to clipboard",null,{duration:2e3})}}return e.\u0275fac=function(c){return new(c||e)(p.Y36(g.ux))},e.\u0275cmp=p.Xpm({type:e,selectors:[["app-id-field"]],decls:5,vars:6,consts:[["matRipple","",1,"id-box","highlight",3,"tippy","ngClass","click"],[1,"id"],[1,"icon"]],template:function(c,u){1&c&&(p.TgZ(0,"div",0),p.NdJ("click",function(){return u.copy()}),p.TgZ(1,"span",1),p._uU(2),p.qZA(),p.TgZ(3,"mat-icon",2),p._uU(4,"file_copy"),p.qZA()()),2&c&&(p.Q6J("tippy",u.tooltip)("ngClass",p.WLB(3,I,"start"===u.align,"end"===u.align)),p.xp6(2),p.Oqu(u.id))},directives:[d.wG,v.$,m.mk,Z.Hw],styles:[".id-box[_ngcontent-%COMP%]{padding:0 8px;height:100%;display:flex;align-items:center}.id-box.align-start[_ngcontent-%COMP%]{justify-content:flex-start}.id-box.align-end[_ngcontent-%COMP%]{justify-content:flex-end}.id-box[_ngcontent-%COMP%]   .id[_ngcontent-%COMP%]{max-width:100%;text-overflow:ellipsis;overflow:hidden}.id-box[_ngcontent-%COMP%]:hover{text-decoration:none}.id-box[_ngcontent-%COMP%]:hover   .id[_ngcontent-%COMP%]{display:none}.id-box[_ngcontent-%COMP%]:not(:hover)   .icon[_ngcontent-%COMP%]{display:none}"]}),e})()},9119:(S,b,s)=>{s.d(b,{f:()=>r});const r={accentedSort:!0,animateRows:!0,enableCellTextSelection:!0,headerHeight:32,suppressScrollOnNewData:!0,valueCache:!0,defaultColDef:{filterParams:{newRowsAction:"keep"}},tooltipShowDelay:0,tooltipHideDelay:1e5,suppressMovableColumns:!0}},5469:(S,b,s)=>{s.d(b,{D:()=>g});var r=s(5266),p=s(3184);let g=(()=>{class d{constructor(m){this.globalConfigService=m}onClick(m){(navigator.platform.match("Mac")?m.metaKey:m.ctrlKey)&&m.shiftKey&&m.altKey&&(this.globalConfigService.toggleDebugEnabled(),window.getSelection().removeAllRanges())}}return d.\u0275fac=function(m){return new(m||d)(p.Y36(r.bE))},d.\u0275dir=p.lG2({type:d,selectors:[["","appToggleDebug",""]],hostBindings:function(m,Z){1&m&&p.NdJ("click",function(A){return Z.onClick(A)})}}),d})()},5388:(S,b,s)=>{function r(p){const g=document.createElement("textarea");g.value=p,g.setAttribute("readonly",""),g.style.position="absolute",g.style.left="-9999px",document.body.appendChild(g);const d=document.getSelection().rangeCount>0&&document.getSelection().getRangeAt(0);g.select(),document.execCommand("copy"),document.body.removeChild(g),d&&(document.getSelection().removeAllRanges(),document.getSelection().addRange(d))}s.d(b,{v:()=>r})}}]);
//# sourceMappingURL=https://sources.2sxc.org/13.06.00/ng-edit/projects_ng-dialogs_src_app_apps-management_apps-management-nav_apps-management-nav_component_ts.2fbee9605274fcc7.js.map