"use strict";(self.webpackChunkeav_ui=self.webpackChunkeav_ui||[]).push([["default-projects_eav-ui_src_app_permissions_index_ts","projects_eav-ui_src_app_permissions_permissions_module_ts","projects_eav-ui_src_app_permissions_permissions_component_ts"],{4272:(v,d,t)=>{t.d(d,{g:()=>h});var o=t(2847),s=t(5368),a=t(3184),u=t(8784),i=t(2425);let h=(()=>{class e{constructor(n,r,l){this.http=n,this.context=r,this.dnnContext=l}create(n,r){return this.http.post(`app/auto/data/${n}`,r,{params:{appId:this.context.appId,zoneId:this.context.zoneId}})}update(n,r,l){return this.http.post(`app/auto/data/${n}/${r}`,l,{params:{appId:this.context.appId,zoneId:this.context.zoneId}})}delete(n,r,l){return this.http.delete(this.dnnContext.$2sxc.http.apiUrl(o.Uo+"delete"),{params:{contentType:n,id:r.toString(),appId:this.context.appId.toString(),force:l.toString()}})}}return e.\u0275fac=function(n){return new(n||e)(a.LFG(u.eN),a.LFG(s._),a.LFG(i._y))},e.\u0275prov=a.Yz7({token:e,factory:e.\u0275fac}),e})()},325:(v,d,t)=>{t.d(d,{i:()=>s});var o=t(941);let s=(()=>{class a{static getUrl(i,h,e){return`permissions/${i}/${h}/${e}`}static getUrlApp(i){return this.getUrl(o.Zy.metadata.app.targetType,o.Zy.metadata.app.keyType,i.toString())}static getUrlAttribute(i){return this.getUrl(o.Zy.metadata.attribute.targetType,o.Zy.metadata.attribute.keyType,i.toString())}static getUrlContentType(i){return this.getUrlEntity(i)}static getUrlEntity(i){return this.getUrl(o.Zy.metadata.entity.targetType,o.Zy.metadata.entity.keyType,i)}static getUrlLanguage(i){return this.getUrl(o.Zy.metadata.language.targetType,o.Zy.metadata.language.keyType,i)}}return a.route={path:"permissions/:targetType/:keyType/:key",loadChildren:()=>t.e("projects_eav-ui_src_app_permissions_permissions_module_ts").then(t.bind(t,2965)).then(u=>u.PermissionsModule),data:{title:"Permissions"}},a})()},2925:(v,d,t)=>{t.d(d,{Do:()=>h.D,iK:()=>o.i,qQ:()=>e.q});var o=t(325),h=(t(3749),t(7261),t(61),t(2965),t(1667)),e=t(2023)},3749:(v,d,t)=>{t.d(d,{g:()=>s});var o=t(4929);const s={name:"SET_PERMISSIONS_DIALOG",initContext:!0,panelSize:"large",panelClass:null,getComponent(){return(0,o.mG)(this,void 0,void 0,function*(){const{PermissionsComponent:a}=yield Promise.all([t.e("default-projects_eav-ui_src_app_shared_directives_tippy_directive_ts"),t.e("projects_eav-ui_src_app_permissions_permissions_component_ts")]).then(t.bind(t,61));return a})}}},7261:(v,d,t)=>{t.d(d,{T:()=>e});var o=t(2977),s=t(2649),a=t(6167),u=t(3749),i=t(3184);const h=[{path:"",component:a.r,data:{dialog:u.g},children:[{matcher:s.eP,loadChildren:()=>Promise.all([t.e("default-projects_eav-ui_src_app_shared_directives_tippy_directive_ts"),t.e("default-projects_eav-ui_src_app_create-file-dialog_index_ts"),t.e("default-node_modules_angular_material_fesm2015_list_mjs"),t.e("default-projects_eav-ui_src_app_monaco-editor_index_ts-projects_eav-ui_src_app_shared_directi-e88d8b"),t.e("default-projects_eav-ui_src_app_edit_edit_module_ts"),t.e("default-node_modules_angular_cdk_fesm2015_drag-drop_mjs"),t.e("default-node_modules_angular_material_fesm2015_autocomplete_mjs"),t.e("default-node_modules_angular_material_fesm2015_slide-toggle_mjs"),t.e("default-node_modules_angular_material_fesm2015_badge_mjs-node_modules_angular_material_fesm20-df7c03"),t.e("common"),t.e("projects_eav-ui_src_app_features_features_module_ts-projects_eav-ui_src_app_shared_components-90acdb0")]).then(t.bind(t,7259)).then(p=>p.EditModule)},{matcher:s.lZ,loadChildren:()=>t.e("projects_eav-ui_src_app_edit_refresh-edit_module_ts").then(t.bind(t,8449)).then(p=>p.RefreshEditModule)}]}];let e=(()=>{class p{}return p.\u0275fac=function(r){return new(r||p)},p.\u0275mod=i.oAB({type:p}),p.\u0275inj=i.cJS({imports:[[o.Bz.forChild(h)],o.Bz]}),p})()},61:(v,d,t)=>{t.r(d),t.d(d,{PermissionsComponent:()=>U});var o=t(6317),s=t(60),a=t(2087),u=t(4153),i=t(941),h=t(2225),e=t(3184),p=t(1130),n=t(6190),r=t(5590);let l=(()=>{class P{agInit(c){this.params=c}refresh(c){return!0}deletePermission(){this.params.onDelete(this.params.data)}}return P.\u0275fac=function(c){return new(c||P)},P.\u0275cmp=e.Xpm({type:P,selectors:[["app-permissions-actions"]],decls:4,vars:0,consts:[[1,"actions-component"],["matRipple","","tippy","Delete",1,"like-button","highlight",3,"click"]],template:function(c,m){1&c&&(e.TgZ(0,"div",0)(1,"div",1),e.NdJ("click",function(){return m.deletePermission()}),e.TgZ(2,"mat-icon"),e._uU(3,"delete"),e.qZA()()())},directives:[p.wG,n.$,r.Hw],styles:[""]}),P})();var _=t(2023),E=t(2977),C=t(5758),M=t(2528),O=t(7317),f=t(1350),T=t(6362);let U=(()=>{class P extends s.H{constructor(c,m,g,D,I){super(c,m),this.router=c,this.route=m,this.dialogRef=g,this.permissionsService=D,this.snackBar=I,this.permissions$=new o.X(void 0),this.gridOptions=this.buildGridOptions(),this.targetType=parseInt(this.route.snapshot.paramMap.get("targetType"),10),this.keyType=this.route.snapshot.paramMap.get("keyType"),this.key=this.route.snapshot.paramMap.get("key"),this.prefills={[i.Zy.metadata.language.targetType]:{PermissionType:"language"}}}ngOnInit(){this.fetchPermissions(),this.subscription.add(this.refreshOnChildClosedShallow().subscribe(()=>{this.fetchPermissions()}))}ngOnDestroy(){this.permissions$.complete(),super.ngOnDestroy()}closeDialog(){this.dialogRef.close()}fetchPermissions(){this.permissionsService.getAll(this.targetType,this.keyType,this.key).subscribe(c=>{this.permissions$.next(c)})}editPermission(c){var m,g;let D;D=null==c?{items:[Object.assign({ContentTypeName:i.Zy.contentTypes.permissions,For:Object.assign(Object.assign(Object.assign({Target:null!==(g=null===(m=Object.values(i.Zy.metadata).find(A=>A.targetType===this.targetType))||void 0===m?void 0:m.target)&&void 0!==g?g:this.targetType.toString(),TargetType:this.targetType},this.keyType===i.Zy.keyTypes.guid&&{Guid:this.key}),this.keyType===i.Zy.keyTypes.number&&{Number:parseInt(this.key,10)}),this.keyType===i.Zy.keyTypes.string&&{String:this.key})},this.prefills[this.targetType]&&{Prefill:this.prefills[this.targetType]})]}:{items:[{EntityId:c.Id}]};const I=(0,h.f)(D);this.router.navigate([`edit/${I}`],{relativeTo:this.route})}deletePermission(c){!confirm(`Delete '${c.Title}' (${c.Id})?`)||(this.snackBar.open("Deleting..."),this.permissionsService.delete(c.Id).subscribe(()=>{this.snackBar.open("Deleted",null,{duration:2e3}),this.fetchPermissions()}))}buildGridOptions(){return Object.assign(Object.assign({},u.f),{columnDefs:[{headerName:"ID",field:"Id",width:70,headerClass:"dense",cellClass:"id-action no-padding no-outline".split(" "),sortable:!0,filter:"agNumberColumnFilter",valueGetter:m=>m.data.Id,cellRenderer:a.m,cellRendererParams:{tooltipGetter:g=>`ID: ${g.Id}\nGUID: ${g.Guid}`}},{field:"Name",flex:2,minWidth:250,cellClass:"primary-action highlight".split(" "),sortable:!0,sort:"asc",filter:"agTextColumnFilter",onCellClicked:m=>{this.editPermission(m.data)},valueGetter:m=>m.data.Title},{field:"Identity",flex:2,minWidth:250,cellClass:"no-outline",sortable:!0,filter:"agTextColumnFilter",valueGetter:m=>m.data.Identity},{field:"Condition",flex:2,minWidth:250,cellClass:"no-outline",sortable:!0,filter:"agTextColumnFilter",valueGetter:m=>m.data.Condition},{field:"Grant",width:70,headerClass:"dense",cellClass:"no-outline",sortable:!0,filter:"agTextColumnFilter",valueGetter:m=>m.data.Grant},{width:42,cellClass:"secondary-action no-padding".split(" "),pinned:"right",cellRenderer:l,cellRendererParams:(()=>({onDelete:g=>this.deletePermission(g)}))()}]})}}return P.\u0275fac=function(c){return new(c||P)(e.Y36(E.F0),e.Y36(E.gz),e.Y36(C.so),e.Y36(_.q),e.Y36(M.ux))},P.\u0275cmp=e.Xpm({type:P,selectors:[["app-permissions"]],features:[e.qOj],decls:16,vars:4,consts:[[1,"nav-component-wrapper"],["mat-dialog-title",""],[1,"dialog-title-box"],["mat-icon-button","","tippy","Close dialog",3,"click"],[1,"grid-wrapper"],[1,"ag-theme-material",3,"rowData","gridOptions"],[1,"grid-more-actions-box"],["mat-fab","","mat-elevation-z24","","tippy","Create a new permission",1,"grid-fab",3,"click"]],template:function(c,m){1&c&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div"),e._uU(4,"Permissions"),e.qZA(),e.TgZ(5,"button",3),e.NdJ("click",function(){return m.closeDialog()}),e.TgZ(6,"mat-icon"),e._uU(7,"close"),e.qZA()()()(),e._UZ(8,"router-outlet"),e.TgZ(9,"div",4),e._UZ(10,"ag-grid-angular",5),e.ALo(11,"async"),e._UZ(12,"div",6),e.TgZ(13,"button",7),e.NdJ("click",function(){return m.editPermission(null)}),e.TgZ(14,"mat-icon"),e._uU(15,"add"),e.qZA()()()()),2&c&&(e.xp6(10),e.Q6J("rowData",e.lcZ(11,2,m.permissions$))("gridOptions",m.gridOptions))},directives:[C.uh,O.lW,n.$,r.Hw,E.lC,f.N8],pipes:[T.Ov],styles:[""]}),P})()},2965:(v,d,t)=>{t.r(d),t.d(d,{PermissionsModule:()=>M});var o=t(6362),s=t(7317),a=t(1130),u=t(5758),i=t(5590),h=t(2528),e=t(4272),p=t(3436),n=t(5368),r=t(3135),l=t(7261),_=t(1667),E=t(2023),C=t(3184);let M=(()=>{class O{}return O.\u0275fac=function(T){return new(T||O)},O.\u0275mod=C.oAB({type:O}),O.\u0275inj=C.cJS({providers:[n._,E.q,_.D,e.g],imports:[[o.ez,l.T,r.q,u.Is,s.ot,i.Ps,p.o,a.si,h.ZX]]}),O})()},1667:(v,d,t)=>{t.d(d,{D:()=>h});var o=t(5368),s=t(3184),a=t(8784),u=t(2425);let h=(()=>{class e{constructor(n,r,l){this.http=n,this.context=r,this.dnnContext=l}getMetadata(n,r,l,_){return this.http.get(this.dnnContext.$2sxc.http.apiUrl("admin/metadata/get"),{params:Object.assign({appId:this.context.appId.toString(),targetType:n.toString(),keyType:r,key:l.toString()},_&&{contentType:_})})}}return e.\u0275fac=function(n){return new(n||e)(s.LFG(a.eN),s.LFG(o._),s.LFG(u._y))},e.\u0275prov=s.Yz7({token:e,factory:e.\u0275fac}),e})()},2023:(v,d,t)=>{t.d(d,{q:()=>h});var o=t(635),s=t(4272),a=t(941),u=t(1667),i=t(3184);let h=(()=>{class e{constructor(n,r){this.metadataService=n,this.entitiesService=r}getAll(n,r,l){return this.metadataService.getMetadata(n,r,l,a.Zy.contentTypes.permissions).pipe((0,o.U)(_=>_.Items))}delete(n){return this.entitiesService.delete(a.Zy.contentTypes.permissions,n,!1)}}return e.\u0275fac=function(n){return new(n||e)(i.LFG(u.D),i.LFG(s.g))},e.\u0275prov=i.Yz7({token:e,factory:e.\u0275fac}),e})()},60:(v,d,t)=>{t.d(d,{H:()=>p});var o=t(2977),s=t(116),a=t(4874),u=t(635),i=t(679),h=t(5904),e=t(3184);let p=(()=>{class n extends h.f{constructor(l,_){super(),this.router=l,this.route=_}ngOnDestroy(){super.ngOnDestroy()}refreshOnChildClosedDeep(){return this.router.events.pipe((0,s.h)(l=>l instanceof o.m2),(0,a.O)(!!this.route.snapshot.firstChild.firstChild),(0,u.U)(()=>!!this.route.snapshot.firstChild.firstChild),(0,i.G)(),(0,s.h)(([l,_])=>l&&!_))}refreshOnChildClosedShallow(){return this.router.events.pipe((0,s.h)(l=>l instanceof o.m2),(0,a.O)(!!this.route.snapshot.firstChild),(0,u.U)(()=>!!this.route.snapshot.firstChild),(0,i.G)(),(0,s.h)(([l,_])=>l&&!_))}}return n.\u0275fac=function(l){return new(l||n)(e.Y36(o.F0),e.Y36(o.gz))},n.\u0275dir=e.lG2({type:n,features:[e.qOj]}),n})()},2087:(v,d,t)=>{t.d(d,{m:()=>n});var o=t(9673),s=t(3184),a=t(2528),u=t(1130),i=t(6190),h=t(6362),e=t(5590);const p=function(r,l){return{"align-start":r,"align-end":l}};let n=(()=>{class r{constructor(_){this.snackBar=_}agInit(_){this.id=_.value,this.align="number"==typeof this.id?"end":"start",this.tooltip=_.tooltipGetter(_.data)}refresh(_){return!0}copy(){(0,o.v)(this.tooltip),this.snackBar.open("Copied to clipboard",null,{duration:2e3})}}return r.\u0275fac=function(_){return new(_||r)(s.Y36(a.ux))},r.\u0275cmp=s.Xpm({type:r,selectors:[["app-id-field"]],decls:5,vars:6,consts:[["matRipple","",1,"id-box","highlight",3,"tippy","ngClass","click"],[1,"id"],[1,"icon"]],template:function(_,E){1&_&&(s.TgZ(0,"div",0),s.NdJ("click",function(){return E.copy()}),s.TgZ(1,"span",1),s._uU(2),s.qZA(),s.TgZ(3,"mat-icon",2),s._uU(4,"file_copy"),s.qZA()()),2&_&&(s.Q6J("tippy",E.tooltip)("ngClass",s.WLB(3,p,"start"===E.align,"end"===E.align)),s.xp6(2),s.Oqu(E.id))},directives:[u.wG,i.$,h.mk,e.Hw],styles:[".id-box[_ngcontent-%COMP%]{padding:0 8px;height:100%;display:flex;align-items:center}.id-box.align-start[_ngcontent-%COMP%]{justify-content:flex-start}.id-box.align-end[_ngcontent-%COMP%]{justify-content:flex-end}.id-box[_ngcontent-%COMP%]   .id[_ngcontent-%COMP%]{max-width:100%;text-overflow:ellipsis;overflow:hidden}.id-box[_ngcontent-%COMP%]:hover{text-decoration:none}.id-box[_ngcontent-%COMP%]:hover   .id[_ngcontent-%COMP%]{display:none}.id-box[_ngcontent-%COMP%]:not(:hover)   .icon[_ngcontent-%COMP%]{display:none}"]}),r})()},4153:(v,d,t)=>{t.d(d,{f:()=>o});const o={accentedSort:!0,animateRows:!0,enableCellTextSelection:!0,headerHeight:32,suppressScrollOnNewData:!0,valueCache:!0,defaultColDef:{filterParams:{newRowsAction:"keep"}},tooltipShowDelay:0,tooltipHideDelay:1e5,suppressMovableColumns:!0}},9673:(v,d,t)=>{function o(s){const a=document.createElement("textarea");a.value=s,a.setAttribute("readonly",""),a.style.position="absolute",a.style.left="-9999px",document.body.appendChild(a);const u=document.getSelection().rangeCount>0&&document.getSelection().getRangeAt(0);a.select(),document.execCommand("copy"),document.body.removeChild(a),u&&(document.getSelection().removeAllRanges(),document.getSelection().addRange(u))}t.d(d,{v:()=>o})}}]);
//# sourceMappingURL=https://sources.2sxc.org/15.02.00/ng-edit/default-projects_eav-ui_src_app_permissions_index_ts.d62649201795f4f4.js.map