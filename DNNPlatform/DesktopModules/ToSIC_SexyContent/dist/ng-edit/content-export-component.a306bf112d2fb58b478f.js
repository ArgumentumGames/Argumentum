(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{"7lgs":function(e,t,n){"use strict";n.r(t),n.d(t,"ContentExportComponent",(function(){return y}));var a=n("D57K"),o=n("C05f"),c=n("P4Xx"),r=n("EM62"),i=n("OZ4H"),s=n("sEIs"),l=n("Bwh1"),g=n("KoVM"),b=n("S36y"),u=n("2kYt"),p=n("nIj0"),d=n("29Wa"),f=n("R7+U"),m=n("mFH5"),h=n("F1o0"),R=n("PBFl");function S(e,t){if(1&e&&(r.Sb(0,"mat-option",24),r.Oc(1),r.Rb()),2&e){var n=t.$implicit;r.kc("value",n.key),r.Ab(1),r.Pc(n.key)}}function v(e,t){if(1&e&&(r.Sb(0,"mat-radio-button",25),r.Oc(1),r.Rb()),2&e){var n=r.ec(2);r.Ab(1),r.Qc(" Export selected ",n.itemIds.length," items ")}}function x(e,t){if(1&e){var n=r.Tb();r.Sb(0,"form",5,6),r.Sb(2,"div",7),r.Sb(3,"div"),r.Sb(4,"mat-form-field",8),r.Sb(5,"mat-label"),r.Oc(6,"Languages"),r.Rb(),r.Sb(7,"mat-select",9),r.ac("ngModelChange",(function(e){return r.Ac(n),r.ec().formValues.language=e})),r.Sb(8,"mat-option",10),r.Oc(9,"All"),r.Rb(),r.Mc(10,S,2,2,"mat-option",11),r.Rb(),r.Rb(),r.Rb(),r.Sb(11,"div"),r.Sb(12,"p",12),r.Oc(13,"Export data"),r.Rb(),r.Sb(14,"mat-radio-group",13),r.ac("ngModelChange",(function(e){return r.Ac(n),r.ec().formValues.recordExport=e})),r.Sb(15,"mat-radio-button",14),r.Oc(16,"No, just export blank data schema (for new data import) "),r.Rb(),r.Sb(17,"mat-radio-button",15),r.Oc(18,"Yes, export all content-items"),r.Rb(),r.Mc(19,v,2,1,"mat-radio-button",16),r.Rb(),r.Rb(),r.Sb(20,"div"),r.Sb(21,"p",12),r.Oc(22,"Value references to other languages"),r.Rb(),r.Sb(23,"mat-radio-group",17),r.ac("ngModelChange",(function(e){return r.Ac(n),r.ec().formValues.languageReferences=e})),r.Sb(24,"mat-radio-button",18),r.Oc(25,"Keep references to other languages (for re-import) "),r.Rb(),r.Sb(26,"mat-radio-button",19),r.Oc(27,"Replace references with values"),r.Rb(),r.Rb(),r.Rb(),r.Sb(28,"div"),r.Sb(29,"p",12),r.Oc(30,"File / page references"),r.Rb(),r.Sb(31,"mat-radio-group",20),r.ac("ngModelChange",(function(e){return r.Ac(n),r.ec().formValues.resourcesReferences=e})),r.Sb(32,"mat-radio-button",18),r.Oc(33,"Keep references (for re-import, for example Page:4711) "),r.Rb(),r.Sb(34,"mat-radio-button",19),r.Oc(35,"Replace references with real URLs (for example /Portals/0...) "),r.Rb(),r.Rb(),r.Rb(),r.Rb(),r.Sb(36,"div",21),r.Sb(37,"button",22),r.ac("click",(function(){return r.Ac(n),r.ec().closeDialog()})),r.Oc(38,"Cancel"),r.Rb(),r.Sb(39,"button",23),r.ac("click",(function(){return r.Ac(n),r.ec().exportContent()})),r.Oc(40," Export Data "),r.Rb(),r.Rb(),r.Rb()}if(2&e){var a=r.yc(1),o=r.ec();r.Ab(7),r.kc("ngModel",o.formValues.language),r.Ab(3),r.kc("ngForOf",o.languages),r.Ab(4),r.kc("ngModel",o.formValues.recordExport),r.Ab(5),r.kc("ngIf",o.hasIdList),r.Ab(4),r.kc("ngModel",o.formValues.languageReferences)("disabled","Blank"===o.formValues.recordExport),r.Ab(8),r.kc("ngModel",o.formValues.resourcesReferences)("disabled","Blank"===o.formValues.recordExport),r.Ab(8),r.kc("disabled",!a.form.valid)}}var y=function(){function e(e,t,n,a,c){this.dialogRef=e,this.route=t,this.contentExportService=n,this.appDialogConfigService=a,this.contentTypesService=c,this.hostClass="dialog-component",this.hasIdList=!1,this.loading$=new o.a(!1),this.contentType$=new o.a(null),this.contentTypeStaticName=this.route.snapshot.paramMap.get("contentTypeStaticName");var r=this.route.snapshot.paramMap.get("selectedIds");this.hasIdList=!!r,this.hasIdList&&(this.itemIds=r.split(",").map((function(e){return parseInt(e,10)})))}return e.prototype.ngOnInit=function(){var e=this;this.loading$.next(!0);var t=this.contentTypesService.retrieveContentType(this.contentTypeStaticName),n=this.appDialogConfigService.getDialogSettings();Object(c.a)([t,n]).subscribe((function(t){var n=Object(a.f)(t,2),o=n[1];e.contentType$.next(n[0]);var c=o.Context.Language.All;e.languages=Object.keys(c).map((function(e){return{key:e,name:c[e]}})),e.formValues={defaultLanguage:o.Context.Language.Primary,contentTypeStaticName:e.contentTypeStaticName,language:"",recordExport:e.hasIdList?"Selection":"All",languageReferences:"Link",resourcesReferences:"Link"},e.loading$.next(!1)}))},e.prototype.ngOnDestroy=function(){this.contentType$.complete(),this.loading$.complete()},e.prototype.closeDialog=function(){this.dialogRef.close()},e.prototype.exportContent=function(){this.contentExportService.exportContent(this.formValues,this.hasIdList&&"Selection"===this.formValues.recordExport?this.itemIds:null)},e.\u0275fac=function(t){return new(t||e)(r.Mb(i.g),r.Mb(s.a),r.Mb(l.a),r.Mb(g.a),r.Mb(b.a))},e.\u0275cmp=r.Gb({type:e,selectors:[["app-content-export"]],hostVars:1,hostBindings:function(e,t){2&e&&r.Vb("className",t.hostClass)},decls:11,vars:6,consts:[["mat-dialog-title",""],[1,"dialog-title-box"],[1,"dialog-description"],["href","https://2sxc.org/help","target","_blank"],["class","dialog-form",4,"ngIf"],[1,"dialog-form"],["ngForm","ngForm"],[1,"dialog-form-content","fancy-scrollbar-light"],["appearance","standard","color","accent"],["name","Language",3,"ngModel","ngModelChange"],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"field-label"],["name","RecordExport",3,"ngModel","ngModelChange"],["value","Blank"],["value","All"],["value","Selection",4,"ngIf"],["name","LanguageReferences",3,"ngModel","disabled","ngModelChange"],["value","Link"],["value","Resolve"],["name","ResourcesReferences",3,"ngModel","disabled","ngModelChange"],[1,"dialog-form-actions"],["mat-raised-button","",3,"click"],["mat-raised-button","","color","accent",3,"disabled","click"],[3,"value"],["value","Selection"]],template:function(e,t){var n;1&e&&(r.Sb(0,"div",0),r.Sb(1,"div",1),r.Oc(2),r.fc(3,"async"),r.Rb(),r.Rb(),r.Sb(4,"p",2),r.Oc(5," This will generate an XML file which you can edit in Excel. If you just want to import new data, use this to export the schema that you can then fill in using Excel. Please visit "),r.Sb(6,"a",3),r.Oc(7,"https://2sxc.org/help"),r.Rb(),r.Oc(8," for more instructions.\n"),r.Rb(),r.Mc(9,x,41,9,"form",4),r.fc(10,"async")),2&e&&(r.Ab(2),r.Qc("Export ",null==(n=r.gc(3,2,t.contentType$))?null:n.Name,""),r.Ab(7),r.kc("ngIf",!1===r.gc(10,4,t.loading$)))},directives:[i.h,u.t,p.H,p.t,p.u,d.c,d.g,f.a,p.s,p.v,m.m,u.s,h.b,h.a,R.b],pipes:[u.b],styles:[".field-label[_ngcontent-%COMP%]{font-size:18px;margin:24px 0 0}.mat-radio-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin:8px 0}.mat-radio-button[_ngcontent-%COMP%]{margin:5px;font-size:14px}"],changeDetection:0}),e}()}}]);
//# sourceMappingURL=https://sources.2sxc.org/11.11.04/ng-edit/content-export-component.a306bf112d2fb58b478f.js.map