"use strict";(self.webpackChunkeav_ui=self.webpackChunkeav_ui||[]).push([["projects_eav-ui_src_app_apps-management_add-app-from-folder_add-app-from-folder_component_ts"],{1205:(b,f,n)=>{n.r(f),n.d(f,{AddAppFromFolderComponent:()=>$});var d=n(253),O=n(6317),t=n(4874),A=n(2673),o=n(3158),y=n(745),Z=n(1203),T=n(8977),M=n(5457),E=n(5904),P=n(4153),S=n(5446),e=n(3184),w=n(5590),N=n(6190);let p=(()=>{class s{agInit(i){this.name=i.value,this.tooltip=i.tooltipGetter(i.data)}refresh(i){return!0}}return s.\u0275fac=function(i){return new(i||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-app-name-show"]],decls:5,vars:2,consts:[[1,"name-box"],[1,"info-icon",3,"tippy"]],template:function(i,l){1&i&&(e.TgZ(0,"div",0)(1,"span"),e._uU(2),e.qZA(),e.TgZ(3,"mat-icon",1),e._uU(4,"info"),e.qZA()()),2&i&&(e.xp6(2),e.Oqu(l.name),e.xp6(1),e.Q6J("tippy",l.tooltip))},directives:[w.Hw,N.$],styles:[".name-box[_ngcontent-%COMP%]{display:flex;align-items:center}.info-icon[_ngcontent-%COMP%]{margin-left:7px;margin-bottom:3px}"]}),s})(),v=(()=>{class s{agInit(i){this.params=i}refresh(i){return!0}onChange(i){this.params.onChange(this.params.data,i.currentTarget.checked)}}return s.\u0275fac=function(i){return new(i||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-checkbox-cell"]],decls:2,vars:2,consts:[[1,"checkbox-box"],["type","checkbox",1,"checkbox-input",3,"disabled","checked","change"]],template:function(i,l){1&i&&(e.TgZ(0,"div",0)(1,"input",1),e.NdJ("change",function(U){return l.onChange(U)}),e.qZA()()),2&i&&(e.xp6(1),e.Q6J("disabled",l.params.isDisabled)("checked",l.params.value))},styles:[".checkbox-box[_ngcontent-%COMP%]{height:100%;display:flex;align-items:center}.checkbox-input[_ngcontent-%COMP%]{height:15px;width:15px}"]}),s})();var c=n(5758),F=n(2528),I=n(5916),D=n(6362),r=n(9669),g=n(1350),a=n(7317);function m(s,u){1&s&&(e.TgZ(0,"p",4),e._uU(1," Nothing to show. All apps in the 2sxc folder are already installed. "),e.qZA())}function C(s,u){if(1&s&&(e.TgZ(0,"div",10),e._UZ(1,"ag-grid-angular",11),e.qZA()),2&s){const i=e.oxw().ngIf,l=e.oxw();e.xp6(1),e.Q6J("rowData",i.pendingApps)("gridOptions",l.gridOptions)}}function h(s,u){if(1&s){const i=e.EpF();e.ynx(0),e.TgZ(1,"div",1)(2,"div",2),e._uU(3,"Add App from Folder"),e.qZA()(),e._UZ(4,"app-feature-text-info",3),e.TgZ(5,"p",4),e._uU(6," Select an app from the apps-folder which has been copied there (or git-cloned) but not installed yet. "),e.qZA(),e.YNc(7,m,2,0,"p",5),e.YNc(8,C,2,2,"div",6),e.TgZ(9,"div",7)(10,"button",8),e.NdJ("click",function(){return e.CHM(i),e.oxw().closeDialog()}),e._uU(11," Cancel "),e.qZA(),e.TgZ(12,"button",9),e.NdJ("click",function(){return e.CHM(i),e.oxw().install()}),e._uU(13," Install "),e.qZA()(),e.BQk()}if(2&s){const i=u.ngIf,l=e.oxw();e.xp6(4),e.Q6J("featureNameId","AppSyncWithSiteFiles"),e.xp6(3),e.Q6J("ngIf",0==(null==i.pendingApps?null:i.pendingApps.length)),e.xp6(1),e.Q6J("ngIf",(null==i.pendingApps?null:i.pendingApps.length)>0),e.xp6(4),e.Q6J("disabled",0===l.pendingApps.length||l.installing)}}const _=function(s){return{pendingApps:s}};let $=(()=>{class s extends E.f{constructor(i,l,x,U){super(),this.dialogRef=i,this.appsListService=l,this.snackBar=x,this.featuresService=U,this.hostClass="dialog-component",this.gridOptions=this.buildGridOptions(),this.pendingApps=[],this.installing=!1,this.refreshApps$=new d.x,this.isAddFromFolderEnabled$=new O.X(!1)}ngOnInit(){this.pendingApps$=this.refreshApps$.pipe((0,t.O)(void 0),(0,A.w)(()=>this.appsListService.getPendingApps().pipe((0,o.K)(()=>(0,y.of)(void 0)))),(0,Z.B)()),this.subscription.add(this.featuresService.isEnabled$(M.C.AppSyncWithSiteFiles).pipe((0,T.x)()).subscribe(this.isAddFromFolderEnabled$))}ngOnDestroy(){this.refreshApps$.complete(),super.ngOnDestroy()}closeDialog(){this.dialogRef.close()}onChange(i,l){l?this.pendingApps.push(i):this.pendingApps.splice(this.pendingApps.indexOf(i),1)}install(){this.installing=!0,this.snackBar.open("Installing",void 0,{duration:2e3}),this.appsListService.installPendingApps(this.pendingApps).subscribe({error:()=>{this.installing=!1,this.snackBar.open("Failed to install app. Please check console for more information",void 0,{duration:3e3})},next:()=>{this.installing=!1,this.snackBar.open("Installed app",void 0,{duration:2e3}),this.closeDialog()}})}buildGridOptions(){return Object.assign(Object.assign({},P.f),{columnDefs:[{field:"",width:40,cellClass:"no-outline",sortable:!0,cellRenderer:v,cellRendererParams:()=>({isDisabled:!this.isAddFromFolderEnabled$.value,onChange:(x,U)=>this.onChange(x,U)})},{field:"Name",flex:1,cellClass:"no-outline",sortable:!0,sort:"asc",filter:"agTextColumnFilter",cellRenderer:p,cellRendererParams:{tooltipGetter:x=>`Server folder: ${x.ServerFolder}\nFolder: ${x.Folder}\nVersion: ${x.Version}\nDescription: ${x.Description}`}}]})}}return s.\u0275fac=function(i){return new(i||s)(e.Y36(c.so),e.Y36(S.A),e.Y36(F.ux),e.Y36(I.k))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-add-app-from-folder"]],hostVars:1,hostBindings:function(i,l){2&i&&e.Ikx("className",l.hostClass)},features:[e.qOj],decls:2,vars:5,consts:[[4,"ngIf"],["mat-dialog-title",""],[1,"dialog-title-box"],[3,"featureNameId"],[1,"dialog-description"],["class","dialog-description",4,"ngIf"],["class","grid-wrapper",4,"ngIf"],[1,"dialog-component-actions"],["type","button","mat-raised-button","",3,"click"],["type","button","mat-raised-button","","color","accent",3,"disabled","click"],[1,"grid-wrapper"],[1,"ag-theme-material",2,"height","200px","width","auto",3,"rowData","gridOptions"]],template:function(i,l){1&i&&(e.YNc(0,h,14,4,"ng-container",0),e.ALo(1,"async")),2&i&&e.Q6J("ngIf",e.VKq(3,_,e.lcZ(1,1,l.pendingApps$)))},directives:[D.O5,c.uh,r.B,g.N8,a.lW],pipes:[D.Ov],styles:[""]}),s})()},5457:(b,f,n)=>{n.d(f,{C:()=>d});const d={AppSyncWithSiteFiles:"AppSyncWithSiteFiles",WysiwygPasteFormatted:"WysiwygPasteFormatted",PasteImageFromClipboard:"PasteImageFromClipboard",EditUiShowNotes:"EditUiShowNotes",EditUiShowMetadataFor:"EditUiShowMetadataFor",NoSponsoredByToSic:"NoSponsoredByToSic",EditUiTranslateWithGoogle:"EditUiTranslateWithGoogle",LightSpeed:"LightSpeedOutputCache",ContentSecurityPolicy:"ContentSecurityPolicy",PermissionsByLanguage:"PermissionsByLanguage"}},9669:(b,f,n)=>{n.d(f,{B:()=>N});var d=n(1329),O=n(6317),t=n(6562),A=n(635),o=n(3184),y=n(5758),Z=n(5916),T=n(6362),M=n(6190),E=n(5590),P=n(7514);function S(p,v){if(1&p){const c=o.EpF();o.TgZ(0,"div",3),o.NdJ("click",function(){return o.CHM(c),o.oxw(2).openDialog()}),o.ALo(1,"translate"),o.TgZ(2,"mat-icon"),o._uU(3),o.qZA(),o.TgZ(4,"div",4)(5,"div",5),o._uU(6),o.ALo(7,"translate"),o.qZA(),o.TgZ(8,"div",6),o._uU(9),o.ALo(10,"translate"),o.qZA()()()}if(2&p){const c=o.oxw().ngIf;o.Q6J("tippy",o.xi3(1,7,"Features.Tooltip",c.feature)),o.xp6(2),o.Gre("icon icon-",c.icon,""),o.xp6(1),o.Oqu(c.icon),o.xp6(3),o.Oqu(o.lcZ(7,10,"Features.FeatureNotActivated")),o.xp6(3),o.Oqu(o.lcZ(10,12,"Features.ClickToFindOutMore"))}}function e(p,v){if(1&p&&(o.ynx(0),o.YNc(1,S,11,14,"div",2),o.BQk()),2&p){const c=v.ngIf;o.xp6(1),o.Q6J("ngIf",c.show)}}function w(p,v){1&p&&(o.TgZ(0,"div"),o._uU(1,"loading..."),o.qZA())}let N=(()=>{class p extends d.B{constructor(c,F,I,D){super(c,F,D,I),this.asInfo$=new O.X(!1),this.data$=(0,t.a)([this.feature$,this.asInfo$,this.show$]).pipe((0,A.U)(([r,g,a])=>({feature:r,icon:g?"info":"warning",show:a})))}set asInfo(c){this.asInfo$.next(c)}}return p.\u0275fac=function(c){return new(c||p)(o.Y36(y.uw),o.Y36(o.s_b),o.Y36(Z.k),o.Y36(o.sBO))},p.\u0275cmp=o.Xpm({type:p,selectors:[["app-feature-text-info"]],inputs:{asInfo:"asInfo"},features:[o.qOj],decls:4,vars:4,consts:[[4,"ngIf","ngIfElse"],["loading",""],["class","feature-text-info",3,"tippy","click",4,"ngIf"],[1,"feature-text-info",3,"tippy","click"],[1,"feature-text-info-content"],[1,"feature-text-info-title"],[1,"feature-text-info-subtitle"]],template:function(c,F){if(1&c&&(o.YNc(0,e,2,1,"ng-container",0),o.ALo(1,"async"),o.YNc(2,w,2,0,"ng-template",null,1,o.W1O)),2&c){const I=o.MAs(3);o.Q6J("ngIf",o.lcZ(1,2,F.data$))("ngIfElse",I)}},directives:[T.O5,M.$,E.Hw],pipes:[T.Ov,P.X$],styles:[".feature-text-info[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:flex-start;cursor:pointer;box-shadow:0 2px 1px -1px #0003,0 1px 1px #00000024,0 1px 3px #0000001f;border-radius:4px;padding:5px;margin-bottom:10px}.feature-text-info-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-start;justify-content:center;margin-left:10px}.feature-text-info-title[_ngcontent-%COMP%]{font-size:large}.feature-text-info-subtitle[_ngcontent-%COMP%]{font-size:medium}.icon[_ngcontent-%COMP%]{font-size:45px;height:-moz-fit-content;height:fit-content;width:-moz-fit-content;width:fit-content}.icon-warning[_ngcontent-%COMP%]{color:red}"]}),p})()},1329:(b,f,n)=>{n.d(f,{B:()=>D});var d=n(5758),O=n(9673),t=n(3184),A=n(2528),o=n(3265),y=n(6362),Z=n(6190),T=n(7317),M=n(5590),E=n(1555),P=n(7514);function S(r,g){if(1&r){const a=t.EpF();t.TgZ(0,"div",5)(1,"div",6),t._uU(2,"ID"),t.qZA(),t.TgZ(3,"div",12)(4,"span",13),t.NdJ("click",function(){const h=t.CHM(a).ngIf;return t.oxw(2).copyToClipboard(h)}),t._uU(5),t.qZA()()()}if(2&r){const a=g.ngIf;t.xp6(4),t.Q6J("tippy",a),t.xp6(1),t.Oqu(a)}}function e(r,g){if(1&r){const a=t.EpF();t.TgZ(0,"button",14),t.NdJ("click",function(){const h=t.CHM(a).ngIf;return t.oxw(2).findOutMore(h)}),t.TgZ(1,"mat-icon"),t._uU(2,"open_in_new"),t.qZA(),t._uU(3),t.ALo(4,"translate"),t.qZA()}2&r&&(t.xp6(3),t.hij(" ",t.lcZ(4,1,"Features.FindOutMore")," "))}function w(r,g){if(1&r){const a=t.EpF();t.TgZ(0,"div")(1,"div",1)(2,"div",2)(3,"div"),t._uU(4),t.qZA()()(),t._UZ(5,"p",3),t.ALo(6,"safeHtml"),t.TgZ(7,"div",4)(8,"div",5)(9,"div",6),t._uU(10),t.ALo(11,"translate"),t.qZA(),t.TgZ(12,"div",7)(13,"span"),t._uU(14),t.ALo(15,"translate"),t.qZA()()(),t.YNc(16,S,6,2,"div",8),t.qZA(),t.TgZ(17,"div",9),t.YNc(18,e,5,3,"button",10),t.TgZ(19,"button",11),t.NdJ("click",function(){return t.CHM(a),t.oxw().closeDialog()}),t._uU(20),t.ALo(21,"translate"),t.qZA()()()}if(2&r){const a=g.ngIf;t.xp6(4),t.Oqu(a.Name),t.xp6(1),t.Q6J("innerHtml",t.lcZ(6,7,a.Description),t.oJD),t.xp6(5),t.Oqu(t.lcZ(11,9,"Features.Status")),t.xp6(4),t.Oqu(t.lcZ(15,11,a.Enabled?"Features.Active":"Features.NotActive")),t.xp6(2),t.Q6J("ngIf",a.NameId),t.xp6(2),t.Q6J("ngIf",a.Link),t.xp6(2),t.hij(" ",t.lcZ(21,13,"Features.Close")," ")}}let N=(()=>{class r{constructor(a,m,C,h){this.dialogData=a,this.dialogRef=m,this.snackBar=C,this.featureDetailService=h,this.feature$=this.featureDetailService.getFeatureDetails(a)}ngOnInit(){}copyToClipboard(a){(0,O.v)(a),this.snackBar.open("Copied to clipboard",null,{duration:2e3})}findOutMore(a){window.open(a,"_blank")}closeDialog(){this.dialogRef.close()}}return r.\u0275fac=function(a){return new(a||r)(t.Y36(d.WI),t.Y36(d.so),t.Y36(A.ux),t.Y36(o.f))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-feature-info-dialog"]],decls:2,vars:3,consts:[[4,"ngIf"],["mat-dialog-title",""],[1,"dialog-title-box"],[1,"dialog-description",3,"innerHtml"],[1,"info-box"],[1,"info-row"],[1,"info-row__label"],[1,"info-row__value"],["class","info-row",4,"ngIf"],[1,"dialog-component-actions"],["mat-raised-button","","class","dialog-component-button","color","accent",3,"click",4,"ngIf"],["mat-raised-button","",1,"dialog-component-button",3,"click"],[1,"info-row__value","click"],[3,"tippy","click"],["mat-raised-button","","color","accent",1,"dialog-component-button",3,"click"]],template:function(a,m){1&a&&(t.YNc(0,w,22,15,"div",0),t.ALo(1,"async")),2&a&&t.Q6J("ngIf",t.lcZ(1,1,m.feature$))},directives:[y.O5,Z.$,T.lW,M.Hw],pipes:[y.Ov,E.z,P.X$],styles:[".info-box[_ngcontent-%COMP%]{margin-top:32px}.info-row[_ngcontent-%COMP%]{display:flex;overflow-wrap:anywhere;margin-top:4px;margin-bottom:4px;font-size:14px}.info-row__label[_ngcontent-%COMP%]{flex:1;font-weight:500}.info-row__value[_ngcontent-%COMP%]{flex:3}.info-row__value.click[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{cursor:pointer}.dialog-component-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;margin-top:16px}.dialog-component-button[_ngcontent-%COMP%]{margin-left:8px}"]}),r})();var p=n(6317),v=n(2673),c=n(6562),F=n(635),I=n(5916);let D=(()=>{class r{constructor(a,m,C,h){this.dialog=a,this.viewContainerRef=m,this.changeDetectorRef=C,this.featuresService=h,this.featureNameId$=new p.X(null),this.showIf$=new p.X(!1),this.feature$=this.featureNameId$.pipe((0,v.w)(_=>this.featuresService.get$(_))),this.show$=(0,c.a)([this.feature$,this.showIf$]).pipe((0,F.U)(([_,$])=>{var s;return $==(null!==(s=null==_?void 0:_.Enabled)&&void 0!==s&&s)}))}set featureNameId(a){this.featureNameId$.next(a)}set showIf(a){this.showIf$.next(1==a)}openDialog(){r.openDialog(this.dialog,this.featureNameId$.value,this.viewContainerRef,this.changeDetectorRef)}static openDialog(a,m,C,h){a.open(N,{autoFocus:!1,data:m,viewContainerRef:C,width:"600px"}),h.markForCheck()}}return r.\u0275fac=function(a){return new(a||r)(t.Y36(d.uw),t.Y36(t.s_b),t.Y36(t.sBO),t.Y36(I.k))},r.\u0275dir=t.lG2({type:r,inputs:{featureNameId:"featureNameId",showIf:"showIf"}}),r})()},4153:(b,f,n)=>{n.d(f,{f:()=>d});const d={accentedSort:!0,animateRows:!0,enableCellTextSelection:!0,headerHeight:32,suppressScrollOnNewData:!0,valueCache:!0,defaultColDef:{filterParams:{newRowsAction:"keep"}},tooltipShowDelay:0,tooltipHideDelay:1e5,suppressMovableColumns:!0}},9673:(b,f,n)=>{function d(O){const t=document.createElement("textarea");t.value=O,t.setAttribute("readonly",""),t.style.position="absolute",t.style.left="-9999px",document.body.appendChild(t);const A=document.getSelection().rangeCount>0&&document.getSelection().getRangeAt(0);t.select(),document.execCommand("copy"),document.body.removeChild(t),A&&(document.getSelection().removeAllRanges(),document.getSelection().addRange(A))}n.d(f,{v:()=>d})}}]);
//# sourceMappingURL=https://sources.2sxc.org/15.02.00/ng-edit/projects_eav-ui_src_app_apps-management_add-app-from-folder_add-app-from-folder_component_ts.1193b81abeeb7b3f.js.map