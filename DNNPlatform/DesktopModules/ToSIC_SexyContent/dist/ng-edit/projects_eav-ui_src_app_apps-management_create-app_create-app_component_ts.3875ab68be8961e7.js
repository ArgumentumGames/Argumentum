"use strict";(self.webpackChunkeav_ui=self.webpackChunkeav_ui||[]).push([["projects_eav-ui_src_app_apps-management_create-app_create-app_component_ts"],{3640:(Z,d,a)=>{a.r(d),a.d(d,{CreateAppComponent:()=>F});var n=a(587),p=a(6317);const _=/^[A-Za-z](?:[A-Za-z0-9\s\(\)-]+)*$/;var C=a(5446),t=a(3184),f=a(5758),x=a(2528),u=a(6362),v=a(2977),g=a(4770),o=a(4683),c=a(8352),s=a(7317);function m(r,l){1&r&&(t.TgZ(0,"app-field-hint",10),t._uU(1," Required "),t.qZA()),2&r&&t.Q6J("isError",!0)}function T(r,l){if(1&r&&(t.TgZ(0,"app-field-hint",10),t._uU(1),t.qZA()),2&r){const e=t.oxw(3);t.Q6J("isError",!0),t.xp6(1),t.hij(" ",e.appNameError," ")}}function O(r,l){if(1&r&&(t.ynx(0),t.YNc(1,m,2,1,"app-field-hint",9),t.YNc(2,T,2,2,"app-field-hint",9),t.BQk()),2&r){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",null==e.form.controls.name.errors?null:e.form.controls.name.errors.required),t.xp6(1),t.Q6J("ngIf",null==e.form.controls.name.errors?null:e.form.controls.name.errors.pattern)}}function b(r,l){if(1&r){const e=t.EpF();t.ynx(0),t.TgZ(1,"div",1)(2,"div",2),t._uU(3,"Create App"),t.qZA()(),t._UZ(4,"router-outlet"),t.TgZ(5,"form",3)(6,"mat-form-field",4)(7,"mat-label"),t._uU(8,"Name"),t.qZA(),t._UZ(9,"input",5),t.qZA(),t.TgZ(10,"app-field-hint"),t._uU(11," App name will also be used for the folder "),t.qZA(),t.YNc(12,O,3,2,"ng-container",0),t.qZA(),t.TgZ(13,"div",6)(14,"button",7),t.NdJ("click",function(){return t.CHM(e),t.oxw().closeDialog()}),t._uU(15," Cancel "),t.qZA(),t.TgZ(16,"button",8),t.NdJ("click",function(){return t.CHM(e),t.oxw().create()}),t._uU(17," Create "),t.qZA()(),t.BQk()}if(2&r){const e=l.ngIf,i=t.oxw();t.xp6(5),t.Q6J("formGroup",i.form),t.xp6(7),t.Q6J("ngIf",i.form.controls.name.touched),t.xp6(2),t.Q6J("disabled",e.loading),t.xp6(2),t.Q6J("disabled",e.loading||!i.form.valid)}}const E=function(r){return{loading:r}};let F=(()=>{class r{constructor(e,i,A){this.dialogRef=e,this.appsListService=i,this.snackBar=A,this.hostClass="dialog-component",this.appNameError="Standard letters, numbers, spaces, hyphens and round brackets are allowed. Must start with a letter.",this.form=this.buildForm(),this.loading$=new p.X(!1)}ngOnInit(){}ngOnDestroy(){this.loading$.complete()}closeDialog(){this.dialogRef.close()}create(){var e;this.form.disable(),this.loading$.next(!0);const i=null===(e=this.form.controls.name.value)||void 0===e?void 0:e.trim().replace(/\s\s+/g," ");this.snackBar.open("Creating app..."),this.appsListService.create(i).subscribe({error:()=>{this.form.enable(),this.loading$.next(!1),this.snackBar.open("Failed to create app. Please check console for more information",void 0,{duration:3e3})},next:()=>{this.form.enable(),this.snackBar.open("Created app",void 0,{duration:2e3}),this.closeDialog()}})}buildForm(){return new n.cw({name:new n.NI(null,[n.kI.required,n.kI.pattern(_)])})}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(f.so),t.Y36(C.A),t.Y36(x.ux))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-create-app"]],hostVars:1,hostBindings:function(e,i){2&e&&t.Ikx("className",i.hostClass)},decls:2,vars:5,consts:[[4,"ngIf"],["mat-dialog-title",""],[1,"dialog-title-box"],[3,"formGroup"],["appearance","standard","color","accent"],["matInput","","type","text","formControlName","name"],[1,"dialog-component-actions"],["type","button","mat-raised-button","",3,"disabled","click"],["type","button","mat-raised-button","","color","accent",3,"disabled","click"],[3,"isError",4,"ngIf"],[3,"isError"]],template:function(e,i){1&e&&(t.YNc(0,b,18,4,"ng-container",0),t.ALo(1,"async")),2&e&&t.Q6J("ngIf",t.VKq(3,E,t.lcZ(1,1,i.loading$)))},directives:[u.O5,f.uh,v.lC,n._Y,n.JL,n.sg,g.KE,g.hX,o.Nt,n.Fj,n.JJ,n.u,c.Y,s.lW],pipes:[u.Ov],styles:[""]}),r})()},8352:(Z,d,a)=>{a.d(d,{Y:()=>g});var n=a(3184),p=a(6362),_=a(4770);function h(o,c){1&o&&n.GkF(0)}function C(o,c){if(1&o&&(n.TgZ(0,"mat-hint"),n.YNc(1,h,1,0,"ng-container",3),n.qZA()),2&o){n.oxw();const s=n.MAs(4);n.xp6(1),n.Q6J("ngTemplateOutlet",s)}}function t(o,c){1&o&&n.GkF(0)}function f(o,c){if(1&o&&(n.TgZ(0,"mat-error"),n.YNc(1,t,1,0,"ng-container",3),n.qZA()),2&o){n.oxw();const s=n.MAs(4);n.xp6(1),n.Q6J("ngTemplateOutlet",s)}}function x(o,c){1&o&&n.Hsn(0)}const u=function(o){return{"hint-box__short":o}},v=["*"];let g=(()=>{class o{constructor(){this.isError=!1,this.isShort=!0}toggleIsShort(){this.isShort=!this.isShort}}return o.\u0275fac=function(s){return new(s||o)},o.\u0275cmp=n.Xpm({type:o,selectors:[["app-field-hint"]],inputs:{isError:"isError"},ngContentSelectors:v,decls:5,vars:6,consts:[[1,"hint-box",3,"ngClass","ngSwitch","click"],[4,"ngSwitchCase"],["content",""],[4,"ngTemplateOutlet"]],template:function(s,m){1&s&&(n.F$t(),n.TgZ(0,"div",0),n.NdJ("click",function(){return m.toggleIsShort()}),n.YNc(1,C,2,1,"mat-hint",1),n.YNc(2,f,2,1,"mat-error",1),n.qZA(),n.YNc(3,x,1,0,"ng-template",null,2,n.W1O)),2&s&&(n.Q6J("ngClass",n.VKq(4,u,m.isShort))("ngSwitch",m.isError),n.xp6(1),n.Q6J("ngSwitchCase",!1),n.xp6(1),n.Q6J("ngSwitchCase",!0))},directives:[p.mk,p.RF,p.n9,_.bx,p.tP,_.TO],styles:[".hint-box[_ngcontent-%COMP%]{margin-top:4px}.hint-box[_ngcontent-%COMP%]   .mat-hint[_ngcontent-%COMP%], .hint-box[_ngcontent-%COMP%]   .mat-error[_ngcontent-%COMP%]{font-size:12px;display:block}.hint-box__short[_ngcontent-%COMP%]   .mat-hint[_ngcontent-%COMP%], .hint-box__short[_ngcontent-%COMP%]   .mat-error[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}"]}),o})()}}]);
//# sourceMappingURL=https://sources.2sxc.org/14.12.03/ng-edit/projects_eav-ui_src_app_apps-management_create-app_create-app_component_ts.3875ab68be8961e7.js.map