(window.webpackJsonp=window.webpackJsonp||[]).push([[38],{"0bV3":function(t,e,n){"use strict";n.r(e),n.d(e,"ExportAppPartsComponent",(function(){return w}));var o=n("D57K"),i=n("C05f"),c=n("HM3f"),a=n("YtkY"),p=n("o9tz"),r=n("EM62"),s=n("OZ4H"),l=n("bkzA"),b=n("S36y"),f=n("2kYt"),u=n("29Wa"),h=n("R7+U"),d=n("nIj0"),g=n("mFH5"),m=n("PBFl"),x=n("Y2X+"),S=n("bFHC"),v=n("Zfm5"),_=n("Uk43"),k=n("+Tre");function O(t,e){if(1&t&&(r.Sb(0,"mat-option",17),r.Oc(1),r.Rb()),2&t){var n=e.$implicit;r.kc("value",n.value),r.Ab(1),r.Qc(" ",n.name," ")}}function R(t,e){if(1&t){var n=r.Tb();r.Sb(0,"li",21),r.Sb(1,"div",22),r.Sb(2,"mat-checkbox",23),r.ac("ngModelChange",(function(t){return r.Ac(n),e.$implicit._export=t})),r.Sb(3,"span",24),r.Oc(4),r.Rb(),r.Rb(),r.Rb(),r.Rb()}if(2&t){var o=e.$implicit;r.Ab(2),r.kc("ngModel",o._export),r.Ab(2),r.Rc("",o.Name," (",o.Id,")")}}function y(t,e){if(1&t&&(r.Sb(0,"ul",26),r.Sb(1,"p",27),r.Oc(2,"Templates"),r.Rb(),r.Mc(3,R,5,3,"li",20),r.Rb()),2&t){var n=r.ec().$implicit;r.Ab(3),r.kc("ngForOf",n.Templates)}}function C(t,e){if(1&t){var n=r.Tb();r.Sb(0,"li",21),r.Sb(1,"div",22),r.Sb(2,"mat-checkbox",23),r.ac("ngModelChange",(function(t){return r.Ac(n),e.$implicit._export=t})),r.Sb(3,"span",24),r.Oc(4),r.Rb(),r.Rb(),r.Rb(),r.Rb()}if(2&t){var o=e.$implicit;r.Ab(2),r.kc("ngModel",o._export),r.Ab(2),r.Rc("",o.Title," (",o.Id,")")}}function A(t,e){if(1&t&&(r.Sb(0,"ul",26),r.Sb(1,"p",27),r.Oc(2,"Entities"),r.Rb(),r.Mc(3,C,5,3,"li",20),r.Rb()),2&t){var n=r.ec().$implicit;r.Ab(3),r.kc("ngForOf",n.Entities)}}function M(t,e){if(1&t){var n=r.Tb();r.Sb(0,"li",21),r.Sb(1,"div",22),r.Sb(2,"mat-checkbox",23),r.ac("ngModelChange",(function(t){return r.Ac(n),e.$implicit._export=t})),r.Sb(3,"span",24),r.Oc(4),r.Rb(),r.Rb(),r.Rb(),r.Mc(5,y,4,1,"ul",25),r.Mc(6,A,4,1,"ul",25),r.Rb()}if(2&t){var o=e.$implicit;r.Ab(2),r.kc("ngModel",o._export),r.Ab(2),r.Rc("",o.Name," (",o.Id,")"),r.Ab(1),r.kc("ngIf",o.Templates.length>0),r.Ab(1),r.kc("ngIf",o.Entities.length>0)}}function T(t,e){if(1&t){var n=r.Tb();r.Sb(0,"li",21),r.Sb(1,"div",22),r.Sb(2,"mat-checkbox",23),r.ac("ngModelChange",(function(t){return r.Ac(n),e.$implicit._export=t})),r.Sb(3,"span",24),r.Oc(4),r.Rb(),r.Rb(),r.Rb(),r.Rb()}if(2&t){var o=e.$implicit;r.Ab(2),r.kc("ngModel",o._export),r.Ab(2),r.Rc("",o.Name," (",o.Id,")")}}function I(t,e){if(1&t&&(r.Sb(0,"div"),r.Sb(1,"ul",18),r.Sb(2,"p",19),r.Oc(3,"Content Types"),r.Rb(),r.Mc(4,M,7,5,"li",20),r.Rb(),r.Sb(5,"ul",18),r.Sb(6,"p",19),r.Oc(7,"Templates Without Content Types"),r.Rb(),r.Mc(8,T,5,3,"li",20),r.Rb(),r.Rb()),2&t){var n=r.ec(2);r.Ab(4),r.kc("ngForOf",n.contentInfo.ContentTypes),r.Ab(4),r.kc("ngForOf",n.contentInfo.TemplatesWithoutContentTypes)}}function $(t,e){if(1&t){var n=r.Tb();r.Qb(0),r.Sb(1,"div",1),r.Sb(2,"div",2),r.Oc(3,"Export Content and Templates from this App"),r.Rb(),r.Rb(),r.Sb(4,"p",3),r.Oc(5," This is an advanced feature to export parts of the app. The export will create an xml file which can be imported into another site or app. To export the entire content of the app (for example when duplicating the entire site), go to the app export. For further help visit "),r.Sb(6,"a",4),r.Oc(7,"2sxc Help"),r.Rb(),r.Oc(8,". "),r.Rb(),r.Sb(9,"div",5),r.Sb(10,"div",6),r.Sb(11,"mat-form-field",7),r.Sb(12,"mat-label"),r.Oc(13,"Scope"),r.Rb(),r.Sb(14,"mat-select",8),r.ac("ngModelChange",(function(t){return r.Ac(n),r.ec().changeScope(t)})),r.Mc(15,O,2,2,"mat-option",9),r.Sb(16,"mat-option",10),r.Oc(17,"Other..."),r.Rb(),r.Rb(),r.Sb(18,"button",11),r.Sb(19,"mat-icon",12),r.ac("click",(function(){return r.Ac(n),r.ec().unlockScope()})),r.Oc(20),r.Rb(),r.Rb(),r.Rb(),r.Sb(21,"app-field-hint"),r.Oc(22," The scope should almost never be changed - "),r.Sb(23,"a",13),r.Oc(24,"see help"),r.Rb(),r.Rb(),r.Rb(),r.Mc(25,I,9,2,"div",0),r.Rb(),r.Sb(26,"div",14),r.Sb(27,"button",15),r.ac("click",(function(){return r.Ac(n),r.ec().closeDialog()})),r.Oc(28," Cancel "),r.Rb(),r.Sb(29,"button",16),r.ac("click",(function(){return r.Ac(n),r.ec().exportAppParts()})),r.Oc(30," Export "),r.Rb(),r.Rb(),r.Pb()}if(2&t){var o=e.ngIf,i=r.ec();r.Ab(14),r.kc("ngModel",i.exportScope)("disabled",i.lockScope),r.Ab(1),r.kc("ngForOf",i.scopeOptions),r.Ab(3),r.kc("matTooltip",i.lockScope?"Unlock":"Lock"),r.Ab(2),r.Qc(" ",i.lockScope?"lock":"lock_open"," "),r.Ab(5),r.kc("ngIf",i.contentInfo),r.Ab(2),r.kc("disabled",o.loading||o.isExporting),r.Ab(2),r.kc("disabled",o.loading||o.isExporting)}}var w=function(){function t(t,e,n){this.dialogRef=t,this.exportAppPartsService=e,this.contentTypesService=n,this.hostClass="dialog-component",this.exportScope=p.a.scopes.default.value,this.lockScope=!0,this.loading$=new i.a(!1),this.isExporting$=new i.a(!1),this.templateVars$=Object(c.a)([this.loading$,this.isExporting$]).pipe(Object(a.a)((function(t){var e=Object(o.f)(t,2);return{loading:e[0],isExporting:e[1]}})))}return t.prototype.ngOnInit=function(){this.fetchScopes(),this.fetchContentInfo()},t.prototype.ngOnDestroy=function(){this.loading$.complete(),this.isExporting$.complete()},t.prototype.closeDialog=function(){this.dialogRef.close()},t.prototype.exportAppParts=function(){this.isExporting$.next(!0);var t=this.selectedContentTypes().map((function(t){return t.Id})),e=this.selectedTemplates().map((function(t){return t.Id})),n=this.selectedEntities().map((function(t){return t.Id}));n=n.concat(e),this.exportAppPartsService.exportParts(t,n,e),this.isExporting$.next(!1)},t.prototype.changeScope=function(t){"Other"===t&&((t=prompt("This is an advanced feature to show content-types of another scope. Don't use this if you don't know what you're doing, as content-types of other scopes are usually hidden for a good reason."))?this.scopeOptions.find((function(e){return e.value===t}))||this.scopeOptions.push({name:t,value:t}):t=p.a.scopes.default.value),this.exportScope=t,this.fetchContentInfo()},t.prototype.unlockScope=function(){this.lockScope=!this.lockScope,this.lockScope&&(this.exportScope=p.a.scopes.default.value,this.fetchContentInfo())},t.prototype.fetchScopes=function(){var t=this;this.loading$.next(!0),this.contentTypesService.getScopes().subscribe((function(e){t.scopeOptions=e,t.loading$.next(!1)}))},t.prototype.fetchContentInfo=function(){var t=this;this.loading$.next(!0),this.exportAppPartsService.getContentInfo(this.exportScope).subscribe((function(e){t.contentInfo=e,t.loading$.next(!1)}))},t.prototype.selectedContentTypes=function(){return this.contentInfo.ContentTypes.filter((function(t){return t._export}))},t.prototype.selectedEntities=function(){var t,e,n=[];try{for(var i=Object(o.h)(this.contentInfo.ContentTypes),c=i.next();!c.done;c=i.next())n=n.concat(c.value.Entities.filter((function(t){return t._export})))}catch(a){t={error:a}}finally{try{c&&!c.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}return n},t.prototype.selectedTemplates=function(){var t,e,n=[];try{for(var i=Object(o.h)(this.contentInfo.ContentTypes),c=i.next();!c.done;c=i.next())n=n.concat(c.value.Templates.filter((function(t){return t._export})))}catch(a){t={error:a}}finally{try{c&&!c.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}return n.concat(this.contentInfo.TemplatesWithoutContentTypes.filter((function(t){return t._export})))},t.\u0275fac=function(e){return new(e||t)(r.Mb(s.g),r.Mb(l.a),r.Mb(b.a))},t.\u0275cmp=r.Gb({type:t,selectors:[["app-export-app-parts"]],hostVars:1,hostBindings:function(t,e){2&t&&r.Vb("className",e.hostClass)},decls:2,vars:3,consts:[[4,"ngIf"],["mat-dialog-title",""],[1,"dialog-title-box"],[1,"dialog-description"],["href","https://2sxc.org/en/help?tag=export","target","_blank"],[1,"dialog-component-content","fancy-scrollbar-light"],[1,"edit-input"],["appearance","standard","color","accent"],["name","Scope",3,"ngModel","disabled","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["value","Other"],["mat-icon-button","","type","button","matSuffix","",3,"matTooltip"],["appClickStopPropagation","",3,"click"],["appClickStopPropagation","","href","https://2sxc.org/help?tag=scope","target","_blank"],[1,"dialog-component-actions"],["mat-raised-button","",3,"disabled","click"],["mat-raised-button","","color","accent",3,"disabled","click"],[3,"value"],[1,"content-info__list","content-info__base"],[1,"content-info__title"],["class","content-info__item",4,"ngFor","ngForOf"],[1,"content-info__item"],[1,"option-box"],[3,"ngModel","ngModelChange"],[1,"option-box__text"],["class","content-info__list",4,"ngIf"],[1,"content-info__list"],[1,"content-info__subtitle"]],template:function(t,e){1&t&&(r.Mc(0,$,31,8,"ng-container",0),r.fc(1,"async")),2&t&&r.kc("ngIf",r.gc(1,1,e.templateVars$))},directives:[f.t,s.h,u.c,u.g,h.a,d.s,d.v,f.s,g.m,m.b,u.j,x.a,S.a,v.a,_.a,k.a],pipes:[f.b],styles:[".edit-input[_ngcontent-%COMP%]{padding-bottom:8px}.mat-hint[_ngcontent-%COMP%]{font-size:12px}.content-info__title[_ngcontent-%COMP%]{font-size:18px;font-weight:700}.content-info__subtitle[_ngcontent-%COMP%]{font-size:14px;font-weight:700}.content-info__list[_ngcontent-%COMP%]{font-size:14px;list-style-type:none}.content-info__base[_ngcontent-%COMP%]{padding:0}.content-info__item[_ngcontent-%COMP%]{border-top:1px solid #ddd;padding:2px}.option-box[_ngcontent-%COMP%]{margin:8px 0}.option-box__text[_ngcontent-%COMP%]{white-space:normal;font-size:14px}"],changeDetection:0}),t}()}}]);
//# sourceMappingURL=https://sources.2sxc.org/11.11.04/ng-edit/export-app-parts-component.4f2777da1d18640cf444.js.map