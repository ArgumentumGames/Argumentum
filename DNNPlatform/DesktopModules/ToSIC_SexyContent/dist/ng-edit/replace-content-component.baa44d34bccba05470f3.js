(window.webpackJsonp=window.webpackJsonp||[]).push([[56],{"1yen":function(t,e,n){"use strict";n.r(e),n.d(e,"ReplaceContentComponent",(function(){return M}));var i=n("D57K"),o=n("sEIs"),a=n("C05f"),c=n("HM3f"),s=n("bwdy"),r=n("YtkY"),l=n("xVbo"),p=n("jIqt"),u=n("0Woy"),b=n("uuTa"),d=n("EM62"),h=n("OZ4H"),m=n("PlBB"),f=n("W1gw"),g=n("2kYt"),v=n("29Wa"),y=n("R7+U"),O=n("nIj0"),C=n("PBFl"),S=n("Y2X+"),j=n("bFHC"),k=n("mFH5");function x(t,e){if(1&t&&(d.Sb(0,"mat-option",12),d.Oc(1),d.Rb()),2&t){var n=e.$implicit;d.kc("value",n.value),d.Ab(1),d.Pc(n.label)}}function $(t,e){if(1&t){var n=d.Tb();d.Qb(0),d.Sb(1,"div",1),d.Sb(2,"div",2),d.Oc(3),d.Rb(),d.Rb(),d.Nb(4,"router-outlet"),d.Sb(5,"p",3),d.Oc(6),d.Rb(),d.Sb(7,"div",4),d.Sb(8,"mat-form-field",5),d.Sb(9,"mat-label"),d.Oc(10,"Choose item"),d.Rb(),d.Sb(11,"mat-select",6),d.ac("ngModelChange",(function(t){return d.Ac(n),d.ec().selectedChanged(t)})),d.Mc(12,x,2,2,"mat-option",7),d.Rb(),d.Rb(),d.Sb(13,"button",8),d.ac("click",(function(){return d.Ac(n),d.ec().copySelected()})),d.Sb(14,"mat-icon"),d.Oc(15,"file_copy"),d.Rb(),d.Rb(),d.Rb(),d.Sb(16,"div",9),d.Sb(17,"button",10),d.ac("click",(function(){return d.Ac(n),d.ec().closeDialog()})),d.Oc(18,"Cancel"),d.Rb(),d.Sb(19,"button",11),d.ac("click",(function(){return d.Ac(n),d.ec().save()})),d.Oc(20,"Save"),d.Rb(),d.Rb(),d.Pb()}if(2&t){var i=e.ngIf;d.Ab(3),d.Pc(i.item.add?"Add Existing Item":"Replace Content Item"),d.Ab(3),d.Qc(" ",i.item.add?"Select a content-item to add to this list.":"By replacing a content-item you can make other content appear in the slot of the original content."," "),d.Ab(5),d.kc("ngModel",i.item.id),d.Ab(1),d.kc("ngForOf",i.options),d.Ab(7),d.kc("disabled",!i.item.id)}}var M=function(){function t(t,e,n,o,l){this.dialogRef=t,this.contentGroupService=e,this.router=n,this.route=o,this.snackBar=l,this.hostClass="dialog-component",this.item$=new a.a({id:null,guid:this.route.snapshot.paramMap.get("guid"),part:this.route.snapshot.paramMap.get("part"),index:parseInt(this.route.snapshot.paramMap.get("index"),10),add:!!this.route.snapshot.queryParamMap.get("add")}),this.options$=new a.a(null),this.templateVars$=Object(c.a)([this.item$,this.options$]).pipe(Object(r.a)((function(t){var e=Object(i.f)(t,2);return{item:e[0],options:e[1]}}))),this.subscription=new s.a}return t.prototype.ngOnInit=function(){this.getConfig(),this.refreshOnChildClosed()},t.prototype.ngOnDestroy=function(){this.item$.complete(),this.options$.complete(),this.subscription.unsubscribe()},t.prototype.closeDialog=function(){this.dialogRef.close()},t.prototype.selectedChanged=function(t){this.item$.next(Object(i.a)(Object(i.a)({},this.item$.value),{id:t}))},t.prototype.save=function(){var t=this;this.snackBar.open("Saving..."),this.contentGroupService.saveItem(this.item$.value).subscribe((function(){t.snackBar.open("Saved",null,{duration:2e3}),t.closeDialog()}))},t.prototype.copySelected=function(){var t={items:[{ContentTypeName:this.contentTypeName,DuplicateEntity:this.item$.value.id}]},e=Object(b.a)(t);this.router.navigate(["edit/"+e],{relativeTo:this.route})},t.prototype.getConfig=function(){var t=this;this.contentGroupService.getItems(this.item$.value).subscribe((function(e){var n,o,a=[],c=Object.keys(e.Items);try{for(var s=Object(i.h)(c),r=s.next();!r.done;r=s.next()){var l=parseInt(r.value,10);a.push({label:e.Items[l]+" ("+l+")",value:l})}}catch(p){n={error:p}}finally{try{r&&!r.done&&(o=s.return)&&o.call(s)}finally{if(n)throw n.error}}t.options$.next(a),t.item$.value.id||t.item$.value.add||t.item$.next(Object(i.a)(Object(i.a)({},t.item$.value),{id:e.SelectedId})),t.contentTypeName||(t.contentTypeName=e.ContentTypeName)}))},t.prototype.refreshOnChildClosed=function(){var t=this;this.subscription.add(this.router.events.pipe(Object(l.a)((function(t){return t instanceof o.b})),Object(p.a)(!!this.route.snapshot.firstChild),Object(r.a)((function(){return!!t.route.snapshot.firstChild})),Object(u.a)(),Object(l.a)((function(t){var e=Object(i.f)(t,2);return e[0]&&!e[1]}))).subscribe((function(){var e;t.getConfig();var n=null===(e=t.router.getCurrentNavigation().extras)||void 0===e?void 0:e.state;if(n){var o=n[Object.keys(n)[0]];t.item$.next(Object(i.a)(Object(i.a)({},t.item$.value),{id:o}))}})))},t.\u0275fac=function(e){return new(e||t)(d.Mb(h.g),d.Mb(m.a),d.Mb(o.c),d.Mb(o.a),d.Mb(f.b))},t.\u0275cmp=d.Gb({type:t,selectors:[["app-replace-content"]],hostVars:1,hostBindings:function(t,e){2&t&&d.Vb("className",e.hostClass)},decls:2,vars:3,consts:[[4,"ngIf"],["mat-dialog-title",""],[1,"dialog-title-box"],[1,"dialog-description"],[1,"options-box"],["appearance","standard","color","accent",1,"options-box__field"],["name","Language",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["mat-icon-button","","matTooltip","Copy",1,"options-box__copy",3,"click"],[1,"dialog-component-actions"],["mat-raised-button","",3,"click"],["mat-raised-button","","color","accent",3,"disabled","click"],[3,"value"]],template:function(t,e){1&t&&(d.Mc(0,$,21,5,"ng-container",0),d.fc(1,"async")),2&t&&d.kc("ngIf",d.gc(1,1,e.templateVars$))},directives:[g.t,h.h,o.e,v.c,v.g,y.a,O.s,O.v,g.s,C.b,S.a,j.a,k.m],pipes:[g.b],styles:[".options-box[_ngcontent-%COMP%]{display:flex;align-items:flex-end}.options-box__field[_ngcontent-%COMP%]{width:40%}.options-box__copy[_ngcontent-%COMP%]{margin-left:8px}"],changeDetection:0}),t}()}}]);
//# sourceMappingURL=https://sources.2sxc.org/11.11.04/ng-edit/replace-content-component.baa44d34bccba05470f3.js.map