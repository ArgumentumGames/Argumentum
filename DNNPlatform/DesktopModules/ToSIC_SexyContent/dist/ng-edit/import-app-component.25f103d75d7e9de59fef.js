(window.webpackJsonp=window.webpackJsonp||[]).push([[39],{BM85:function(e,t,i){"use strict";i.r(t),i.d(t,"ImportAppComponent",(function(){return $}));var o=i("D57K"),n=i("OZ4H"),s=i("C05f"),c=i("HM3f"),r=i("YtkY"),a=i("EM62"),p=i("ZEis"),l=i("W1gw"),m=i("2kYt"),u=i("8/3+"),g=i("PBFl"),b=i("Y2X+"),f=i("csyo");function d(e,t){1&e&&a.Nb(0,"mat-spinner",14)}function h(e,t){1&e&&(a.Sb(0,"div",19),a.Oc(1," The import has been done. See the messages below for more information. "),a.Rb())}function v(e,t){1&e&&(a.Sb(0,"div",20),a.Oc(1," The import failed. See the messages below for more information. "),a.Rb())}var R=function(e,t,i){return{"sxc-message-warning":e,"sxc-message-success":t,"sxc-message-error":i}};function x(e,t){if(1&e&&(a.Sb(0,"div",21),a.Oc(1),a.Rb()),2&e){var i=t.$implicit;a.kc("ngClass",a.qc(2,R,0===i.MessageType,1===i.MessageType,2===i.MessageType)),a.Ab(1),a.Qc(" ",i.Text," ")}}function I(e,t){if(1&e&&(a.Sb(0,"div",15),a.Mc(1,h,2,0,"div",16),a.Mc(2,v,2,0,"div",17),a.Mc(3,x,2,6,"div",18),a.Rb()),2&e){var i=a.ec().ngIf;a.Ab(1),a.kc("ngIf",i.importResult.Success),a.Ab(1),a.kc("ngIf",!i.importResult.Success),a.Ab(1),a.kc("ngForOf",i.importResult.Messages)}}function k(e,t){if(1&e){var i=a.Tb();a.Qb(0),a.Sb(1,"button",22),a.ac("click",(function(){return a.Ac(i),a.ec(2).closeDialog()})),a.Oc(2,"Cancel"),a.Rb(),a.Sb(3,"button",23),a.ac("click",(function(){return a.Ac(i),a.ec(2).importApp()})),a.Oc(4," Import "),a.Rb(),a.Pb()}if(2&e){var o=a.ec().ngIf;a.Ab(3),a.kc("disabled",!o.importFile||o.isImporting||o.importResult)}}function A(e,t){if(1&e){var i=a.Tb();a.Qb(0),a.Sb(1,"button",24),a.ac("click",(function(){return a.Ac(i),a.ec(2).closeDialog()})),a.Oc(2,"Close"),a.Rb(),a.Pb()}}function S(e,t){if(1&e){var i=a.Tb();a.Sb(0,"div",1),a.ac("filesDropped",(function(e){return a.Ac(i),a.ec().filesDropped(e)})),a.Sb(1,"div",2),a.Sb(2,"div",3),a.Oc(3,"Import App"),a.Rb(),a.Rb(),a.Mc(4,d,1,0,"mat-spinner",4),a.Sb(5,"p",5),a.Oc(6," Select an app package (zip) from your computer to import an app. New apps can be downloaded on "),a.Sb(7,"a",6),a.Oc(8,"https://2sxc.org/apps"),a.Rb(),a.Oc(9,". For further help visit "),a.Sb(10,"a",7),a.Oc(11,"2sxc Help"),a.Rb(),a.Oc(12,". "),a.Rb(),a.Sb(13,"div"),a.Sb(14,"button",8),a.ac("click",(function(){return a.Ac(i),a.yc(18).click()})),a.Sb(15,"span"),a.Oc(16),a.Rb(),a.Rb(),a.Sb(17,"input",9,10),a.ac("change",(function(e){return a.Ac(i),a.ec().fileChange(e)})),a.Rb(),a.Rb(),a.Mc(19,I,4,3,"div",11),a.Sb(20,"div",12),a.Mc(21,k,5,1,"ng-container",13),a.Mc(22,A,3,0,"ng-container",13),a.Rb(),a.Rb()}if(2&e){var o=t.ngIf;a.kc("allowedFileTypes","zip"),a.Ab(4),a.kc("ngIf",o.isImporting),a.Ab(10),a.kc("disabled",o.isImporting),a.Ab(2),a.Pc(o.importFile?o.importFile.name:"Select or drop file"),a.Ab(3),a.kc("ngIf",o.importResult),a.Ab(2),a.kc("ngIf",!(null!=o.importResult&&o.importResult.Success)),a.Ab(1),a.kc("ngIf",null==o.importResult?null:o.importResult.Success)}}var $=function(){function e(e,t,i,n){this.dialogData=e,this.dialogRef=t,this.importAppService=i,this.snackBar=n,this.hostClass="dialog-component",this.isImporting$=new s.a(!1),this.importFile$=new s.a(null),this.importResult$=new s.a(null),this.templateVars$=Object(c.a)([this.isImporting$,this.importFile$,this.importResult$]).pipe(Object(r.a)((function(e){var t=Object(o.f)(e,3);return{isImporting:t[0],importFile:t[1],importResult:t[2]}})))}return e.prototype.ngOnInit=function(){null!=this.dialogData.files&&(this.importFile$.next(this.dialogData.files[0]),this.importApp())},e.prototype.ngOnDestroy=function(){this.isImporting$.complete(),this.importFile$.complete(),this.importResult$.complete()},e.prototype.closeDialog=function(){this.dialogRef.close()},e.prototype.filesDropped=function(e){this.importFile$.next(e[0]),this.importResult$.next(null),this.importApp()},e.prototype.fileChange=function(e){this.importFile$.next(e.target.files[0]),this.importResult$.next(null)},e.prototype.importApp=function(e){var t=this;this.isImporting$.next(!0),this.importAppService.importApp(this.importFile$.value,e).subscribe({next:function(e){var i,o,n;if(t.isImporting$.next(!1),t.importResult$.next(e),0===(null===(n=null===(o=null===(i=t.importResult$.value)||void 0===i?void 0:i.Messages)||void 0===o?void 0:o[0])||void 0===n?void 0:n.MessageType)){var s=prompt(t.importResult$.value.Messages[0].Text+" Would you like to install it using another folder name?");if(!s)return;t.importApp(s)}},error:function(e){t.isImporting$.next(!1),t.importResult$.next(null),t.snackBar.open("Import failed. Please check console for more information",null,{duration:3e3})}})},e.\u0275fac=function(t){return new(t||e)(a.Mb(n.a),a.Mb(n.g),a.Mb(p.a),a.Mb(l.b))},e.\u0275cmp=a.Gb({type:e,selectors:[["app-import-app"]],hostVars:1,hostBindings:function(e,t){2&e&&a.Vb("className",t.hostClass)},decls:2,vars:3,consts:[["appDragAndDrop","",3,"allowedFileTypes","filesDropped",4,"ngIf"],["appDragAndDrop","",3,"allowedFileTypes","filesDropped"],["mat-dialog-title",""],[1,"dialog-title-box"],["mode","indeterminate","diameter","20","color","accent",4,"ngIf"],[1,"dialog-description"],["href","https://2sxc.org/apps"],["href","https://2sxc.org/en/help?tag=import-app","target","_blank"],["mat-raised-button","","matTooltip","Open file browser",3,"disabled","click"],["type","file",1,"hide",3,"change"],["fileInput",""],["class","dialog-component-content fancy-scrollbar-light import-result-box",4,"ngIf"],[1,"dialog-component-actions"],[4,"ngIf"],["mode","indeterminate","diameter","20","color","accent"],[1,"dialog-component-content","fancy-scrollbar-light","import-result-box"],["class","sxc-message sxc-message-info",4,"ngIf"],["class","sxc-message sxc-message-error",4,"ngIf"],["class","sxc-message",3,"ngClass",4,"ngFor","ngForOf"],[1,"sxc-message","sxc-message-info"],[1,"sxc-message","sxc-message-error"],[1,"sxc-message",3,"ngClass"],["mat-raised-button","",3,"click"],["mat-raised-button","","color","accent",3,"disabled","click"],["mat-raised-button","","color","accent",3,"click"]],template:function(e,t){1&e&&(a.Mc(0,S,23,7,"div",0),a.fc(1,"async")),2&e&&a.kc("ngIf",a.gc(1,1,t.templateVars$))},directives:[m.t,u.a,n.h,g.b,b.a,f.b,m.s,m.q],pipes:[m.b],styles:[".import-result-box[_ngcontent-%COMP%]{margin-top:16px}"],changeDetection:0}),e}()}}]);
//# sourceMappingURL=https://sources.2sxc.org/11.11.04/ng-edit/import-app-component.25f103d75d7e9de59fef.js.map