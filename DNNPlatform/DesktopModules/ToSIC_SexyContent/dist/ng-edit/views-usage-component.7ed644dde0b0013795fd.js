(window.webpackJsonp=window.webpackJsonp||[]).push([[60],{r5Qb:function(e,t,i){"use strict";i.r(t),i.d(t,"ViewsUsageComponent",(function(){return T}));var n=i("D57K"),o=i("KLQV"),l=i("C05f"),a=i("QjRa"),s=i("c2Rc"),r=i("EM62"),d=i("W1gw"),c=i("2kYt"),u=i("mFH5"),p=i("Y2X+"),g=i("bFHC");function b(e,t){if(1&e){var i=r.Tb();r.Sb(0,"div",1),r.ac("click",(function(){return r.Ac(i),r.ec().copy()})),r.Sb(1,"span",2),r.Oc(2),r.Rb(),r.Sb(3,"mat-icon",3),r.Oc(4,"file_copy"),r.Rb(),r.Rb()}if(2&e){var n=r.ec();r.kc("matTooltip",n.tooltip),r.Ab(2),r.Pc(n.id)}}var h=function(){function e(e){this.snackBar=e}return e.prototype.agInit=function(e){if(this.tooltip=e.value,null!=this.tooltip){var t=this.tooltip.split("\n")[0];this.id=t.split(" ")[1]}},e.prototype.refresh=function(e){return!0},e.prototype.copy=function(){Object(s.a)(this.tooltip),this.snackBar.open("Copied to clipboard",null,{duration:2e3})},e.\u0275fac=function(t){return new(t||e)(r.Mb(d.b))},e.\u0275cmp=r.Gb({type:e,selectors:[["app-views-usage-id"]],decls:1,vars:1,consts:[["matRipple","","class","id-box highlight",3,"matTooltip","click",4,"ngIf"],["matRipple","",1,"id-box","highlight",3,"matTooltip","click"],[1,"id"],[1,"icon"]],template:function(e,t){1&e&&r.Mc(0,b,5,2,"div",0),2&e&&r.kc("ngIf",t.id)},directives:[c.t,u.r,p.a,g.a],styles:[".id-box[_ngcontent-%COMP%]{padding:0 8px;text-align:end;height:100%;display:flex;align-items:center;justify-content:flex-end}.id-box[_ngcontent-%COMP%]   .id[_ngcontent-%COMP%]{max-width:100%;text-overflow:ellipsis;overflow:hidden}.id-box[_ngcontent-%COMP%]:hover{text-decoration:none}.id-box[_ngcontent-%COMP%]:hover   .id[_ngcontent-%COMP%], .id-box[_ngcontent-%COMP%]:not(:hover)   .icon[_ngcontent-%COMP%]{display:none}"],changeDetection:0}),e}(),f=i("F1o0"),v=i("nIj0"),m=function(){function e(){this.isVisible="",this.isDeleted=""}return e.prototype.agInit=function(e){this.params=e},e.prototype.isFilterActive=function(){return""!==this.isVisible||""!==this.isDeleted},e.prototype.doesFilterPass=function(e){var t=!1,i=!1,n=this.params.valueGetter(e.node);return null!=n&&(t=""===this.isVisible||null!=n.IsVisible&&n.IsVisible.toString()===this.isVisible,i=""===this.isDeleted||null!=n.IsDeleted&&n.IsDeleted.toString()===this.isDeleted,t&&i)},e.prototype.getModel=function(){if(this.isFilterActive())return{filterType:"views-usage-status",isVisible:this.isVisible,isDeleted:this.isDeleted}},e.prototype.setModel=function(e){this.isVisible=e?e.isVisible:"",this.isDeleted=e?e.isDeleted:""},e.prototype.afterGuiAttached=function(e){},e.prototype.filterChanged=function(){this.params.filterChangedCallback()},e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=r.Gb({type:e,selectors:[["app-views-usage-status-filter"]],decls:18,vars:2,consts:[[1,"title"],[3,"ngModel","ngModelChange"],["value",""],["value","true"],["value","false"]],template:function(e,t){1&e&&(r.Sb(0,"div",0),r.Oc(1,"Visible"),r.Rb(),r.Sb(2,"mat-radio-group",1),r.ac("ngModelChange",(function(e){return t.isVisible=e}))("ngModelChange",(function(){return t.filterChanged()})),r.Sb(3,"mat-radio-button",2),r.Oc(4,"All"),r.Rb(),r.Sb(5,"mat-radio-button",3),r.Oc(6,"Visible"),r.Rb(),r.Sb(7,"mat-radio-button",4),r.Oc(8,"Hidden"),r.Rb(),r.Rb(),r.Sb(9,"div",0),r.Oc(10,"Deleted"),r.Rb(),r.Sb(11,"mat-radio-group",1),r.ac("ngModelChange",(function(e){return t.isDeleted=e}))("ngModelChange",(function(){return t.filterChanged()})),r.Sb(12,"mat-radio-button",2),r.Oc(13,"All"),r.Rb(),r.Sb(14,"mat-radio-button",3),r.Oc(15,"Is deleted"),r.Rb(),r.Sb(16,"mat-radio-button",4),r.Oc(17,"Is not deleted"),r.Rb(),r.Rb()),2&e&&(r.Ab(2),r.kc("ngModel",t.isVisible),r.Ab(9),r.kc("ngModel",t.isDeleted))},directives:[f.b,v.s,v.v,f.a],styles:[".title[_ngcontent-%COMP%]{padding:12px 12px 0}.mat-radio-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-between;overflow:hidden;padding:12px;width:160px;height:104px}"],changeDetection:0}),e}();function w(e){var t=e.data;return"ID: "+t.Block.Id+"\nGUID: "+t.Block.Guid}function C(e){var t=e.data;if(null!=t.Module)return"ID: "+t.Module.Id+"\nUsageId: "+t.Module.UsageId+"\nTitle: "+t.Module.Title}function y(e){return null==e.value?"no-outline":"id-action no-padding no-outline"}function I(e){var t=e.data;if(null!=t.PageId)return"ID: "+t.PageId}function x(e){return null==e.value?"no-outline":"id-action no-padding no-outline"}function O(e){return null==e.value?"no-outline":"primary-action highlight"}function M(e){null!=e.value&&window.open(e.data.Url,"_blank")}function R(e){var t=e.value;if(null!=t)return'\n    <div style="height: 100%;display: flex;align-items: center;">\n      '+(t.IsVisible?'<span class="material-icons-outlined">visibility</span>':'<span class="material-icons-outlined">visibility_off</span>')+"\n      "+(t.IsDeleted?'<span style="margin-left: 8px;" class="material-icons-outlined">delete</span>':"")+"\n    </div>\n  "}var D=i("OZ4H"),S=i("sEIs"),k=i("uzd0"),P=i("PBFl"),V=i("W6oE"),T=function(){function e(e,t,i){this.dialogRef=e,this.route=t,this.viewsService=i,this.viewUsage$=new l.a(null),this.viewTooltip$=new l.a(""),this.data$=new l.a(null),this.modules=o.a,this.gridOptions=Object(n.a)(Object(n.a)({},a.a),{frameworkComponents:{viewsUsageIdComponent:h,viewsUsageStatusFilterComponent:m},columnDefs:[{headerName:"Block",field:"Block",width:70,headerClass:"dense",cellClass:"id-action no-padding no-outline",cellRenderer:"viewsUsageIdComponent",sortable:!0,filter:"agTextColumnFilter",valueGetter:w},{headerName:"Module",field:"Module",width:76,headerClass:"dense",cellRenderer:"viewsUsageIdComponent",sortable:!0,filter:"agTextColumnFilter",valueGetter:C,cellClass:y},{headerName:"Page",field:"PageId",width:70,headerClass:"dense",cellRenderer:"viewsUsageIdComponent",sortable:!0,filter:"agTextColumnFilter",valueGetter:I,cellClass:x},{headerName:"Name",field:"Name",flex:2,minWidth:250,sortable:!0,filter:"agTextColumnFilter",cellClass:O,onCellClicked:M},{headerName:"Language",field:"Language",width:90,cellClass:"no-outline",sortable:!0,filter:"agTextColumnFilter"},{headerName:"Status",field:"Status",width:80,cellClass:"icon no-outline",filter:"viewsUsageStatusFilterComponent",cellRenderer:R}]})}return e.prototype.ngOnInit=function(){var e=this,t=this.route.snapshot.paramMap.get("guid");this.viewsService.getUsage(t).subscribe((function(t){var i=t[0];e.viewUsage$.next(i),e.viewTooltip$.next("ID: "+i.Id+"\nGUID: "+i.Guid);var o=function(e){var t,i,o,l,a=[];try{for(var s=Object(n.h)(e.Blocks),r=s.next();!r.done;r=s.next()){var d=r.value;0===d.Modules.length&&a.push({Block:{Id:d.Id,Guid:d.Guid}});try{for(var c=(o=void 0,Object(n.h)(d.Modules)),u=c.next();!u.done;u=c.next()){var p=u.value;a.push({Block:{Id:d.Id,Guid:d.Guid},Module:p,PageId:p.Page.Id,Name:p.Page.Name,Url:p.Page.Url,Language:p.Page.CultureCode,Status:{IsVisible:p.Page.Visible,IsDeleted:p.IsDeleted}})}}catch(g){o={error:g}}finally{try{u&&!u.done&&(l=c.return)&&l.call(c)}finally{if(o)throw o.error}}}}catch(b){t={error:b}}finally{try{r&&!r.done&&(i=s.return)&&i.call(s)}finally{if(t)throw t.error}}return a}(i);e.data$.next(o)}))},e.prototype.ngOnDestroy=function(){this.viewUsage$.complete(),this.viewTooltip$.complete(),this.data$.complete()},e.prototype.closeDialog=function(){this.dialogRef.close()},e.\u0275fac=function(t){return new(t||e)(r.Mb(D.g),r.Mb(S.a),r.Mb(k.a))},e.\u0275cmp=r.Gb({type:e,selectors:[["app-views-usage"]],decls:21,vars:11,consts:[[1,"nav-component-wrapper"],["mat-dialog-title",""],[1,"dialog-title-box"],[3,"matTooltip"],["mat-icon-button","","matTooltip","Close dialog",3,"click"],[1,"dialog-description"],["href","https://r.2sxc.org/content-in-dnn","target","_blank"],[1,"grid-wrapper"],[1,"ag-theme-material",3,"rowData","modules","gridOptions"]],template:function(e,t){var i;1&e&&(r.Sb(0,"div",0),r.Sb(1,"div",1),r.Sb(2,"div",2),r.Sb(3,"div",3),r.fc(4,"async"),r.Oc(5),r.fc(6,"async"),r.Rb(),r.Sb(7,"button",4),r.ac("click",(function(){return t.closeDialog()})),r.Sb(8,"mat-icon"),r.Oc(9,"close"),r.Rb(),r.Rb(),r.Rb(),r.Rb(),r.Sb(10,"p",5),r.Oc(11," This shows where this view is being used. Read about the "),r.Sb(12,"a",6),r.Oc(13,"connections between DNN and 2sxc Views"),r.Rb(),r.Oc(14," to make good decisions if you're doing clean-up or just want to better know what this is all about. "),r.Sb(15,"em"),r.Oc(16,"Before you get confused about some things you see here, do read the FAQ on that page."),r.Rb(),r.Rb(),r.Nb(17,"router-outlet"),r.Sb(18,"div",7),r.Nb(19,"ag-grid-angular",8),r.fc(20,"async"),r.Rb(),r.Rb()),2&e&&(r.Ab(3),r.kc("matTooltip",r.gc(4,5,t.viewTooltip$)),r.Ab(2),r.Qc("View: ",null==(i=r.gc(6,7,t.viewUsage$))?null:i.Name,""),r.Ab(14),r.kc("rowData",r.gc(20,9,t.data$))("modules",t.modules)("gridOptions",t.gridOptions))},directives:[D.h,p.a,P.b,g.a,S.e,V.a],pipes:[c.b],styles:[""],changeDetection:0}),e}()}}]);
//# sourceMappingURL=https://sources.2sxc.org/11.11.04/ng-edit/views-usage-component.7ed644dde0b0013795fd.js.map