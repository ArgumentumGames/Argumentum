(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{YLeX:function(t,e,n){"use strict";n.r(e);var o=n("D57K"),c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(o.d)(e,t),e}(function(){return function(){}}()),i=n("o9tz"),a=n("Y2qJ"),p=n("1C3z"),r=n("BLjT"),s=n("5/c3"),b=n("S36y"),l=n("2pW/"),u=n("8AiQ"),d=n("ZSGP"),f=n("hOvr"),h=n("TDrE"),m=n("FONI"),g=n("LuBX"),y=n("OeRG"),S=n("9HSk"),v=n("Qc/f"),T=n("Uk43"),V=n("Zfm5"),W=n("r4gC");function k(t,e){1&t&&(p.Wb(0,"app-field-hint",24),p.Pc(1,"This field is required"),p.Vb()),2&t&&p.oc("isError",!0)}function N(t,e){if(1&t&&(p.Wb(0,"app-field-hint",24),p.Pc(1),p.Vb()),2&t){var n=p.ic(3);p.oc("isError",!0),p.Bb(1),p.Qc(n.contentTypeNameError)}}function B(t,e){if(1&t&&(p.Ub(0),p.Nc(1,k,2,1,"app-field-hint",23),p.Nc(2,N,2,2,"app-field-hint",23),p.Tb()),2&t){p.ic();var n=p.Bc(7);p.Bb(1),p.oc("ngIf",n.errors.required),p.Bb(1),p.oc("ngIf",n.errors.pattern)}}function P(t,e){if(1&t&&(p.Wb(0,"mat-option",25),p.Pc(1),p.Vb()),2&t){var n=e.$implicit;p.oc("value",n.value),p.Bb(1),p.Rc("",n.name," ")}}function I(t,e){if(1&t){var n=p.Xb();p.Wb(0,"mat-icon",26),p.ec("click",(function(t){return p.Dc(n),p.ic(2).unlockScope(t)})),p.Pc(1,"lock"),p.Vb()}}function C(t,e){if(1&t){var n=p.Xb();p.Wb(0,"mat-icon",26),p.ec("click",(function(t){return p.Dc(n),p.ic(2).unlockScope(t)})),p.Pc(1,"lock_open"),p.Vb()}}function D(t,e){if(1&t&&(p.Wb(0,"div",5),p.Wb(1,"h3"),p.Pc(2,"Shared Content Type (Ghost)"),p.Vb(),p.Wb(3,"p"),p.Pc(4,"Note: this can't be edited in the UI, for now if you really know what you're doing, do it in the DB"),p.Vb(),p.Wb(5,"p"),p.Pc(6),p.Vb(),p.Vb()),2&t){var n=p.ic(2);p.Bb(6),p.Rc("Uses Type Definition of: ",n.contentType.SharedDefId,"")}}function O(t,e){if(1&t){var n=p.Xb();p.Wb(0,"form",3,4),p.ec("ngSubmit",(function(){return p.Dc(n),p.ic().onSubmit()})),p.Wb(2,"div",5),p.Wb(3,"mat-form-field",6),p.Wb(4,"mat-label"),p.Pc(5,"Name"),p.Vb(),p.Wb(6,"input",7,8),p.ec("ngModelChange",(function(t){return p.Dc(n),p.ic().contentType.Name=t})),p.Vb(),p.Vb(),p.Nc(8,B,3,2,"ng-container",9),p.Vb(),p.Wb(9,"mat-accordion"),p.Wb(10,"mat-expansion-panel",10),p.Wb(11,"mat-expansion-panel-header"),p.Wb(12,"mat-panel-title"),p.Pc(13,"Advanced"),p.Vb(),p.Rb(14,"mat-panel-description"),p.Vb(),p.Wb(15,"div",5),p.Wb(16,"mat-form-field",6),p.Wb(17,"mat-label"),p.Pc(18,"Description"),p.Vb(),p.Wb(19,"input",11),p.ec("ngModelChange",(function(t){return p.Dc(n),p.ic().contentType.Description=t})),p.Vb(),p.Vb(),p.Vb(),p.Wb(20,"div",5),p.Wb(21,"mat-form-field",6),p.Wb(22,"mat-label"),p.Pc(23,"Scope"),p.Vb(),p.Wb(24,"mat-select",12),p.ec("selectionChange",(function(t){return p.Dc(n),p.ic().changeScope(t)})),p.Nc(25,P,2,2,"mat-option",13),p.Wb(26,"mat-option",14),p.Pc(27,"Other..."),p.Vb(),p.Vb(),p.Wb(28,"button",15),p.Nc(29,I,2,0,"mat-icon",16),p.Nc(30,C,2,0,"mat-icon",16),p.Vb(),p.Vb(),p.Wb(31,"app-field-hint"),p.Pc(32," The scope should almost never be changed - "),p.Wb(33,"a",17),p.Pc(34,"see help"),p.Vb(),p.Vb(),p.Vb(),p.Wb(35,"div",5),p.Wb(36,"mat-form-field",6),p.Wb(37,"mat-label"),p.Pc(38,"Static Name"),p.Vb(),p.Rb(39,"input",18),p.Vb(),p.Vb(),p.Nc(40,D,7,1,"div",19),p.Vb(),p.Vb(),p.Wb(41,"div",20),p.Wb(42,"button",21),p.ec("click",(function(){return p.Dc(n),p.ic().closeDialog()})),p.Pc(43,"Cancel"),p.Vb(),p.Wb(44,"button",22),p.Pc(45,"Save"),p.Vb(),p.Vb(),p.Vb()}if(2&t){var o=p.Bc(1),c=p.Bc(7),i=p.ic();p.Bb(6),p.oc("pattern",i.contentTypeNamePattern)("ngModel",i.contentType.Name),p.Bb(2),p.oc("ngIf",c.touched&&c.errors),p.Bb(1),p.oc("@.disabled",i.disableAnimation),p.Bb(10),p.oc("ngModel",i.contentType.Description),p.Bb(5),p.oc("ngModel",i.contentType.Scope)("disabled",i.lockScope),p.Bb(1),p.oc("ngForOf",i.scopeOptions),p.Bb(3),p.oc("matTooltip",i.lockScope?"Unlock":"Lock"),p.Bb(1),p.oc("ngIf",i.lockScope),p.Bb(1),p.oc("ngIf",!i.lockScope),p.Bb(9),p.oc("ngModel",i.contentType.StaticName),p.Bb(1),p.oc("ngIf",i.contentType.SharedDefId),p.Bb(4),p.oc("disabled",!o.form.valid)}}n.d(e,"EditContentTypeComponent",(function(){return w}));var w=function(){function t(t,e,n,o){this.dialogRef=t,this.route=e,this.contentTypesService=n,this.snackBar=o,this.lockScope=!0,this.contentTypeNamePattern=a.b,this.contentTypeNameError=a.a,this.disableAnimation=!0,this.scope=this.route.snapshot.paramMap.get("scope"),this.id=parseInt(this.route.snapshot.paramMap.get("id"),10)}return t.prototype.ngAfterViewInit=function(){var t=this;setTimeout((function(){return t.disableAnimation=!1}))},t.prototype.ngOnInit=function(){this.fetchScopes(),this.id?this.fetchContentType():this.contentType=Object(o.a)(Object(o.a)({},new c),{StaticName:"",Name:"",Description:"",Scope:this.scope,ChangeStaticName:!1,NewStaticName:""})},t.prototype.changeScope=function(t){var e=t.value;"Other"===e&&((e=prompt("This is an advanced feature to show content-types of another scope. Don't use this if you don't know what you're doing, as content-types of other scopes are usually hidden for a good reason."))?this.scopeOptions.find((function(t){return t.value===e}))||this.scopeOptions.push({name:e,value:e}):e=i.a.scopes.default.value),this.contentType.Scope=e},t.prototype.unlockScope=function(t){t.stopPropagation(),this.lockScope=!this.lockScope,this.lockScope&&(this.contentType.Scope=this.scope)},t.prototype.onSubmit=function(){var t=this;this.snackBar.open("Saving..."),this.contentTypesService.save(this.contentType).subscribe((function(e){t.snackBar.open("Saved",null,{duration:2e3}),t.closeDialog()}))},t.prototype.closeDialog=function(){this.dialogRef.close()},t.prototype.fetchScopes=function(){var t=this;this.contentTypesService.getScopes().subscribe((function(e){t.scopeOptions=e}))},t.prototype.fetchContentType=function(){var t=this;this.contentTypesService.retrieveContentTypes(this.scope).subscribe((function(e){var n=e.find((function(e){return e.Id===t.id}));t.contentType=Object(o.a)(Object(o.a)({},n),{ChangeStaticName:!1,NewStaticName:n.StaticName})}))},t.\u0275fac=function(e){return new(e||t)(p.Qb(r.h),p.Qb(s.a),p.Qb(b.a),p.Qb(l.b))},t.\u0275cmp=p.Kb({type:t,selectors:[["app-edit-content-type"]],decls:4,vars:2,consts:[["mat-dialog-title",""],[1,"dialog-title-box"],[3,"ngSubmit",4,"ngIf"],[3,"ngSubmit"],["ngForm","ngForm"],[1,"edit-input"],["appearance","standard","color","accent"],["matInput","","type","text","name","Name","required","",3,"pattern","ngModel","ngModelChange"],["name","ngModel"],[4,"ngIf"],["expanded","false"],["matInput","","type","text","name","Description",3,"ngModel","ngModelChange"],["name","Scope",3,"ngModel","disabled","selectionChange"],[3,"value",4,"ngFor","ngForOf"],["value","Other"],["mat-icon-button","","type","button","matSuffix","",3,"matTooltip"],[3,"click",4,"ngIf"],["href","http://2sxc.org/help?tag=scope","target","_blank","appClickStopPropagation",""],["matInput","","type","text","name","StaticName","disabled","",3,"ngModel"],["class","edit-input",4,"ngIf"],[1,"dialog-actions-box"],["mat-raised-button","","type","button",3,"click"],["mat-raised-button","","type","submit","color","accent",3,"disabled"],[3,"isError",4,"ngIf"],[3,"isError"],[3,"value"],[3,"click"]],template:function(t,e){1&t&&(p.Wb(0,"div",0),p.Wb(1,"div",1),p.Pc(2),p.Vb(),p.Vb(),p.Nc(3,O,46,14,"form",2)),2&t&&(p.Bb(2),p.Qc(e.id?"Edit Content Type":"New Content Type"),p.Bb(1),p.oc("ngIf",e.contentType))},directives:[r.i,u.t,d.G,d.s,d.t,f.c,f.g,h.b,d.c,d.B,d.x,d.r,d.u,m.a,m.c,m.e,m.f,m.d,g.a,u.s,y.l,S.b,f.j,v.a,T.a,V.a,W.a],styles:[".edit-input[_ngcontent-%COMP%]{padding-bottom:8px}.mat-hint[_ngcontent-%COMP%]{font-size:12px}"]}),t}()}}]);
//# sourceMappingURL=https://sources.2sxc.org/11.03.00/ng-edit/edit-content-type-component.51c48d5351e90b1026a3.js.map