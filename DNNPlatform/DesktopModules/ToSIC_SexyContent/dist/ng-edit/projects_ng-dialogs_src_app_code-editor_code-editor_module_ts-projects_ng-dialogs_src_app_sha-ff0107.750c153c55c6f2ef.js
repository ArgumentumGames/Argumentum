"use strict";(self.webpackChunkng_dialogs=self.webpackChunkng_dialogs||[]).push([["projects_ng-dialogs_src_app_code-editor_code-editor_module_ts-projects_ng-dialogs_src_app_sha-ff0107"],{5005:(L,P,a)=>{a.d(P,{_:()=>f,s:()=>r});var u=a(635),O=a(8598),M=a(3184),S=a(8784),b=a(2425);const f="admin/type/";let r=(()=>{class l{constructor(h,x,p){this.http=h,this.context=x,this.dnnContext=p}apiUrl(h){return this.dnnContext.$2sxc.http.apiUrl(h)}retrieveContentType(h){return this.http.get(this.apiUrl(f+"get"),{params:{appId:this.context.appId.toString(),contentTypeId:h}})}retrieveContentTypes(h){return this.http.get(this.apiUrl(f+"list"),{params:{appId:this.context.appId.toString(),scope:h}})}getScopes(){return this.http.get(this.apiUrl(f+"scopes"),{params:{appId:this.context.appId.toString()}}).pipe((0,u.U)(h=>Object.keys(h).map(p=>({name:h[p],value:p}))))}save(h){return this.http.post(this.apiUrl(f+"save"),h,{params:{appid:this.context.appId.toString()}})}delete(h){return this.http.delete(this.apiUrl(f+"delete"),{params:{appid:this.context.appId.toString(),staticName:h.StaticName}})}import(h){const x=new FormData;for(const p of h)x.append("File",p);return this.http.post(this.apiUrl(f+"import"),x,{params:{appId:this.context.appId.toString(),zoneId:this.context.zoneId.toString()}})}createGhost(h){return this.http.post(this.apiUrl(f+"addghost"),null,{params:{appid:this.context.appId.toString(),sourceStaticName:h}})}}return l.\u0275fac=function(h){return new(h||l)(M.LFG(S.eN),M.LFG(O._),M.LFG(b._y))},l.\u0275prov=M.Yz7({token:l,factory:l.\u0275fac}),l})()},7180:(L,P,a)=>{a.r(P),a.d(P,{CodeEditorModule:()=>se,translateLoaderFactoryCode:()=>nt});var u=a(6362),O=a(7317),M=a(1130),S=a(5758),b=a(5590),f=a(4742),r=a(2528),l=a(7514),v=a(5260),h=a(5432),x=a(8598),p=a(8450),T=a(8865),m=a(162),w=a(2977),k=a(7714),D=a(6317),Z=a(6562),R=a(1640),U=a(1203),it=a(2673),ot=a(745),j=a(635),Y=a(3280),A=a(5656),W=a(8254),t=a(3184);function st(o,g){if(1&o&&(t.ynx(0),t.TgZ(1,"div"),t._uU(2),t.qZA(),t._UZ(3,"br"),t.BQk()),2&o){const e=t.oxw();t.xp6(2),t.AsE('"',e.snackBarData.fileName,'" also has a code-behind file "',e.snackBarData.codeFile,'".')}}function rt(o,g){if(1&o&&(t.ynx(0),t._uU(1),t.BQk()),2&o){const e=t.oxw(2);t.xp6(1),t.hij(' You are editing "',e.snackBarData.edition,'" edition. ')}}function at(o,g){1&o&&(t.ynx(0),t._uU(1," You may be editing an edition which is not the one you see. "),t.BQk())}function ct(o,g){if(1&o&&(t.TgZ(0,"div"),t.YNc(1,rt,2,1,"ng-container",1),t._uU(2),t.YNc(3,at,2,0,"ng-container",1),t._uU(4," See "),t.TgZ(5,"a",4),t._uU(6,"docs"),t.qZA(),t._uU(7,". "),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.snackBarData.edition),t.xp6(1),t.AsE(" There are ",e.snackBarData.otherEditions,' other editions of "',e.snackBarData.fileName,'". '),t.xp6(1),t.Q6J("ngIf",!e.snackBarData.edition)}}function lt(o,g){if(1&o){const e=t.EpF();t.TgZ(0,"button",5),t.NdJ("click",function(){return t.CHM(e),t.oxw().openCodeBehind()}),t._uU(1," Open code-behind file "),t.qZA()}}let pt=(()=>{class o{constructor(e,n){this.snackRef=e,this.snackBarData=n}openCodeBehind(){this.snackBarData.openCodeBehind=!0,this.snackRef.dismissWithAction()}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(r.OX),t.Y36(r.qD))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-code-and-edition-warnings"]],decls:5,vars:3,consts:[[1,"messages"],[4,"ngIf"],[1,"actions"],["mat-button","","color","primary",3,"click",4,"ngIf"],["href","http://r.2sxc.org/polymorphism","target","_blank"],["mat-button","","color","primary",3,"click"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0),t.YNc(1,st,4,2,"ng-container",1),t.YNc(2,ct,8,4,"div",1),t.qZA(),t.TgZ(3,"div",2),t.YNc(4,lt,2,0,"button",3),t.qZA()),2&e&&(t.xp6(1),t.Q6J("ngIf",n.snackBarData.codeFile),t.xp6(1),t.Q6J("ngIf",n.snackBarData.otherEditions),t.xp6(2),t.Q6J("ngIf",n.snackBarData.codeFile))},directives:[u.O5,O.lW],styles:[".messages[_ngcontent-%COMP%]{font-size:14px}.messages[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fff}.actions[_ngcontent-%COMP%]{display:flex;align-items:flex-end;justify-content:flex-end}"]}),o})();const z={Templates:"Templates",Snippets:"Snippets"};var dt=a(2215),_t=a(9702),gt=a(4722),ut=a(8784),ht=a(2425);let K=(()=>{class o{constructor(e,n,i){this.http=e,this.dnnContext=n,this.translate=i}getSnippets(e){return this.http.get("../ng-assets/snippets.json.js").pipe((0,j.U)(n=>{const i=this.filterAwayNotNeededSnippetsList(n.snippets,e),s=this.extractInputTypeSnippets(i),c=this.initSnippetsWithConfig(s.standardArray,e,s.inputTypeSnippets);return{list:s.standardArray,sets:c}}))}filterAwayNotNeededSnippetsList(e,n){const i=["@","["],s=d=>d.Type.indexOf("Razor")>-1?0:1,c=[];for(const d of e){const _=i.indexOf(d.set[0]);(-1===_||_===s(n))&&(_===s(n)&&(d.set=d.set.substring(1)),c.push(d))}return c}extractInputTypeSnippets(e){const n=[],i=[];for(const d of e)"\\"===d.set[0]?(d.set=d.set.substring(1),i.push(d)):n.push(d);return{standardArray:n,inputTypeSnippets:this.catalogInputTypeSnippets(i)}}catalogInputTypeSnippets(e){const n={};for(const i of e)void 0===n[i.subset]&&(n[i.subset]=[]),n[i.subset].push(i);return n}initSnippetsWithConfig(e,n,i){const s=this.makeTree(e);return s.Content=Object.assign({},s.Content,{Fields:{},PresentationFields:{}}),n.TypeContent&&this.loadContentType(s.Content.Fields,n.TypeContent,"Content",n,i),n.TypeContentPresentation&&this.loadContentType(s.Content.PresentationFields,n.TypeContentPresentation,"Content.Presentation",n,i),n.HasList?(s.List=Object.assign({},s.List,{Fields:{},PresentationFields:{}}),n.TypeList&&this.loadContentType(s.List.Fields,n.TypeList,"Header",n,i),n.TypeListPresentation&&this.loadContentType(s.List.PresentationFields,n.TypeListPresentation,"Header.Presentation",n,i)):delete s.List,n.HasApp&&(s.App.Resources={},s.App.Settings={},this.loadContentType(s.App.Resources,"App-Resources","App.Resources",n,i),this.loadContentType(s.App.Settings,"App-Settings","App.Settings",n,i)),s}makeTree(e){const n={};for(const i of e){void 0===n[i.set]&&(n[i.set]={}),void 0===n[i.set][i.subset]&&(n[i.set][i.subset]=[]);const s={key:i.name,label:this.label(i.set,i.subset,i.name),snip:i.content,help:i.help||this.help(i.set,i.subset,i.name),links:this.linksList(i.links)};n[i.set][i.subset].push(s)}return n}label(e,n,i){const s=this.getHelpKey(e,n,i,".Key");let c=this.translate.instant(s);return c===s&&(c=i),c}getHelpKey(e,n,i,s){return"SourceEditorSnippets."+e+"."+n+"."+i+s}help(e,n,i){const s=this.getHelpKey(e,n,i,".Help");let c=this.translate.instant(s);return c===s&&(c=""),c}linksList(e){if(!e)return null;const n=[],i=e.split("\n");for(const s of i){const c=s.split(":");if(3===c.length){const d={name:c[0].trim(),url:c[1].trim()+":"+c[2].trim()};n.push(d)}}return 0===n.length?null:n}loadContentType(e,n,i,s,c){this.getFields(s.AppId,n).subscribe(d=>{for(const _ of d){const C=_.StaticName;e[C]={key:C,label:C,snip:this.valuePlaceholder(i,C,s),help:_.Metadata.merged.Notes||" ("+_.Type.toLowerCase()+") "};const y=(0,dt.Z)(e[C]);this.attachSnippets(e,i,C,_.InputType,y,c)}if(d.length){const _=["EntityId","EntityTitle","EntityGuid","EntityType","IsPublished","Modified"];for(let C=0;C<_.length;C++)e[_[C]]={key:_[C],label:_[C],snip:this.valuePlaceholder(i,_[C],s),help:this.translate.instant("SourceEditorSnippets.StandardFields."+_[C]+".Help")}}})}valuePlaceholder(e,n,i){return i.Type.indexOf("Razor")>-1?"@"+e+"."+n:"["+e.replace(".",":")+":"+n+"]"}getFields(e,n){return this.http.get(this.dnnContext.$2sxc.http.apiUrl(gt.jt),{params:{appid:e.toString(),staticName:n}}).pipe((0,j.U)(i=>{i=i.filter(s=>s.Type!==_t.Q.Empty);for(const s of i){if(!s.Metadata)continue;const c=s.Metadata,_=c[s.Type],C=c[s.InputType];c.merged=Object.assign(Object.assign(Object.assign({},c.All),_),C)}return i}))}attachSnippets(e,n,i,s,c,d){let _=d[s];if(s.indexOf("-")){const y=s.substring(0,s.indexOf("-"));if(y){const F=d[y];F&&(_=_?_.concat(F):F)}}if(!_)return;void 0===e[i].more&&(e[i].more={});const C=e[i].more;for(let y=0;y<_.length;y++)try{C[i+"-"+_[y].name]=Object.assign({},c,{key:i+" - "+_[y].name,label:_[y].name,snip:this.localizeGenericSnippet(_[y].content,n,i),collapse:!0})}finally{}}localizeGenericSnippet(e,n,i){return e.replace(/(\$\{[0-9]+\:)var(\})/gi,"$1"+n+"$2").replace(/(\$\{[0-9]+\:)prop(\})/gi,"$1"+i+"$2")}}return o.\u0275fac=function(e){return new(e||o)(t.LFG(ut.eN),t.LFG(ht._y),t.LFG(l.sK))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac}),o})();var X=a(1183),G=a(318),mt=a(5469),V=a(785);function q(o){if(!o)return[];const g=[];for(const e of o){let n=g;const i=e.Path.split("/"),s=i[i.length-1];let c="";for(let d=0;d<i.length;d++){const _=i[d];c+=d?`/${_}`:_;const C=n.find(y=>y.name===_);if(C)n=C.children;else{const y=Object.assign({depth:d,name:_,pathFromRoot:c,isShared:e.Shared,isFolder:_!==s},_!==s&&{children:[]});n.push(y),n=y.children}}}return g}var B=a(491);let vt=(()=>{class o{transform(e){return null==e||e.sort((n,i)=>n.isFolder<i.isFolder?1:n.isFolder>i.isFolder?-1:0),e}}return o.\u0275fac=function(e){return new(e||o)},o.\u0275pipe=t.Yjl({name:"sortItems",type:o,pure:!0}),o})(),Ct=(()=>{class o{constructor(e){this.sanitizer=e}transform(e,n){let i;return i=n?8*e:0===e?8:8*e+16,this.sanitizer.bypassSecurityTrustStyle(`padding-left: ${i}px;`)}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(G.H7,16))},o.\u0275pipe=t.Yjl({name:"depthPadding",type:o,pure:!0}),o})();function xt(o,g){1&o&&t.GkF(0)}const tt=function(o){return{item:o}};function Tt(o,g){if(1&o&&(t.ynx(0),t.YNc(1,xt,1,0,"ng-container",5),t.BQk()),2&o){const e=g.$implicit;t.oxw();const n=t.MAs(5);t.xp6(1),t.Q6J("ngTemplateOutlet",n)("ngTemplateOutletContext",t.VKq(2,tt,e))}}const yt=function(o){return{active:o}};function St(o,g){if(1&o){const e=t.EpF();t.TgZ(0,"div",8),t.NdJ("click",function(){t.CHM(e);const i=t.oxw().item;return t.oxw().openTemplate(i.pathFromRoot,i.isShared)}),t.ALo(1,"depthPadding"),t._uU(2),t.qZA()}if(2&o){const e=t.oxw().item,n=t.oxw();t.Akn(t.xi3(1,5,e.depth,e.isFolder)),t.Q6J("ngClass",t.VKq(8,yt,n.isToggled(e.pathFromRoot,e.isShared)))("tippy",e.name),t.xp6(2),t.hij(" ",e.name," ")}}function bt(o,g){1&o&&t.GkF(0)}function It(o,g){if(1&o&&(t.ynx(0),t.YNc(1,bt,1,0,"ng-container",5),t.BQk()),2&o){const e=g.$implicit;t.oxw(4);const n=t.MAs(5);t.xp6(1),t.Q6J("ngTemplateOutlet",n)("ngTemplateOutletContext",t.VKq(2,tt,e))}}function Ot(o,g){if(1&o&&(t.ynx(0),t.YNc(1,It,2,4,"ng-container",1),t.ALo(2,"sortItems"),t.BQk()),2&o){const e=t.oxw(2).item;t.xp6(1),t.Q6J("ngForOf",t.lcZ(2,1,e.children))}}const wt=function(o){return{"app-shared-root":o}};function Mt(o,g){if(1&o){const e=t.EpF();t.TgZ(0,"div")(1,"div",9),t.NdJ("click",function(){t.CHM(e);const i=t.oxw().item;return t.oxw().toggleItem(i.pathFromRoot,i.isShared)}),t.ALo(2,"depthPadding"),t.TgZ(3,"div",10)(4,"mat-icon"),t._uU(5),t.qZA(),t.TgZ(6,"span"),t._uU(7),t.qZA()(),t.TgZ(8,"div",11),t.NdJ("click",function(){t.CHM(e);const i=t.oxw().item;return t.oxw().addFile(i.pathFromRoot,i.isShared)}),t.TgZ(9,"mat-icon"),t._uU(10,"add"),t.qZA()()(),t.YNc(11,Ot,3,3,"ng-container",7),t.qZA()}if(2&o){const e=t.oxw().item,n=t.oxw();t.xp6(1),t.Akn(t.xi3(2,7,e.depth+1,e.isFolder)),t.Q6J("ngClass",t.VKq(10,wt,e.depth<0)),t.xp6(2),t.Q6J("tippy",e.name),t.xp6(2),t.hij(" ",n.isToggled(e.pathFromRoot,e.isShared)?"keyboard_arrow_down":"keyboard_arrow_right"," "),t.xp6(2),t.Oqu(e.name),t.xp6(4),t.Q6J("ngIf",n.isToggled(e.pathFromRoot,e.isShared))}}function Et(o,g){if(1&o&&(t.YNc(0,St,3,10,"div",6),t.YNc(1,Mt,12,12,"div",7)),2&o){const e=g.item;t.Q6J("ngIf",!e.isFolder),t.xp6(1),t.Q6J("ngIf",e.isFolder)}}let Pt=(()=>{class o{constructor(){this.openView=new t.vpe,this.createTemplate=new t.vpe,this.toggledItemsApp=[],this.toggledItemsShared=[]}ngOnChanges(e){var n;if(null!=e.templates&&(this.tree=function ft(o){return[{depth:-1,name:"App Files",pathFromRoot:"",isShared:!1,isFolder:!0,children:q(o.filter(e=>!e.Shared))},{depth:-1,name:"Shared App Files",pathFromRoot:"",isShared:!0,isFolder:!0,children:q(o.filter(e=>e.Shared))}]}(this.templates)),null!=e.view){const i=null===(n=e.view)||void 0===n?void 0:n.previousValue;i&&this.toggleItem(i.FileName,i.IsShared),this.view&&this.showFileInTree(this.view.FileName,this.view.IsShared)}}isToggled(e,n){return(n?this.toggledItemsShared:this.toggledItemsApp).includes(e)}openTemplate(e,n){this.openView.emit({key:e,shared:n})}toggleItem(e,n){A.iX.toggleInArray(e,n?this.toggledItemsShared:this.toggledItemsApp)}addFile(e,n){this.createTemplate.emit({folder:e,isShared:n})}showFileInTree(e,n){if(null==e)return;const i=n?this.toggledItemsShared:this.toggledItemsApp;if(i.includes(e))return;const s=["",...e.split("/")];let c="";for(const d of s)c=c?`${c}/${d}`:d,!i.includes(c)&&this.toggleItem(c,n)}}return o.\u0275fac=function(e){return new(e||o)},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-code-templates"]],inputs:{view:"view",templates:"templates"},outputs:{openView:"openView",createTemplate:"createTemplate"},features:[t.TTD],decls:10,vars:3,consts:[[1,"editor-active-explorer","fancy-scrollbar-dark","explorer-wrapper"],[4,"ngFor","ngForOf"],["fileOrFolder",""],[1,"create-button-wrapper"],["mat-icon-button","","tippy","Create file",3,"click"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["class","file","tippyShowDelay","750",3,"style","ngClass","tippy","click",4,"ngIf"],[4,"ngIf"],["tippyShowDelay","750",1,"file",3,"ngClass","tippy","click"],[1,"folder-name-wrapper",3,"ngClass","click"],["tippyShowDelay","750",1,"folder-name",3,"tippy"],["tippy","Create file in this folder","tippyShowDelay","750","appClickStopPropagation","",1,"add-item",3,"click"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"div"),t.YNc(2,Tt,2,4,"ng-container",1),t.ALo(3,"sortItems"),t.YNc(4,Et,2,2,"ng-template",null,2,t.W1O),t.qZA(),t.TgZ(6,"div",3)(7,"button",4),t.NdJ("click",function(){return n.addFile()}),t.TgZ(8,"mat-icon"),t._uU(9,"add"),t.qZA()()()()),2&e&&(t.xp6(2),t.Q6J("ngForOf",t.lcZ(3,1,n.tree)))},directives:[u.sg,u.tP,u.O5,u.mk,V.$,b.Hw,B.E,O.lW],pipes:[vt,Ct],styles:[".explorer-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-between}.create-button-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:flex-end}.file[_ngcontent-%COMP%]{cursor:pointer;padding:4px 0 4px 8px;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;-webkit-user-select:none;user-select:none}.file[_ngcontent-%COMP%]:hover{background-color:#2a2d2e}.file.active[_ngcontent-%COMP%]{background-color:#37373d}.folder-name-wrapper[_ngcontent-%COMP%]{display:flex;cursor:pointer;-webkit-user-select:none;user-select:none;align-items:center}.folder-name-wrapper[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{width:18px;height:18px;font-size:18px}.folder-name-wrapper[_ngcontent-%COMP%]   .folder-name[_ngcontent-%COMP%]{display:flex;align-items:center;overflow:hidden;white-space:nowrap;padding:3px 0;flex:1 1 auto}.folder-name-wrapper[_ngcontent-%COMP%]   .add-item[_ngcontent-%COMP%]{margin-right:4px;display:none;align-items:center;justify-content:center;padding:3px}.folder-name-wrapper.app-shared-root[_ngcontent-%COMP%]{color:#fff;font-weight:500}.folder-name-wrapper[_ngcontent-%COMP%]:hover{background-color:#2a2d2e}.folder-name-wrapper[_ngcontent-%COMP%]:hover   .add-item[_ngcontent-%COMP%]{display:flex}"]}),o})(),At=(()=>{class o{transform(e){if(null!=e)return Array.isArray(e)?e:Object.values(e)}}return o.\u0275fac=function(e){return new(e||o)},o.\u0275pipe=t.Yjl({name:"objectToArray",type:o,pure:!0}),o})();var kt=a(845);function Ft(o,g){if(1&o){const e=t.EpF();t.TgZ(0,"mat-icon",12),t.NdJ("click",function(){t.CHM(e);const i=t.oxw().$implicit;return t.oxw(5).toggleMore(i.key)}),t._uU(1),t.qZA()}if(2&o){const e=t.oxw().$implicit,n=t.oxw(5);t.xp6(1),t.hij(" ",n.toggledMores.includes(e.key)?"more_vert":"more_horiz"," ")}}function Dt(o,g){if(1&o&&(t.TgZ(0,"div")(1,"a",15),t._uU(2),t.qZA()()),2&o){const e=g.$implicit;t.xp6(1),t.Q6J("href",e.url,t.LSH),t.xp6(1),t.Oqu(e.name)}}function Zt(o,g){if(1&o&&(t.TgZ(0,"div",13),t._UZ(1,"div",14),t.ALo(2,"safeHtml"),t.YNc(3,Dt,3,2,"div",1),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("innerHTML",t.lcZ(2,2,e.help),t.oJD),t.xp6(2),t.Q6J("ngForOf",e.links)}}function Nt(o,g){if(1&o&&(t.TgZ(0,"div")(1,"a",15),t._uU(2),t.qZA()()),2&o){const e=g.$implicit;t.xp6(1),t.Q6J("href",e.url,t.LSH),t.xp6(1),t.Oqu(e.name)}}function Lt(o,g){if(1&o&&(t.TgZ(0,"div",18),t._UZ(1,"div",14),t.ALo(2,"safeHtml"),t.YNc(3,Nt,3,2,"div",1),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("innerHTML",t.lcZ(2,2,e.help),t.oJD),t.xp6(2),t.Q6J("ngForOf",e.links)}}function $t(o,g){if(1&o){const e=t.EpF();t.TgZ(0,"div")(1,"div",7)(2,"div",16),t.NdJ("click",function(){const s=t.CHM(e).$implicit;return t.oxw(7).addSnippet(s.snip)}),t._uU(3),t.qZA(),t.TgZ(4,"mat-icon",10),t.NdJ("click",function(){const s=t.CHM(e).$implicit;return t.oxw(7).toggleInfo(s.key)}),t._uU(5," info "),t.qZA()(),t.YNc(6,Lt,4,4,"div",17),t.qZA()}if(2&o){const e=g.$implicit,n=t.oxw(7);t.xp6(2),t.Q6J("tippy",e.snip),t.xp6(1),t.hij(" ",e.label," "),t.xp6(3),t.Q6J("ngIf",n.toggledInfos.includes(e.key))}}function Jt(o,g){if(1&o&&(t.ynx(0),t.YNc(1,$t,7,3,"div",1),t.ALo(2,"objectToArray"),t.BQk()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("ngForOf",t.lcZ(2,1,e.more))}}function Rt(o,g){if(1&o){const e=t.EpF();t.TgZ(0,"div",6)(1,"div",7)(2,"div",8),t.NdJ("click",function(){const s=t.CHM(e).$implicit;return t.oxw(5).addSnippet(s.snip)}),t._uU(3),t.qZA(),t.YNc(4,Ft,2,1,"mat-icon",9),t.TgZ(5,"mat-icon",10),t.NdJ("click",function(){const s=t.CHM(e).$implicit;return t.oxw(5).toggleInfo(s.key)}),t._uU(6," info "),t.qZA()(),t.YNc(7,Zt,4,4,"div",11),t.YNc(8,Jt,3,3,"ng-container",3),t.qZA()}if(2&o){const e=g.$implicit,n=t.oxw(5);t.xp6(2),t.Q6J("tippy",e.snip),t.xp6(1),t.hij(" ",e.label," "),t.xp6(1),t.Q6J("ngIf",e.more),t.xp6(3),t.Q6J("ngIf",n.toggledInfos.includes(e.key)),t.xp6(1),t.Q6J("ngIf",n.toggledMores.includes(e.key))}}function Ut(o,g){if(1&o&&(t.ynx(0),t.YNc(1,Rt,9,5,"div",5),t.ALo(2,"objectToArray"),t.BQk()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("ngForOf",t.lcZ(2,1,e.value))}}function jt(o,g){if(1&o){const e=t.EpF();t.TgZ(0,"div")(1,"div",4),t.NdJ("click",function(){const s=t.CHM(e).$implicit;return t.oxw(3).toggleFolder(s.key)}),t.ALo(2,"translate"),t.TgZ(3,"mat-icon"),t._uU(4),t.qZA(),t.TgZ(5,"span"),t._uU(6),t.ALo(7,"translate"),t.qZA()(),t.YNc(8,Ut,3,3,"ng-container",3),t.qZA()}if(2&o){const e=g.$implicit,n=t.oxw(2).$implicit,i=t.oxw();t.xp6(1),t.Q6J("tippy",t.lcZ(2,4,"SourceEditorSnippets."+n.key+"."+e.key+".Help")),t.xp6(3),t.hij(" ",i.toggledFolders.includes(e.key)?"keyboard_arrow_down":"keyboard_arrow_right"," "),t.xp6(2),t.Oqu(t.lcZ(7,6,"SourceEditorSnippets."+n.key+"."+e.key+".Title")),t.xp6(2),t.Q6J("ngIf",i.toggledFolders.includes(e.key))}}function Vt(o,g){if(1&o&&(t.ynx(0),t.YNc(1,jt,9,8,"div",1),t.ALo(2,"keyvalue"),t.BQk()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("ngForOf",t.lcZ(2,1,e.value))}}function Ht(o,g){if(1&o){const e=t.EpF();t.TgZ(0,"div")(1,"div",2),t.NdJ("click",function(){const s=t.CHM(e).$implicit;return t.oxw().toggleSection(s.key)}),t.ALo(2,"translate"),t.TgZ(3,"mat-icon"),t._uU(4),t.qZA(),t.TgZ(5,"span"),t._uU(6),t.ALo(7,"translate"),t.qZA()(),t.YNc(8,Vt,3,3,"ng-container",3),t.qZA()}if(2&o){const e=g.$implicit,n=t.oxw();t.xp6(1),t.Q6J("tippy",t.lcZ(2,4,"SourceEditorSnippets."+e.key+".Help")),t.xp6(3),t.hij(" ",n.toggledSections.includes(e.key)?"keyboard_arrow_down":"keyboard_arrow_right"," "),t.xp6(2),t.Oqu(t.lcZ(7,6,"SourceEditorSnippets."+e.key+".Title")),t.xp6(2),t.Q6J("ngIf",n.toggledSections.includes(e.key))}}let Bt=(()=>{class o{constructor(){this.insertSnippet=new t.vpe,this.toggledSections=[],this.toggledFolders=[],this.toggledInfos=[],this.toggledMores=[]}addSnippet(e){this.insertSnippet.emit(e)}toggleSection(e){A.iX.toggleInArray(e,this.toggledSections)}toggleFolder(e){A.iX.toggleInArray(e,this.toggledFolders)}toggleInfo(e){A.iX.toggleInArray(e,this.toggledInfos)}toggleMore(e){A.iX.toggleInArray(e,this.toggledMores)}}return o.\u0275fac=function(e){return new(e||o)},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-code-snippets"]],inputs:{snippets:"snippets"},outputs:{insertSnippet:"insertSnippet"},decls:3,vars:3,consts:[[1,"editor-active-explorer","fancy-scrollbar-dark"],[4,"ngFor","ngForOf"],["tippyShowDelay","750",1,"collapsible-header","section",3,"tippy","click"],[4,"ngIf"],["tippyShowDelay","750",1,"collapsible-header","folder",3,"tippy","click"],["class","snippet",4,"ngFor","ngForOf"],[1,"snippet"],[1,"snippet-label"],["matRipple","","tippyShowDelay","750",1,"text",3,"tippy","click"],["tippy","Show More","tippyShowDelay","750",3,"click",4,"ngIf"],["tippy","Show Help","tippyShowDelay","750","appClickStopPropagation","",3,"click"],["class","snippet-help",4,"ngIf"],["tippy","Show More","tippyShowDelay","750",3,"click"],[1,"snippet-help"],[1,"text",3,"innerHTML"],["target","_blank",3,"href"],["matRipple","","tippyShowDelay","750",1,"text","text-more",3,"tippy","click"],["class","snippet-help snippet-help-more",4,"ngIf"],[1,"snippet-help","snippet-help-more"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0),t.YNc(1,Ht,9,8,"div",1),t.ALo(2,"keyvalue"),t.qZA()),2&e&&(t.xp6(1),t.Q6J("ngForOf",t.lcZ(2,1,n.snippets)))},directives:[u.sg,V.$,b.Hw,u.O5,M.wG,B.E],pipes:[u.Nd,l.X$,At,kt.z],styles:[".collapsible-header[_ngcontent-%COMP%]{display:flex;align-items:center;cursor:pointer;overflow:hidden;white-space:nowrap;-webkit-user-select:none;user-select:none;padding:3px 0}.collapsible-header.section[_ngcontent-%COMP%]{background-color:#383838;font-weight:500}.collapsible-header.folder[_ngcontent-%COMP%]{padding-left:8px}.collapsible-header.folder[_ngcontent-%COMP%]:hover{background-color:#2a2d2e}.collapsible-header[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{width:18px;height:18px;font-size:18px}.snippet[_ngcontent-%COMP%]{padding-right:8px}.snippet[_ngcontent-%COMP%]:hover{background-color:#2a2d2e}.snippet-label[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;-webkit-user-select:none;user-select:none}.snippet-label[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{cursor:pointer;padding:3px 0 3px 32px;flex:1 1 auto;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.snippet-label[_ngcontent-%COMP%]   .text-more[_ngcontent-%COMP%]{padding-left:40px}.snippet-label[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{cursor:pointer;width:18px;height:18px;font-size:18px}.snippet-help[_ngcontent-%COMP%]{padding:3px 18px 3px 32px}.snippet-help-more[_ngcontent-%COMP%]{padding-left:40px}.snippet-help[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{font-size:12px;font-style:oblique;word-break:break-word}.snippet-help[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]     p{margin:0}"]}),o})();var Qt=a(7472);function Yt(o,g){1&o&&(t.TgZ(0,"mat-icon",21),t._uU(1,"share"),t.qZA())}function Wt(o,g){1&o&&(t.TgZ(0,"mat-icon",22),t._uU(1," circle "),t.qZA())}function zt(o,g){1&o&&t._UZ(0,"mat-spinner",23)}const Kt=function(o,g,e){return{active:o,modified:g,loading:e}};function Xt(o,g){if(1&o){const e=t.EpF();t.TgZ(0,"div",13),t.NdJ("click",function(){const s=t.CHM(e).$implicit;return t.oxw(3).openView(s.viewKey)}),t.TgZ(1,"div",14),t.YNc(2,Yt,2,0,"mat-icon",15),t.TgZ(3,"span",16),t._uU(4),t.qZA()(),t.TgZ(5,"div",17),t.YNc(6,Wt,2,0,"mat-icon",18),t.YNc(7,zt,1,0,"mat-spinner",19),t.TgZ(8,"mat-icon",20),t.NdJ("click",function(){const s=t.CHM(e).$implicit;return t.oxw(3).closeEditor(s.viewKey)}),t._uU(9," close "),t.qZA()()()}if(2&o){const e=g.$implicit;t.Q6J("ngClass",t.kEZ(6,Kt,e.isActive,e.isModified,e.isLoading)),t.xp6(1),t.Q6J("tippy",e.label),t.xp6(1),t.Q6J("ngIf",e.viewKey.shared),t.xp6(2),t.Oqu(e.label),t.xp6(2),t.Q6J("ngIf",e.isModified),t.xp6(1),t.Q6J("ngIf",e.isLoading)}}function Gt(o,g){if(1&o&&(t.TgZ(0,"div",11),t.YNc(1,Xt,10,10,"div",12),t.qZA()),2&o){const e=t.oxw().ngIf;t.xp6(1),t.Q6J("ngForOf",e.tabs)}}function qt(o,g){if(1&o){const e=t.EpF();t.TgZ(0,"app-monaco-editor",24),t.NdJ("valueChanged",function(i){t.CHM(e);const s=t.oxw().ngIf;return t.oxw().codeChanged(i,s.viewKey)}),t.qZA()}if(2&o){const e=t.oxw().ngIf,n=t.oxw();t.Q6J("filename",e.view.FileName)("value",e.view.Code)("options",n.monacoOptions)("snippets",e.editorSnipps)("autoFocus",!0)}}function te(o,g){if(1&o){const e=t.EpF();t.TgZ(0,"button",25),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).save()}),t.TgZ(1,"mat-icon"),t._uU(2,"done"),t.qZA()()}}const ee=function(o){return{"sxc-dark":o}},et=function(o){return{active:o}};function ne(o,g){if(1&o){const e=t.EpF();t.TgZ(0,"div",1)(1,"div",2)(2,"div",3),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return i.toggleExplorer(i.Explorers.Templates)}),t.TgZ(3,"mat-icon"),t._uU(4,"file_copy"),t.qZA()(),t.TgZ(5,"div",4),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return i.toggleExplorer(i.Explorers.Snippets)}),t.TgZ(6,"mat-icon"),t._uU(7,"code"),t.qZA()()(),t.TgZ(8,"app-code-templates",5),t.NdJ("openView",function(i){return t.CHM(e),t.oxw().openView(i)})("createTemplate",function(i){return t.CHM(e),t.oxw().createTemplate(i)}),t.qZA(),t.TgZ(9,"app-code-snippets",6),t.NdJ("insertSnippet",function(i){return t.CHM(e),t.oxw().insertSnippet(i)}),t.qZA(),t.TgZ(10,"div",7),t.YNc(11,Gt,2,1,"div",8),t.YNc(12,qt,1,5,"app-monaco-editor",9),t.qZA(),t.YNc(13,te,3,0,"button",10),t.qZA()}if(2&o){const e=g.ngIf,n=t.oxw();t.Q6J("ngClass",t.VKq(11,ee,"2sxc-dark"===n.monacoOptions.theme)),t.xp6(2),t.Q6J("ngClass",t.VKq(13,et,n.activeExplorer===n.Explorers.Templates)),t.xp6(3),t.Q6J("ngClass",t.VKq(15,et,n.activeExplorer===n.Explorers.Snippets)),t.xp6(3),t.Q6J("hidden",n.activeExplorer!==n.Explorers.Templates)("view",e.view)("templates",e.templates),t.xp6(1),t.Q6J("hidden",n.activeExplorer!==n.Explorers.Snippets)("snippets",e.explorerSnipps),t.xp6(2),t.Q6J("ngIf",e.tabs.length>0),t.xp6(1),t.Q6J("ngIf",e.view),t.xp6(1),t.Q6J("ngIf",e.activeView)}}const ie=[{path:"",component:(()=>{class o{constructor(e,n,i,s,c,d,_,C,y){var F;this.context=e,this.route=n,this.snackBar=i,this.sourceService=s,this.snippetsService=c,this.zone=d,this.titleService=_,this.dialog=C,this.viewContainerRef=y,this.Explorers=z,this.activeExplorer=z.Templates,this.monacoOptions={theme:"2sxc-dark",tabSize:2},this.context.init(this.route);const E=JSON.parse(sessionStorage.getItem(W.kF)),N=null!==(F="true"===sessionStorage.getItem(W.PH))&&void 0!==F&&F;E.forEach(I=>{var $;I.Path.startsWith("/")&&(I.Path=I.Path.substring(1)),null!==($=I.IsShared)&&void 0!==$||(I.IsShared=N)}),this.urlItems=E}ngOnInit(){this.subscription=new k.w0,this.templates$=new D.X([]);const e=this.urlItems.map(n=>{var i,s;return{key:null!==(s=null===(i=n.EntityId)||void 0===i?void 0:i.toString())&&void 0!==s?s:n.Path,shared:n.IsShared}});this.activeView$=new D.X(e[0]),this.openViews$=new D.X(e),this.viewInfos$=new D.X([]),this.attachListeners(),this.sourceService.getAll().subscribe(n=>{this.templates$.next(n)}),this.subscription.add((0,Z.a)([this.templates$,this.openViews$]).subscribe(([n,i])=>{if(0===n.length)return;let s=this.viewInfos$.value;const c=i.filter(d=>!s.some(_=>A.iX.objectsEqual(_.viewKey,d)));0!==c.length&&((0,R.D)(c.map(d=>{const _={viewKey:d};s=[...s,_];const C=this.sourceService.get(d.key,d.shared,this.urlItems).pipe((0,U.B)()),y=C.pipe((0,it.w)(F=>this.snippetsService.getSnippets(F)));return(0,R.D)([(0,ot.of)(d),C,y])})).subscribe(d=>{let _=this.viewInfos$.value;d.forEach(([C,y,F])=>{const E=_.findIndex(I=>A.iX.objectsEqual(I.viewKey,C));if(E<0)return;const N={viewKey:C,view:y,explorerSnipps:F.sets,editorSnipps:F.list,savedCode:y.Code};_=[..._.slice(0,E),N,..._.slice(E+1)],this.showCodeAndEditionWarnings(C,y,n)}),this.viewInfos$.next(_)}),this.viewInfos$.next(s))})),this.subscription.add((0,Z.a)([this.activeView$,this.viewInfos$]).subscribe(([n,i])=>{var s;const c=i.find(y=>A.iX.objectsEqual(y.viewKey,n)),d="Code Editor",_=null==c?d:`${null===(s=c.view)||void 0===s?void 0:s.FileName} - ${d}`;_!==this.titleService.getTitle()&&this.titleService.setTitle(_)})),this.templateVars$=(0,Z.a)([this.templates$,this.activeView$,this.openViews$,this.viewInfos$]).pipe((0,j.U)(([n,i,s,c])=>{const d=s.map(y=>{var F,E,N;const I=c.find(J=>A.iX.objectsEqual(J.viewKey,y));return{viewKey:y,label:null!==(E=null===(F=null==I?void 0:I.view)||void 0===F?void 0:F.FileName)&&void 0!==E?E:y.key,isActive:A.iX.objectsEqual(y,i),isModified:(null===(N=null==I?void 0:I.view)||void 0===N?void 0:N.Code)!==(null==I?void 0:I.savedCode),isLoading:null==(null==I?void 0:I.view)}}),_=c.find(y=>A.iX.objectsEqual(y.viewKey,i));return{activeView:i,tabs:d,viewKey:null==_?void 0:_.viewKey,view:null==_?void 0:_.view,templates:n,explorerSnipps:null==_?void 0:_.explorerSnipps,editorSnipps:null==_?void 0:_.editorSnipps}}))}ngOnDestroy(){this.templates$.complete(),this.activeView$.complete(),this.openViews$.complete(),this.viewInfos$.complete(),this.subscription.unsubscribe()}toggleExplorer(e){this.activeExplorer=this.activeExplorer!==e?e:null}createTemplate(e){var n;if(null==e.isShared)return void this.dialog.open(v.i6,{autoFocus:!1,viewContainerRef:this.viewContainerRef,width:"650px"}).afterClosed().subscribe(d=>{null!=d&&(e.isShared=d,this.createTemplate(e))});const i={folder:e.folder,global:e.isShared,purpose:"api"===e.folder||(null===(n=e.folder)||void 0===n?void 0:n.startsWith("api/"))?"Api":void 0};this.dialog.open(v.UH,{autoFocus:!1,data:i,viewContainerRef:this.viewContainerRef,width:"650px"}).afterClosed().subscribe(c=>{!c||this.sourceService.create(c.name,e.isShared,c.templateKey).subscribe(()=>{this.sourceService.getAll().subscribe(d=>{this.templates$.next(d)})})})}insertSnippet(e){var n;null===(n=this.monacoEditorRef)||void 0===n||n.insertSnippet(e)}codeChanged(e,n){let i=this.viewInfos$.value;const s=i.findIndex(_=>A.iX.objectsEqual(_.viewKey,n)),c=i[s],d=Object.assign(Object.assign({},c),{view:Object.assign(Object.assign({},c.view),{Code:e})});i=[...i.slice(0,s),d,...i.slice(s+1)],this.viewInfos$.next(i)}openView(e){var n,i;e=null!==(i=null===(n=this.viewInfos$.value.find(d=>{var _,C;return!A.iX.objectsEqual(d.viewKey,e)&&(null===(_=d.view)||void 0===_?void 0:_.FileName)===e.key&&(null===(C=d.view)||void 0===C?void 0:C.IsShared)===e.shared}))||void 0===n?void 0:n.viewKey)&&void 0!==i?i:e,A.iX.objectsEqual(this.activeView$.value,e)||this.activeView$.next(e);const c=this.openViews$.value;if(!c.some(d=>A.iX.objectsEqual(d,e))){const d=[...c,e];this.openViews$.next(d)}}closeEditor(e){var n;const i=this.openViews$.value,s=i.filter(d=>!A.iX.objectsEqual(d,e)),c=this.activeView$.value;if(A.iX.objectsEqual(c,e)){const d=null!==(n=i[i.findIndex(_=>A.iX.objectsEqual(_,c))-1])&&void 0!==n?n:s[0];this.activeView$.next(d)}this.openViews$.next(s)}save(e){null!=e||(e=this.activeView$.value);const n=this.viewInfos$.value.find(s=>A.iX.objectsEqual(s.viewKey,e));if(null==(null==n?void 0:n.view))return;this.snackBar.open("Saving...");const i=n.view.Code;this.sourceService.save(e.key,e.shared,n.view,this.urlItems).subscribe({next:s=>{if(!s)return void this.snackBar.open("Failed",null,{duration:2e3});let c=[...this.viewInfos$.value];const d=c.findIndex(y=>A.iX.objectsEqual(y.viewKey,e));if(d<0)return;const C=Object.assign(Object.assign({},c[d]),{savedCode:i});c=[...c.slice(0,d),C,...c.slice(d+1)],this.viewInfos$.next(c),this.snackBar.open("Saved",null,{duration:2e3})},error:()=>{this.snackBar.open("Failed",null,{duration:2e3})}})}showCodeAndEditionWarnings(e,n,i){var s;const c=n.FileName,d=c.indexOf("/")>-1?c.lastIndexOf("/")+1:0,_=0===d?"":c.substring(0,d),C=c.substring(d),F=C.substring(0,C.length-n.Extension.length)+".code"+n.Extension,E=i.find(I=>I.Path===_+F&&I.Shared===n.IsShared),N=i.filter(I=>I.Path.endsWith(C)&&I.Shared===n.IsShared).length-1;if(E||N){const I={fileName:C,codeFile:null==E?void 0:E.Path,edition:null===(s=this.urlItems.find(J=>{var Q;return(null===(Q=J.EntityId)||void 0===Q?void 0:Q.toString())===e.key&&J.IsShared===n.IsShared&&J.Path===n.FileName}))||void 0===s?void 0:s.Edition,otherEditions:N,openCodeBehind:!1},$=this.snackBar.openFromComponent(pt,{data:I,duration:1e4});$.onAction().subscribe(()=>{$.containerInstance.snackBarConfig.data.openCodeBehind&&this.openView({key:null==E?void 0:E.Path,shared:null==E?void 0:E.Shared})})}}attachListeners(){this.zone.runOutsideAngular(()=>{this.subscription.add((0,Y.R)(window,"beforeunload").subscribe(e=>{!this.viewInfos$.value.some(i=>null!=i.view&&i.view.Code!==i.savedCode)||(e.preventDefault(),e.returnValue="")})),this.subscription.add((0,Y.R)(window,"keydown").subscribe(e=>{83!==e.keyCode||!(navigator.platform.match("Mac")?e.metaKey:e.ctrlKey)||(e.preventDefault(),this.zone.run(()=>{this.save()}))}))})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(x._),t.Y36(w.gz),t.Y36(r.ux),t.Y36(X.t),t.Y36(K),t.Y36(t.R0b),t.Y36(G.Dx),t.Y36(S.uw),t.Y36(t.s_b))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-code-editor"]],viewQuery:function(e,n){if(1&e&&t.Gf(h.T,5),2&e){let i;t.iGM(i=t.CRH())&&(n.monacoEditorRef=i.first)}},decls:2,vars:3,consts:[["class","editor-root","appToggleDebug","",3,"ngClass",4,"ngIf"],["appToggleDebug","",1,"editor-root",3,"ngClass"],[1,"editor-side-toolbar"],["tippy","Templates",1,"button",3,"ngClass","click"],["tippy","Snippets",1,"button",3,"ngClass","click"],[3,"hidden","view","templates","openView","createTemplate"],[3,"hidden","snippets","insertSnippet"],[1,"editor-group"],["class","tabs-container fancy-scrollbar-dark",4,"ngIf"],[3,"filename","value","options","snippets","autoFocus","valueChanged",4,"ngIf"],["mat-fab","","mat-elevation-z24","","tippy","Click to save or CTRL + S",3,"click",4,"ngIf"],[1,"tabs-container","fancy-scrollbar-dark"],["class","tab",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"tab",3,"ngClass","click"],["tippyShowDelay","750",1,"tab-label-container",3,"tippy"],["class","icon-shared",4,"ngIf"],[1,"tab-label"],[1,"tab-actions-container"],["class","tab-action icon-modified","fontSet","material-icons",4,"ngIf"],["class","spinner","mode","indeterminate","diameter","14","color","white",4,"ngIf"],["tippy","Close","appClickStopPropagation","",1,"tab-action","icon-close",3,"click"],[1,"icon-shared"],["fontSet","material-icons",1,"tab-action","icon-modified"],["mode","indeterminate","diameter","14","color","white",1,"spinner"],[3,"filename","value","options","snippets","autoFocus","valueChanged"],["mat-fab","","mat-elevation-z24","","tippy","Click to save or CTRL + S",3,"click"]],template:function(e,n){1&e&&(t.YNc(0,ne,14,17,"div",0),t.ALo(1,"async")),2&e&&t.Q6J("ngIf",t.lcZ(1,1,n.templateVars$))},directives:[u.O5,mt.D,u.mk,V.$,b.Hw,Pt,Bt,u.sg,f.Ou,B.E,Qt.T,O.lW],pipes:[u.Ov],styles:[".sxc-dark[_ngcontent-%COMP%]{background-color:#1e1e1e}.editor-group[_ngcontent-%COMP%]{width:100%;height:100%;overflow:hidden}.editor-group[_ngcontent-%COMP%]   .tabs-container[_ngcontent-%COMP%]{display:flex;height:35px;background-color:#252526;overflow:hidden}.editor-group[_ngcontent-%COMP%]   .tabs-container[_ngcontent-%COMP%]:hover{overflow-x:auto}.editor-group[_ngcontent-%COMP%]   .tabs-container[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]{display:flex;flex:0 0 auto;align-items:center;cursor:pointer;color:#ccc;font-size:13px;padding-left:10px;border-right:1px solid #252526;background-color:#2d2d2d;-webkit-user-select:none;user-select:none}.editor-group[_ngcontent-%COMP%]   .tabs-container[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]   .tab-label-container[_ngcontent-%COMP%]{height:100%;display:flex;align-items:center}.editor-group[_ngcontent-%COMP%]   .tabs-container[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]   .tab-label-container[_ngcontent-%COMP%]   .icon-shared[_ngcontent-%COMP%]{font-size:16px;width:16px;height:16px;line-height:16px;margin-right:4px}.editor-group[_ngcontent-%COMP%]   .tabs-container[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]   .tab-actions-container[_ngcontent-%COMP%]{height:100%;width:28px;display:flex;align-items:center;justify-content:center}.editor-group[_ngcontent-%COMP%]   .tabs-container[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]   .tab-action[_ngcontent-%COMP%]{display:none;align-items:center;justify-content:center;width:16px;height:16px;padding:2px;font-size:16px;border-radius:5px}.editor-group[_ngcontent-%COMP%]   .tabs-container[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]   .tab-action.icon-modified[_ngcontent-%COMP%]{width:10px;height:10px;font-size:10px}.editor-group[_ngcontent-%COMP%]   .tabs-container[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]   .tab-action[_ngcontent-%COMP%]:hover{background-color:#5a5d5e4f}.editor-group[_ngcontent-%COMP%]   .tabs-container[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]{display:none}.editor-group[_ngcontent-%COMP%]   .tabs-container[_ngcontent-%COMP%]   .tab.active[_ngcontent-%COMP%]{color:#fff;background-color:#1e1e1e}.editor-group[_ngcontent-%COMP%]   .tabs-container[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]:hover   .icon-close[_ngcontent-%COMP%]{display:flex}.editor-group[_ngcontent-%COMP%]   .tabs-container[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]:not(:hover).modified   .icon-modified[_ngcontent-%COMP%]{display:flex}.editor-group[_ngcontent-%COMP%]   .tabs-container[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]:not(:hover).loading   .spinner[_ngcontent-%COMP%]{display:block}.editor-group[_ngcontent-%COMP%]   .tabs-container[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]:not(:hover):not(.modified):not(.loading).active   .icon-close[_ngcontent-%COMP%]{display:flex}.mat-fab[_ngcontent-%COMP%]{position:absolute;right:48px;bottom:32px;z-index:10}"]}),o})()}];let oe=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[w.Bz.forChild(ie)],w.Bz]}),o})();function nt(o){return new T.M(o,"./i18n/code-editor.",`.js?${window.sxcVersion}`)}let se=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({providers:[x._,X.t,K,l.sK],imports:[[oe,p.q,u.ez,S.Is,O.ot,b.Ps,r.ZX,M.si,l.aw.forChild((0,m.f)(nt)),h.n,f.Cq,v.qH]]}),o})()},4722:(L,P,a)=>{a.d(P,{Mr:()=>v,jt:()=>l});var u=a(635),O=a(5005),M=a(8598),S=a(3184),b=a(8784),f=a(2425);const r="admin/field/",l=r+"all";let v=(()=>{class h{constructor(p,T,m){this.http=p,this.context=T,this.dnnContext=m}apiUrl(p){return this.dnnContext.$2sxc.http.apiUrl(p)}typeListRetrieve(){return this.http.get(this.apiUrl(r+"DataTypes"),{params:{appid:this.context.appId.toString()}})}getInputTypesList(){return this.http.get(this.apiUrl(r+"InputTypes"),{params:{appid:this.context.appId.toString()}}).pipe((0,u.U)(p=>p.map(m=>({dataType:m.Type.substring(0,m.Type.indexOf("-")),inputType:m.Type,label:m.Label,description:m.Description,isDefault:m.IsDefault,isObsolete:m.IsObsolete,isRecommended:m.IsRecommended,obsoleteMessage:m.ObsoleteMessage,icon:m.IsDefault?"star":m.IsRecommended?"star_outlined":null}))))}getReservedNames(){return this.http.get(this.apiUrl(r+"ReservedNames"))}getFields(p){return this.http.get(this.apiUrl(l),{params:{appid:this.context.appId.toString(),staticName:p}}).pipe((0,u.U)(T=>{if(T)for(const m of T){if(!m.Metadata)continue;const w=m.Metadata,D=w[m.Type],Z=w[m.InputType];w.merged=Object.assign(Object.assign(Object.assign({},w.All),D),Z)}return T}))}reOrder(p,T){return this.http.post(this.apiUrl(r+"Sort"),null,{params:{appid:this.context.appId.toString(),contentTypeId:T.Id.toString(),order:JSON.stringify(p)}})}setTitle(p,T){return this.http.post(this.apiUrl(O._+"SetTitle"),null,{params:{appid:this.context.appId.toString(),contentTypeId:T.Id.toString(),attributeId:p.Id.toString()}})}rename(p,T,m){return this.http.post(this.apiUrl(r+"Rename"),null,{params:{appid:this.context.appId.toString(),contentTypeId:T.toString(),attributeId:p.toString(),newName:m}})}delete(p,T){if(p.IsTitle)throw new Error("Can't delete Title");return this.http.delete(this.apiUrl(r+"Delete"),{params:{appid:this.context.appId.toString(),contentTypeId:T.Id.toString(),attributeId:p.Id.toString()}})}add(p,T){return this.http.post(this.apiUrl(r+"Add"),null,{params:{AppId:this.context.appId.toString(),ContentTypeId:T.toString(),Id:p.Id.toString(),Type:p.Type,InputType:p.InputType,StaticName:p.StaticName,IsTitle:p.IsTitle.toString(),Index:p.SortOrder.toString()}})}updateInputType(p,T,m){return this.http.post(this.apiUrl(r+"InputType"),null,{params:{appId:this.context.appId.toString(),attributeId:p.toString(),field:T,inputType:m}})}}return h.\u0275fac=function(p){return new(p||h)(S.LFG(b.eN),S.LFG(M._),S.LFG(f._y))},h.\u0275prov=S.Yz7({token:h,factory:h.\u0275fac}),h})()},5432:(L,P,a)=>{a.d(P,{T:()=>u.T,n:()=>S});var u=a(7472),O=a(6362),M=a(3184);let S=(()=>{class b{}return b.\u0275fac=function(r){return new(r||b)},b.\u0275mod=M.oAB({type:b}),b.\u0275inj=M.cJS({imports:[[O.ez]]}),b})()},7472:(L,P,a)=>{a.d(P,{T:()=>b});var u=a(3184);const O="area, base, br, col, embed, hr, img, input, link, meta, param, source, track, wbr".split(",").map(f=>f.trim().toLocaleLowerCase());class M{constructor(r,l,v,h,x,p){this.monaco=r,this.snippets=p,this.globalCache=this.createGlobalCache(r),this.defineThemes(this.globalCache,this.monaco),this.cachedValue=v,this.editorInstance=this.createInstance(this.monaco,l,v,h,x),this.completionItemProviders=this.addSnippets(this.monaco,this.editorInstance),this.resizeObserver=this.createResizeObserver(h,this.editorInstance),this.restoreState(this.globalCache,this.editorInstance),this.addEvents(this.editorInstance)}destroy(){this.saveState(this.globalCache,this.editorInstance),this.resizeObserver.disconnect(),this.completionItemProviders.forEach(r=>r.dispose()),this.editorInstance.getModel().dispose(),this.editorInstance.dispose()}updateValue(r){this.cachedValue!==r&&(this.cachedValue=r,this.editorInstance.getModel().setValue(r))}focus(){this.editorInstance.focus()}onValueChange(r){this.valueChangedCallback=r}onFocus(r){this.focusedCallback=r}onBlur(r){this.blurredCallback=r}insertSnippet(r){this.editorInstance.getContribution("snippetController2").insert(r)}setSnippets(r){this.snippets=r}setJsonSchema(r){var l,v,h;const x=this.editorInstance.getModel().uri.toString(),p=this.monaco.languages.json.jsonDefaults.diagnosticsOptions,T=null!==(v=null===(l=p.schemas)||void 0===l?void 0:l.some(k=>k.fileMatch[0]===x))&&void 0!==v&&v,m="link"===(null==r?void 0:r.type)?{uri:r.value,fileMatch:[x]}:"raw"===(null==r?void 0:r.type)?{uri:x,fileMatch:[x],schema:JSON.parse(r.value)}:void 0;if(!T&&!m)return;const w=Object.assign(Object.assign({},p),{enableSchemaRequest:!0,schemas:T&&!m?p.schemas.filter(k=>k.fileMatch[0]!==x):T?p.schemas.map(k=>k.fileMatch[0]===x?m:k):[...null!==(h=p.schemas)&&void 0!==h?h:[],m]});this.monaco.languages.json.jsonDefaults.setDiagnosticsOptions(w)}setJsonComments(r){if(!r)return;const l=Object.assign(Object.assign({},this.monaco.languages.json.jsonDefaults.diagnosticsOptions),{comments:r});this.monaco.languages.json.jsonDefaults.setDiagnosticsOptions(l)}createGlobalCache(r){return null==r._2sxc&&(r._2sxc={themesAreDefined:!1,savedStates:{}}),r._2sxc}defineThemes(r,l){r.themesAreDefined||(r.themesAreDefined=!0,l.editor.defineTheme("2sxc-dark",{base:"vs-dark",inherit:!0,rules:[{token:"metatag.cs",foreground:"ffff00"}],colors:{}}))}createInstance(r,l,v,h,x){const p=r.editor.create(h,x),T=r.Uri.file(l),m=r.editor.createModel(v,void 0,T);return p.setModel(m),p}saveState(r,l){const v=l.getModel().uri.toString(),h=JSON.stringify(l.saveViewState());null==r.savedStates[v]?r.savedStates[v]={viewState:h}:r.savedStates[v].viewState=h}restoreState(r,l){const v=l.getModel().uri.toString(),h=r.savedStates[v];if(null==h)return;const x=JSON.parse(h.viewState);l.restoreViewState(x)}addSnippets(r,l){return[r.languages.registerCompletionItemProvider(l.getModel().getLanguageId(),{triggerCharacters:[">"],provideCompletionItems:(h,x)=>{if(l.getModel()!==h)return{suggestions:[]};const p=h.getValueInRange({startLineNumber:x.lineNumber,startColumn:1,endLineNumber:x.lineNumber,endColumn:x.column});if(">"!==p[p.length-1])return{suggestions:[]};const m=p.lastIndexOf("<");if(-1===m)return{suggestions:[]};const w=p.substring(m);let k=0;if(Array.from(w).forEach(U=>{'"'===U&&k++}),k%2!=0)return{suggestions:[]};if(w.startsWith("</"))return{suggestions:[]};if(w.indexOf(">")!==w.length-1)return{suggestions:[]};let D=w.indexOf(" ");if(-1===D&&(D=w.indexOf(">")),-1===D)return{suggestions:[]};const Z=w.substring(1,D);return Z?O.includes(Z.toLocaleLowerCase())?{suggestions:[]}:/[a-zA-Z0-9_-]/.test(Z)?{suggestions:[{label:`</${Z}>`,kind:r.languages.CompletionItemKind.Snippet,insertText:`$0</${Z}>`,insertTextRules:r.languages.CompletionItemInsertTextRule.InsertAsSnippet,range:{startLineNumber:x.lineNumber,endLineNumber:x.lineNumber,startColumn:x.column,endColumn:x.column}}]}:{suggestions:[]}:{suggestions:[]}}}),r.languages.registerCompletionItemProvider(l.getModel().getLanguageId(),{provideCompletionItems:(h,x)=>{if(null==this.snippets||l.getModel()!==h)return{suggestions:[]};const p=h.getWordUntilPosition(x);return{suggestions:this.snippets.map(m=>{var w,k,D;return m.content?{label:m.name,kind:r.languages.CompletionItemKind.Snippet,documentation:`${null!==(w=m.title)&&void 0!==w?w:""}\n${null!==(k=m.help)&&void 0!==k?k:""}\n${null!==(D=m.links)&&void 0!==D?D:""}`,insertText:m.content,insertTextRules:r.languages.CompletionItemInsertTextRule.InsertAsSnippet,range:{startLineNumber:x.lineNumber,endLineNumber:x.lineNumber,startColumn:p.startColumn,endColumn:p.endColumn}}:void 0}).filter(m=>!!m)}}})]}createResizeObserver(r,l){const v=new ResizeObserver(()=>{l.layout()});return v.observe(r),v}addEvents(r){r.getModel().onDidChangeContent(()=>{var l;const v=r.getModel().getValue();v!==this.cachedValue&&(this.cachedValue=v,null===(l=this.valueChangedCallback)||void 0===l||l.call(this,v))}),r.onDidFocusEditorWidget(()=>{var l;null===(l=this.focusedCallback)||void 0===l||l.call(this)}),r.onDidBlurEditorWidget(()=>{var l;null===(l=this.blurredCallback)||void 0===l||l.call(this)})}}const S=["editor"];let b=(()=>{class f{constructor(){this.autoFocus=!1,this.valueChanged=new u.vpe,this.focused=new u.vpe,this.blurred=new u.vpe}ngAfterViewInit(){window.require.config({paths:{vs:["https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.33.0/min/vs"]}}),window.require(["vs/editor/editor.main"],l=>{this.monaco=l,this.createEditor(this.autoFocus)})}ngOnChanges(l){var v,h,x,p;null!=l.filename&&null!=this.monacoInstance&&(this.monacoInstance.destroy(),this.createEditor(!0)),null!=l.value&&(null===(v=this.monacoInstance)||void 0===v||v.updateValue(this.value)),null!=l.jsonSchema&&(null===(h=this.monacoInstance)||void 0===h||h.setJsonSchema(this.jsonSchema)),null!=l.jsonComments&&(null===(x=this.monacoInstance)||void 0===x||x.setJsonComments(this.jsonComments)),null!=l.snippets&&(null===(p=this.monacoInstance)||void 0===p||p.setSnippets(this.snippets))}insertSnippet(l){var v,h;null===(v=this.monacoInstance)||void 0===v||v.insertSnippet(l),null===(h=this.monacoInstance)||void 0===h||h.focus()}ngOnDestroy(){var l;null===(l=this.monacoInstance)||void 0===l||l.destroy()}createEditor(l){this.monacoInstance=new M(this.monaco,this.filename,this.value,this.editorRef.nativeElement,this.options,this.snippets),this.monacoInstance.setJsonSchema(this.jsonSchema),this.monacoInstance.setJsonComments(this.jsonComments),this.monacoInstance.onValueChange(v=>{this.valueChanged.emit(v)}),this.monacoInstance.onFocus(()=>{this.focused.emit()}),this.monacoInstance.onBlur(()=>{this.blurred.emit()}),l&&this.monacoInstance.focus()}}return f.\u0275fac=function(l){return new(l||f)},f.\u0275cmp=u.Xpm({type:f,selectors:[["app-monaco-editor"]],viewQuery:function(l,v){if(1&l&&u.Gf(S,5),2&l){let h;u.iGM(h=u.CRH())&&(v.editorRef=h.first)}},inputs:{filename:"filename",value:"value",snippets:"snippets",options:"options",jsonSchema:"jsonSchema",jsonComments:"jsonComments",autoFocus:"autoFocus"},outputs:{valueChanged:"valueChanged",focused:"focused",blurred:"blurred"},features:[u.TTD],decls:2,vars:0,consts:[[1,"editor"],["editor",""]],template:function(l,v){1&l&&u._UZ(0,"div",0,1)},styles:["[_nghost-%COMP%]{display:block;width:100%;height:100%;overflow:hidden}.editor[_ngcontent-%COMP%]{width:100%;height:100%;overflow:hidden}"]}),f})()},3135:(L,P,a)=>{a.d(P,{Y:()=>x});var u=a(3184),O=a(6362),M=a(4770);function S(p,T){1&p&&u.GkF(0)}function b(p,T){if(1&p&&(u.TgZ(0,"mat-hint"),u.YNc(1,S,1,0,"ng-container",3),u.qZA()),2&p){u.oxw();const m=u.MAs(4);u.xp6(1),u.Q6J("ngTemplateOutlet",m)}}function f(p,T){1&p&&u.GkF(0)}function r(p,T){if(1&p&&(u.TgZ(0,"mat-error"),u.YNc(1,f,1,0,"ng-container",3),u.qZA()),2&p){u.oxw();const m=u.MAs(4);u.xp6(1),u.Q6J("ngTemplateOutlet",m)}}function l(p,T){1&p&&u.Hsn(0)}const v=function(p){return{"hint-box__short":p}},h=["*"];let x=(()=>{class p{constructor(){this.isError=!1,this.isShort=!0}toggleIsShort(){this.isShort=!this.isShort}}return p.\u0275fac=function(m){return new(m||p)},p.\u0275cmp=u.Xpm({type:p,selectors:[["app-field-hint"]],inputs:{isError:"isError"},ngContentSelectors:h,decls:5,vars:6,consts:[[1,"hint-box",3,"ngClass","ngSwitch","click"],[4,"ngSwitchCase"],["content",""],[4,"ngTemplateOutlet"]],template:function(m,w){1&m&&(u.F$t(),u.TgZ(0,"div",0),u.NdJ("click",function(){return w.toggleIsShort()}),u.YNc(1,b,2,1,"mat-hint",1),u.YNc(2,r,2,1,"mat-error",1),u.qZA(),u.YNc(3,l,1,0,"ng-template",null,2,u.W1O)),2&m&&(u.Q6J("ngClass",u.VKq(4,v,w.isShort))("ngSwitch",w.isError),u.xp6(1),u.Q6J("ngSwitchCase",!1),u.xp6(1),u.Q6J("ngSwitchCase",!0))},directives:[O.mk,O.RF,O.n9,M.bx,O.tP,M.TO],styles:[".hint-box[_ngcontent-%COMP%]{margin-top:4px}.hint-box[_ngcontent-%COMP%]   .mat-hint[_ngcontent-%COMP%], .hint-box[_ngcontent-%COMP%]   .mat-error[_ngcontent-%COMP%]{font-size:12px;display:block}.hint-box__short[_ngcontent-%COMP%]   .mat-hint[_ngcontent-%COMP%], .hint-box__short[_ngcontent-%COMP%]   .mat-error[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}"]}),p})()},5469:(L,P,a)=>{a.d(P,{D:()=>M});var u=a(5266),O=a(3184);let M=(()=>{class S{constructor(f){this.globalConfigService=f}onClick(f){(navigator.platform.match("Mac")?f.metaKey:f.ctrlKey)&&f.shiftKey&&f.altKey&&(this.globalConfigService.toggleDebugEnabled(),window.getSelection().removeAllRanges())}}return S.\u0275fac=function(f){return new(f||S)(O.Y36(u.bE))},S.\u0275dir=O.lG2({type:S,selectors:[["","appToggleDebug",""]],hostBindings:function(f,r){1&f&&O.NdJ("click",function(v){return r.onClick(v)})}}),S})()},845:(L,P,a)=>{a.d(P,{z:()=>M});var u=a(3184),O=a(318);let M=(()=>{class S{constructor(f){this.sanitizer=f}transform(f){return this.sanitizer.bypassSecurityTrustHtml(f)}}return S.\u0275fac=function(f){return new(f||S)(u.Y36(O.H7,16))},S.\u0275pipe=u.Yjl({name:"safeHtml",type:S,pure:!0}),S})()},162:(L,P,a)=>{a.d(P,{f:()=>M});var u=a(8784),O=a(7514);function M(S){return{loader:{provide:O.Zw,useFactory:S,deps:[u.eN]},defaultLanguage:"en",isolate:!0}}},8865:(L,P,a)=>{a.d(P,{M:()=>M});var u=a(3158),O=a(745);class M{constructor(b,f,r){this.http=b,this.prefix=f,this.suffix=r}getTranslation(b){return this.http.get(`${this.prefix}${b}${this.suffix}`).pipe((0,u.K)(f=>(console.warn(`Translation: Failed to get language '${b}' from ${this.prefix}`,f),(0,O.of)({}))))}}}}]);
//# sourceMappingURL=https://sources.2sxc.org/13.06.00/ng-edit/projects_ng-dialogs_src_app_code-editor_code-editor_module_ts-projects_ng-dialogs_src_app_sha-ff0107.750c153c55c6f2ef.js.map