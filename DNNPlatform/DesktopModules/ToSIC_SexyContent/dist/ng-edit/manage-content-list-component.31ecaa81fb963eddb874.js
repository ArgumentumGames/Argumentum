(window.webpackJsonp=window.webpackJsonp||[]).push([[34],{EqWC:function(t,i,e){"use strict";e.r(i),e.d(i,"ManageContentListComponent",(function(){return C}));var n=e("5/c3"),o=e("LR82"),r=e("z5yO"),c=e("9Saw"),s=e("1C3z"),d=e("BLjT"),a=e("PlBB"),p=e("2pW/"),b=e("8AiQ"),u=e("9HSk"),h=e("Qc/f"),l=e("r4gC");function g(t,i){if(1&t){var e=s.Xb();s.Ub(0),s.Wb(1,"span"),s.Pc(2),s.Vb(),s.Wb(3,"button",10),s.ec("click",(function(){return s.Dc(e),s.ic(2).editHeader()})),s.Wb(4,"mat-icon"),s.Pc(5,"edit"),s.Vb(),s.Vb(),s.Tb()}if(2&t){var n=s.ic(2);s.Bb(2),s.Qc(n.header.Title)}}function f(t,i){1&t&&(s.Ub(0),s.Pc(1,"(this list has no header)"),s.Tb())}function m(t,i){if(1&t&&(s.Ub(0),s.Wb(1,"p",9),s.Pc(2," You can manage the list header here (if it is defined): "),s.Vb(),s.Wb(3,"p",9),s.Nc(4,g,6,1,"ng-container",2),s.Nc(5,f,2,0,"ng-container",2),s.Vb(),s.Tb()),2&t){var e=s.ic();s.Bb(4),s.oc("ngIf",e.header.Type),s.Bb(1),s.oc("ngIf",!e.header.Type)}}function v(t,i){if(1&t){var e=s.Xb();s.Wb(0,"div"),s.Wb(1,"button",15),s.ec("mousedown",(function(t){return s.Dc(e),s.ic(2).stopDnD(t)}))("click",(function(){s.Dc(e);var t=s.ic().$implicit;return s.ic().editItem(t.Id)})),s.Wb(2,"mat-icon"),s.Pc(3,"edit"),s.Vb(),s.Vb(),s.Vb()}}function x(t,i){if(1&t&&(s.Wb(0,"div",11),s.Wb(1,"div",12),s.Wb(2,"mat-icon",13),s.Pc(3,"drag_handle"),s.Vb(),s.Wb(4,"span",14),s.Pc(5),s.Vb(),s.Vb(),s.Nc(6,v,4,0,"div",2),s.Vb()),2&t){var e=i.$implicit;s.Bb(5),s.Sc("",e.Title," (",e.Id,")"),s.Bb(1),s.oc("ngIf",0!==e.Id)}}var C=function(){function t(t,i,e,n,r){this.dialogRef=t,this.contentGroupService=i,this.route=e,this.router=n,this.snackBar=r,this.subscription=new o.a,this.hasChild=!!this.route.snapshot.firstChild,this.contentGroup={id:null,guid:this.route.snapshot.paramMap.get("guid"),part:this.route.snapshot.paramMap.get("part"),index:parseInt(this.route.snapshot.paramMap.get("index"),10)}}return t.prototype.ngOnInit=function(){this.fetchList(),this.fetchHeader(),this.refreshOnChildClosed()},t.prototype.ngOnDestroy=function(){this.subscription.unsubscribe(),this.subscription=null},t.prototype.saveList=function(){var t=this;this.snackBar.open("Saving..."),this.contentGroupService.saveList(this.contentGroup,this.items).subscribe((function(i){t.snackBar.open("Saved"),t.closeDialog()}))},t.prototype.editHeader=function(){this.router.navigate(["edit/"+JSON.stringify({items:[{Group:{Guid:this.contentGroup.guid,Index:0,Part:"listcontent",Add:0===this.header.Id}},{Group:{Guid:this.contentGroup.guid,Index:0,Part:"listpresentation",Add:0===this.header.Id}}]})],{relativeTo:this.route})},t.prototype.editItem=function(t){var i={items:[{EntityId:t.toString()}]};this.router.navigate(["edit/"+JSON.stringify(i)],{relativeTo:this.route})},t.prototype.drop=function(t){Object(c.d)(this.items,t.previousIndex,t.currentIndex)},t.prototype.stopDnD=function(t){t.stopPropagation()},t.prototype.closeDialog=function(){this.dialogRef.close()},t.prototype.fetchList=function(){var t=this;this.contentGroupService.getList(this.contentGroup).subscribe((function(i){t.items=i}))},t.prototype.fetchHeader=function(){var t=this;this.contentGroupService.getHeader(this.contentGroup).subscribe((function(i){t.header=i}))},t.prototype.refreshOnChildClosed=function(){var t=this;this.subscription.add(this.router.events.pipe(Object(r.a)((function(t){return t instanceof n.b}))).subscribe((function(i){var e=t.hasChild;t.hasChild=!!t.route.snapshot.firstChild,!t.hasChild&&e&&(t.fetchList(),t.fetchHeader())})))},t.\u0275fac=function(i){return new(i||t)(s.Qb(d.h),s.Qb(a.a),s.Qb(n.a),s.Qb(n.c),s.Qb(p.b))},t.\u0275cmp=s.Kb({type:t,selectors:[["app-manage-content-list"]],decls:14,vars:2,consts:[["mat-dialog-title",""],[1,"dialog-title-box"],[4,"ngIf"],[1,"dialog-description","sort-title"],["cdkDropList","",1,"dnd-list",3,"cdkDropListDropped"],["class","dnd-item","cdkDrag","",4,"ngFor","ngForOf"],[1,"dialog-actions-box"],["mat-raised-button","",3,"click"],["mat-raised-button","","color","accent",3,"click"],[1,"dialog-description"],["mat-icon-button","","matTooltip","Edit header",3,"click"],["cdkDrag","",1,"dnd-item"],[1,"dnd-item__title"],["matTooltip","Drag to reorder the list",1,"dnd-item__title-icon"],[1,"dnd-item__title-text"],["mat-icon-button","","matTooltip","Edit item",3,"mousedown","click"]],template:function(t,i){1&t&&(s.Wb(0,"div",0),s.Wb(1,"div",1),s.Pc(2,"Manage content-item lists"),s.Vb(),s.Vb(),s.Rb(3,"router-outlet"),s.Nc(4,m,6,2,"ng-container",2),s.Wb(5,"p",3),s.Pc(6,"Sort the items by dragging as you need, then save:"),s.Vb(),s.Wb(7,"div",4),s.ec("cdkDropListDropped",(function(t){return i.drop(t)})),s.Nc(8,x,7,3,"div",5),s.Vb(),s.Wb(9,"div",6),s.Wb(10,"button",7),s.ec("click",(function(){return i.closeDialog()})),s.Pc(11,"Cancel"),s.Vb(),s.Wb(12,"button",8),s.ec("click",(function(){return i.saveList()})),s.Pc(13,"Save"),s.Vb(),s.Vb()),2&t&&(s.Bb(4),s.oc("ngIf",i.header),s.Bb(4),s.oc("ngForOf",i.items))},directives:[d.i,n.h,b.t,c.b,b.s,u.b,h.a,l.a,c.a],styles:[".sort-title[_ngcontent-%COMP%]{padding-top:16px}.dnd-list[_ngcontent-%COMP%]{margin:16px 0;border:1px solid #ccc;border-radius:4px;overflow:hidden}.dnd-item[_ngcontent-%COMP%]{cursor:move;height:40px;border-bottom:1px solid #ccc;padding:0 8px;display:flex;align-items:center;justify-content:space-between;background:#fff;box-sizing:border-box;font-size:14px}.dnd-item[_ngcontent-%COMP%]:last-child{border:none}.dnd-item__title[_ngcontent-%COMP%]{display:flex;align-items:center;overflow:hidden}.dnd-item__title-icon[_ngcontent-%COMP%]{margin-right:8px;opacity:.4}.dnd-item__title-text[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.cdk-drag-preview[_ngcontent-%COMP%]{box-sizing:border-box;border-radius:4px;box-shadow:0 5px 5px -3px rgba(0,0,0,.2),0 8px 10px 1px rgba(0,0,0,.14),0 3px 14px 2px rgba(0,0,0,.12)}.cdk-drag-placeholder[_ngcontent-%COMP%]{opacity:0}.cdk-drag-animating[_ngcontent-%COMP%], .dnd-list.cdk-drop-list-dragging[_ngcontent-%COMP%]   .dnd-item[_ngcontent-%COMP%]:not(.cdk-drag-placeholder){transition:transform .25s cubic-bezier(0,0,.2,1)}"]}),t}()}}]);
//# sourceMappingURL=https://sources.2sxc.org/11.03.00/ng-edit/manage-content-list-component.31ecaa81fb963eddb874.js.map