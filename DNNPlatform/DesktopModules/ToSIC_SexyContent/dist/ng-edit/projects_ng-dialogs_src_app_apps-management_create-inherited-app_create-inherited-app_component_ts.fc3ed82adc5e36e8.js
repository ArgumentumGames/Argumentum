"use strict";(self.webpackChunkng_dialogs=self.webpackChunkng_dialogs||[]).push([["projects_ng-dialogs_src_app_apps-management_create-inherited-app_create-inherited-app_component_ts"],{5154:(x,m,o)=>{o.r(m),o.d(m,{CreateInheritedAppComponent:()=>T});var e=o(587),p=o(6317),g=o(4628),t=o(3184),u=o(5758),C=o(2528),c=o(6362),A=o(2977),f=o(4770),E=o(1434),O=o(1130),i=o(3135),_=o(7317);function s(r,l){if(1&r&&(t.TgZ(0,"mat-option",12),t._uU(1),t.qZA()),2&r){const n=l.$implicit;t.Q6J("value",n.Id),t.xp6(1),t.hij(" ",n.Name," ")}}function h(r,l){1&r&&(t.TgZ(0,"app-field-hint",13),t._uU(1," Required "),t.qZA()),2&r&&t.Q6J("isError",!0)}function I(r,l){if(1&r){const n=t.EpF();t.ynx(0),t.TgZ(1,"div",1)(2,"div",2),t._uU(3,"Create inherited App"),t.qZA()(),t._UZ(4,"router-outlet"),t.TgZ(5,"p",3),t._uU(6," Create an App which inherits everything (data, views, queries) from a global App. Only Apps which were specifically marked for this will be listed here, and these apps must already have been loaded into Cache. If you don't see the App you expect, make sure that has happened. "),t.qZA(),t.TgZ(7,"form",4)(8,"mat-form-field",5)(9,"mat-label"),t._uU(10,"Inherit App"),t.qZA(),t.TgZ(11,"mat-select",6),t.YNc(12,s,2,2,"mat-option",7),t.qZA()(),t.YNc(13,h,2,1,"app-field-hint",8),t.qZA(),t.TgZ(14,"div",9)(15,"button",10),t.NdJ("click",function(){return t.CHM(n),t.oxw().closeDialog()}),t._uU(16," Cancel "),t.qZA(),t.TgZ(17,"button",11),t.NdJ("click",function(){return t.CHM(n),t.oxw().create()}),t._uU(18," Create "),t.qZA()(),t.BQk()}if(2&r){const n=l.ngIf,a=t.oxw();t.xp6(7),t.Q6J("formGroup",a.form),t.xp6(4),t.Q6J("placeholder",void 0===n.inheritableApps?"Loading...":null===n.inheritableApps||0===n.inheritableApps.length?"No inheritable apps found":""),t.xp6(1),t.Q6J("ngForOf",n.inheritableApps),t.xp6(1),t.Q6J("ngIf",a.form.controls.inheritId.touched&&(null==a.form.controls.inheritId.errors?null:a.form.controls.inheritId.errors.required)),t.xp6(2),t.Q6J("disabled",n.loading),t.xp6(2),t.Q6J("disabled",n.loading||!a.form.valid)}}const M=function(r,l){return{loading:r,inheritableApps:l}};let T=(()=>{class r{constructor(n,a,d){this.dialogRef=n,this.appsListService=a,this.snackBar=d,this.hostClass="dialog-component",this.form=this.buildForm(),this.loading$=new p.X(!1),this.inheritableApps$=new p.X(void 0)}ngOnInit(){this.fetchInheritedApps()}ngOnDestroy(){this.loading$.complete(),this.inheritableApps$.complete()}closeDialog(){this.dialogRef.close()}create(){this.form.disable(),this.loading$.next(!0);const n=this.form.controls.inheritId.value,a=this.inheritableApps$.value.find(d=>d.Id===n).Name;this.snackBar.open("Creating inherited app..."),this.appsListService.create(a,n).subscribe({error:()=>{this.form.enable(),this.loading$.next(!1),this.snackBar.open("Failed to create inherited app. Please check console for more information",void 0,{duration:3e3})},next:()=>{this.form.enable(),this.snackBar.open("Created inherited app",void 0,{duration:2e3}),this.closeDialog()}})}fetchInheritedApps(){this.appsListService.getInheritable().subscribe({error:()=>{this.inheritableApps$.next(null)},next:n=>{this.inheritableApps$.next(n)}})}buildForm(){return new e.cw({inheritId:new e.NI(null,[e.kI.required])})}}return r.\u0275fac=function(n){return new(n||r)(t.Y36(u.so),t.Y36(g.A),t.Y36(C.ux))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-create-inherited-app"]],hostVars:1,hostBindings:function(n,a){2&n&&t.Ikx("className",a.hostClass)},decls:3,vars:8,consts:[[4,"ngIf"],["mat-dialog-title",""],[1,"dialog-title-box"],[1,"dialog-description"],[3,"formGroup"],["appearance","standard","color","accent"],["formControlName","inheritId",3,"placeholder"],[3,"value",4,"ngFor","ngForOf"],[3,"isError",4,"ngIf"],[1,"dialog-component-actions"],["type","button","mat-raised-button","",3,"disabled","click"],["type","button","mat-raised-button","","color","accent",3,"disabled","click"],[3,"value"],[3,"isError"]],template:function(n,a){1&n&&(t.YNc(0,I,19,6,"ng-container",0),t.ALo(1,"async"),t.ALo(2,"async")),2&n&&t.Q6J("ngIf",t.WLB(5,M,t.lcZ(1,1,a.loading$),t.lcZ(2,3,a.inheritableApps$)))},directives:[c.O5,u.uh,A.lC,e._Y,e.JL,e.sg,f.KE,f.hX,E.gD,e.JJ,e.u,c.sg,O.ey,i.Y,_.lW],pipes:[c.Ov],styles:[""]}),r})()},3135:(x,m,o)=>{o.d(m,{Y:()=>O});var e=o(3184),p=o(6362),g=o(4770);function t(i,_){1&i&&e.GkF(0)}function u(i,_){if(1&i&&(e.TgZ(0,"mat-hint"),e.YNc(1,t,1,0,"ng-container",3),e.qZA()),2&i){e.oxw();const s=e.MAs(4);e.xp6(1),e.Q6J("ngTemplateOutlet",s)}}function C(i,_){1&i&&e.GkF(0)}function c(i,_){if(1&i&&(e.TgZ(0,"mat-error"),e.YNc(1,C,1,0,"ng-container",3),e.qZA()),2&i){e.oxw();const s=e.MAs(4);e.xp6(1),e.Q6J("ngTemplateOutlet",s)}}function A(i,_){1&i&&e.Hsn(0)}const f=function(i){return{"hint-box__short":i}},E=["*"];let O=(()=>{class i{constructor(){this.isError=!1,this.isShort=!0}toggleIsShort(){this.isShort=!this.isShort}}return i.\u0275fac=function(s){return new(s||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-field-hint"]],inputs:{isError:"isError"},ngContentSelectors:E,decls:5,vars:6,consts:[[1,"hint-box",3,"ngClass","ngSwitch","click"],[4,"ngSwitchCase"],["content",""],[4,"ngTemplateOutlet"]],template:function(s,h){1&s&&(e.F$t(),e.TgZ(0,"div",0),e.NdJ("click",function(){return h.toggleIsShort()}),e.YNc(1,u,2,1,"mat-hint",1),e.YNc(2,c,2,1,"mat-error",1),e.qZA(),e.YNc(3,A,1,0,"ng-template",null,2,e.W1O)),2&s&&(e.Q6J("ngClass",e.VKq(4,f,h.isShort))("ngSwitch",h.isError),e.xp6(1),e.Q6J("ngSwitchCase",!1),e.xp6(1),e.Q6J("ngSwitchCase",!0))},directives:[p.mk,p.RF,p.n9,g.bx,p.tP,g.TO],styles:[".hint-box[_ngcontent-%COMP%]{margin-top:4px}.hint-box[_ngcontent-%COMP%]   .mat-hint[_ngcontent-%COMP%], .hint-box[_ngcontent-%COMP%]   .mat-error[_ngcontent-%COMP%]{font-size:12px;display:block}.hint-box__short[_ngcontent-%COMP%]   .mat-hint[_ngcontent-%COMP%], .hint-box__short[_ngcontent-%COMP%]   .mat-error[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}"]}),i})()}}]);
//# sourceMappingURL=https://sources.2sxc.org/13.06.00/ng-edit/projects_ng-dialogs_src_app_apps-management_create-inherited-app_create-inherited-app_component_ts.fc3ed82adc5e36e8.js.map