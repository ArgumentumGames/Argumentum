"use strict";(self.webpackChunkeav_ui=self.webpackChunkeav_ui||[]).push([["projects_eav-ui_src_app_permissions_permissions_component_ts"],{61:(P,u,e)=>{e.r(u),e.d(u,{PermissionsComponent:()=>I});var d=e(6317),i=e(60),l=e(2087),g=e(4153),c=e(941),y=e(2225),t=e(3184),C=e(1130),h=e(6190),p=e(5590);let a=(()=>{class m{agInit(n){this.params=n}refresh(n){return!0}deletePermission(){this.params.onDelete(this.params.data)}}return m.\u0275fac=function(n){return new(n||m)},m.\u0275cmp=t.Xpm({type:m,selectors:[["app-permissions-actions"]],decls:4,vars:0,consts:[[1,"actions-component"],["matRipple","","tippy","Delete",1,"like-button","highlight",3,"click"]],template:function(n,s){1&n&&(t.TgZ(0,"div",0)(1,"div",1),t.NdJ("click",function(){return s.deletePermission()}),t.TgZ(2,"mat-icon"),t._uU(3,"delete"),t.qZA()()())},directives:[C.wG,h.$,p.Hw],styles:[""]}),m})();var r=e(2023),f=e(2977),T=e(5758),D=e(2528),E=e(7317),M=e(1350),b=e(6362);let I=(()=>{class m extends i.H{constructor(n,s,o,O,_){super(n,s),this.router=n,this.route=s,this.dialogRef=o,this.permissionsService=O,this.snackBar=_,this.permissions$=new d.X(void 0),this.gridOptions=this.buildGridOptions(),this.targetType=parseInt(this.route.snapshot.paramMap.get("targetType"),10),this.keyType=this.route.snapshot.paramMap.get("keyType"),this.key=this.route.snapshot.paramMap.get("key"),this.prefills={[c.Zy.metadata.language.targetType]:{PermissionType:"language"}}}ngOnInit(){this.fetchPermissions(),this.subscription.add(this.refreshOnChildClosedShallow().subscribe(()=>{this.fetchPermissions()}))}ngOnDestroy(){this.permissions$.complete(),super.ngOnDestroy()}closeDialog(){this.dialogRef.close()}fetchPermissions(){this.permissionsService.getAll(this.targetType,this.keyType,this.key).subscribe(n=>{this.permissions$.next(n)})}editPermission(n){var s,o;let O;O=null==n?{items:[Object.assign({ContentTypeName:c.Zy.contentTypes.permissions,For:Object.assign(Object.assign(Object.assign({Target:null!==(o=null===(s=Object.values(c.Zy.metadata).find(x=>x.targetType===this.targetType))||void 0===s?void 0:s.target)&&void 0!==o?o:this.targetType.toString(),TargetType:this.targetType},this.keyType===c.Zy.keyTypes.guid&&{Guid:this.key}),this.keyType===c.Zy.keyTypes.number&&{Number:parseInt(this.key,10)}),this.keyType===c.Zy.keyTypes.string&&{String:this.key})},this.prefills[this.targetType]&&{Prefill:this.prefills[this.targetType]})]}:{items:[{EntityId:n.Id}]};const _=(0,y.f)(O);this.router.navigate([`edit/${_}`],{relativeTo:this.route})}deletePermission(n){!confirm(`Delete '${n.Title}' (${n.Id})?`)||(this.snackBar.open("Deleting..."),this.permissionsService.delete(n.Id).subscribe(()=>{this.snackBar.open("Deleted",null,{duration:2e3}),this.fetchPermissions()}))}buildGridOptions(){return Object.assign(Object.assign({},g.f),{columnDefs:[{headerName:"ID",field:"Id",width:70,headerClass:"dense",cellClass:"id-action no-padding no-outline".split(" "),sortable:!0,filter:"agNumberColumnFilter",valueGetter:s=>s.data.Id,cellRenderer:l.m,cellRendererParams:{tooltipGetter:o=>`ID: ${o.Id}\nGUID: ${o.Guid}`}},{field:"Name",flex:2,minWidth:250,cellClass:"primary-action highlight".split(" "),sortable:!0,sort:"asc",filter:"agTextColumnFilter",onCellClicked:s=>{this.editPermission(s.data)},valueGetter:s=>s.data.Title},{field:"Identity",flex:2,minWidth:250,cellClass:"no-outline",sortable:!0,filter:"agTextColumnFilter",valueGetter:s=>s.data.Identity},{field:"Condition",flex:2,minWidth:250,cellClass:"no-outline",sortable:!0,filter:"agTextColumnFilter",valueGetter:s=>s.data.Condition},{field:"Grant",width:70,headerClass:"dense",cellClass:"no-outline",sortable:!0,filter:"agTextColumnFilter",valueGetter:s=>s.data.Grant},{width:42,cellClass:"secondary-action no-padding".split(" "),pinned:"right",cellRenderer:a,cellRendererParams:(()=>({onDelete:o=>this.deletePermission(o)}))()}]})}}return m.\u0275fac=function(n){return new(n||m)(t.Y36(f.F0),t.Y36(f.gz),t.Y36(T.so),t.Y36(r.q),t.Y36(D.ux))},m.\u0275cmp=t.Xpm({type:m,selectors:[["app-permissions"]],features:[t.qOj],decls:16,vars:4,consts:[[1,"nav-component-wrapper"],["mat-dialog-title",""],[1,"dialog-title-box"],["mat-icon-button","","tippy","Close dialog",3,"click"],[1,"grid-wrapper"],[1,"ag-theme-material",3,"rowData","gridOptions"],[1,"grid-more-actions-box"],["mat-fab","","mat-elevation-z24","","tippy","Create a new permission",1,"grid-fab",3,"click"]],template:function(n,s){1&n&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div"),t._uU(4,"Permissions"),t.qZA(),t.TgZ(5,"button",3),t.NdJ("click",function(){return s.closeDialog()}),t.TgZ(6,"mat-icon"),t._uU(7,"close"),t.qZA()()()(),t._UZ(8,"router-outlet"),t.TgZ(9,"div",4),t._UZ(10,"ag-grid-angular",5),t.ALo(11,"async"),t._UZ(12,"div",6),t.TgZ(13,"button",7),t.NdJ("click",function(){return s.editPermission(null)}),t.TgZ(14,"mat-icon"),t._uU(15,"add"),t.qZA()()()()),2&n&&(t.xp6(10),t.Q6J("rowData",t.lcZ(11,2,s.permissions$))("gridOptions",s.gridOptions))},directives:[T.uh,E.lW,h.$,p.Hw,f.lC,M.N8],pipes:[b.Ov],styles:[""]}),m})()},60:(P,u,e)=>{e.d(u,{H:()=>C});var d=e(2977),i=e(116),l=e(4874),g=e(635),c=e(679),y=e(5904),t=e(3184);let C=(()=>{class h extends y.f{constructor(a,r){super(),this.router=a,this.route=r}ngOnDestroy(){super.ngOnDestroy()}refreshOnChildClosedDeep(){return this.router.events.pipe((0,i.h)(a=>a instanceof d.m2),(0,l.O)(!!this.route.snapshot.firstChild.firstChild),(0,g.U)(()=>!!this.route.snapshot.firstChild.firstChild),(0,c.G)(),(0,i.h)(([a,r])=>a&&!r))}refreshOnChildClosedShallow(){return this.router.events.pipe((0,i.h)(a=>a instanceof d.m2),(0,l.O)(!!this.route.snapshot.firstChild),(0,g.U)(()=>!!this.route.snapshot.firstChild),(0,c.G)(),(0,i.h)(([a,r])=>a&&!r))}}return h.\u0275fac=function(a){return new(a||h)(t.Y36(d.F0),t.Y36(d.gz))},h.\u0275dir=t.lG2({type:h,features:[t.qOj]}),h})()},2087:(P,u,e)=>{e.d(u,{m:()=>h});var d=e(9673),i=e(3184),l=e(2528),g=e(1130),c=e(6190),y=e(6362),t=e(5590);const C=function(p,a){return{"align-start":p,"align-end":a}};let h=(()=>{class p{constructor(r){this.snackBar=r}agInit(r){this.id=r.value,this.align="number"==typeof this.id?"end":"start",this.tooltip=r.tooltipGetter(r.data)}refresh(r){return!0}copy(){(0,d.v)(this.tooltip),this.snackBar.open("Copied to clipboard",null,{duration:2e3})}}return p.\u0275fac=function(r){return new(r||p)(i.Y36(l.ux))},p.\u0275cmp=i.Xpm({type:p,selectors:[["app-id-field"]],decls:5,vars:6,consts:[["matRipple","",1,"id-box","highlight",3,"tippy","ngClass","click"],[1,"id"],[1,"icon"]],template:function(r,f){1&r&&(i.TgZ(0,"div",0),i.NdJ("click",function(){return f.copy()}),i.TgZ(1,"span",1),i._uU(2),i.qZA(),i.TgZ(3,"mat-icon",2),i._uU(4,"file_copy"),i.qZA()()),2&r&&(i.Q6J("tippy",f.tooltip)("ngClass",i.WLB(3,C,"start"===f.align,"end"===f.align)),i.xp6(2),i.Oqu(f.id))},directives:[g.wG,c.$,y.mk,t.Hw],styles:[".id-box[_ngcontent-%COMP%]{padding:0 8px;height:100%;display:flex;align-items:center}.id-box.align-start[_ngcontent-%COMP%]{justify-content:flex-start}.id-box.align-end[_ngcontent-%COMP%]{justify-content:flex-end}.id-box[_ngcontent-%COMP%]   .id[_ngcontent-%COMP%]{max-width:100%;text-overflow:ellipsis;overflow:hidden}.id-box[_ngcontent-%COMP%]:hover{text-decoration:none}.id-box[_ngcontent-%COMP%]:hover   .id[_ngcontent-%COMP%]{display:none}.id-box[_ngcontent-%COMP%]:not(:hover)   .icon[_ngcontent-%COMP%]{display:none}"]}),p})()},4153:(P,u,e)=>{e.d(u,{f:()=>d});const d={accentedSort:!0,animateRows:!0,enableCellTextSelection:!0,headerHeight:32,suppressScrollOnNewData:!0,valueCache:!0,defaultColDef:{filterParams:{newRowsAction:"keep"}},tooltipShowDelay:0,tooltipHideDelay:1e5,suppressMovableColumns:!0}},9673:(P,u,e)=>{function d(i){const l=document.createElement("textarea");l.value=i,l.setAttribute("readonly",""),l.style.position="absolute",l.style.left="-9999px",document.body.appendChild(l);const g=document.getSelection().rangeCount>0&&document.getSelection().getRangeAt(0);l.select(),document.execCommand("copy"),document.body.removeChild(l),g&&(document.getSelection().removeAllRanges(),document.getSelection().addRange(g))}e.d(u,{v:()=>d})}}]);
//# sourceMappingURL=https://sources.2sxc.org/15.02.00/ng-edit/projects_eav-ui_src_app_permissions_permissions_component_ts.f1d3d17a15bd862e.js.map