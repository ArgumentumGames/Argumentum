{"_":{"V":1},"ContentType":{"Id":"772dfff1-b236-4aa9-8359-5f53c08ff7bf","Name":"UiFormula","Scope":"System.Fields","Description":"","Attributes":[{"Name":"Title","Type":"String","InputType":"string-default","IsTitle":true,"Metadata":[{"Id":120063,"Version":6,"Guid":"a5aca5c0-4e4f-41ff-b6f6-61d74d73c2ed","Type":{"Name":"@All","Id":"@All"},"Attributes":{"String":{"CustomJavaScript":{"*":""},"DefaultValue":{"*":""},"InputType":{"*":"string-default"},"Name":{"*":"Title"},"Notes":{"*":"<p>The title is auto-generated, but you can add more text if you need to</p>"},"Placeholder":{"*":""},"ValidationRegExJavaScript":{"*":""}},"Entity":{"Errors":{"*":[]},"Formulas":{"*":["a17611a7-e0d7-4340-a73c-7e0fee146ded"]},"Warnings":{"*":[]}},"Boolean":{"Disabled":{"*":false},"DisableTranslation":{"*":false},"EnableExperimental":{"*":true},"Required":{"*":false},"VisibleInEditUI":{"*":true}}},"Owner":"dnn:userid=1"},{"Id":130243,"Version":5,"Guid":"543dea87-6ebc-4bf4-9623-b801bf41ec1b","Type":{"Name":"@String","Id":"@String"},"Attributes":{"String":{"DropdownValues":{"*":""},"InputType":{"*":""}}},"Owner":"dnn:userid=41"},{"Id":130244,"Version":5,"Guid":"f158d3d7-d401-4e63-be40-0cfd25feeae6","Type":{"Name":"@string-default","Id":"@string-default"},"Attributes":{},"Owner":"dnn:userid=41"}]},{"Name":"Target","Type":"String","InputType":"string-dropdown","IsTitle":false,"Metadata":[{"Id":120064,"Version":15,"Guid":"6e0db16d-261c-43d7-a9af-9801d11ccbc0","Type":{"Name":"@All","Id":"@All"},"Attributes":{"String":{"CustomJavaScript":{"en-us":""},"DefaultValue":{"en-us":"Field.Value"},"InputType":{"en-us":"string-dropdown"},"Name":{"en-us":"Target"},"Notes":{"en-us":"<p>The target is what will be updated. Choose a value or type your own key in advanced cases.&nbsp;</p>"},"Placeholder":{"en-us":""},"ValidationRegExJavaScript":{"en-us":""}},"Entity":{"Errors":{"*":[]},"Formulas":{"*":["eee175b1-cd81-4e85-a813-5be709ac612a"]},"Warnings":{"*":[]}},"Boolean":{"Disabled":{"en-us":false},"DisableTranslation":{"en-us":true},"Required":{"en-us":false},"VisibleInEditUI":{"en-us":true}}},"Owner":"dnn:userid=1"},{"Id":120067,"Version":14,"Guid":"1d4a41de-2b2d-4dd3-8c90-10c12d6b76e6","Type":{"Name":"@String","Id":"@String"},"Attributes":{"String":{"DropdownValues":{"en-us":""},"InputType":{"en-us":""}}},"Owner":"dnn:userid=1"},{"Id":120068,"Version":14,"Guid":"c3a1471f-4c34-4cad-baf1-325b04f91287","Type":{"Name":"@string-dropdown","Id":"@string-dropdown"},"Attributes":{"String":{"DropdownValues":{"en-us":"Field.Value:Field Value\nField.Settings.Name:Name (Title) of the Field\nField.Settings.Notes:Notes / Help of the Field\nField.Settings.Visible:Visible (show the Field)\nField.Settings.Required:Required (must be filled in)\nField.Settings.Disabled:Disabled (blocked, can't be edited)"},"DropdownValuesFormat":{"en-us":"value-label"}},"Boolean":{"EnableTextEntry":{"en-us":true}}},"Owner":"dnn:userid=1"}]},{"Name":"Enabled","Type":"Boolean","InputType":"boolean-default","IsTitle":false,"Metadata":[{"Id":130126,"Version":3,"Guid":"afe6ca1e-d1f8-4b2f-8c15-cbfa14fa7da8","Type":{"Name":"@All","Id":"@All"},"Attributes":{"String":{"CustomJavaScript":{"*":""},"DefaultValue":{"*":"true"},"InputType":{"*":"boolean-default"},"Name":{"*":"Enabled"},"Notes":{"*":""},"Placeholder":{"*":""},"ValidationRegExJavaScript":{"*":""}},"Entity":{"Errors":{"*":[]},"Formulas":{"*":[]},"Warnings":{"*":[]}},"Boolean":{"Disabled":{"*":false},"DisableTranslation":{"*":true},"Required":{"*":false},"VisibleInEditUI":{"*":true}}},"Owner":"dnn:userid=41"},{"Id":130127,"Version":2,"Guid":"72946d4a-7cdc-45c7-8038-627ed4af792b","Type":{"Name":"@Boolean","Id":"@Boolean"},"Attributes":{"String":{"TitleFalse":{"*":"Disabled"},"TitleIndeterminate":{"*":""},"TitleTrue":{"*":"Enabled"}}},"Owner":"dnn:userid=41"}]},{"Name":"Formula","Type":"String","InputType":"string-default","IsTitle":false,"Metadata":[{"Id":120065,"Version":15,"Guid":"377a1d4e-5131-4ce4-904c-07ac0801fcf2","Type":{"Name":"@All","Id":"@All"},"Attributes":{"String":{"CustomJavaScript":{"*":""},"DefaultValue":{"*":"v1(data, context) { return data.value; }"},"InputType":{"*":"string-default"},"Name":{"*":"Formula"},"Notes":{"*":"<p>The formula - starting with v1(data, context) {...}.</p>"},"Placeholder":{"*":""},"ValidationRegExJavaScript":{"*":""}},"Entity":{"Errors":{"*":[]},"Formulas":{"*":["1c6def89-b2bc-42bb-a63f-53d0e5658b39"]},"Warnings":{"*":[]}},"Boolean":{"Disabled":{"*":false},"DisableTranslation":{"*":true},"Required":{"*":false},"VisibleInEditUI":{"*":true}}},"Owner":"dnn:userid=1"},{"Id":120069,"Version":14,"Guid":"17f5e665-ac5a-45d5-bb13-b2633302ef58","Type":{"Name":"@String","Id":"@String"},"Attributes":{"String":{"DropdownValues":{"*":""},"InputType":{"*":""}}},"Owner":"dnn:userid=1"},{"Id":120070,"Version":14,"Guid":"aef05229-76ff-4ae6-955b-4c5adaec58cb","Type":{"Name":"@string-default","Id":"@string-default"},"Attributes":{"String":{"InputFontFamily":{"*":"monospace"}},"Number":{"RowCount":{"*":10.0}}},"Owner":"dnn:userid=1"}]},{"Name":"VarShowNotes","Type":"Boolean","InputType":"boolean-default","IsTitle":false,"Metadata":[{"Id":130129,"Version":7,"Guid":"134a5c7d-a1bb-4c7f-a519-53d1b0dbf64d","Type":{"Name":"@All","Id":"@All"},"Attributes":{"String":{"CustomJavaScript":{"*":""},"DefaultValue":{"*":""},"InputType":{"*":"boolean-default"},"Name":{"*":"Show Notes"},"Notes":{"*":""},"Placeholder":{"*":""},"ValidationRegExJavaScript":{"*":""}},"Entity":{"Errors":{"*":[]},"Formulas":{"*":["b1f61471-c6aa-4b7d-86a4-ca0d7eb3d526","fc41eb73-7f0f-4507-8830-b487bc56c202"]},"Warnings":{"*":[]}},"Boolean":{"Disabled":{"*":false},"DisableTranslation":{"*":false},"EnableExperimental":{"*":true},"IsEphemeral":{"*":true},"Required":{"*":false},"VisibleInEditUI":{"*":true}}},"Owner":"dnn:userid=41"},{"Id":130130,"Version":5,"Guid":"27f21419-c0a3-4ca5-a9f9-000de0dc2554","Type":{"Name":"@Boolean","Id":"@Boolean"},"Attributes":{"String":{"TitleFalse":{"*":"Hide notes"},"TitleIndeterminate":{"*":"Show notes if it has any"},"TitleTrue":{"*":"Show notes"}}},"Owner":"dnn:userid=41"}]},{"Name":"Notes","Type":"String","InputType":"string-wysiwyg","IsTitle":false,"Metadata":[{"Id":120066,"Version":6,"Guid":"db877d55-b910-415c-bfda-a474178c3727","Type":{"Name":"@All","Id":"@All"},"Attributes":{"String":{"CustomJavaScript":{"*":""},"DefaultValue":{"*":""},"InputType":{"*":"string-wysiwyg"},"Name":{"*":"Notes"},"Notes":{"*":"<p>Add your own notes so you know what this is for or what it does.</p>"},"Placeholder":{"*":""},"ValidationRegExJavaScript":{"*":""}},"Entity":{"Errors":{"*":[]},"Formulas":{"*":["9cffa304-1340-4531-83e5-ae01622ba0bb"]},"Warnings":{"*":[]}},"Boolean":{"Disabled":{"*":false},"DisableTranslation":{"*":false},"EnableExperimental":{"*":true},"Required":{"*":false},"VisibleInEditUI":{"*":true}}},"Owner":"dnn:userid=1"},{"Id":120071,"Version":5,"Guid":"6f952f1c-289e-4aba-afa8-30cdfd0ff756","Type":{"Name":"@String","Id":"@String"},"Attributes":{"String":{"DropdownValues":{"*":""},"InputType":{"*":""}}},"Owner":"dnn:userid=1"},{"Id":120072,"Version":5,"Guid":"1c339a04-2e98-4a54-b259-2c5ade275979","Type":{"Name":"@string-wysiwyg","Id":"@string-wysiwyg"},"Attributes":{"String":{"ButtonAdvanced":{"*":""},"ButtonSource":{"*":""},"Dialog":{"*":""}},"Hyperlink":{"ContentCss":{"*":""}}},"Owner":"dnn:userid=1"}]}],"Metadata":[{"Id":120074,"Version":11,"Guid":"ba7533db-4b2d-48fa-bbd1-56405b2f42a6","Type":{"Name":"ContentType","Id":"ContentType"},"Attributes":{"String":{"Description":{"*":"Formula for a UI element"},"EditInstructions":{"*":"<p><a href=\"https://r.2sxc.org/formulas\" target=\"_blank\" rel=\"noopener\"><img src=\"https://sources.2sxc.org/assets/v12/content-types/formulas-banner.svg?12.01\" height=\"100px\" /></a></p>\n<p>Use Formulas to calculate values or settings like visibility of fields. See <a href=\"https://r.2sxc.org/formulas\" target=\"_blank\" rel=\"noopener\">documentation</a>.</p>"},"Label":{"*":"UI Formula Î£"},"ListInstructions":{"*":""},"Notes":{"*":""}},"Hyperlink":{"Icon":{"*":""},"Link":{"*":""}}},"Owner":"dnn:userid=1","For":{"Target":"ContentType","TargetType":5,"String":"772dfff1-b236-4aa9-8359-5f53c08ff7bf"}}]},"Entities":[{"Id":130242,"Version":12,"Guid":"a17611a7-e0d7-4340-a73c-7e0fee146ded","Type":{"Name":"UiFormula","Id":"772dfff1-b236-4aa9-8359-5f53c08ff7bf"},"Attributes":{"String":{"Formula":{"*":"v1(data) {\n  const value = data.value;\n  const separator = ':';\n  const prefix = data.Target.replace('Field.Settings.', 'Setting ').replace('Field.Value', 'Value');\n  const prefixLight = prefix + separator;\n  const prefixFull = prefixLight + ' ';\n\n  // Case 1: Empty or Whitespace only, use prefix\n  if(value == '' || !/\\S/.test(value)) return prefix;\n\n  // Case 2: Already contains prefix, possibly with separator, no additional text\n  if(value == prefix || value == prefixLight || value == prefixFull) return prefix;\n\n  // Case 3: Start with prefix and has more\n  if(value.startsWith(prefixFull)) return value; \n\n  // case 4: Start with prefix but separator is incomplete\n  if(value.startsWith(prefixLight)) return value.replace(prefixLight, prefixFull);\n  if(value.startsWith(prefix)) return value.replace(prefix, prefixFull); \n\n  // case 5: No prefix yet, either missing or from previous setting\n  const separatorPos = value.indexOf(separator);\n  if(separatorPos == -1) return prefix;\n\n  return prefix + value.substring(separatorPos); \n}"},"Notes":{"*":"<p>This looks complicated, but it just ensures that the title is automatically set to better ensure people use the right target.&nbsp;</p>"},"Target":{"*":"Field.Value"},"Title":{"*":"Value: based on target"}},"Boolean":{"Enabled":{"*":true}}},"Owner":"dnn:userid=41"},{"Id":130128,"Version":4,"Guid":"eee175b1-cd81-4e85-a813-5be709ac612a","Type":{"Name":"UiFormula","Id":"772dfff1-b236-4aa9-8359-5f53c08ff7bf"},"Attributes":{"String":{"Formula":{"*":"v1(data) { return !data.Enabled; }"},"Notes":{"*":""},"Target":{"*":"Field.Settings.Disabled"},"Title":{"*":"Setting Disabled: Disable if not enabled"}},"Boolean":{"Enabled":{"*":true}}},"Owner":"dnn:userid=41"},{"Id":130132,"Version":6,"Guid":"1c6def89-b2bc-42bb-a63f-53d0e5658b39","Type":{"Name":"UiFormula","Id":"772dfff1-b236-4aa9-8359-5f53c08ff7bf"},"Attributes":{"String":{"Formula":{"*":"v1(data) { return !data.Enabled; }"},"Notes":{"*":""},"Target":{"*":"Field.Settings.Disabled"},"Title":{"*":"Setting Disabled: Disable if formula is not enabled"}},"Boolean":{"Enabled":{"*":true}}},"Owner":"dnn:userid=41"},{"Id":130131,"Version":8,"Guid":"9cffa304-1340-4531-83e5-ae01622ba0bb","Type":{"Name":"UiFormula","Id":"772dfff1-b236-4aa9-8359-5f53c08ff7bf"},"Attributes":{"String":{"Formula":{"*":"v1(data) {\n  return data.VarShowNotes;\n}"},"Notes":{"*":""},"Target":{"*":"Field.Settings.Visible"},"Title":{"*":"Setting Visible: InEditUI: Show if set to show or has content"}},"Boolean":{"Enabled":{"*":true}}},"Owner":"dnn:userid=41"},{"Id":130247,"Version":3,"Guid":"b1f61471-c6aa-4b7d-86a4-ca0d7eb3d526","Type":{"Name":"UiFormula","Id":"772dfff1-b236-4aa9-8359-5f53c08ff7bf"},"Attributes":{"String":{"Formula":{"*":"v1(data, context) {\n  if(context.cache.secondRun) return data.value;\n  context.cache.secondRun = true;\n\n  // Init like this\n  return data.Notes.length > 7; // min with p-tag\n}"},"Notes":{"*":""},"Target":{"*":"Field.Value"},"Title":{"*":"Value: if wysiwyg has contents"}},"Boolean":{"Enabled":{"*":true}}},"Owner":"dnn:userid=41"},{"Id":130248,"Version":3,"Guid":"fc41eb73-7f0f-4507-8830-b487bc56c202","Type":{"Name":"UiFormula","Id":"772dfff1-b236-4aa9-8359-5f53c08ff7bf"},"Attributes":{"String":{"Formula":{"*":"v1(data) { return !data.VarShowNotes; }"},"Notes":{"*":""},"Target":{"*":"Field.Settings.Visible"},"Title":{"*":"Setting Visible: InEditUI: hide if true"}},"Boolean":{"Enabled":{"*":true}}},"Owner":"dnn:userid=41"}]}