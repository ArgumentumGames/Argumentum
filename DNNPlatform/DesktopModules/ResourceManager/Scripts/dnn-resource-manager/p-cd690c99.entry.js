import{g as t,f as e,r as s,h as i,H as n,c as o,a as l}from"./p-7f611392.js";import{D as r}from"./p-27d67cdc.js";import{g as a}from"./p-c15b7d5a.js";class d{constructor(t){this.getServiceRoot=t=>{var e=window.top.dnn.getVar("sf_siteRoot","/");e+="API/"+t+"/";return e};this.getTabId=()=>{var t=window.top.dnn.getVar("sf_tabId","-1");return parseInt(t)};this.getModuleId=()=>this._moduleId;this.getAntiForgeryValue=()=>{const t=document.querySelector("input[name=__RequestVerificationToken]");if(t!=null){return t.value}else{return null}};this.getModuleHeaders=()=>{var t=new Headers;if(this.getTabId()>-1){t.append("ModuleId",this._moduleId.toString());t.append("TabId",this.getTabId().toString())}const e=this.getAntiForgeryValue();if(e!=null){t.append("RequestVerificationToken",e)}return t};this._moduleId=t}}const h=(t,e,s)=>{const i=t.get(e);if(!i){t.set(e,[s])}else if(!i.includes(s)){i.push(s)}};const c=(t,e)=>{let s;return(...i)=>{if(s){clearTimeout(s)}s=setTimeout((()=>{s=0;t(...i)}),e)}};const u=t=>!("isConnected"in t)||t.isConnected;const p=c((t=>{for(let e of t.keys()){t.set(e,t.get(e).filter(u))}}),2e3);const m=()=>{if(typeof t!=="function"){return{}}const s=new Map;return{dispose:()=>s.clear(),get:e=>{const i=t();if(i){h(s,e,i)}},set:t=>{const i=s.get(t);if(i){s.set(t,i.filter(e))}p(s)},reset:()=>{s.forEach((t=>t.forEach(e)));p(s)}}};const f=t=>typeof t==="function"?t():t;const g=(t,e=((t,e)=>t!==e))=>{const s=f(t);let i=new Map(Object.entries(s!==null&&s!==void 0?s:{}));const n={dispose:[],get:[],set:[],reset:[]};const o=()=>{var e;i=new Map(Object.entries((e=f(t))!==null&&e!==void 0?e:{}));n.reset.forEach((t=>t()))};const l=()=>{n.dispose.forEach((t=>t()));o()};const r=t=>{n.get.forEach((e=>e(t)));return i.get(t)};const a=(t,s)=>{const o=i.get(t);if(e(s,o,t)){i.set(t,s);n.set.forEach((e=>e(t,s,o)))}};const d=typeof Proxy==="undefined"?{}:new Proxy(s,{get(t,e){return r(e)},ownKeys(t){return Array.from(i.keys())},getOwnPropertyDescriptor(){return{enumerable:true,configurable:true}},has(t,e){return i.has(e)},set(t,e,s){a(e,s);return true}});const h=(t,e)=>{n[t].push(e);return()=>{b(n[t],e)}};const c=(e,s)=>{const i=h("set",((t,i)=>{if(t===e){s(i)}}));const n=h("reset",(()=>s(f(t)[e])));return()=>{i();n()}};const u=(...t)=>{const e=t.reduce(((t,e)=>{if(e.set){t.push(h("set",e.set))}if(e.get){t.push(h("get",e.get))}if(e.reset){t.push(h("reset",e.reset))}if(e.dispose){t.push(h("dispose",e.dispose))}return t}),[]);return()=>e.forEach((t=>t()))};const p=t=>{const e=i.get(t);n.set.forEach((s=>s(t,e,e)))};return{state:d,get:r,set:a,on:h,onChange:c,use:u,dispose:l,reset:o,forceUpdate:p}};const b=(t,e)=>{const s=t.indexOf(e);if(s>=0){t[s]=t[t.length-1];t.length--}};const x=(t,e)=>{const s=g(t,e);s.use(m());return s};const{state:v}=x({moduleId:-1,layout:"list",pageSize:50,lastSearchRequestedPage:1,selectedItems:[]});const w=":host{display:-ms-inline-flexbox;display:inline-flex}button{cursor:pointer;border:none;background-color:transparent;margin:0;padding:0;display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center}button svg{fill:var(--dnn-color-primary)}";const y=class{constructor(t){s(this,t)}handleClick(){const t=`${window.location.protocol}//${window.location.host}${this.items[0].path}`;navigator.clipboard.writeText(t)}render(){return i(n,null,i("button",{onClick:()=>this.handleClick()},i("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"#000000"},i("path",{d:"M0 0h24v24H0V0z",fill:"none"}),i("path",{d:"M17 7h-4v2h4c1.65 0 3 1.35 3 3s-1.35 3-3 3h-4v2h4c2.76 0 5-2.24 5-5s-2.24-5-5-5zm-6 8H7c-1.65 0-3-1.35-3-3s1.35-3 3-3h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-2zm-3-4h8v2H8z"})),i("span",null,v.localization.CopyUrl)))}};y.style=w;class k{constructor(){this.itemName=new C("ItemName");this.lastModifiedOnDate=new C("LastModifiedOnDate");this.size=new C("Size");this.parentFolder=new C("ParentFolder");this.createdOnDate=new C("CreatedOnDate")}}class C{constructor(t){this.sortKey=t}get localizedName(){return v.localization[`SortField_${this.sortKey}`]}}const M=new k;class z{constructor(t){this.sf=new d(t);this.requestUrl=`${this.sf.getServiceRoot("ResourceManager")}Items/`}getFolderContent(t,e=0,s=20,i=new C("ItemName")){return new Promise(((n,o)=>{var l;const r=`${this.requestUrl}GetFolderContent?folderId=${t}&startIndex=${e}&numItems=${s}&sorting=${i.sortKey}`;const a=this.sf.getModuleHeaders();a.append("groupId",this.getGroupId());(l=this.abortController)===null||l===void 0?void 0:l.abort();this.abortController=new AbortController;fetch(r,{headers:a,signal:this.abortController.signal}).then((t=>{if(t.status==200){t.json().then((t=>n(t)))}else{t.json().then((t=>o(t.message)))}})).catch((t=>o(t)))}))}getFolderIconUrl(t){return new Promise(((e,s)=>{const i=`${this.requestUrl}GetFolderIconUrl?folderId=${t}`;fetch(i,{headers:this.sf.getModuleHeaders()}).then((t=>{if(t.status==200){t.json().then((t=>e(t.url)))}else{t.json().then((t=>s(t)))}})).catch((t=>s(t)))}))}getAllowedFileExtensions(){return new Promise(((t,e)=>{const s=`${this.requestUrl}GetAllowedFileExtensions`;fetch(s,{headers:this.sf.getModuleHeaders()}).then((s=>{if(s.status==200){s.json().then((e=>t(e)))}else{s.json().then((t=>e(t)))}})).catch((t=>e(t)))}))}syncFolderContent(t,e=20,s=new C("ItemName"),i=false){return new Promise(((n,o)=>{var l;const r=`${this.requestUrl}SyncFolderContent?folderId=${t}&numItems=${e}&sorting=${s.sortKey}&recursive=${i}`;const a=this.sf.getModuleHeaders();a.append("groupId",this.getGroupId());(l=this.abortController)===null||l===void 0?void 0:l.abort();this.abortController=new AbortController;fetch(r,{headers:a,signal:this.abortController.signal}).then((t=>{if(t.status==200){t.json().then((t=>n(t)))}else{t.json().then((t=>o(t.message)))}})).catch((t=>o(t)))}))}download(t,e=true){return new Promise(((s,i)=>{var n;const o=`${this.requestUrl}Download?fileId=${t}&forceDownload=${e}`;const l=this.sf.getModuleHeaders();(n=this.abortController)===null||n===void 0?void 0:n.abort();this.abortController=new AbortController;fetch(o,{headers:l,signal:this.abortController.signal}).then((t=>{if(t.status==200){var e=t.headers.get("Content-Disposition").split("filename=")[1];t.blob().then((t=>{var i=document.querySelector("#downloadLink");if(i){i.remove()}var n=document.createElement("a");n.id="downloadLink";n.href=window.URL.createObjectURL(t);n.download=e;document.body.appendChild(n);n.click();s()}))}})).catch((t=>i(t)))}))}search(t,e,s,i=20,n=new C("ItemName"),o=""){return new Promise(((l,r)=>{var a;const d=`${this.requestUrl}Search?folderId=${t}&search=${e}&pageIndex=${s}&pageSize=${i}&sorting=${n.sortKey}&culture=${o}`;const h=this.sf.getModuleHeaders();h.append("groupId",this.getGroupId());(a=this.abortController)===null||a===void 0?void 0:a.abort();this.abortController=new AbortController;fetch(d,{headers:h,signal:this.abortController.signal}).then((t=>{if(t.status==200){t.json().then((t=>l(t)))}else{t.json().then((t=>r(t.message)))}})).catch((t=>r(t)))}))}getFolderMappings(){return new Promise(((t,e)=>{const s=`${this.requestUrl}GetFolderMappings`;fetch(s,{headers:this.sf.getModuleHeaders()}).then((s=>{if(s.status==200){s.json().then((e=>t(e)))}else{s.json().then((t=>e(t.message)))}})).catch((t=>e(t)))}))}getAddFolderTypeUrl(){return new Promise(((t,e)=>{const s=`${this.requestUrl}GetAddFolderTypeUrl`;fetch(s,{headers:this.sf.getModuleHeaders()}).then((s=>{if(s.status==200){s.json().then((e=>t(e)))}else{s.json().then((t=>e(t.message)))}})).catch((t=>e(t)))}))}createNewFolder(t){return new Promise(((e,s)=>{const i=`${this.requestUrl}CreateNewFolder`;const n=this.sf.getModuleHeaders();n.append("groupId",this.getGroupId());n.append("Content-Type","application/json");fetch(i,{method:"POST",body:JSON.stringify(t),headers:n}).then((t=>{if(t.status==200){t.json().then((t=>e(t)))}else{t.json().then((t=>s(t.ExceptionMessage||t.message)))}})).catch((t=>s(t)))}))}getFolderItem(t){return new Promise(((e,s)=>{const i=`${this.requestUrl}GetFolderItem?folderId=${t}`;const n=this.sf.getModuleHeaders();n.append("groupId",this.getGroupId());fetch(i,{headers:n}).then((t=>{if(t.status==200){t.json().then((t=>e(t)))}else{t.json().then((t=>s(t.ExceptionMessage||t.message)))}})).catch((t=>s(t)))}))}getFolderDetails(t){return new Promise(((e,s)=>{const i=`${this.requestUrl}GetFolderDetails?folderId=${t}`;fetch(i,{headers:this.sf.getModuleHeaders()}).then((t=>{if(t.status==200){t.json().then((t=>e(t)))}else{t.json().then((t=>s(t.ExceptionMessage||t.message)))}})).catch((t=>s(t)))}))}getFileDetails(t){return new Promise(((e,s)=>{const i=`${this.requestUrl}GetFileDetails?fileId=${t}`;fetch(i,{headers:this.sf.getModuleHeaders()}).then((t=>{if(t.status==200){t.json().then((t=>e(t)))}else{t.json().then((t=>s(t.ExceptionMessage||t.message)))}})).catch((t=>s(t)))}))}getRoleGroups(){return new Promise(((t,e)=>{const s=`${this.requestUrl}GetRoleGroups`;fetch(s,{headers:this.sf.getModuleHeaders()}).then((s=>{if(s.status==200){s.json().then((e=>t(e)))}else{s.json().then((t=>e(t.ExceptionMessage||t.message)))}})).catch((t=>e(t)))}))}getRoles(){return new Promise(((t,e)=>{const s=`${this.requestUrl}GetRoles`;fetch(s,{headers:this.sf.getModuleHeaders()}).then((s=>{if(s.status==200){s.json().then((e=>t(e)))}else{s.json().then((t=>e(t.ExceptionMessage||t.message)))}})).catch((t=>e(t)))}))}searchUsers(t){return new Promise(((e,s)=>{const i=`${this.requestUrl}GetSuggestionUsers?keyword=${t}&count=50`;fetch(i,{headers:this.sf.getModuleHeaders()}).then((t=>{if(t.status==200){t.json().then((t=>e(t)))}else{t.json().then((t=>s(t.ExceptionMessage||t.message)))}})).catch((t=>s(t)))}))}saveFolderDetails(t){return new Promise(((e,s)=>{const i=`${this.requestUrl}SaveFolderDetails`;const n=this.sf.getModuleHeaders();n.append("Content-Type","application/json");fetch(i,{method:"POST",body:JSON.stringify(t),headers:n}).then((t=>{if(t.status==200){e()}else{t.json().then((t=>s(t.ExceptionMessage||t.message)))}})).catch((t=>s(t)))}))}saveFileDetails(t){return new Promise(((e,s)=>{const i=`${this.requestUrl}SaveFileDetails`;const n=this.sf.getModuleHeaders();n.append("Content-Type","application/json");fetch(i,{method:"POST",body:JSON.stringify(t),headers:n}).then((t=>{if(t.status==200){e()}else{t.json().then((t=>s(t.ExceptionMessage||t.message)))}})).catch((t=>s(t)))}))}moveFile(t){return new Promise(((e,s)=>{const i=`${this.requestUrl}MoveFile`;const n=this.sf.getModuleHeaders();n.append("Content-Type","application/json");n.append("groupId",this.getGroupId());fetch(i,{method:"POST",body:JSON.stringify(t),headers:n}).then((t=>{if(t.status==200){e()}else{t.json().then((t=>s(t.ExceptionMessage||t.message)))}})).catch((t=>s(t)))}))}moveFolder(t){return new Promise(((e,s)=>{const i=`${this.requestUrl}MoveFolder`;const n=this.sf.getModuleHeaders();n.append("Content-Type","application/json");n.append("groupId",this.getGroupId());fetch(i,{method:"POST",body:JSON.stringify(t),headers:n}).then((t=>{if(t.status==200){e()}else{t.json().then((t=>s(t.ExceptionMessage||t.message)))}})).catch((t=>s(t)))}))}deleteFolder(t){return new Promise(((e,s)=>{const i=`${this.requestUrl}DeleteFolder`;const n=this.sf.getModuleHeaders();n.append("Content-Type","application/json");n.append("groupId",this.getGroupId());fetch(i,{method:"POST",body:JSON.stringify(t),headers:n}).then((t=>{if(t.status==200){e()}else{t.json().then((t=>s(t.ExceptionMessage||t.message)))}})).catch((t=>s(t)))}))}deleteFile(t){return new Promise(((e,s)=>{const i=`${this.requestUrl}DeleteFile`;const n=this.sf.getModuleHeaders();n.append("Content-Type","application/json");n.append("groupId",this.getGroupId());fetch(i,{method:"POST",body:JSON.stringify(t),headers:n}).then((t=>{if(t.status==200){e()}else{t.json().then((t=>s(t.ExceptionMessage||t.message)))}})).catch((t=>s(t)))}))}getGroupId(){let t="-1";if(window.location.pathname.indexOf("/groupid/")>-1){const e=window.location.pathname.split("/");const s=e.indexOf("groupid");t=e[s+1];return t}const e=new URLSearchParams(window.location.search);const s=e.get("groupid");if(s){t=s}return t}}const F=":host{display:-ms-inline-flexbox;display:inline-flex}button{cursor:pointer;border:none;background-color:transparent;margin:0;padding:0;display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center}button svg{fill:var(--dnn-color-primary)}";const _=class{constructor(t){s(this,t);this.itemsClient=new z(v.moduleId)}handleClick(){if(this.parentFolderId){this.itemsClient.getFolderContent(this.parentFolderId,0,0).then((t=>{v.currentItems=t;this.showModal()})).catch((t=>alert(t)));return}this.showModal()}showModal(){const t=document.createElement("dnn-modal");t.backdropDismiss=false;t.showCloseButton=false;const e=document.createElement("dnn-rm-create-folder");t.appendChild(e);document.body.appendChild(t);t.show()}render(){return i(n,null,i("button",{onClick:()=>this.handleClick()},i("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"#000000"},i("path",{d:"M0 0h24v24H0V0z",fill:"none"}),i("path",{d:"M20 6h-8l-2-2H4c-1.11 0-1.99.89-1.99 2L2 18c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V8c0-1.11-.89-2-2-2zm-1 8h-3v3h-2v-3h-3v-2h3V9h2v3h3v2z"})),i("span",null,v.localization.AddFolder)))}};_.style=F;const j=":host{display:-ms-inline-flexbox;display:inline-flex}button{cursor:pointer;border:none;background-color:transparent;margin:0;padding:0;display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center}button svg{fill:var(--dnn-color-primary)}";const H=class{constructor(t){s(this,t)}handleClick(){this.showModal()}showModal(){const t=document.createElement("dnn-modal");t.backdropDismiss=false;t.showCloseButton=false;const e=document.createElement("dnn-rm-delete-items");e.items=this.items;t.appendChild(e);document.body.appendChild(t);t.show()}render(){return i(n,null,i("button",{onClick:()=>this.handleClick()},i("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"#000000"},i("path",{d:"M0 0h24v24H0V0z",fill:"none"}),i("path",{d:"M16 9v10H8V9h8m-1.5-6h-5l-1 1H5v2h14V4h-3.5l-1-1zM18 7H6v12c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7z"})),i("span",null,v.localization.Delete)))}};H.style=j;const I=":host{display:-ms-inline-flexbox;display:inline-flex}button{cursor:pointer;border:none;background-color:transparent;margin:0;padding:0;display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center}button svg{fill:var(--dnn-color-primary)}";const O=class{constructor(t){s(this,t);this.itemsClient=new z(v.moduleId)}handleClick(){this.itemsClient.download(this.item.itemId,true)}render(){return i(n,null,i("button",{onClick:()=>this.handleClick()},i("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"#000000"},i("path",{d:"M0 0h24v24H0V0z",fill:"none"}),i("path",{xmlns:"http://www.w3.org/2000/svg",d:"M12 16 7 11 8.4 9.55 11 12.15V4H13V12.15L15.6 9.55L17 11ZM6 20Q5.175 20 4.588 19.413Q4 18.825 4 18V15H6V18Q6 18 6 18Q6 18 6 18H18Q18 18 18 18Q18 18 18 18V15H20V18Q20 18.825 19.413 19.413Q18.825 20 18 20Z"})),i("span",null,v.localization.Download)))}};O.style=I;const S=":host{display:-ms-inline-flexbox;display:inline-flex}button{cursor:pointer;border:none;background-color:transparent;margin:0;padding:0;display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center}button svg{fill:var(--dnn-color-primary)}";const L=class{constructor(t){s(this,t)}handleClick(){this.showModal()}showModal(){const t=document.createElement("dnn-modal");t.backdropDismiss=false;t.showCloseButton=false;if(this.item.isFolder){const e=document.createElement("dnn-rm-edit-folder");e.folderId=this.item.itemId;t.appendChild(e)}else{const e=document.createElement("dnn-rm-edit-file");e.fileId=this.item.itemId;t.appendChild(e)}document.body.appendChild(t);t.show()}render(){return i(n,null,i("button",{onClick:()=>this.handleClick()},i("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"#000000"},i("path",{d:"M0 0h24v24H0V0z",fill:"none"}),i("path",{d:"M14.06 9.02l.92.92L5.92 19H5v-.92l9.06-9.06M17.66 3c-.25 0-.51.1-.7.29l-1.83 1.83 3.75 3.75 1.83-1.83c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.2-.2-.45-.29-.71-.29zm-3.6 3.19L3 17.25V21h3.75L17.81 9.94l-3.75-3.75z"})),i("span",null,v.localization.Edit)))}};L.style=S;const $=":host{display:-ms-inline-flexbox;display:inline-flex}button{cursor:pointer;border:none;background-color:transparent;margin:0;padding:0;display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center}button svg{fill:var(--dnn-color-primary)}";const P=class{constructor(t){s(this,t)}handleClick(){this.showModal()}showModal(){const t=document.createElement("dnn-modal");t.backdropDismiss=false;t.showCloseButton=false;const e=document.createElement("dnn-rm-move-items");e.items=this.items;t.appendChild(e);document.body.appendChild(t);t.show()}render(){return i(n,null,i("button",{onClick:()=>this.handleClick()},i("svg",{xmlns:"http://www.w3.org/2000/svg","enable-background":"new 0 0 24 24",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"#000000"},i("g",null,i("rect",{fill:"none",height:"24",width:"24"})),i("g",null,i("path",{d:"M20,6h-8l-2-2H4C2.9,4,2,4.9,2,6v12c0,1.1,0.9,2,2,2h16c1.1,0,2-0.9,2-2V8C22,6.9,21.1,6,20,6z M20,18H4V6h5.17l1.41,1.41 L11.17,8H20V18z M12.16,12H8v2h4.16l-1.59,1.59L11.99,17L16,13.01L11.99,9l-1.41,1.41L12.16,12z"}))),i("span",null,v.localization.Move)))}};P.style=$;const V=":host{display:-ms-inline-flexbox;display:inline-flex}button{cursor:pointer;border:none;background-color:transparent;margin:0;padding:0;display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center}button svg{fill:var(--dnn-color-primary)}";const D=class{constructor(t){s(this,t)}handleClick(){this.showModal()}showModal(){const t=document.createElement("dnn-modal");t.backdropDismiss=false;t.showCloseButton=false;const e=document.createElement("dnn-rm-unlink-items");e.items=this.items;t.appendChild(e);document.body.appendChild(t);t.show()}render(){return i(n,null,i("button",{onClick:()=>this.handleClick()},i("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"#000000"},i("path",{d:"M0 0h24v24H0V0z",fill:"none"}),i("path",{d:"M14.39 11L16 12.61V11zM17 7h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1 0 1.27-.77 2.37-1.87 2.84l1.4 1.4C21.05 15.36 22 13.79 22 12c0-2.76-2.24-5-5-5zM2 4.27l3.11 3.11C3.29 8.12 2 9.91 2 12c0 2.76 2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1 0-1.59 1.21-2.9 2.76-3.07L8.73 11H8v2h2.73L13 15.27V17h1.73l4.01 4.01 1.41-1.41L3.41 2.86 2 4.27z"})),i("span",null,v.localization.Unlink)))}};D.style=V;const T=":host{display:-ms-inline-flexbox;display:inline-flex}button{cursor:pointer;border:none;background-color:transparent;margin:0;padding:0;display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center}button svg{fill:var(--dnn-color-primary)}";const B=class{constructor(t){s(this,t);this.dnnRmFoldersChanged=o(this,"dnnRmFoldersChanged",7)}handleClick(){this.showModal()}showModal(){const t=document.createElement("dnn-modal");t.backdropDismiss=true;t.showCloseButton=true;const e=document.createElement("div");e.style.overflowY="auto";e.style.maxHeight="70vh";const s=document.createElement("dnn-rm-upload-file");e.appendChild(s);t.appendChild(e);document.body.appendChild(t);t.show();t.addEventListener("dismissed",(()=>{this.dnnRmFoldersChanged.emit()}))}render(){return i(n,null,i("button",{onClick:()=>this.handleClick()},i("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24",width:"24"},i("path",{d:"M6 20q-.825 0-1.412-.587Q4 18.825 4 18v-3h2v3h12v-3h2v3q0 .825-.587 1.413Q18.825 20 18 20Zm5-4V7.85l-2.6 2.6L7 9l5-5 5 5-1.4 1.45-2.6-2.6V16Z"})),i("span",null,v.localization.Upload)))}};B.style=T;const R=":host{--background-color:transparent;--color:#333;--border-size:1px;--border-color:var(--backround-color);--border-radius:var(--dnn-controls-radius, 5px);--padding:var(--dnn-controls-padding, 5px);display:inline-block;width:auto}:host(.disabled){pointer-events:none}:host(.primary){--background-color:var(--dnn-color-primary, blue);--color:var(--dnn-color-primary-contrast, white);--focus-color:var(--background-color)}:host(.primary.reversed){--background-color:var(--dnn-color-primary-contrast, white);--color:var(--dnn-color-primary, blue);--border-color:var(--dnn-color-primary, blue);--focus-color:var(--color)}:host(.secondary){--background-color:var(--dnn-color-secondary, green);--color:var(--dnn-color-secondary-contrast, white);--focus-color:var(--background-color)}:host(.secondary.reversed){--background-color:var(--dnn-color-secondary-contrast, white);--color:var(--dnn-color-secondary, blue);--border-color:var(--dnn-color-secondary, blue);--focus-color:var(--color)}:host(.tertiary){--background-color:var(--dnn-color-tertiary, yellow);--color:var(--dnn-color-tertiary-contrast, black);--focus-color:var(--background-color)}:host(.tertiary.reversed){--background-color:var(--dnn-color-tertiary-contrast, white);--color:var(--dnn-color-tertiary, blue);--border-color:var(--dnn-color-tertiary, blue);--focus-color:var(--color)}:host(.hydrated) button{border:var(--border-size) solid var(--border-color);border-radius:var(--border-radius);padding:var(--padding) calc(var(--padding) * 2);background-color:transparent;background-color:var(--background-color);color:var(--color);outline:none}:host(.hydrated) button:focus,:host(.hydrated) button:hover{-webkit-box-shadow:0 0 2px 2px var(--focus-color);box-shadow:0 0 2px 2px var(--focus-color)}:host(:disabled,[disabled]) button{pointer-events:none;opacity:0.5}:host(.small) button{padding:calc(var(--padding) / 2) var(--padding);font-size:0.7em}:host(.large) button{padding:calc(var(--padding) * 1.5) calc(var(--padding) * 3);font-size:1.2em}button{height:100%;width:100%;cursor:pointer}";const N=class{constructor(t){s(this,t);this.confirmed=o(this,"confirmed",7);this.canceled=o(this,"canceled",7);this.type="primary";this.reversed=false;this.size="normal";this.confirm=false;this.confirmYesText="Yes";this.confirmNoText="No";this.confirmMessage="Are you sure ?";this.disabled=false;this.modalVisible=false}componentDidLoad(){this.modal=this.el.shadowRoot.querySelector("dnn-modal")}handleConfirm(){this.modal.hide();this.modalVisible=false;this.confirmed.emit()}handleCancel(){this.modal.hide();this.modalVisible=false;this.canceled.emit()}handleClick(){if(this.confirm&&!this.modalVisible){this.modal.show();this.modalVisible=true}}getElementClasses(){const t=[];t.push(this.type);if(this.reversed){t.push("reversed")}if(this.size!=="normal"){t.push(this.size)}return t.join(" ")}render(){return i(n,{class:this.getElementClasses(),disabled:this.disabled,style:{"pointer-events":this.disabled?"none":"all"}},i("button",{class:"button",onClick:()=>this.handleClick(),disabled:this.disabled},i("slot",null)),this.confirm&&i("dnn-modal",{showCloseButton:false,backdropDismiss:false},i("p",null,this.confirmMessage),i("div",{style:{display:"flex",justifyContent:"flex-end"}},i("dnn-button",{type:"primary",style:{margin:"5px"},onClick:()=>this.handleConfirm()},this.confirmYesText),i("dnn-button",{type:"secondary",style:{margin:"5px"},onClick:()=>this.handleCancel()},this.confirmNoText))))}get el(){return l(this)}};N.style=R;const q=":host{--focus-color:var(--dnn-color-primary, #3792ED);display:-ms-inline-flexbox;display:inline-flex;-ms-flex-align:center;align-items:center;gap:0.25rem;margin:3px}button{background-color:transparent;border:0;padding:0;margin:0;outline:none;display:-ms-flexbox;display:flex;-ms-flex-pack:center;justify-content:center;-ms-flex-align:center;align-items:center}button .unchecked,button .checked,button .intermediate{display:none}button.checked .checked,button.unchecked .unchecked,button.intermediate .intermediate{display:block}button svg.undefined{opacity:0.45}button:focus{-webkit-box-shadow:0 0 2px 2px var(--focus-color);box-shadow:0 0 2px 2px var(--focus-color)}";const A=class{constructor(t){s(this,t);this.checkedchange=o(this,"checkedchange",7);this.checked="unchecked";this.useIntermediate=false}changeState(){if(!this.useIntermediate){switch(this.checked){case"checked":this.checked="unchecked";break;case"unchecked":case"intermediate":this.checked="checked";break}this.checkedchange.emit(this.checked);return}switch(this.checked){case"checked":this.checked="intermediate";break;case"intermediate":this.checked="unchecked";break;case"unchecked":this.checked="checked";break}this.checkedchange.emit(this.checked)}render(){return i(n,null,i("button",{class:`icon ${this.checked}`,onClick:()=>this.changeState()},i("div",{class:"unchecked"},i("slot",{name:"uncheckedicon"},i("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"#000000"},i("path",{d:"M0 0h24v24H0z",fill:"none"}),i("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"})))),i("div",{class:"checked"},i("slot",{name:"checkedicon"},i("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"#000000"},i("path",{d:"M0 0h24v24H0z",fill:"none"}),i("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"})))),i("div",{class:"intermediate"},i("slot",{name:"intermediateicon"},i("svg",{class:"undefined",xmlns:"http://www.w3.org/2000/svg","enable-background":"new 0 0 24 24",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"#000000"},i("g",null,i("rect",{fill:"none",height:"24",width:"24"})),i("g",null,i("g",null,i("g",null,i("path",{d:"M19,3H5C3.9,3,3,3.9,3,5v14c0,1.1,0.9,2,2,2h14c1.1,0,2-0.9,2-2V5C21,3.9,20.1,3,19,3z M17,13H7v-2h10V13z"})))))))),i("label",{htmlFor:this.el.id,onClick:()=>this.changeState()},i("slot",null)))}get el(){return l(this)}};A.style=q;const Q=":host{display:block}#container{max-height:0;overflow:hidden;-webkit-transition:max-height 300ms ease-in-out;transition:max-height 300ms ease-in-out}";const U=class{constructor(t){s(this,t);this.dnnCollapsibleHeightChanged=o(this,"dnnCollapsibleHeightChanged",7);this.expanded=false;this.transitionDuration=150}handleHeightChanged(){requestAnimationFrame((()=>{this.updateSize()}))}async updateSize(){if(this.expanded){requestAnimationFrame((()=>{this.container.style.maxHeight=`${this.container.scrollHeight}px`}));setTimeout((()=>{this.container.style.maxHeight="none"}),this.transitionDuration)}}handledExpandedChanged(t){if(t){this.updateSize()}else{requestAnimationFrame((()=>{this.container.style.maxHeight=`${this.container.scrollHeight}px`;requestAnimationFrame((()=>{this.container.style.maxHeight="0px"}))}))}setTimeout((()=>{requestAnimationFrame((()=>{this.dnnCollapsibleHeightChanged.emit()}))}),this.transitionDuration)}componentDidLoad(){this.container.style.transition=`max-height ${this.transitionDuration}ms ease-in-out`}render(){return i(n,null,i("div",{id:"container",class:this.expanded&&"expanded",ref:t=>this.container=t,style:{transition:`max-height ${this.transitionDuration}ms ease-in-out`}},i("slot",null)))}get el(){return l(this)}static get watchers(){return{expanded:["handledExpandedChanged"]}}};U.style=Q;const W=":host{--border-color:var(--dnn-color-tertiary-contrast, lightgray);--border-radius:var(--dnn-controls-radius, 5px);--drop-background-color:var(--dnn-color-tertiary, lightblue);display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;gap:1rem;text-align:center;border:2px dashed var(--border-color);border-radius:var(--border-radius);padding:1rem;-webkit-transition:all 300ms ease-in-out;transition:all 300ms ease-in-out}:host(.dropping){background-color:var(--drop-background-color)}p{margin:0;padding:0}button{display:-ms-flexbox;display:flex;-ms-flex-pack:center;justify-content:center;-ms-flex-align:center;align-items:center;border:0px;margin:0;padding:0;background-color:transparent}button:hover{cursor:pointer}button svg{margin-right:0.5rem}label.upload-file{display:-ms-flexbox;display:flex;-ms-flex-pack:center;justify-content:center;-ms-flex-align:center;align-items:center;cursor:pointer}label.upload-file input{display:none}.video-preview{display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;-ms-flex-align:center;align-items:center}.video-preview button{margin:1rem}";const G=class{constructor(t){s(this,t);this.filesSelected=o(this,"filesSelected",7);this.resx={dragAndDropFile:"Drag and drop a file",capture:"Capture",or:"or",takePicture:"Take a picture",uploadFile:"Upload a file"};this.allowCameraMode=false;this.captureQuality=.8;this.canTakeSnapshots=false;this.takingPicture=false;this.handleDragOver=t=>{t.stopPropagation();t.preventDefault();t.dataTransfer.dropEffect="copy";this.dropzone.classList.add("dropping")};this.handleDrop=t=>{t.stopPropagation();t.preventDefault();const e=t.dataTransfer.files;if(this.hasInvalidExtensions(e)){return}var s=this.getFilesFromFileList(e);this.filesSelected.emit(s)}}componentDidLoad(){if(this.allowCameraMode){this.checkIfBrowserCanTakeSnapshots().then((t=>this.canTakeSnapshots=t))}if(this.allowedExtensions!=undefined&&this.allowedExtensions.length>0){var t=this.allowedExtensions.map((t=>`.${t}`));var e=t.join(",");this.fileInput.accept=e}}checkIfBrowserCanTakeSnapshots(){return new Promise((t=>{const e=navigator.mediaDevices;if(e==undefined||e.enumerateDevices==undefined){t(false)}e.enumerateDevices().then((e=>{var s=e.some((t=>t.kind=="videoinput"));t(s)}))}))}getFilesFromFileList(t){var e=[];for(let s=0;s<t.length;s++){const i=t[s];e.push(i)}return e}handleUploadButton(t){let e=this.getFilesFromFileList(t.files);this.filesSelected.emit(e)}hasInvalidExtensions(t){var e=false;for(let i=0;i<t.length;i++){const n=t[i];var s=/(?:\.([^.]+))?$/;const o=s.exec(n.name)[1];if(o==undefined){e=true}if(this.allowedExtensions!=undefined&&!this.allowedExtensions.includes(o)){e=true}return e}}takeSnapshot(){this.takingPicture=true;navigator.mediaDevices.getUserMedia({video:true,audio:false}).then((t=>{this.videoPreview.srcObject=t;this.videoPreview.play().then((()=>{this.videoSettings=t.getVideoTracks()[0].getSettings()}))})).catch((t=>alert(t)))}applySnapshot(){var t=document.createElement("canvas");const e=t.getContext("2d");t.width=this.videoSettings.width;t.height=this.videoSettings.height;e.drawImage(this.videoPreview,0,0);t.toBlob((t=>{var e=new File([t],"image.jpeg",{type:"image/jpeg"});this.takingPicture=false;var s=[e];this.filesSelected.emit(s)}),"image/jpeg",this.captureQuality)}render(){var t,e,s,o,l,r;return i(n,{ref:t=>this.dropzone=t,class:"dropzone",onDragOver:this.handleDragOver,onDrop:this.handleDrop,onDragLeave:()=>this.dropzone.classList.remove("dropping")},!this.takingPicture&&[i("p",null,(t=this.resx)===null||t===void 0?void 0:t.dragAndDropFile),i("p",null,"- ",(e=this.resx)===null||e===void 0?void 0:e.or," -"),i("label",{class:"upload-file"},i("input",{type:"file",ref:t=>this.fileInput=t,onChange:t=>this.handleUploadButton(t.target)}),i("span",null,i("svg",{xmlns:"http://www.w3.org/2000/svg","enable-background":"new 0 0 24 24",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"#000000"},i("g",null,i("rect",{fill:"none",height:"24",width:"24"})),i("g",null,i("path",{d:"M5,20h14v-2H5V20z M5,10h4v6h6v-6h4l-7-7L5,10z"}))))," ",(s=this.resx)===null||s===void 0?void 0:s.uploadFile),this.canTakeSnapshots&&[i("p",null,"- ",(o=this.resx)===null||o===void 0?void 0:o.or," -"),i("button",{onClick:()=>this.takeSnapshot()},i("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"#000000"},i("path",{d:"M0 0h24v24H0z",fill:"none"}),i("circle",{cx:"12",cy:"12",r:"3.2"}),i("path",{d:"M9 2L7.17 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2h-3.17L15 2H9zm3 15c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5z"})),(l=this.resx)===null||l===void 0?void 0:l.takePicture)]],this.takingPicture&&i("div",{class:"video-preview"},i("video",{ref:t=>this.videoPreview=t}),i("button",{onClick:()=>this.applySnapshot()},i("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"#000000"},i("path",{d:"M0 0h24v24H0z",fill:"none"}),i("circle",{cx:"12",cy:"12",r:"3.2"}),i("path",{d:"M9 2L7.17 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2h-3.17L15 2H9zm3 15c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5z"}))," ",(r=this.resx)===null||r===void 0?void 0:r.capture)))}};G.style=W;const Z=":host{display:block}:host .overlay{background-color:rgba(0, 0, 0, 0.5);position:fixed;top:0;left:0;width:100%;height:100%;z-index:1002;display:-ms-flexbox;display:flex;-ms-flex-pack:center;justify-content:center;-ms-flex-align:center;align-items:center;-webkit-backdrop-filter:blur(2px);backdrop-filter:blur(2px);-webkit-transition:all 300ms ease-in-out;transition:all 300ms ease-in-out;visibility:hidden;opacity:0}:host .overlay .modal{max-width:var(--max-width, 1200px);background-color:white;padding:30px;-webkit-transform:scale(2);transform:scale(2);-webkit-transition:all 300ms ease-in-out;transition:all 300ms ease-in-out;z-index:2;position:relative;margin:10%;max-height:80%;border-radius:var(--dnn-controls-radius, 5px);-webkit-box-shadow:10px 10px 20px 0 rgba(0, 0, 0, 0.5);box-shadow:10px 10px 20px 0 rgba(0, 0, 0, 0.5);display:block}:host .overlay .modal .close{position:absolute;background-color:white;border:2px solid white;border-radius:50%;padding:0;margin:0;top:-12px;right:-12px;outline:none;display:-ms-flexbox;display:flex;-ms-flex-pack:center;justify-content:center;-ms-flex-align:center;align-items:center}:host .overlay .modal .close:focus,:host .overlay .modal .close:hover{-webkit-box-shadow:0 0 2px 2px var(--dnn-color-primary, blue);box-shadow:0 0 2px 2px var(--dnn-color-primary, blue)}:host .overlay .modal .close svg{width:24px;height:24px;color:grey}:host .overlay.visible{visibility:visible;opacity:1}:host .overlay.visible .modal{-webkit-transform:scale(1);transform:scale(1);-webkit-box-shadow:4px 4px 10px 0px rgba(0, 0, 0, 0.5);box-shadow:4px 4px 10px 0px rgba(0, 0, 0, 0.5);display:block}";const E=class{constructor(t){s(this,t);this.dismissed=o(this,"dismissed",7);this.backdropDismiss=true;this.closeText="Close modal";this.showCloseButton=true;this.visible=false}async show(){this.visible=true}async hide(){this.visible=false}handleDismiss(){this.visible=false;this.dismissed.emit()}handleBackdropClick(t){const e=t.target;if(e.id==="backdrop"&&this.backdropDismiss){this.handleDismiss()}}render(){return i(n,null,i("div",{id:"backdrop",class:this.visible?"overlay visible":"overlay",onClick:t=>this.handleBackdropClick(t)},i("div",{class:"modal"},this.showCloseButton&&i("button",{class:"close","aria-label":this.closeText,onClick:()=>this.handleDismiss()},i("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"#000000"},i("path",{d:"M0 0h24v24H0z",fill:"none"}),i("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z"}))),i("slot",null))))}get el(){return l(this)}};E.style=Z;const K=":host{display:block}.add-role-row{display:-ms-flexbox;display:flex;gap:1em;-ms-flex-align:center;align-items:center;-ms-flex-wrap:wrap;flex-wrap:wrap}.add-role-row label{margin-right:0.5em}.search-user{display:-ms-flexbox;display:flex;gap:1em;margin-top:1em}.search-user .search-control{position:relative}.search-user .search-control dnn-collapsible{position:absolute;left:0;top:calc(100% - 2px);width:100%;-webkit-box-shadow:0px 4px 4px;box-shadow:0px 4px 4px}.search-user .search-control dnn-collapsible .dropdown{background-color:white;border:1px solid lightgray;display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column}.search-user .search-control dnn-collapsible .dropdown button{background-color:transparent;border:none;border-bottom:1px solid lightgray;padding:0.25em;margin:0;text-align:left}table{border:1px solid lightgray;border-collapse:collapse;margin-top:1em}table thead{text-align:center}table thead tr{border-bottom:1px solid lightgray}table thead th{background-color:lightgray;padding:0.25em 0.5em}table thead th:first-child{border-right:1px solid lightgray}table tbody tr{border-bottom:1px dotted lightgray}table tbody tr th{text-align:left;border-right:1px solid lightgray;padding:0 0.5em}table tbody tr td{text-align:center}table tbody tr td dnn-checkbox span{display:none}table tbody tr td button{background-color:transparent;border:0;padding:0;margin:0;margin-right:1em}";const J=class{constructor(t){s(this,t);this.userSearchQueryChanged=o(this,"userSearchQueryChanged",7);this.permissionsChanged=o(this,"permissionsChanged",7);this.resx={Add:"Add",AllRoles:"All Roles",FilterByGroup:"Filter By Group",GlobalRoles:"Global Roles",Role:"Role",RolePermissions:"Role Permissions",SelectRole:"Select Role",User:"User",UserPermissions:"User Permissions"};this.foundUsers=[];this.selectedRoleGroupId=-1}handleFoundUsersChanged(t){if((t===null||t===void 0?void 0:t.length)>0){setTimeout((()=>{this.userCollapsible.expanded=true}),100)}}componentWillLoad(){document.addEventListener("click",this.dismissUserResults.bind(this))}disconnectedCallback(){document.removeEventListener("click",this.disconnectedCallback.bind(this))}dismissUserResults(t){const e=this.roleDropDown.getBoundingClientRect();if(t.pageX>e.right||t.pageX<e.left||t.pageY>e.bottom||t.pageY<e.top){this.userCollapsible.expanded=false}}handleRoleGroupChanged(t){const e=t.selectedIndex;const s=Number.parseInt(t.options[e].value);this.selectedRoleGroupId=s}addRole(){const t=Number.parseInt(this.roleDropDown.options[this.roleDropDown.selectedIndex].value);const e=this.roles.filter((e=>e.RoleId==t))[0];this.permissions=Object.assign(Object.assign({},this.permissions),{rolePermissions:[...this.permissions.rolePermissions,{default:false,locked:false,permissions:[],roleId:e.RoleId,roleName:e.RoleName}]});this.permissionsChanged.emit(this.permissions)}addUser(){if(this.pickedUser!=undefined){this.permissions=Object.assign(Object.assign({},this.permissions),{userPermissions:[...this.permissions.userPermissions,{displayName:this.pickedUser.displayName,permissions:[],userId:this.pickedUser.userId}]});this.pickedUser=undefined;this.userQuery="";this.permissionsChanged.emit(this.permissions)}}getRoles(){const t=this.roles.filter((t=>!this.permissions.rolePermissions.some((e=>e.roleId==t.RoleId))));if(this.selectedRoleGroupId==-2){return t}if(this.selectedRoleGroupId==-1){return t.filter((t=>t.IsSystemRole))}return t.filter((t=>t.RoleGroupId==this.selectedRoleGroupId))}renderRoleCheckBox(t,e){const s=t.permissions.filter((t=>t.permissionId==e.permissionId))[0];if(t.locked){return i("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"#000000"},i("g",{fill:"none"},i("path",{d:"M0 0h24v24H0V0z"}),i("path",{d:"M0 0h24v24H0V0z",opacity:".87"})),i("path",{d:"M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zM9 6c0-1.66 1.34-3 3-3s3 1.34 3 3v2H9V6zm9 14H6V10h12v10zm-6-3c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2z"}))}const n=s==undefined?"intermediate":s.allowAccess?"checked":"unchecked";return i("dnn-checkbox",{"use-intermediate":true,checked:n,onCheckedchange:s=>this.handleRoleChanged(s.detail,t,e)},i("div",{slot:"intermediateicon"},i("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"#000000"},i("path",{d:"M0 0h24v24H0V0z",fill:"none"}),i("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"}))),i("div",{slot:"uncheckedicon"},i("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"#000000"},i("path",{d:"M0 0h24v24H0V0z",fill:"none"}),i("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zM4 12c0-4.42 3.58-8 8-8 1.85 0 3.55.63 4.9 1.69L5.69 16.9C4.63 15.55 4 13.85 4 12zm8 8c-1.85 0-3.55-.63-4.9-1.69L18.31 7.1C19.37 8.45 20 10.15 20 12c0 4.42-3.58 8-8 8z"}))),i("span",null,e.permissionName))}renderUserCheckBox(t,e){const s=t.permissions.filter((t=>t.permissionId==e.permissionId))[0];const n=s==undefined?"intermediate":s.allowAccess?"checked":"unchecked";return i("dnn-checkbox",{"use-intermediate":true,checked:n,onCheckedchange:s=>this.handleUserChanged(s.detail,t,e)},i("div",{slot:"intermediateicon"},i("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"#000000"},i("path",{d:"M0 0h24v24H0V0z",fill:"none"}),i("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"}))),i("div",{slot:"uncheckedicon"},i("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"#000000"},i("path",{d:"M0 0h24v24H0V0z",fill:"none"}),i("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zM4 12c0-4.42 3.58-8 8-8 1.85 0 3.55.63 4.9 1.69L5.69 16.9C4.63 15.55 4 13.85 4 12zm8 8c-1.85 0-3.55-.63-4.9-1.69L18.31 7.1C19.37 8.45 20 10.15 20 12c0 4.42-3.58 8-8 8z"}))),i("span",null,e.permissionName))}handleRoleChanged(t,e,s){switch(t){case"unchecked":this.permissions=Object.assign(Object.assign({},this.permissions),{rolePermissions:[...this.permissions.rolePermissions.map((t=>{if(t.roleId!=e.roleId){return t}const i=Object.assign({},t);i.permissions=[...i.permissions.filter((t=>t.permissionId!=s.permissionId)),{allowAccess:false,fullControl:false,permissionCode:s.permissionCode,permissionId:s.permissionId,permissionKey:s.permissionKey,permissionName:s.permissionName,view:false}];return i}))]});break;case"checked":this.permissions=Object.assign(Object.assign({},this.permissions),{rolePermissions:[...this.permissions.rolePermissions.map((t=>{if(t.roleId!=e.roleId){return t}const i=Object.assign({},t);i.permissions=[...i.permissions.filter((t=>t.permissionId!=s.permissionId)),{allowAccess:true,fullControl:false,permissionCode:s.permissionCode,permissionId:s.permissionId,permissionKey:s.permissionKey,permissionName:s.permissionName,view:false}];return i}))]});break;case"intermediate":this.permissions=Object.assign(Object.assign({},this.permissions),{rolePermissions:[...this.permissions.rolePermissions.map((t=>{if(t.roleId!=e.roleId){return t}const i=Object.assign({},t);i.permissions=[...i.permissions.filter((t=>t.permissionId!=s.permissionId))];return i}))]});break}this.permissionsChanged.emit(this.permissions)}handleUserChanged(t,e,s){switch(t){case"unchecked":this.permissions=Object.assign(Object.assign({},this.permissions),{userPermissions:[...this.permissions.userPermissions.map((t=>{if(t.userId!=e.userId){return t}const i=Object.assign({},t);i.permissions=[...i.permissions.filter((t=>t.permissionId!=s.permissionId)),{allowAccess:false,fullControl:false,permissionCode:s.permissionCode,permissionId:s.permissionId,permissionKey:s.permissionKey,permissionName:s.permissionName,view:false}];return i}))]});break;case"checked":this.permissions=Object.assign(Object.assign({},this.permissions),{userPermissions:[...this.permissions.userPermissions.map((t=>{if(t.userId!=e.userId){return t}const i=Object.assign({},t);i.permissions=[...i.permissions.filter((t=>t.permissionId!=s.permissionId)),{allowAccess:true,fullControl:false,permissionCode:s.permissionCode,permissionId:s.permissionId,permissionKey:s.permissionKey,permissionName:s.permissionName,view:false}];return i}))]});break;case"intermediate":this.permissions=Object.assign(Object.assign({},this.permissions),{userPermissions:[...this.permissions.userPermissions.map((t=>{if(t.userId!=e.userId){return t}const i=Object.assign({},t);i.permissions=[...i.permissions.filter((t=>t.permissionId!=s.permissionId))];return i}))]});break}this.permissionsChanged.emit(this.permissions)}removeRole(t){this.permissions=Object.assign(Object.assign({},this.permissions),{rolePermissions:[...this.permissions.rolePermissions.filter((e=>e.roleId!=t.roleId))]});this.permissionsChanged.emit()}removeUser(t){this.permissions=Object.assign(Object.assign({},this.permissions),{userPermissions:[...this.permissions.userPermissions.filter((e=>e.userId!=t.userId))]});this.permissionsChanged.emit(this.permissions)}handleQueryChanged(t){this.userQuery=t;if(t==undefined||t.length==0){this.userCollapsible.expanded=false;this.pickedUser=undefined;this.foundUsers=[];return}this.userSearchQueryChanged.emit(t)}handleSearchUserFieldKeyDown(t){if(t.key!="ArrowDown"){return}t.preventDefault();const e=this.userCollapsible.querySelector("button");if(e!=undefined){e.focus()}}handleSearchedUserKeyDown(t){const e=t.target;switch(t.key){case"ArrowDown":t.preventDefault();const s=e.nextElementSibling;s===null||s===void 0?void 0:s.focus();break;case"ArrowUp":t.preventDefault();const i=e.previousElementSibling;i===null||i===void 0?void 0:i.focus();break}}handleUserPicked(t){this.userQuery=t.displayName;this.pickedUser=t}getFilteredUsers(){return this.foundUsers.filter((t=>!this.permissions.userPermissions.some((e=>e.userId==t.userId))))}render(){const t=this.getRoles();return i(n,null,i("div",{class:"add-role-row"},i("div",{class:"dropdown"},i("label",null,this.resx.FilterByGroup," :"),i("select",{onChange:t=>this.handleRoleGroupChanged(t.target)},i("option",{value:-2,selected:this.selectedRoleGroupId==-2},this.resx.AllRoles),i("option",{value:-1,selected:this.selectedRoleGroupId==-1},this.resx.GlobalRoles),this.roleGroups.map((t=>i("option",{value:t.id,selected:this.selectedRoleGroupId==t.id},t.name))))),t&&t.length>0&&[i("div",{class:"dropdown"},i("label",null,this.resx.SelectRole," :"),i("select",{ref:t=>this.roleDropDown=t},this.getRoles().map((t=>i("option",{value:t.RoleId},t.RoleName))))),i("dnn-button",{type:"primary",onClick:()=>this.addRole()},this.resx.Add)]),i("table",{class:"roles-table"},i("caption",null,this.resx.RolePermissions),i("thead",null,i("tr",null,i("th",null,this.resx.Role),this.permissions.permissionDefinitions.map((t=>i("th",null,t.permissionName))),i("th",null," "))),i("tbody",null,this.permissions.rolePermissions.map((t=>i("tr",null,i("th",null,t.roleName),this.permissions.permissionDefinitions.map((e=>i("td",null,this.renderRoleCheckBox(t,e)))),i("td",null,!t.default&&i("button",{onClick:()=>this.removeRole(t)},i("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"#000000"},i("path",{d:"M0 0h24v24H0V0z",fill:"none"}),i("path",{d:"M14.59 8L12 10.59 9.41 8 8 9.41 10.59 12 8 14.59 9.41 16 12 13.41 14.59 16 16 14.59 13.41 12 16 9.41 14.59 8zM12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"}))))))))),i("div",{class:"search-user"},i("div",{class:"search-control"},i("dnn-searchbox",{placeholder:this.resx.User,debounced:true,onQueryChanged:t=>this.handleQueryChanged(t.detail),onKeyDown:t=>this.handleSearchUserFieldKeyDown(t),query:this.userQuery}),i("dnn-collapsible",{ref:t=>this.userCollapsible=t},i("div",{class:"dropdown"},this.getFilteredUsers().map((t=>i("button",{onKeyDown:t=>this.handleSearchedUserKeyDown(t),onClick:()=>this.handleUserPicked(t)},t.displayName)))))),this.pickedUser&&i("dnn-button",{onClick:()=>this.addUser()},this.resx.Add)),this.permissions.userPermissions&&this.permissions.userPermissions.length>0&&i("table",{class:"users-table"},i("caption",null,this.resx.UserPermissions),i("thead",null,i("tr",null,i("th",null,this.resx.User),this.permissions.permissionDefinitions.map((t=>i("th",null,t.permissionName))),i("th",null," "))),i("tbody",null,this.permissions.userPermissions.map((t=>i("tr",null,i("th",null,t.displayName),this.permissions.permissionDefinitions.map((e=>i("td",null,this.renderUserCheckBox(t,e)))),i("td",null,i("button",{onClick:()=>this.removeUser(t)},i("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"#000000"},i("path",{d:"M0 0h24v24H0V0z",fill:"none"}),i("path",{d:"M14.59 8L12 10.59 9.41 8 8 9.41 10.59 12 8 14.59 9.41 16 12 13.41 14.59 16 16 14.59 13.41 12 16 9.41 14.59 8zM12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"}))))))))))}static get watchers(){return{foundUsers:["handleFoundUsersChanged"]}}};J.style=K;class X{constructor(t){this.sf=new d(t);this.requestUrl=`${this.sf.getServiceRoot("ResourceManager")}Localization/`}getResources(){return new Promise(((t,e)=>{const s="ResourceManagerLocalization";const i=sessionStorage.getItem(s);if(i){t(JSON.parse(i));return}const n=`${this.requestUrl}GetResources`;fetch(n,{headers:this.sf.getModuleHeaders()}).then((i=>{if(i.status==200){i.json().then((e=>{sessionStorage.setItem(s,JSON.stringify(e));t(e)}))}else{i.json().then((t=>e(t)))}})).catch((t=>e(t)))}))}}const Y=":host{display:block;width:100%}.container{border:1px solid lightgray;display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column}.container dnn-vertical-splitview{width:100%;height:400px;--left-pane-background-color:lightgray;--right-pane-background-color:white}.container dnn-vertical-splitview .splitter{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-webkit-box-shadow:inset 8px 0 8px -8px grey;box-shadow:inset 8px 0 8px -8px grey;height:100%}.container dnn-vertical-splitview .splitter button{margin:0;padding:0;width:32px;height:32px;border:1px solid lightgray;border-radius:50%;background-color:white;-webkit-box-shadow:2px 2px 4px rgba(0, 0, 0, 0.2);box-shadow:2px 2px 4px rgba(0, 0, 0, 0.2);position:relative;left:-12px;display:-ms-flexbox;display:flex;-ms-flex-pack:center;justify-content:center;-ms-flex-align:center;align-items:center;cursor:pointer}.container dnn-vertical-splitview .splitter button svg{-webkit-transition:all 300ms ease-in-out;transition:all 300ms ease-in-out}.container dnn-vertical-splitview .splitter button.expanded svg{-webkit-transform:rotate(180deg);transform:rotate(180deg)}.container dnn-vertical-splitview .folder-mappings{position:absolute;bottom:0;left:0;border:0;background-color:transparent;cursor:pointer}";const tt="dnn-resource-manager-last-folders-width";const et=class{constructor(t){s(this,t);this.foldersExpanded=true;v.moduleId=this.moduleId;this.localizationClient=new X(this.moduleId)}async foldersExpandedChanged(t){const e=parseFloat(localStorage.getItem(tt))||30;if(t){this.splitView.setSplitWidthPercentage(e);return}this.splitView.setSplitWidthPercentage(0)}componentWillLoad(){return new Promise(((t,e)=>{this.localizationClient.getResources().then((e=>{v.localization=e;v.sortField=M.itemName;t()})).catch((t=>{console.error(t);e()}))}))}handleSplitWidthChanged(t){if(t.detail!=0){localStorage.setItem(tt,t.detail.toString())}}render(){var t;return i(n,null,i("div",{class:"container"},i("dnn-rm-top-bar",null),i("dnn-vertical-splitview",{ref:t=>this.splitView=t,onWidthChanged:this.handleSplitWidthChanged},i("div",{class:"splitter"},i("button",{class:this.foldersExpanded&&"expanded",onClick:()=>this.foldersExpanded=!this.foldersExpanded},i("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"#000000"},i("path",{d:"M0 0h24v24H0V0z",fill:"none"}),i("path",{d:"M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6-6-6z"})))),i("dnn-rm-left-pane",{slot:"left"}),i("button",{slot:"left",class:"folder-mappings",title:(t=v.localization)===null||t===void 0?void 0:t.EditFolderMappings,onClick:()=>this.folderMappingsModal.show()},i("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24",width:"24"},i("path",{d:"m9.25 22-.4-3.2q-.325-.125-.612-.3-.288-.175-.563-.375L4.7 19.375l-2.75-4.75 2.575-1.95Q4.5 12.5 4.5 12.337v-.675q0-.162.025-.337L1.95 9.375l2.75-4.75 2.975 1.25q.275-.2.575-.375.3-.175.6-.3l.4-3.2h5.5l.4 3.2q.325.125.613.3.287.175.562.375l2.975-1.25 2.75 4.75-2.575 1.95q.025.175.025.337v.675q0 .163-.05.338l2.575 1.95-2.75 4.75-2.95-1.25q-.275.2-.575.375-.3.175-.6.3l-.4 3.2Zm2.8-6.5q1.45 0 2.475-1.025Q15.55 13.45 15.55 12q0-1.45-1.025-2.475Q13.5 8.5 12.05 8.5q-1.475 0-2.488 1.025Q8.55 10.55 8.55 12q0 1.45 1.012 2.475Q10.575 15.5 12.05 15.5Zm0-2q-.625 0-1.062-.438-.438-.437-.438-1.062t.438-1.062q.437-.438 1.062-.438t1.063.438q.437.437.437 1.062t-.437 1.062q-.438.438-1.063.438ZM12 12Zm-1 8h1.975l.35-2.65q.775-.2 1.438-.588.662-.387 1.212-.937l2.475 1.025.975-1.7-2.15-1.625q.125-.35.175-.738.05-.387.05-.787t-.05-.788q-.05-.387-.175-.737l2.15-1.625-.975-1.7-2.475 1.05q-.55-.575-1.212-.963-.663-.387-1.438-.587L13 4h-1.975l-.35 2.65q-.775.2-1.437.587-.663.388-1.213.938L5.55 7.15l-.975 1.7 2.15 1.6q-.125.375-.175.75-.05.375-.05.8 0 .4.05.775t.175.75l-2.15 1.625.975 1.7 2.475-1.05q.55.575 1.213.962.662.388 1.437.588Z"}))),i("dnn-rm-right-pane",{slot:"right"})),i("dnn-modal",{ref:t=>this.folderMappingsModal=t},i("dnn-rm-folder-mappings",null))))}get el(){return l(this)}static get watchers(){return{foldersExpanded:["foldersExpandedChanged"]}}};et.style=Y;class st{constructor(t){this.sf=new d(t);this.requestUrl=`${this.sf.getServiceRoot("InternalServices")}ItemListService/`}getFolders(){return new Promise(((t,e)=>{const s=`${this.requestUrl}GetFolders`;fetch(s,{headers:this.sf.getModuleHeaders()}).then((s=>{if(s.status==200){s.json().then((e=>t(e)))}else{s.json().then((t=>e(t)))}})).catch((t=>e(t)))}))}getFolderDescendants(t,e=0,s="",i="",n=-1){return new Promise(((o,l)=>{let r=`${this.requestUrl}GetFolderDescendants?parentId=${t}&sortOrder=${e}&searchText=${s}&permission=${i}`;if(n>-1){r+="&portalId=${portalId}"}fetch(r,{headers:this.sf.getModuleHeaders()}).then((t=>{if(t.status==200){t.json().then((t=>o(t)))}else{t.json().then((t=>l(t.message)))}})).catch((t=>l(t)))}))}}const it=":host{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-webkit-box-shadow:0px 4px 8px -4px black;box-shadow:0px 4px 8px -4px black}button{padding:0;margin:0;background-color:transparent;display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;border:0;padding:0;margin:0;cursor:pointer}button svg{fill:var(--dnn-color-primary)}.right-controls{display:-ms-flexbox;display:flex;margin:0 1em;gap:1em}.right-controls .sort,.right-controls .sync{position:relative}.right-controls .sort dnn-collapsible,.right-controls .sync dnn-collapsible{position:absolute;top:100%;right:0;background-color:white}.right-controls .sort dnn-collapsible[expanded],.right-controls .sync dnn-collapsible[expanded]{border:1px solid lightgray;-webkit-box-shadow:2px 2px 4px -2px;box-shadow:2px 2px 4px -2px}.right-controls .sort dnn-collapsible .dropdown,.right-controls .sync dnn-collapsible .dropdown{display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;background-color:white}.right-controls .sort dnn-collapsible .dropdown button,.right-controls .sync dnn-collapsible .dropdown button{background-color:transparent;border:none;padding:0.5em 1em;margin:0;border-bottom:1px solid lightgray;white-space:nowrap}.right-controls .sort dnn-collapsible .dropdown button svg,.right-controls .sync dnn-collapsible .dropdown button svg{height:1em;width:1em;margin-right:0.5em}dnn-vertical-overflow-menu{-ms-flex-positive:1;flex-grow:1;margin-left:24px}dnn-collapsible{z-index:1}";const nt=class{constructor(t){s(this,t);this.sortDropdownExpanded=false;this.syncDropdownExpanded=false;this.internalServicesClient=new st(v.moduleId);this.itemsClient=new z(v.moduleId)}changeLayout(){if(v.layout=="card"){v.layout="list";return}v.layout="card"}renderSortButton(t){return i("button",{onClick:()=>{v.sortField=t;v.currentItems=Object.assign(Object.assign({},v.currentItems),{items:[]});this.sortDropdownExpanded=!this.sortDropdownExpanded}},this.renderRadioButton(v.sortField==t),i("span",null,t.localizedName))}renderRadioButton(t=false){if(t){return i("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"#000000"},i("path",{d:"M0 0h24v24H0z",fill:"none"}),i("path",{d:"M12 7c-2.76 0-5 2.24-5 5s2.24 5 5 5 5-2.24 5-5-2.24-5-5-5zm0-5C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}))}else{return i("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"#000000"},i("path",{d:"M0 0h24v24H0z",fill:"none"}),i("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}))}}syncFolderContent(t=false){this.itemsClient.syncFolderContent(v.currentItems.folder.folderId,0,v.sortField,t).then((()=>{this.getFolderContent()})).catch((t=>console.log(t)))}getFolderContent(){this.getFolders().then((()=>{this.itemsClient.getFolderContent(v.currentItems.folder.folderId,0,v.pageSize,v.sortField).then((t=>v.currentItems=t)).catch((t=>console.error(t)))})).catch((t=>alert(t.Message)))}getFolders(){return new Promise(((t,e)=>{this.internalServicesClient.getFolders().then((e=>{v.rootFolders=e;t(e)})).catch((t=>e(t)))}))}render(){return i(n,null,i("dnn-vertical-overflow-menu",null,v.selectedItems&&v.selectedItems.length==0&&v.currentItems&&v.currentItems.hasAddFoldersPermission&&i("dnn-action-create-folder",null),v.selectedItems&&v.selectedItems.length==0&&v.currentItems&&v.currentItems.hasAddFilesPermission&&i("dnn-action-upload-file",null),v.selectedItems.length==1&&v.currentItems.hasManagePermission&&i("dnn-action-edit-item",{item:v.selectedItems[0]}),v.selectedItems.length>0&&v.currentItems.hasDeletePermission&&[i("dnn-action-move-items",{items:v.selectedItems}),i("dnn-action-delete-items",{items:v.selectedItems})],v.selectedItems.length>0&&v.selectedItems.every((t=>t.isFolder&&t.unlinkAllowedStatus&&t.unlinkAllowedStatus!="false"))&&i("dnn-action-unlink-items",{items:v.selectedItems}),v.selectedItems.length==1&&!v.selectedItems[0].isFolder&&location.protocol=="https:"&&i("dnn-action-copy-url",{items:v.selectedItems}),v.selectedItems.length==1&&!v.selectedItems[0].isFolder&&i("dnn-action-download-item",{item:v.selectedItems[0]})),i("div",{class:"right-controls"},v.selectedItems.length>0&&i("button",{onClick:()=>v.selectedItems=[]},i("span",null,v.selectedItems.length," ",v.localization.Items),i("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"#000000"},i("path",{d:"M0 0h24v24H0z",fill:"none"}),i("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}))),i("div",{class:"sort"},i("button",{onClick:()=>{this.syncDropdownExpanded=false;this.sortDropdownExpanded=!this.sortDropdownExpanded}},i("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"#000000"},i("path",{d:"M0 0h24v24H0z",fill:"none"}),i("path",{d:"M3 18h6v-2H3v2zM3 6v2h18V6H3zm0 7h12v-2H3v2z"})),i("span",null,v.localization.Sort),i("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"#000000"},i("path",{d:"M0 0h24v24H0z",fill:"none"}),i("path",{d:"M7 10l5 5 5-5z"}))),i("dnn-collapsible",{expanded:this.sortDropdownExpanded},i("div",{class:"dropdown"},this.renderSortButton(M.itemName),this.renderSortButton(M.createdOnDate),this.renderSortButton(M.lastModifiedOnDate),this.renderSortButton(M.size)))),i("div",{class:"sync"},i("button",{onClick:()=>{this.sortDropdownExpanded=false;this.syncDropdownExpanded=!this.syncDropdownExpanded}},i("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"#000000"},i("path",{d:"M0 0h24v24H0z",fill:"none"}),i("path",{xmlns:"http://www.w3.org/2000/svg",d:"M14 4H20V6H17.25L17.65 6.35Q18.875 7.575 19.438 9.012Q20 10.45 20 11.95Q20 14.725 18.337 16.887Q16.675 19.05 14 19.75V17.65Q15.8 17 16.9 15.438Q18 13.875 18 11.95Q18 10.825 17.575 9.762Q17.15 8.7 16.25 7.8L16 7.55V10H14ZM10 20H4V18H6.75L6.35 17.65Q5.05 16.5 4.525 15.025Q4 13.55 4 12.05Q4 9.275 5.662 7.112Q7.325 4.95 10 4.25V6.35Q8.2 7 7.1 8.562Q6 10.125 6 12.05Q6 13.175 6.425 14.237Q6.85 15.3 7.75 16.2L8 16.45V14H10Z"})),i("span",null,v.localization.Sync),i("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"#000000"},i("path",{d:"M0 0h24v24H0z",fill:"none"}),i("path",{d:"M7 10l5 5 5-5z"}))),i("dnn-collapsible",{expanded:this.syncDropdownExpanded},i("div",{class:"dropdown"},i("button",{onClick:()=>{this.getFolderContent();this.syncDropdownExpanded=!this.syncDropdownExpanded}},i("span",null,v.localization.Refresh)),i("button",{onClick:()=>{this.syncFolderContent();this.syncDropdownExpanded=!this.syncDropdownExpanded}},i("span",null,v.localization.SyncThisFolder)),i("button",{onClick:()=>{this.syncFolderContent(true);this.syncDropdownExpanded=!this.syncDropdownExpanded}},i("span",null,v.localization.SyncThisFolderAndSubfolders))))),i("button",{onClick:()=>this.changeLayout()},v.layout=="card"&&i("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"#000000"},i("path",{d:"M0 0h24v24H0z",fill:"none"}),i("path",{d:"M3 13h2v-2H3v2zm0 4h2v-2H3v2zm0-8h2V7H3v2zm4 4h14v-2H7v2zm0 4h14v-2H7v2zM7 7v2h14V7H7z"})),v.layout=="list"&&i("svg",{xmlns:"http://www.w3.org/2000/svg","enable-background":"new 0 0 24 24",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"#000000"},i("rect",{fill:"none",height:"24",width:"24"}),i("g",null,i("path",{d:"M14.67,5v6.5H9.33V5H14.67z M15.67,11.5H21V5h-5.33V11.5z M14.67,19v-6.5H9.33V19H14.67z M15.67,12.5V19H21v-6.5H15.67z M8.33,12.5H3V19h5.33V12.5z M8.33,11.5V5H3v6.5H8.33z"}))))))}};nt.style=it;const ot=":host{display:block}.form{display:grid;grid-template-columns:1fr}.form label{font-weight:bold;margin-top:0.5em}.controls{margin-top:2em;display:-ms-flexbox;display:flex;-ms-flex-pack:end;justify-content:flex-end;gap:1em}";const lt=class{constructor(t){s(this,t);this.dnnRmFoldersChanged=o(this,"dnnRmFoldersChanged",7);this.newFolderRequest={FolderMappingId:-1,FolderName:"",ParentFolderId:v.currentItems.folder.folderId};this.itemsClient=new z(v.moduleId)}componentWillLoad(){this.itemsClient.getFolderMappings().then((t=>{this.folderMappings=t.sort(((t,e)=>t.FolderMappingID-e.FolderMappingID));this.newFolderRequest=Object.assign(Object.assign({},this.newFolderRequest),{FolderMappingId:this.folderMappings[0].FolderMappingID,ParentFolderId:v.currentItems.folder.folderId})})).catch((t=>console.error(t)))}componentDidLoad(){setTimeout((()=>{this.nameField.focus()}),350)}handleCancel(){const t=this.el.parentElement;t.hide().then((()=>{setTimeout((()=>{document.body.removeChild(t)}),300)}))}handleTypeChanged(t){const e=t.target;const s=e.options[e.selectedIndex];const i=Number.parseInt(s.value);this.newFolderRequest=Object.assign(Object.assign({},this.newFolderRequest),{FolderMappingId:i})}handleSave(){this.itemsClient.createNewFolder(this.newFolderRequest).then((()=>{this.dnnRmFoldersChanged.emit();v.currentItems=Object.assign(Object.assign({},v.currentItems),{items:[]});const t=this.el.parentElement;t.hide().then((()=>{setTimeout((()=>{document.body.removeChild(t)}),300)}))})).catch((t=>alert(t)))}canChooseFolderProvider(){return this.folderMappings&&this.folderMappings.find((t=>t.FolderMappingID==v.currentItems.folder.folderMappingId)).IsDefault}render(){var t;return i(n,null,i("h2",null,v.localization.AddFolder),i("div",{class:"form"},v.currentItems.folder.folderName.length>0&&[i("label",null,v.localization.FolderParent),i("span",null,v.currentItems.folder.folderName)],i("label",null,v.localization.Name),i("input",{type:"text",required:true,ref:t=>this.nameField=t,value:this.newFolderRequest.FolderName,onInput:t=>this.newFolderRequest=Object.assign(Object.assign({},this.newFolderRequest),{FolderName:t.target.value})}),!this.newFolderRequest.FolderName&&i("span",null,v.localization.FolderNameRequiredMessage),this.canChooseFolderProvider()&&[i("label",null,v.localization.Type),i("select",{onChange:t=>this.handleTypeChanged(t)},(t=this.folderMappings)===null||t===void 0?void 0:t.map(((t,e)=>i("option",{value:t.FolderMappingID,selected:e==0},t.MappingName))))],this.canChooseFolderProvider()&&this.folderMappings.find((t=>t.FolderMappingID==this.newFolderRequest.FolderMappingId)).IsDefault==false&&[i("label",null,v.localization.MappedPath),i("input",{type:"text",value:this.newFolderRequest.MappedName,onInput:t=>this.newFolderRequest=Object.assign(Object.assign({},this.newFolderRequest),{MappedName:t.target.value})})]),i("div",{class:"controls"},i("dnn-button",{type:"primary",reversed:true,onClick:()=>this.handleCancel()},v.localization.Cancel),i("dnn-button",{type:"primary",disabled:this.newFolderRequest.FolderMappingId<0||this.newFolderRequest.FolderName.length<1,onClick:()=>this.handleSave()},v.localization.Save)))}get el(){return l(this)}};lt.style=ot;const rt=':host{display:block}.general{display:-ms-flexbox;display:flex}.general .left{max-width:256px;border-right:1px solid lightgray;padding:1em}.general .left img{width:100%}.general .right{padding:1em}.form{display:grid;grid-template-columns:1fr 2fr;-ms-flex-align:end;align-items:flex-end}.form label{font-weight:bold;text-align:right;margin-right:0.5em;-ms-flex-item-align:start;align-self:flex-start}.form label::after{content:":"}.form input,.form textarea{margin-top:0.5em}.controls{margin-top:2em;display:-ms-flexbox;display:flex;-ms-flex-pack:end;justify-content:flex-end;gap:1em}';const at=class{constructor(t){s(this,t);this.dnnRmFoldersChanged=o(this,"dnnRmFoldersChanged",7);this.deletedCount=0;this.itemsClient=new z(v.moduleId)}closeModal(){const t=this.el.parentElement;t.hide().then((()=>{setTimeout((()=>{document.body.removeChild(t)}),300)}))}handleDelete(){this.deleting=true;this.items.forEach((t=>{if(t.isFolder){this.itemsClient.deleteFolder({FolderId:t.itemId,UnlinkAllowedStatus:false}).then((()=>{this.handleItemDeleted(t)})).catch((t=>alert(t)))}else{this.itemsClient.deleteFile({FileId:t.itemId}).then((()=>{this.handleItemDeleted(t)})).catch((t=>alert(t)))}}))}handleItemDeleted(t){this.deletedCount++;this.currentItemName=t.itemName;if(this.deletedCount==this.items.length){this.deleting=false;this.dnnRmFoldersChanged.emit();this.closeModal()}}render(){var t,e,s,o;return i(n,null,i("h2",null,(t=v.localization)===null||t===void 0?void 0:t.DeleteItems),i("p",null,(e=v.localization)===null||e===void 0?void 0:e.ConfirmDeleteMessage),i("ul",null,this.items.map((t=>i("li",null,t.itemName)))),this.deleting&&i("div",null,i("p",null,(s=v.localization)===null||s===void 0?void 0:s.DeletingItems," ",this.deletedCount+1,"/",v.selectedItems.length," (",this.currentItemName,")"),i("dnn-rm-progress-bar",{max:v.selectedItems.length,value:this.deletedCount})),i("div",{class:"controls"},i("dnn-button",{type:"primary",reversed:true,disabled:this.deleting,onClick:()=>this.closeModal()},v.localization.Cancel),i("dnn-button",{type:"primary",onClick:()=>this.handleDelete(),disabled:this.deleting},(o=v.localization)===null||o===void 0?void 0:o.Delete)))}get el(){return l(this)}};at.style=rt;const dt=':host{display:block}.general{display:-ms-flexbox;display:flex}.general .left{max-width:256px;border-right:1px solid lightgray;padding:1em}.general .left img{width:100%}.general .right{padding:1em}.form{display:grid;grid-template-columns:1fr 2fr;-ms-flex-align:end;align-items:flex-end}.form label{font-weight:bold;text-align:right;margin-right:0.5em;-ms-flex-item-align:start;align-self:flex-start}.form label::after{content:":"}.form input,.form textarea{margin-top:0.5em}.controls{margin-top:2em;display:-ms-flexbox;display:flex;-ms-flex-pack:end;justify-content:flex-end;gap:1em}';const ht=class{constructor(t){s(this,t);this.dnnRmFoldersChanged=o(this,"dnnRmFoldersChanged",7);this.itemsClient=new z(v.moduleId)}componentWillLoad(){this.itemsClient.getFileDetails(this.fileId).then((t=>{this.fileDetails=t})).catch((t=>alert(t)))}closeModal(){const t=this.el.parentElement;t.hide().then((()=>{setTimeout((()=>{document.body.removeChild(t)}),300)}))}handleSave(){const t={fileId:this.fileId,fileName:this.fileDetails.fileName,title:this.fileDetails.title,description:this.fileDetails.description};this.itemsClient.saveFileDetails(t).then((()=>this.closeModal())).catch((t=>alert(t)))}render(){var t,e,s,o,l,r,a,d,h,c,u,p,m;return i(n,null,i("h2",null,(t=v.localization)===null||t===void 0?void 0:t.Edit),i("dnn-tabs",null,i("dnn-tab",{tabTitle:(e=v.localization)===null||e===void 0?void 0:e.General},i("div",{class:"general"},i("div",{class:"left"},this.fileDetails&&this.fileDetails.iconUrl&&i("img",{src:this.fileDetails.iconUrl}),this.fileDetails&&i("div",{class:"form"},i("label",null,(s=v.localization)===null||s===void 0?void 0:s.FileId),i("span",null,this.fileDetails.fileId),i("label",null,(o=v.localization)===null||o===void 0?void 0:o.Created),i("span",null,this.fileDetails.createdBy),i("label",null,(l=v.localization)===null||l===void 0?void 0:l.CreatedOnDate),i("span",null,this.fileDetails.createdOnDate),i("label",null,(r=v.localization)===null||r===void 0?void 0:r.LastModified),i("span",null,this.fileDetails.lastModifiedBy),i("label",null,(a=v.localization)===null||a===void 0?void 0:a.LastModifiedOnDate),i("span",null,this.fileDetails.lastModifiedOnDate))),i("div",{class:"right"},i("div",{class:"form"},i("label",null,(d=v.localization)===null||d===void 0?void 0:d.Name),i("input",{type:"text",value:(h=this.fileDetails)===null||h===void 0?void 0:h.fileName,onInput:t=>this.fileDetails=Object.assign(Object.assign({},this.fileDetails),{fileName:t.target.value})}),i("label",null,(c=v.localization)===null||c===void 0?void 0:c.Title),i("input",{type:"text",value:(u=this.fileDetails)===null||u===void 0?void 0:u.title,onInput:t=>this.fileDetails=Object.assign(Object.assign({},this.fileDetails),{title:t.target.value.substring(0,255)})}),i("label",null,(p=v.localization)===null||p===void 0?void 0:p.Description),i("textarea",{value:(m=this.fileDetails)===null||m===void 0?void 0:m.description,onInput:t=>this.fileDetails=Object.assign(Object.assign({},this.fileDetails),{description:t.target.value.substring(0,499)})})))))),i("div",{class:"controls"},i("dnn-button",{type:"primary",reversed:true,onClick:()=>this.closeModal()},v.localization.Cancel),i("dnn-button",{type:"primary",onClick:()=>this.handleSave()},v.localization.Save)))}get el(){return l(this)}};ht.style=dt;const ct=':host{display:block}.general{display:-ms-flexbox;display:flex}.general .left{max-width:256px;border-right:1px solid lightgray;padding:1em}.general .left img{width:100%}.general .right{padding:1em}.form{display:grid;grid-template-columns:1fr 2fr;-ms-flex-align:end;align-items:flex-end}.form label{font-weight:bold;text-align:right;margin-right:0.5em}.form label::after{content:":"}.controls{margin-top:2em;display:-ms-flexbox;display:flex;-ms-flex-pack:end;justify-content:flex-end;gap:1em}';const ut=class{constructor(t){s(this,t);this.dnnRmFoldersChanged=o(this,"dnnRmFoldersChanged",7);this.roleGroups=[];this.roles=[];this.itemsClient=new z(v.moduleId)}componentWillLoad(){this.itemsClient.getFolderDetails(this.folderId).then((t=>{this.folderDetails=Object.assign(Object.assign({},t),{permissions:Object.assign(Object.assign({},t.permissions),{permissionDefinitions:t.permissions.permissionDefinitions.sort((t=>{switch(t.permissionName){case"View Folder":return-1;case"Browse Folder":return 0;case"Write to Folder":return 1}})),rolePermissions:[...t.permissions.rolePermissions.map((t=>Object.assign(Object.assign({},t),{permissions:t.permissions.sort((t=>{switch(t.permissionName){case"View Folder":return-1;case"Browse Folder":return 0;case"Write to Folder":return 1}}))})))],userPermissions:[...t.permissions.userPermissions.map((t=>Object.assign(Object.assign({},t),{permissions:t.permissions.sort((t=>{switch(t.permissionName){case"View Folder":return-1;case"Browse Folder":return 0;case"Write to Folder":return 1}}))})))]})})})).catch((t=>alert(t)));this.itemsClient.getFolderIconUrl(this.folderId).then((t=>this.folderIconUrl=t)).catch((t=>alert(t)));this.itemsClient.getRoleGroups().then((t=>this.roleGroups=t)).catch((t=>alert(t)));this.itemsClient.getRoles().then((t=>this.roles=t)).catch((t=>alert(t)))}closeModal(){const t=this.el.parentElement;t.hide().then((()=>{setTimeout((()=>{document.body.removeChild(t)}),300)}))}handleSave(){const t={folderId:this.folderId,folderName:this.folderDetails.folderName,permissions:this.folderDetails.permissions};this.itemsClient.saveFolderDetails(t).then((()=>{this.dnnRmFoldersChanged.emit();this.closeModal()})).catch((t=>alert(t)))}handlePermissionsChanged(t){t.rolePermissions.forEach((t=>this.adjustRelatedPermissions(t)));t.userPermissions.forEach((t=>this.adjustRelatedPermissions(t)));this.folderDetails=Object.assign(Object.assign({},this.folderDetails),{permissions:t})}adjustRelatedPermissions(t){const e={view:this.folderDetails.permissions.permissionDefinitions.find((t=>t.permissionName==="View Folder")).permissionId,browse:this.folderDetails.permissions.permissionDefinitions.find((t=>t.permissionName==="Browse Folder")).permissionId,write:this.folderDetails.permissions.permissionDefinitions.find((t=>t.permissionName==="Write to Folder")).permissionId};const s=t.permissions.find((t=>t.permissionId==e.view));if(s&&s.allowAccess==false){t.permissions=[{allowAccess:false,fullControl:false,permissionId:e.view,permissionCode:null,permissionKey:null,permissionName:"View Folder",view:false},{allowAccess:false,fullControl:false,permissionId:e.browse,permissionCode:null,permissionKey:null,permissionName:"Browse Folder",view:false},{allowAccess:false,fullControl:false,permissionId:e.write,permissionCode:null,permissionKey:null,permissionName:"Write to Folder",view:false}]}const i=t.permissions.find((t=>t.permissionId==e.browse));if(i&&i.allowAccess==false){t.permissions=[...t.permissions.filter((t=>t.permissionId!=e.write)),{allowAccess:false,fullControl:false,permissionId:e.write,permissionCode:null,permissionKey:null,permissionName:"Write to Folder",view:false}]}if(i&&i.allowAccess==true){t.permissions=[{allowAccess:true,fullControl:false,permissionId:e.view,permissionCode:null,permissionKey:null,permissionName:"Browse Folder",view:false},...t.permissions.filter((t=>t.permissionId!=e.view))]}const n=t.permissions.find((t=>t.permissionId==e.write));if(n&&n.allowAccess==true){t.permissions=[{allowAccess:true,fullControl:false,permissionId:e.view,permissionCode:null,permissionKey:null,permissionName:"View Folder",view:false},{allowAccess:true,fullControl:false,permissionId:e.browse,permissionCode:null,permissionKey:null,permissionName:"Browse Folder",view:false},{allowAccess:true,fullControl:false,permissionId:e.write,permissionCode:null,permissionKey:null,permissionName:"Write to Folder",view:false}]}}handleUserSearchQueryChanged(t){this.itemsClient.searchUsers(t).then((t=>this.foundUsers=t)).catch((t=>alert(t)))}render(){var t,e,s,o,l,r,a,d,h,c;return i(n,null,i("h2",null,(t=v.localization)===null||t===void 0?void 0:t.Edit),i("dnn-tabs",null,i("dnn-tab",{tabTitle:(e=v.localization)===null||e===void 0?void 0:e.General},i("div",{class:"general"},i("div",{class:"left"},this.folderIconUrl&&i("img",{src:this.folderIconUrl}),this.folderDetails&&i("div",{class:"form"},i("label",null,(s=v.localization)===null||s===void 0?void 0:s.FolderId),i("span",null,this.folderDetails.folderId),i("label",null,(o=v.localization)===null||o===void 0?void 0:o.Created),i("span",null,this.folderDetails.createdBy),i("label",null,(l=v.localization)===null||l===void 0?void 0:l.CreatedOnDate),i("span",null,this.folderDetails.createdOnDate),i("label",null,(r=v.localization)===null||r===void 0?void 0:r.LastModified),i("span",null,this.folderDetails.lastModifiedBy),i("label",null,(a=v.localization)===null||a===void 0?void 0:a.LastModifiedOnDate),i("span",null,this.folderDetails.lastModifiedOnDate))),i("div",{class:"right"},i("div",{class:"form"},i("label",null,(d=v.localization)===null||d===void 0?void 0:d.Name),i("input",{type:"text",value:(h=this.folderDetails)===null||h===void 0?void 0:h.folderName,onInput:t=>this.folderDetails=Object.assign(Object.assign({},this.folderDetails),{folderName:t.target.value})}))))),i("dnn-tab",{tabTitle:(c=v.localization)===null||c===void 0?void 0:c.Permissions},this.folderDetails&&this.folderDetails.permissions&&this.roleGroups&&this.roles&&i("dnn-permissions-grid",{permissions:this.folderDetails.permissions,roleGroups:this.roleGroups,roles:this.roles,foundUsers:this.foundUsers,onPermissionsChanged:t=>this.handlePermissionsChanged(t.detail),onUserSearchQueryChanged:t=>this.handleUserSearchQueryChanged(t.detail)}))),i("div",{class:"controls"},i("dnn-button",{type:"primary",reversed:true,onClick:()=>this.closeModal()},v.localization.Cancel),i("dnn-button",{type:"primary",onClick:()=>this.handleSave()},v.localization.Save)))}get el(){return l(this)}};ut.style=ct;const pt=":host{display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column}:host(*){background-color:transparent;border:none;padding:0.5em 1em;margin:0;border-bottom:1px solid lightgray;white-space:nowrap}";const mt=class{constructor(t){s(this,t)}render(){var t,e;return i(n,null,((t=v.currentItems)===null||t===void 0?void 0:t.hasAddFilesPermission)&&v.currentItems.hasDeletePermission&&i("dnn-action-edit-item",{item:this.item}),((e=v.currentItems)===null||e===void 0?void 0:e.hasDeletePermission)&&[i("dnn-action-move-items",{items:[this.item]}),i("dnn-action-delete-items",{items:[this.item]}),i("dnn-action-download-item",{item:this.item})],location.protocol=="https:"&&i("dnn-action-copy-url",{items:[this.item]}))}};mt.style=pt;const ft=":host{display:block;padding-left:32px;overflow-y:auto}";var gt=undefined&&undefined.__decorate||function(t,e,s,i){var n=arguments.length,o=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,s):i,l;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(t,e,s,i);else for(var r=t.length-1;r>=0;r--)if(l=t[r])o=(n<3?l(o):n>3?l(e,s,o):l(e,s))||o;return n>3&&o&&Object.defineProperty(e,s,o),o};const bt=class{constructor(t){s(this,t);this.preloadOffset=5e3;this.itemsClient=new z(v.moduleId)}handleScroll(){this.checkIfMoreItemsNeeded()}handleFoldersChanged(){v.currentItems=Object.assign(Object.assign({},v.currentItems),{items:[]});v.selectedItems=[];this.checkIfMoreItemsNeeded()}componentDidUpdate(){const t=this.loadedFilesArea.getBoundingClientRect().height;const e=t/v.currentItems.items.length;const s=e*v.currentItems.totalCount;let i=s-t;if(i<0){i=0}this.spacer.style.height=`${i}px`;this.checkIfMoreItemsNeeded()}checkIfMoreItemsNeeded(){const t=this.spacer.getBoundingClientRect().top;const e=this.el.getBoundingClientRect().bottom;const s=t-e;if(s<this.preloadOffset){this.loadMore()}}loadMore(){if(v.currentItems.items.length>=v.currentItems.totalCount){return}if(v.itemsSearchTerm){this.itemsClient.search(v.currentItems.folder.folderId,v.itemsSearchTerm,v.lastSearchRequestedPage+1,v.pageSize,v.sortField).then((t=>{v.lastSearchRequestedPage+=1;v.currentItems=Object.assign(Object.assign({},v.currentItems),{totalCount:t.totalCount,items:[...v.currentItems.items,...t.items]})}))}else{this.itemsClient.getFolderContent(v.currentItems.folder.folderId,v.currentItems.items.length,v.pageSize,v.sortField).then((t=>v.currentItems=Object.assign(Object.assign({},v.currentItems),{items:[...v.currentItems.items,...t.items]}))).catch((()=>{}))}}render(){return i(n,null,i("div",{ref:t=>this.loadedFilesArea=t},v.layout=="list"&&i("dnn-rm-items-listview",{currentItems:v.currentItems}),v.layout=="card"&&i("dnn-rm-items-cardview",{currentItems:v.currentItems})),i("div",{ref:t=>this.spacer=t}))}get el(){return l(this)}};gt([r(50)],bt.prototype,"loadMore",null);bt.style=ft;const xt=":host{display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column}:host(*){background-color:transparent;border:none;padding:0.5em 1em;margin:0;border-bottom:1px solid lightgray;white-space:nowrap}";const vt=class{constructor(t){s(this,t)}render(){var t,e,s;return i(n,null,((t=v.currentItems)===null||t===void 0?void 0:t.hasAddFoldersPermission)&&i("dnn-action-create-folder",{parentFolderId:this.item.itemId}),((e=v.currentItems)===null||e===void 0?void 0:e.hasManagePermission)&&i("dnn-action-edit-item",{item:this.item}),((s=v.currentItems)===null||s===void 0?void 0:s.hasDeletePermission)&&[i("dnn-action-move-items",{items:[this.item]}),i("dnn-action-delete-items",{items:[this.item]})],v.currentItems.hasDeletePermission&&this.item.unlinkAllowedStatus!="false"&&i("dnn-action-unlink-items",{items:[this.item]}))}};vt.style=xt;const wt=":host{display:block}";const yt=class{constructor(t){s(this,t);this.dnnRmFolderListFolderPicked=o(this,"dnnRmFolderListFolderPicked",7);this.internalServicesClient=new st(v.moduleId);this.itemsClient=new z(v.moduleId)}handleFoldersChanged(){this.getFolders()}componentWillLoad(){this.getFolders().then((()=>{this.itemsClient.getFolderContent(Number.parseInt(v.rootFolders.Tree.children[0].data.key),0,v.pageSize,v.sortField).then((t=>v.currentItems=t)).catch((t=>console.error(t)))})).catch((t=>alert(t.Message)))}getFolders(){return new Promise(((t,e)=>{this.internalServicesClient.getFolders().then((e=>{v.rootFolders=e;t(e)})).catch((t=>e(t)))}))}handleFolderPicked(t){this.selectedFolder=t.detail;this.dnnRmFolderListFolderPicked.emit(t.detail)}render(){return i(n,null,v.rootFolders&&v.rootFolders.Tree.children.map((t=>i("dnn-rm-folder-list-item",{folder:t,parentFolderId:Number.parseInt(v.rootFolders.Tree.data.key),expanded:true,onDnnRmFolderListItemClicked:t=>this.handleFolderPicked(t),selectedFolder:this.selectedFolder}))))}};yt.style=wt;const kt=":host{display:block;font-weight:normal;color:black;-webkit-transition:all 300ms ease-in-out;transition:all 300ms ease-in-out}:host(.selected) .item-name{font-weight:bolder;color:var(--dnn-color-primary-dark, #0D569E)}button{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;border:none;padding:0;margin:0;background-color:transparent;gap:0.5em;cursor:pointer}dnn-collapsible{position:fixed;display:none;border:1px solid lightgray;-webkit-box-shadow:2px 2px 4px -2px;box-shadow:2px 2px 4px -2px;background-color:white;z-index:1}";const Ct=class{constructor(t){s(this,t);this.dnnRmcontextMenuOpened=o(this,"dnnRmcontextMenuOpened",7);this.dnnRmFolderListItemClicked=o(this,"dnnRmFolderListItemClicked",7);this.expanded=false;this.itemsClient=new z(v.moduleId);this.internalServicesClient=new st(v.moduleId)}handleDnnRmContextMenuOpened(t){if(Number.parseInt(this.folder.data.key)!=t.detail){this.dismissContextMenu()}}componentWillLoad(){this.itemsClient.getFolderIconUrl(Number.parseInt(this.folder.data.key)).then((t=>this.folderIconUrl=t)).catch((t=>console.error(t)));document.addEventListener("click",this.dismissContextMenu.bind(this))}disconnectedCallback(){document.removeEventListener("click",this.dismissContextMenu.bind(this))}handleUserExpanded(){const t=Array.from(this.el.shadowRoot.querySelectorAll("dnn-rm-folder-list-item"));t.forEach((t=>{t.shadowRoot.querySelectorAll("dnn-treeview-item").forEach((t=>t.removeAttribute("expanded")))}));this.internalServicesClient.getFolderDescendants(this.folder.data.key).then((t=>{this.folder=Object.assign(Object.assign({},this.folder),{children:t.Items.map((t=>({data:{hasChildren:t.hasChildren,key:t.key,selectable:t.selectable,value:t.value}})))})})).catch((t=>console.error(t)))}handleContextMenu(t){t.preventDefault();this.itemsClient.getFolderItem(Number.parseInt(this.folder.data.key)).then((e=>{const s=document.createElement("dnn-collapsible");const i=document.createElement("dnn-rm-folder-context-menu");s.appendChild(i);i.item=e;s.style.left=`${t.pageX}px`;s.style.top=`${t.pageY}px`;s.style.display="block";this.el.shadowRoot.appendChild(s);setTimeout((()=>{s.expanded=true}),100);this.dnnRmcontextMenuOpened.emit(Number.parseInt(this.folder.data.key))})).catch((t=>console.error(t)))}dismissContextMenu(){const t=this.el.shadowRoot.querySelectorAll("dnn-collapsible");t===null||t===void 0?void 0:t.forEach((t=>this.el.shadowRoot.removeChild(t)))}getItemClasses(){var t,e;if(((e=(t=this.selectedFolder)===null||t===void 0?void 0:t.data)===null||e===void 0?void 0:e.key)==this.folder.data.key){return"selected"}return""}render(){return i(n,{class:this.getItemClasses()},i("dnn-treeview-item",{expanded:this.expanded,onUserExpanded:()=>this.handleUserExpanded()},i("button",{title:`${this.folder.data.value} (ID: ${this.folder.data.key})`,onClick:()=>this.dnnRmFolderListItemClicked.emit(this.folder),onContextMenu:t=>this.handleContextMenu(t)},this.folderIconUrl?i("img",{src:this.folderIconUrl,alt:this.folder.data.value}):i("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"#000000"},i("path",{d:"M0 0h24v24H0z",fill:"none"}),i("path",{d:"M10 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2h-8l-2-2z"})),i("span",{class:"item-name"},this.folder.data.value)),this.folder.data.hasChildren&&[i("div",{slot:"children"}),this.folder.children&&this.folder.children.length>0&&this.folder.children.map((t=>i("dnn-rm-folder-list-item",{slot:"children",parentFolderId:Number.parseInt(this.folder.data.key),folder:t,selectedFolder:this.selectedFolder})))]))}get el(){return l(this)}};Ct.style=kt;const Mt=":host{display:block}table{border-collapse:collapse}table thead tr th{padding:0.5em;text-align:left;font-size:1.2em}table tr:nth-child(even){background-color:#f2f2f2}table tr td{padding:0.5em;font-size:1.1em}.controls{display:-ms-flexbox;display:flex;-ms-flex-pack:end;justify-content:flex-end;margin-top:1em}.controls dnn-button{margin-left:1em}";const zt=class{constructor(t){s(this,t);this.itemsClient=new z(v.moduleId)}componentWillLoad(){this.itemsClient.getFolderMappings().then((t=>{this.folderMappings=t})).catch((t=>console.error(t)));this.itemsClient.getAddFolderTypeUrl().then((t=>{this.addFolderTypeUrl=t})).catch((t=>console.error(t)))}dismiss(){this.el.closest("dnn-modal").hide()}render(){var t,e;return i(n,null,i("h2",null,v.localization.EditFolderMappings),this.folderMappings&&i("table",null,i("thead",null,i("tr",null,i("th",null," "),i("th",null,v.localization.Name),i("th",null,v.localization.FolderProvider))),i("tbody",null,this.folderMappings.map((t=>i("tr",null,i("td",null,!t.IsDefault&&i("a",{href:t.editUrl},i("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24",width:"24"},i("path",{d:"M5 19h1.4l8.625-8.625-1.4-1.4L5 17.6ZM19.3 8.925l-4.25-4.2 1.4-1.4q.575-.575 1.413-.575.837 0 1.412.575l1.4 1.4q.575.575.6 1.388.025.812-.55 1.387ZM17.85 10.4 7.25 21H3v-4.25l10.6-10.6Zm-3.525-.725-.7-.7 1.4 1.4Z"})))),i("td",null,t.MappingName),i("td",null,t.FolderProviderType)))))),this.addFolderTypeUrl&&i("div",{class:"controls"},i("dnn-button",{reversed:true,onClick:()=>this.dismiss()},(t=v.localization)===null||t===void 0?void 0:t.Cancel),i("dnn-button",{onClick:()=>window.location.href=this.addFolderTypeUrl},(e=v.localization)===null||e===void 0?void 0:e.AddFolderType)))}get el(){return l(this)}};zt.style=Mt;class Ft{isItemSelected(t){return v.selectedItems&&v.selectedItems.includes(t)}toggleItemSelected(t){if(this.isItemSelected(t)){v.selectedItems=v.selectedItems.filter((e=>e!=t))}else{v.selectedItems=[...v.selectedItems,t]}}}const _t=new Ft;const jt=":host{display:block;padding-right:2em}.container{display:-ms-flexbox;display:flex;gap:1em;margin-top:1em;-ms-flex-wrap:wrap;flex-wrap:wrap}.container .card{cursor:pointer;display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;-ms-flex-align:center;align-items:center;gap:0.25em;border:none;background-color:transparent;-webkit-transition:all 100ms ease-in-out;transition:all 100ms ease-in-out;width:calc(110px + 2em);-ms-flex-pack:end;justify-content:flex-end;position:relative}.container .card:hover,.container .card:focus{-webkit-transform:scale3d(1.1, 1.1, 1.1);transform:scale3d(1.1, 1.1, 1.1)}.container .card:hover .radio,.container .card:focus .radio{opacity:1}.container .card .radio{position:absolute;top:0;left:-16px;opacity:0;-webkit-transition:all 100ms ease-in-out;transition:all 100ms ease-in-out}.container .card .radio.selected{opacity:1}.container .card img{width:110px;max-height:110px;margin:auto}.container .card .item-name{line-break:anywhere}dnn-collapsible{position:fixed;display:none;border:1px solid lightgray;-webkit-box-shadow:2px 2px 4px -2px;box-shadow:2px 2px 4px -2px;background-color:white;z-index:1}";const Ht=class{constructor(t){s(this,t)}componentWillLoad(){document.addEventListener("click",this.dismissContextMenu.bind(this))}disconnectedCallback(){document.removeEventListener("click",this.disconnectedCallback.bind(this))}dismissContextMenu(){const t=this.el.shadowRoot.querySelectorAll("dnn-collapsible");t===null||t===void 0?void 0:t.forEach((t=>this.el.shadowRoot.removeChild(t)))}handleContextMenu(t,e){t.preventDefault();v.selectedItems=[e];this.dismissContextMenu();const s=document.createElement("dnn-collapsible");const i=e.isFolder?document.createElement("dnn-rm-folder-context-menu"):document.createElement("dnn-rm-file-context-menu");s.appendChild(i);i.item=e;s.style.left=`${t.pageX}px`;s.style.top=`${t.pageY}px`;s.style.display="block";this.el.shadowRoot.appendChild(s);setTimeout((()=>{s.expanded=true}),100);return}render(){var t;return i(n,null,this.currentItems&&i("div",{class:"container"},(t=this.currentItems.items)===null||t===void 0?void 0:t.map((t=>i("button",{class:"card",onClick:()=>_t.toggleItemSelected(t),onContextMenu:e=>this.handleContextMenu(e,t)},i("div",{class:_t.isItemSelected(t)?"radio selected":"radio"},_t.isItemSelected(t)&&i("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"#000000"},i("path",{d:"M0 0h24v24H0z",fill:"none"}),i("path",{d:"M12 7c-2.76 0-5 2.24-5 5s2.24 5 5 5 5-2.24 5-5-2.24-5-5-5zm0-5C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"})),!_t.isItemSelected(t)&&i("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"#000000"},i("path",{d:"M0 0h24v24H0z",fill:"none"}),i("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}))),i("img",{src:t.thumbnailAvailable?t.thumbnailUrl:t.iconUrl,alt:`${t.itemName} (ID: ${t.itemId})`}),i("span",{class:"item-name"},t.itemName))))))}get el(){return l(this)}};Ht.style=jt;function It(t){if(t==undefined||t==undefined){return""}if(t<1024){return t.toString()+" B"}if(t<1048576){return Math.round(t/1024).toString()+" KB"}return Math.round(t/1048576).toString()+" MB"}const Ot=":host{display:block;margin-right:1em}table{width:100%;border-collapse:collapse}table thead{font-weight:bold}table thead tr{border-bottom:2px solid lightgray}table tbody tr{border-bottom:1px solid lightgray;-webkit-transition:all 100ms ease-in-out;transition:all 100ms ease-in-out}table tbody tr:hover,table tbody tr:focus{background-color:#eee}table tbody tr td.radio{opacity:0;-webkit-transition:all 100ms ease-in-out;transition:all 100ms ease-in-out}table tbody tr td img{height:2.5em;display:block;margin:0 auto}table tbody tr td .date{display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column}table tbody tr td.size{text-align:right}table tbody tr:hover td.radio,table tbody tr:focus td.radio,table tbody tr.selected td.radio{opacity:1}dnn-collapsible{position:fixed;display:none;border:1px solid lightgray;-webkit-box-shadow:2px 2px 4px -2px;box-shadow:2px 2px 4px -2px;background-color:white;z-index:1}";const St=class{constructor(t){s(this,t)}componentWillLoad(){document.addEventListener("click",this.dismissContextMenu.bind(this))}disconnectedCallback(){document.removeEventListener("click",this.disconnectedCallback.bind(this))}dismissContextMenu(){const t=this.el.shadowRoot.querySelectorAll("dnn-collapsible");t===null||t===void 0?void 0:t.forEach((t=>this.el.shadowRoot.removeChild(t)))}getLocalDateString(t){const e=new Date(t);return i("div",{class:"date"},i("span",null,e.toLocaleDateString()),i("span",null,e.toLocaleTimeString()))}handleRowKeyDown(t,e){var s,i;switch(t.key){case"ArrowDown":t.preventDefault();(s=t.target.nextElementSibling)===null||s===void 0?void 0:s.focus();break;case"ArrowUp":t.preventDefault();(i=t.target.previousElementSibling)===null||i===void 0?void 0:i.focus();break;case" ":case"Enter":t.preventDefault();_t.toggleItemSelected(e);break}}handleContextMenu(t,e){t.preventDefault();v.selectedItems=[e];this.dismissContextMenu();let s;s=e.isFolder?document.createElement("dnn-rm-folder-context-menu"):document.createElement("dnn-rm-file-context-menu");const i=document.createElement("dnn-collapsible");s.item=e;i.appendChild(s);i.style.left=`${t.pageX}px`;i.style.top=`${t.pageY}px`;i.style.display="block";this.el.shadowRoot.appendChild(i);setTimeout((()=>{i.expanded=true}),100);return}render(){var t,e,s,o,l;return i(n,null,this.currentItems&&i("table",null,i("thead",null,i("tr",null,i("td",null),i("td",null),i("td",null,(t=v.localization)===null||t===void 0?void 0:t.Name),i("td",null,(e=v.localization)===null||e===void 0?void 0:e.Created),i("td",null,(s=v.localization)===null||s===void 0?void 0:s.LastModified),i("td",null,(o=v.localization)===null||o===void 0?void 0:o.Size))),i("tbody",null,(l=this.currentItems.items)===null||l===void 0?void 0:l.map((t=>i("tr",{class:_t.isItemSelected(t)?"selected":"",tabIndex:0,onKeyDown:e=>this.handleRowKeyDown(e,t),onClick:()=>_t.toggleItemSelected(t),onContextMenu:e=>this.handleContextMenu(e,t)},i("td",{class:"radio"},_t.isItemSelected(t)&&i("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"#000000"},i("path",{d:"M0 0h24v24H0z",fill:"none"}),i("path",{d:"M12 7c-2.76 0-5 2.24-5 5s2.24 5 5 5 5-2.24 5-5-2.24-5-5-5zm0-5C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"})),!_t.isItemSelected(t)&&i("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"#000000"},i("path",{d:"M0 0h24v24H0z",fill:"none"}),i("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}))),i("td",null,i("img",{src:t.iconUrl})),i("td",null,t.itemName),i("td",null,this.getLocalDateString(t.createdOn)),i("td",null,this.getLocalDateString(t.modifiedOn)),i("td",{class:"size"},It(t.fileSize))))))))}get el(){return l(this)}};St.style=Ot;const Lt=":host{display:block;padding:0.5em 1em;padding-left:0px}";const $t=class{constructor(t){s(this,t);this.itemsClient=new z(v.moduleId)}handleFolderClicked(t){this.itemsClient.getFolderContent(Number.parseInt(t.detail.data.key),0,v.pageSize,v.sortField).then((t=>v.currentItems=t)).catch((t=>console.error(t)))}render(){return i(n,null,i("dnn-rm-folder-list",{onDnnRmFolderListFolderPicked:t=>this.handleFolderClicked(t)}))}};$t.style=Lt;const Pt=':host{display:block}.general{display:-ms-flexbox;display:flex}.general .left{max-width:256px;border-right:1px solid lightgray;padding:1em}.general .left img{width:100%}.general .right{padding:1em}.form{display:grid;grid-template-columns:1fr 2fr;-ms-flex-align:end;align-items:flex-end}.form label{font-weight:bold;text-align:right;margin-right:0.5em;-ms-flex-item-align:start;align-self:flex-start}.form label::after{content:":"}.form input,.form textarea{margin-top:0.5em}.controls{margin-top:2em;display:-ms-flexbox;display:flex;-ms-flex-pack:end;justify-content:flex-end;gap:1em}';const Vt=class{constructor(t){s(this,t);this.dnnRmFoldersChanged=o(this,"dnnRmFoldersChanged",7);this.movedCount=0;this.itemsClient=new z(v.moduleId)}closeModal(){const t=this.el.parentElement;t.hide().then((()=>{setTimeout((()=>{document.body.removeChild(t)}),300)}))}handleMove(){this.moving=true;this.items.forEach((t=>{if(t.isFolder){this.itemsClient.moveFolder({SourceFolderId:t.itemId,DestinationFolderId:Number.parseInt(this.selectedFolder.data.key)}).then((()=>{this.handleItemMoved(t)})).catch((t=>alert(t)))}else{this.itemsClient.moveFile({SourceFileId:t.itemId,DestinationFolderId:Number.parseInt(this.selectedFolder.data.key)}).then((()=>{this.handleItemMoved(t)})).catch((t=>alert(t)))}}))}handleItemMoved(t){this.movedCount++;this.currentItemName=t.itemName;if(this.movedCount==this.items.length){this.moving=false;this.dnnRmFoldersChanged.emit();this.closeModal()}}getMoveButtonText(){var t,e;return this.selectedFolder==undefined?(t=v.localization)===null||t===void 0?void 0:t.NoFolderSelected:(e=v.localization)===null||e===void 0?void 0:e.Move}render(){var t,e,s,o,l,r;return i(n,null,i("h2",null,(t=v.localization)===null||t===void 0?void 0:t.MoveItems),i("p",null,(e=v.localization)===null||e===void 0?void 0:e.SelectDestinationFolder),i("dnn-rm-folder-list",{onDnnRmFolderListFolderPicked:t=>this.selectedFolder=t.detail}),this.moving&&i("div",null,i("p",null,(s=v.localization)===null||s===void 0?void 0:s.MovingItems," ",this.movedCount+1,"/",v.selectedItems.length," (",this.currentItemName,")"),i("dnn-rm-progress-bar",{max:v.selectedItems.length,value:this.movedCount})),i("div",{class:"controls"},i("dnn-button",{type:"primary",reversed:true,disabled:this.moving,onClick:()=>this.closeModal()},v.localization.Cancel),i("dnn-button",{type:"primary",onConfirmed:()=>this.handleMove(),confirm:true,confirmMessage:(o=v.localization)===null||o===void 0?void 0:o.ConfirmMoveMessage,confirmYesText:(l=v.localization)===null||l===void 0?void 0:l.Yes,confirmNoText:(r=v.localization)===null||r===void 0?void 0:r.No,disabled:this.moving},this.getMoveButtonText())))}get el(){return l(this)}};Vt.style=Pt;const Dt=":host{display:block;--progress-height:20px;--progress-background:var(--dnn-color-primary-contrast, lightgray);--progress-color:var(--dnn-color-primary, #3792ED)}.progress-container{display:-ms-flexbox;display:flex;height:var(--progress-height);background:var(--progress-background);overflow:hidden}.progress-container .progress-bar{-webkit-transition:all 300ms ease-in-out;transition:all 300ms ease-in-out;background:var(--progress-color);width:calc(var(--current-value, 0) * 100% / var(--max-value, 100))}.progress-container .progress-bar-remainder{-ms-flex:1;flex:1}";const Tt=class{constructor(t){s(this,t);this.value=0;this.max=100}componentDidLoad(){this.adjustProgress()}componentDidUpdate(){this.adjustProgress()}adjustProgress(){this.el.style.setProperty("--current-value",this.value.toString());this.el.style.setProperty("--max-value",this.max.toString())}render(){return i(n,null,i("div",{class:"progress-container"},i("div",{class:"progress-bar"}," "),i("div",{class:"progress-bar-remainder"})))}get el(){return l(this)}};Tt.style=Dt;const Bt=":host{display:block;border:2px solid gray;border-radius:var(--dnn-controls-radius, 5px);margin-top:1em}.container{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center}.container .preview{width:32px;height:32px;padding:0.5em}.container .file{-ms-flex-positive:1;flex-grow:1;display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;padding:0.5em}.container .file .success{color:green;margin-top:0.25em;font-weight:bold}.container .file .warning{display:-ms-flexbox;display:flex;-ms-flex-pack:end;justify-content:flex-end;-ms-flex-align:center;align-items:center;gap:1em;margin-top:0.5em}.container .file .warning span{color:red;margin-right:auto}.container .progress{width:100%;background-color:lightgray;border-radius:var(--dnn-controls-radius, 5px)}.container .progress .progress-bar{height:1em;background-color:var(--dnn-color-primary, #0078d7);border-radius:var(--dnn-controls-radius, 5px);-webkit-transition:width 0.5s ease-in-out;transition:width 0.5s ease-in-out}.container .warning{margin:0.25em;font-weight:bold}.container .dismiss button{margin:0;padding:0;background-color:transparent;border:none;cursor:pointer}.container .uploaded .success{fill:green}";const Rt=class{constructor(t){s(this,t);this.extract=false;this.overwrite=false;this.xhr=new XMLHttpRequest;this.servicesFramework=new d(v.moduleId)}componentDidLoad(){this.uploadFile().then((t=>{this.fileUploadResults=JSON.parse(t);if(this.fileUploadResults.message===null){this.successMessage=v.localization.FileUploadedMessage;setTimeout((()=>{this.dismiss()}),3e3);return}})).catch((t=>console.log(t)))}dismiss(){return new Promise(((t,e)=>{try{this.el.style.transition="all 1s ease-in-out";this.el.style.overflow="hidden";this.el.style.height=this.el.offsetHeight.toFixed(2)+"px";requestAnimationFrame((()=>{this.el.style.height="0";this.el.style.opacity="0";this.el.style.border="0"}));setTimeout((()=>{t()}),1e3)}catch(t){e(t)}}))}uploadFile(){return new Promise(((t,e)=>{const s=this.file.name.split(".").pop();if(this.filter.split(",").indexOf(s)===-1){const t=`'.${s}' ${v.localization.InvalidExtensionMessage}`;this.fileUploadResults={alreadyExists:false,message:t,fileIconUrl:undefined,fileName:this.file.name,fileId:-1,orientation:0};e(t);return}if(this.file.size>this.maxUploadFileSize){const t=`${this.file.name} ${v.localization.FileSizeErrorMessage} ${It(this.maxUploadFileSize)}`;this.fileUploadResults={alreadyExists:false,message:t,fileIconUrl:undefined,fileName:this.file.name,fileId:-1,orientation:0};e(t);return}const i=this.servicesFramework.getModuleHeaders();const n=new FormData;n.append("folder",v.currentItems.folder.folderPath);n.append("filter",this.filter);n.append("extract",this.extract?"true":"false");n.append("overwrite",this.overwrite?"true":"false");n.append("validationCode",this.validationCode);n.append("isHostPortal","false");n.append("postfile",this.file);this.xhr.onload=()=>{if(this.xhr.status===200){t(this.xhr.response)}else{e(this.xhr.statusText)}};this.xhr.upload.onprogress=t=>{if(t.lengthComputable){const e=Math.round(t.loaded/t.total*100);this.progress=e}};this.xhr.onabort=()=>{this.dismiss()};const o=this.servicesFramework.getServiceRoot("InternalServices")+"FileUpload/UploadFromLocal";this.xhr.open("POST",o);i.forEach(((t,e)=>{this.xhr.setRequestHeader(e,t)}));this.xhr.send(n)}))}handleOvewrite(){this.overwrite=true;this.fileUploadResults=null;this.uploadFile().then((t=>{this.fileUploadResults=JSON.parse(t);return this.dismiss()})).catch((t=>alert(t)))}render(){return i(n,null,i("div",{class:"container"},i("div",{class:"preview"},this.fileUploadResults&&this.fileUploadResults.fileIconUrl&&i("img",{src:this.fileUploadResults.fileIconUrl})),i("div",{class:"file"},i("span",null,this.file.name," (",It(this.file.size),")"),this.progress>0&&i("div",{class:"progress"},i("div",{class:"progress-bar",style:{width:`${this.progress}%`}})),this.fileUploadResults&&this.fileUploadResults.message&&i("div",{class:"warning"},i("span",null,this.fileUploadResults.message),this.fileUploadResults.alreadyExists&&[i("dnn-button",{type:"primary",onClick:()=>this.handleOvewrite()},v.localization.Overwrite),i("dnn-button",{type:"primary",reversed:true,onClick:()=>this.dismiss()},v.localization.Cancel)]),this.successMessage&&i("div",{class:"success"},this.successMessage)),this.successMessage===undefined&&i("div",{class:"dismiss"},i("button",{title:v.localization.Cancel,onClick:()=>{this.xhr.abort();this.dismiss()}},i("svg",{xmlns:"http://www.w3.org/2000/svg",height:"48",width:"48"},i("path",{d:"m28.55 44-2.15-2.15 5.7-5.65-5.7-5.65 2.15-2.15 5.65 5.7 5.65-5.7L42 30.55l-5.7 5.65 5.7 5.65L39.85 44l-5.65-5.7ZM6 31.5v-3h15v3Zm0-8.25v-3h23.5v3ZM6 15v-3h23.5v3Z"})))),this.successMessage&&i("div",{class:"uploaded"},i("svg",{xmlns:"http://www.w3.org/2000/svg",height:"48",width:"48",class:"success"},i("path",{d:"M21.05 33.1 35.2 18.95l-2.3-2.25-11.85 11.85-6-6-2.25 2.25ZM24 44q-4.1 0-7.75-1.575-3.65-1.575-6.375-4.3-2.725-2.725-4.3-6.375Q4 28.1 4 24q0-4.15 1.575-7.8 1.575-3.65 4.3-6.35 2.725-2.7 6.375-4.275Q19.9 4 24 4q4.15 0 7.8 1.575 3.65 1.575 6.35 4.275 2.7 2.7 4.275 6.35Q44 19.85 44 24q0 4.1-1.575 7.75-1.575 3.65-4.275 6.375t-6.35 4.3Q28.15 44 24 44Zm0-3q7.1 0 12.05-4.975Q41 31.05 41 24q0-7.1-4.95-12.05Q31.1 7 24 7q-7.05 0-12.025 4.95Q7 16.9 7 24q0 7.05 4.975 12.025Q16.95 41 24 41Zm0-17Z"})))))}get el(){return l(this)}};Rt.style=Bt;const Nt=":host{display:block;display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;height:100%}dnn-rm-files-pane{-ms-flex-positive:1;flex-grow:1}";const qt=class{constructor(t){s(this,t)}render(){return i(n,null,i("dnn-rm-actions-bar",null),i("dnn-rm-files-pane",null),i("dnn-rm-status-bar",null))}};qt.style=Nt;const At=":host{display:block}:host .status-bar{display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row;-ms-flex-align:center;align-items:center;-ms-flex-pack:start;justify-content:flex-start;padding:0.3rem 0.5rem;background-color:#f5f5f5;border-bottom:1px solid #e5e5e5;-webkit-box-shadow:0 1px 0 rgba(0, 0, 0, 0.05);box-shadow:0 1px 0 rgba(0, 0, 0, 0.05);z-index:1}";const Qt=class{constructor(t){s(this,t)}getLocalizedStatusBarMessage(){var t,e;return v.localization.StatusBarMessage.replace("{0}",(t=v.currentItems)===null||t===void 0?void 0:t.items.length.toString()).replace("{1}",(e=v.currentItems)===null||e===void 0?void 0:e.totalCount.toString())}render(){return i(n,null,i("div",{class:"status-bar"},this.getLocalizedStatusBarMessage()))}};Qt.style=At;const Ut=":host{display:-ms-flexbox;display:flex;-ms-flex-pack:end;justify-content:flex-end;background-color:var(--dnn-color-primary);color:var(--dnn-color-primary-contrast);padding:0.5em 1em;gap:1em}button{display:-ms-flexbox;display:flex;-ms-flex-pack:center;justify-content:center;-ms-flex-align:center;align-items:center;border:none;padding:0;margin:0;background-color:transparent;cursor:pointer}button svg{fill:var(--dnn-color-primary-contrast)}";const Wt=class{constructor(t){s(this,t);this.itemsClient=new z(v.moduleId)}handleSearchChanged(t){if(t.detail!=""){v.itemsSearchTerm=t.detail;this.itemsClient.search(v.currentItems.folder.folderId,t.detail,0,v.pageSize,v.sortField).then((t=>{v.currentItems=Object.assign(Object.assign({},v.currentItems),{totalCount:t.totalCount,items:t.items});v.lastSearchRequestedPage=1})).catch((t=>console.error(t)))}else{this.itemsClient.getFolderContent(v.currentItems.folder.folderId,0,v.pageSize,v.sortField).then((t=>{v.lastSearchRequestedPage=1;v.itemsSearchTerm=undefined;v.currentItems=t}))}}render(){return i(n,null,i("dnn-searchbox",{onQueryChanged:t=>this.handleSearchChanged(t)}))}};Wt.style=Ut;const Gt=':host{display:block}.general{display:-ms-flexbox;display:flex}.general .left{max-width:256px;border-right:1px solid lightgray;padding:1em}.general .left img{width:100%}.general .right{padding:1em}.form{display:grid;grid-template-columns:1fr 2fr;-ms-flex-align:end;align-items:flex-end}.form label{font-weight:bold;text-align:right;margin-right:0.5em;-ms-flex-item-align:start;align-self:flex-start}.form label::after{content:":"}.form input,.form textarea{margin-top:0.5em}.controls{margin-top:2em;display:-ms-flexbox;display:flex;-ms-flex-pack:end;justify-content:flex-end;gap:1em}';const Zt=class{constructor(t){s(this,t);this.dnnRmFoldersChanged=o(this,"dnnRmFoldersChanged",7);this.unlinkedCount=0;this.itemsClient=new z(v.moduleId)}closeModal(){const t=this.el.parentElement;t.hide().then((()=>{setTimeout((()=>{document.body.removeChild(t)}),300)}))}handleUnlink(){this.unlinking=true;this.items.forEach((t=>{this.itemsClient.deleteFolder({FolderId:t.itemId,UnlinkAllowedStatus:true}).then((()=>{this.handleItemUnlinked(t)})).catch((t=>alert(t)))}))}handleItemUnlinked(t){this.unlinkedCount++;this.currentItemName=t.itemName;if(this.unlinkedCount==this.items.length){this.unlinking=false;this.dnnRmFoldersChanged.emit();this.closeModal()}}render(){var t,e,s,o;return i(n,null,i("h2",null,(t=v.localization)===null||t===void 0?void 0:t.UnlinkFolders),i("p",null,(e=v.localization)===null||e===void 0?void 0:e.ConfirmUnlinkMessage),i("ul",null,this.items.map((t=>i("li",null,t.itemName)))),this.unlinking&&i("div",null,i("p",null,(s=v.localization)===null||s===void 0?void 0:s.UnlinkFolders," ",this.unlinkedCount+1,"/",v.selectedItems.length," (",this.currentItemName,")"),i("dnn-rm-progress-bar",{max:v.selectedItems.length,value:this.unlinkedCount})),i("div",{class:"controls"},i("dnn-button",{type:"primary",reversed:true,disabled:this.unlinking,onClick:()=>this.closeModal()},v.localization.Cancel),i("dnn-button",{type:"primary",onClick:()=>this.handleUnlink(),disabled:this.unlinking},(o=v.localization)===null||o===void 0?void 0:o.Unlink)))}get el(){return l(this)}};Zt.style=Gt;const Et=":host{display:block}dnn-dropzone{min-width:65vw}";const Kt=class{constructor(t){s(this,t);this.dnnRmFoldersChanged=o(this,"dnnRmFoldersChanged",7);this.queuedFiles=[];this.alreadyExistingFilesCount=0;this.uploadingFilesCount=0;this.uploadedFilesCount=0;this.failedFilesCount=0;this.extract=false;this.itemsClient=new z(v.moduleId)}componentWillLoad(){this.itemsClient.getAllowedFileExtensions().then((t=>{this.allowedExtensions=t.allowedExtensions;this.validationCode=t.validationCode;this.maxUploadFileSize=t.maxUploadFileSize})).catch((t=>alert(t)))}handleFilesDropped(t){t.forEach((t=>{this.queuedFiles=[...this.queuedFiles,t]}))}render(){return i(n,null,i("h2",null,v.localization.Upload),i("label",null,i("dnn-checkbox",{onClick:()=>this.extract=!this.extract},v.localization.ExtractUploads)),i("dnn-dropzone",{onFilesSelected:t=>this.handleFilesDropped(t.detail)}),this.allowedExtensions&&this.validationCode&&this.queuedFiles.map((t=>i("dnn-rm-queued-file",{file:t,validationCode:this.validationCode,filter:this.allowedExtensions,extract:this.extract,maxUploadFileSize:this.maxUploadFileSize}))))}get el(){return l(this)}};Kt.style=Et;const Jt=":host{position:relative;display:-ms-flexbox;display:flex;-ms-flex-pack:justify;justify-content:space-between;--background-color:transparent;--color:#333;--border-size:1px;--border-color:grey;--border-active-color:black;--border-radius:var(--dnn-controls-radius, 5px);--padding:var(--dnn-controls-padding, 5px);--focus-color:var(--dnn-color-primary, blue)}:host input{width:100%;border:var(--border-size) solid var(--border-color);outline:none;border-radius:var(--border-radius);padding:var(--padding);padding-right:32px;-webkit-transition:all 300ms ease-in-out;transition:all 300ms ease-in-out}:host input:focus,:host input:hover{outline:none;-webkit-box-shadow:0 0 2px 2px var(--focus-color);box-shadow:0 0 2px 2px var(--focus-color)}:host svg{position:absolute;top:0;right:0;height:100%;-webkit-transform:scale(0.7);transform:scale(0.7);fill:var(--color);outline:var(--color);color:var(--color);-webkit-transition:all 300ms ease-in-out;transition:all 300ms ease-in-out}:host button{background:transparent;border:0;margin:0;padding:0}:host button:focus svg,:host button:hover svg{fill:var(--focus-color);outline:var(--focus-color);color:var(--focus-color)}";var Xt=undefined&&undefined.__decorate||function(t,e,s,i){var n=arguments.length,o=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,s):i,l;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(t,e,s,i);else for(var r=t.length-1;r>=0;r--)if(l=t[r])o=(n<3?l(o):n>3?l(e,s,o):l(e,s))||o;return n>3&&o&&Object.defineProperty(e,s,o),o};const Yt=class{constructor(t){s(this,t);this.queryChanged=o(this,"queryChanged",7);this.placeholder="";this.debounced=true;this.query=""}fireQueryChanged(){if(this.debounced){this.debouncedHandleQueryChanged()}else{this.handleQueryChanged()}}handleQueryChanged(){this.queryChanged.emit(this.query)}debouncedHandleQueryChanged(){this.handleQueryChanged()}render(){return i(n,null,i("input",{type:"text",value:this.query,placeholder:this.placeholder,onInput:t=>this.query=t.target.value}),this.query!==""?i("button",{class:"svg clear",onClick:()=>this.query=""},i("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"#000000"},i("path",{d:"M0 0h24v24H0z",fill:"none"}),i("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z"}))):i("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"#000000"},i("path",{d:"M0 0h24v24H0z",fill:"none"}),i("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"})))}static get watchers(){return{query:["fireQueryChanged"]}}};Xt([r(500)],Yt.prototype,"debouncedHandleQueryChanged",null);Yt.style=Jt;const te="";const ee=class{constructor(t){s(this,t);this.visible=false}async show(){this.visible=true}async hide(){this.visible=false}render(){return i(n,null,this.visible&&i("slot",null))}};ee.style=te;const se=":host{display:block;--color-background:var(--dnn-color-secondary-dark, lightgray);--color-text:var(--dnn-color-secondary-contrast, #333);--color-visible:var(--dnn-color-primary, #3792ED);--color-visible-text:var(--dnn-color-primary-contrast, #FFF);--color-focus:var(--dnn-color-primary, #3792ed)}.tabTitles{display:-ms-flexbox;display:flex;background-color:var(--color-background);color:var(--color-text)}.tabTitles button{padding:0.5rem 1rem;border:0;margin:0;background-color:transparent}.tabTitles button.visible{background-color:var(--color-visible);color:var(--color-bisible-text)}.tabTitles button:focus,.tabTitles button:hover{outline:none;-webkit-box-shadow:0 0 2px 2px var(--color-focus);box-shadow:0 0 2px 2px var(--color-focus)}.currentTab{border:1px solid var(--color-background)}";const ie=class{constructor(t){s(this,t);this.tabTitles=[];this.selectedTabTitle=""}componentDidLoad(){requestAnimationFrame((()=>{this.updateTitles();this.showFirstTab()}))}getTabs(){return this.component.shadowRoot.querySelector("slot").assignedElements()}updateTitles(){const t=this.getTabs();t.forEach((t=>this.tabTitles=[...this.tabTitles,t.tabTitle]))}showFirstTab(){const t=this.getTabs()[0];t.show();this.selectedTabTitle=t.tabTitle}showTab(t){const e=this.getTabs();e.forEach((e=>{if(e.tabTitle==t){e.show();return}e.hide()}));this.selectedTabTitle=t}render(){return i(n,{ref:t=>this.component=t},i("div",{class:"tabTitles"},this.tabTitles.map((t=>i("button",{class:this.selectedTabTitle==t?"visible":"",onClick:()=>this.showTab(t)},t)))),i("div",{class:"currentTab"},i("slot",null)))}};ie.style=se;const ne=":host{display:-ms-flexbox;display:flex;overflow:visible}.expander{width:24px;height:24px}.expander button{-webkit-transition:all 150ms ease-in-out;transition:all 150ms ease-in-out;background-color:transparent;border:none;padding:0;margin:0;height:1em;display:-ms-flexbox;display:flex;-ms-flex-pack:center;justify-content:center;-ms-flex-align:center;align-items:center;cursor:pointer;position:relative;top:2px}.expander button svg :first-child{-webkit-transition:all 150ms ease-in-out;transition:all 150ms ease-in-out;fill:white;stroke:black}.expander.expanded button{-webkit-transform:rotate(45deg);transform:rotate(45deg)}.expander.expanded button svg :first-child{fill:black;stroke:black}div.item .item-slot{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;gap:0.25em;min-height:24px}div.item div.children{overflow:hidden;height:0;-webkit-transition:all 150ms ease-in-out;transition:all 150ms ease-in-out}";const oe=class{constructor(t){s(this,t);this.userExpanded=o(this,"userExpanded",3);this.userCollapsed=o(this,"userCollapsed",3);this.expanded=false;this.hasChildren=false}watchExpanded(t){if(t){this.expander.classList.add("expanded");this.collapsible.expanded=true;return}this.expander.classList.remove("expanded");this.collapsible.expanded=false}componentDidLoad(){requestAnimationFrame((()=>{const t=this.childElement.children[0];const e=t.assignedElements().length;if(e>0){this.hasChildren=true}if(this.expanded){this.expander.classList.add("expanded");this.collapsible.expanded=false;setTimeout((()=>{this.collapsible.expanded=true}),300)}}))}toggleCollapse(){this.expanded=!this.expanded;if(this.expanded){this.expander.classList.add("expanded");this.userExpanded.emit();return}this.expander.classList.remove("expanded");this.userCollapsed.emit()}render(){return i(n,null,i("div",{class:"expander",ref:t=>this.expander=t},this.hasChildren&&i("button",{onClick:()=>this.toggleCollapse()},i("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"#000000"},i("path",{d:"M10 17l5-5-5-5v10z"}),i("path",{d:"M0 24V0h24v24H0z",fill:"none"})))),i("div",{class:"item"},i("div",{class:"item-slot"},i("slot",null)),i("dnn-collapsible",{ref:t=>this.collapsible=t,expanded:this.expanded},i("div",{ref:t=>this.childElement=t},i("slot",{name:"children"})))))}get el(){return l(this)}static get watchers(){return{expanded:["watchExpanded"]}}};oe.style=ne;const le=":host{--background-color:var(--dnn-color-primary-contrast, white);--foreground-color:var(--dnn-color-primary, #3792ED);display:block}.menu-container{display:-ms-flexbox;display:flex;-ms-flex-pack:start;justify-content:flex-start;-ms-flex-align:center;align-items:center;background-color:var(--background-color)}.menu-container .menu{margin:0.5em;display:-ms-flexbox;display:flex;gap:1em;-ms-flex-pack:start;justify-content:flex-start;-ms-flex-align:center;align-items:center;white-space:nowrap;width:100%}.menu-container .overflow{margin-left:auto;position:relative}.menu-container .overflow button{cursor:pointer;padding:0;margin:0;background-color:transparent;border:none}.menu-container .overflow button svg{fill:var(--foreground-color)}.menu-container .overflow .dropdown{position:absolute;display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;white-space:nowrap;right:0;-webkit-transition:100ms ease-in-out;transition:100ms ease-in-out;height:0;overflow:hidden}.menu-container .overflow .dropdown.visible{padding:1em;gap:0.5em;background-color:var(--background-color);-webkit-box-shadow:2px 2px 4px rgba(0, 0, 0, 0.7);box-shadow:2px 2px 4px rgba(0, 0, 0, 0.7)}";const re=class{constructor(t){s(this,t);this.showDropdownButton=false;this.showDropdownMenu=false;this.previousMenuWidth=0}componentDidRender(){requestAnimationFrame((()=>{this.moveItemsToDropDownIfNecessery();this.resizeObserver=new ResizeObserver((t=>{for(let e of t){if(e.contentRect.width<this.previousMenuWidth){this.moveItemsToDropDownIfNecessery()}if(this.previousMenuWidth>0&&e.contentRect.width>this.previousMenuWidth){this.moveItemsToMenuIfPossible()}this.previousMenuWidth=e.contentRect.width}}));this.resizeObserver.observe(this.element)}))}moveItemsToDropDownIfNecessery(){const t=Array.from(this.menu.querySelector("slot").assignedElements());const e=this.menu.getBoundingClientRect().width;let s=parseFloat(getComputedStyle(this.element).fontSize)*2;t.forEach((t=>s+=this.getFullWidth(t)));s+=(t.length-1)*parseFloat(getComputedStyle(this.element).fontSize);if(s>e){this.showDropdownButton=true;var i=t[t.length-1];if(this.dropdown==undefined){return}i.slot="dropdown";this.moveItemsToDropDownIfNecessery()}}moveItemsToMenuIfPossible(){if(this.dropdown==undefined||!this.dropdown.hasChildNodes()){return}const t=Array.from(this.menu.querySelector("slot").assignedElements());const e=this.menu.getBoundingClientRect().width;let s=parseFloat(getComputedStyle(this.element).fontSize)*2;s+=(t.length-1)*parseFloat(getComputedStyle(this.element).fontSize);t.forEach((t=>s+=this.getFullWidth(t)));const i=this.dropdown.querySelector("slot").assignedElements()[0];if(i!=undefined){s+=this.getFullWidth(i)}if(s<e){if(i!=undefined){i.slot=""}if(i==undefined){this.dropdown.classList.remove("visible");this.showDropdownMenu=false;this.showDropdownButton=false}}}getFullWidth(t){var e=t.getBoundingClientRect().width;var s=getComputedStyle(t);e+=parseFloat(s.marginLeft);e+=parseFloat(s.marginRight);e+=parseFloat(s.paddingLeft);e+=parseFloat(s.paddingRight);return e}toggleOverflowMenu(){this.showDropdownMenu=!this.showDropdownMenu;if(this.showDropdownMenu){this.dropdown.classList.add("visible");let t=0;const e=Array.from(this.dropdown.querySelector("slot").assignedElements());e.forEach((e=>t+=e.getBoundingClientRect().height));const s=parseFloat(getComputedStyle(this.dropdown).fontSize);const i=s*(this.dropdown.children.length-1)/2;t+=i;const n=s*2;t+=n;this.dropdown.style.height=`${t}px`;const o=t=>{const e=this.button.getBoundingClientRect();if(t.clientX<e.left||t.clientX>e.right||t.clientY<e.top||t.clientY>e.bottom){this.toggleOverflowMenu()}document.removeEventListener("click",o)};setTimeout((()=>{document.addEventListener("click",o,false)}),100)}else{this.dropdown.classList.remove("visible");this.dropdown.style.height="0px"}}render(){return i(n,null,i("div",{class:"menu-container"},i("div",{class:"menu",ref:t=>this.menu=t},i("slot",null)),this.showDropdownButton&&i("div",{class:"overflow"},i("button",{ref:t=>this.button=t,class:"icon",onClick:()=>this.toggleOverflowMenu()},i("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"#000000"},i("path",{d:"M0 0h24v24H0z",fill:"none"}),i("path",{d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"}))),i("div",{class:"dropdown",ref:t=>this.dropdown=t},i("slot",{name:"dropdown"})))))}get element(){return l(this)}};re.style=le;const ae=":host{display:-ms-flexbox;display:flex;-ms-flex-align:stretch;align-items:stretch;margin:0 auto;position:relative;--left-pane-background-color:transparent;--right-pane-background-color:transparent}button{border:none;margin:0;padding:0;cursor:ew-resize;position:absolute;height:100%;background-color:transparent}button.transition{-webkit-transition:all 300ms ease-in-out;transition:all 300ms ease-in-out}.pane{overflow-y:auto}.pane.transition{-webkit-transition:all 300ms ease-in-out;transition:all 300ms ease-in-out}.pane.left{background-color:var(--left-pane-background-color)}.pane.right{background-color:var(--right-pane-background-color);-ms-flex-positive:1;flex-grow:1}";const de=class{constructor(t){s(this,t);this.widthChanged=o(this,"widthChanged",7);this.splitterWidth=16;this.splitWidthPercentage=30;this.leftWidth=0;this.rightWidth=0}async setSplitWidthPercentage(t){const e=this.element.shadowRoot.querySelectorAll(".pane");requestAnimationFrame((()=>{e.forEach((t=>t.classList.add("transition")));this.splitter.classList.add("transition");requestAnimationFrame((()=>{const s=this.element.getBoundingClientRect().width;let i=s*t/100;if(i<0){i=0}if(i>s){i=s}this.leftWidth=i;this.rightWidth=s-i;setTimeout((()=>{e.forEach((t=>t.classList.remove("transition")));this.splitter.classList.remove("transition")}),300)}))}))}async getSplitWidthPercentage(){const t=this.element.getBoundingClientRect().width;return this.leftWidth/t}componentDidLoad(){requestAnimationFrame((()=>{this.resizeObserver=new ResizeObserver((()=>{const t=this.element.getBoundingClientRect().width;this.leftWidth=t*this.splitWidthPercentage/100;this.rightWidth=t-this.leftWidth;this.widthChanged.emit(this.splitWidthPercentage)}));this.resizeObserver.observe(this.element)}))}handleMouseDown(t){t.preventDefault();const e=t=>{requestAnimationFrame((()=>{let e=this.element.getBoundingClientRect().width;let{movementX:s}=a(t,this.previousTouch);let i=this.leftWidth+s;if(i<0){i=0}if(i>e){i=e}this.leftWidth=i;this.rightWidth=e-i;this.splitWidthPercentage=this.leftWidth/e*100}))};const s=()=>{document.removeEventListener("mousemove",e);document.removeEventListener("touchmove",e);const t=this.element.getBoundingClientRect().width;const s=this.leftWidth/t*100;this.widthChanged.emit(s)};document.addEventListener("mouseup",s);document.addEventListener("touchend",s);document.addEventListener("mousemove",e);document.addEventListener("touchmove",e)}handleKeyDown(t){let e=0;switch(t.key){case"ArrowLeft":e=-10;break;case"ArrowRight":e=10;break;default:return}if(t.shiftKey){e=e*10}const s=this.element.getBoundingClientRect().width;let i=this.leftWidth+e;if(i<0){i=0}if(i>s){i=s}this.leftWidth=i;this.rightWidth=s-this.leftWidth}render(){return i(n,null,i("div",{class:"left pane",style:{width:`${this.leftWidth}px`}},i("slot",{name:"left"})),i("button",{onMouseDown:t=>this.handleMouseDown(t),onTouchStart:t=>this.handleMouseDown(t),onKeyDown:t=>this.handleKeyDown(t),ref:t=>this.splitter=t,style:{minWidth:`${this.splitterWidth.toString()}px`,left:`${this.leftWidth-2}px`}},i("slot",null)),i("div",{class:"right pane",style:{width:`${this.rightWidth}px`}},i("slot",{name:"right"})))}get element(){return l(this)}};de.style=ae;export{y as dnn_action_copy_url,_ as dnn_action_create_folder,H as dnn_action_delete_items,O as dnn_action_download_item,L as dnn_action_edit_item,P as dnn_action_move_items,D as dnn_action_unlink_items,B as dnn_action_upload_file,N as dnn_button,A as dnn_checkbox,U as dnn_collapsible,G as dnn_dropzone,E as dnn_modal,J as dnn_permissions_grid,et as dnn_resource_manager,nt as dnn_rm_actions_bar,lt as dnn_rm_create_folder,at as dnn_rm_delete_items,ht as dnn_rm_edit_file,ut as dnn_rm_edit_folder,mt as dnn_rm_file_context_menu,bt as dnn_rm_files_pane,vt as dnn_rm_folder_context_menu,yt as dnn_rm_folder_list,Ct as dnn_rm_folder_list_item,zt as dnn_rm_folder_mappings,Ht as dnn_rm_items_cardview,St as dnn_rm_items_listview,$t as dnn_rm_left_pane,Vt as dnn_rm_move_items,Tt as dnn_rm_progress_bar,Rt as dnn_rm_queued_file,qt as dnn_rm_right_pane,Qt as dnn_rm_status_bar,Wt as dnn_rm_top_bar,Zt as dnn_rm_unlink_items,Kt as dnn_rm_upload_file,Yt as dnn_searchbox,ee as dnn_tab,ie as dnn_tabs,oe as dnn_treeview_item,re as dnn_vertical_overflow_menu,de as dnn_vertical_splitview};
//# sourceMappingURL=p-cd690c99.entry.js.map