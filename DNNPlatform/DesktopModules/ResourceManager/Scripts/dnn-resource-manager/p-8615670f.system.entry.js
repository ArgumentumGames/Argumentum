var __awaiter=this&&this.__awaiter||function(e,t,n,i){function o(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,r){function s(e){try{a(i.next(e))}catch(e){r(e)}}function l(e){try{a(i["throw"](e))}catch(e){r(e)}}function a(e){e.done?n(e.value):o(e.value).then(s,l)}a((i=i.apply(e,t||[])).next())}))};var __generator=this&&this.__generator||function(e,t){var n={label:0,sent:function(){if(r[0]&1)throw r[1];return r[1]},trys:[],ops:[]},i,o,r,s;return s={next:l(0),throw:l(1),return:l(2)},typeof Symbol==="function"&&(s[Symbol.iterator]=function(){return this}),s;function l(e){return function(t){return a([e,t])}}function a(s){if(i)throw new TypeError("Generator is already executing.");while(n)try{if(i=1,o&&(r=s[0]&2?o["return"]:s[0]?o["throw"]||((r=o["return"])&&r.call(o),0):o.next)&&!(r=r.call(o,s[1])).done)return r;if(o=0,r)s=[s[0]&2,r.value];switch(s[0]){case 0:case 1:r=s;break;case 4:n.label++;return{value:s[1],done:false};case 5:n.label++;o=s[1];s=[0];continue;case 7:s=n.ops.pop();n.trys.pop();continue;default:if(!(r=n.trys,r=r.length>0&&r[r.length-1])&&(s[0]===6||s[0]===2)){n=0;continue}if(s[0]===3&&(!r||s[1]>r[0]&&s[1]<r[3])){n.label=s[1];break}if(s[0]===6&&n.label<r[1]){n.label=r[1];r=s;break}if(r&&n.label<r[2]){n.label=r[2];n.ops.push(s);break}if(r[2])n.ops.pop();n.trys.pop();continue}s=t.call(e,n)}catch(e){s=[6,e];o=0}finally{i=r=0}if(s[0]&5)throw s[1];return{value:s[0]?s[1]:void 0,done:true}}};var __spreadArray=this&&this.__spreadArray||function(e,t,n){if(n||arguments.length===2)for(var i=0,o=t.length,r;i<o;i++){if(r||!(i in t)){if(!r)r=Array.prototype.slice.call(t,0,i);r[i]=t[i]}}return e.concat(r||Array.prototype.slice.call(t))};System.register(["./p-c9ec67c1.system.js","./p-933b4c43.system.js","./p-df562e61.system.js"],(function(e){"use strict";var t,n,i,o,r,s,l,a,d;return{setters:[function(e){t=e.g;n=e.f;i=e.r;o=e.h;r=e.H;s=e.c;l=e.a},function(e){a=e.D},function(e){d=e.g}],execute:function(){var c=function(){function e(e){var t=this;this.getServiceRoot=function(e){var t=window.top.dnn.getVar("sf_siteRoot","/");t+="API/"+e+"/";return t};this.getTabId=function(){var e=window.top.dnn.getVar("sf_tabId","-1");return parseInt(e)};this.getModuleId=function(){return t._moduleId};this.getAntiForgeryValue=function(){var e=document.querySelector("input[name=__RequestVerificationToken]");if(e!=null){return e.value}else{return null}};this.getModuleHeaders=function(){var e=new Headers;if(t.getTabId()>-1){e.append("ModuleId",t._moduleId.toString());e.append("TabId",t.getTabId().toString())}var n=t.getAntiForgeryValue();if(n!=null){e.append("RequestVerificationToken",n)}return e};this._moduleId=e}return e}();var u=function(e,t,n){var i=e.get(t);if(!i){e.set(t,[n])}else if(!i.includes(n)){i.push(n)}};var p=function(e,t){var n;return function(){var i=[];for(var o=0;o<arguments.length;o++){i[o]=arguments[o]}if(n){clearTimeout(n)}n=setTimeout((function(){n=0;e.apply(void 0,i)}),t)}};var h=function(e){return!("isConnected"in e)||e.isConnected};var f=p((function(e){for(var t=0,n=e.keys();t<n.length;t++){var i=n[t];e.set(i,e.get(i).filter(h))}}),2e3);var m=function(){if(typeof t!=="function"){return{}}var e=new Map;return{dispose:function(){return e.clear()},get:function(n){var i=t();if(i){u(e,n,i)}},set:function(t){var i=e.get(t);if(i){e.set(t,i.filter(n))}f(e)},reset:function(){e.forEach((function(e){return e.forEach(n)}));f(e)}}};var g=function(e){return typeof e==="function"?e():e};var v=function(e,t){if(t===void 0){t=function(e,t){return e!==t}}var n=g(e);var i=new Map(Object.entries(n!==null&&n!==void 0?n:{}));var o={dispose:[],get:[],set:[],reset:[]};var r=function(){var t;i=new Map(Object.entries((t=g(e))!==null&&t!==void 0?t:{}));o.reset.forEach((function(e){return e()}))};var s=function(){o.dispose.forEach((function(e){return e()}));r()};var l=function(e){o.get.forEach((function(t){return t(e)}));return i.get(e)};var a=function(e,n){var r=i.get(e);if(t(n,r,e)){i.set(e,n);o.set.forEach((function(t){return t(e,n,r)}))}};var d=typeof Proxy==="undefined"?{}:new Proxy(n,{get:function(e,t){return l(t)},ownKeys:function(e){return Array.from(i.keys())},getOwnPropertyDescriptor:function(){return{enumerable:true,configurable:true}},has:function(e,t){return i.has(t)},set:function(e,t,n){a(t,n);return true}});var c=function(e,t){o[e].push(t);return function(){b(o[e],t)}};var u=function(t,n){var i=c("set",(function(e,i){if(e===t){n(i)}}));var o=c("reset",(function(){return n(g(e)[t])}));return function(){i();o()}};var p=function(){var e=[];for(var t=0;t<arguments.length;t++){e[t]=arguments[t]}var n=e.reduce((function(e,t){if(t.set){e.push(c("set",t.set))}if(t.get){e.push(c("get",t.get))}if(t.reset){e.push(c("reset",t.reset))}if(t.dispose){e.push(c("dispose",t.dispose))}return e}),[]);return function(){return n.forEach((function(e){return e()}))}};var h=function(e){var t=i.get(e);o.set.forEach((function(n){return n(e,t,t)}))};return{state:d,get:l,set:a,on:c,onChange:u,use:p,dispose:s,reset:r,forceUpdate:h}};var b=function(e,t){var n=e.indexOf(t);if(n>=0){e[n]=e[e.length-1];e.length--}};var y=function(e,t){var n=v(e,t);n.use(m());return n};var x=y({moduleId:-1,layout:"list",pageSize:50,lastSearchRequestedPage:1,selectedItems:[]}).state;var w=":host{display:-ms-inline-flexbox;display:inline-flex}button{cursor:pointer;border:none;background-color:transparent;margin:0;padding:0;display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center}button svg{fill:var(--dnn-color-primary)}";var C=e("dnn_action_copy_url",function(){function e(e){i(this,e)}e.prototype.handleClick=function(){var e="".concat(window.location.protocol,"//").concat(window.location.host).concat(this.items[0].path);navigator.clipboard.writeText(e)};e.prototype.render=function(){var e=this;return o(r,null,o("button",{onClick:function(){return e.handleClick()}},o("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"#000000"},o("path",{d:"M0 0h24v24H0V0z",fill:"none"}),o("path",{d:"M17 7h-4v2h4c1.65 0 3 1.35 3 3s-1.35 3-3 3h-4v2h4c2.76 0 5-2.24 5-5s-2.24-5-5-5zm-6 8H7c-1.65 0-3-1.35-3-3s1.35-3 3-3h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-2zm-3-4h8v2H8z"})),o("span",null,x.localization.CopyUrl)))};return e}());C.style=w;var k=function(){function e(){this.itemName=new I("ItemName");this.lastModifiedOnDate=new I("LastModifiedOnDate");this.size=new I("Size");this.parentFolder=new I("ParentFolder");this.createdOnDate=new I("CreatedOnDate")}return e}();var I=function(){function e(e){this.sortKey=e}Object.defineProperty(e.prototype,"localizedName",{get:function(){return x.localization["SortField_".concat(this.sortKey)]},enumerable:false,configurable:true});return e}();var F=new k;var M=function(){function e(e){this.sf=new c(e);this.requestUrl="".concat(this.sf.getServiceRoot("ResourceManager"),"Items/")}e.prototype.getFolderContent=function(e,t,n,i){var o=this;if(t===void 0){t=0}if(n===void 0){n=20}if(i===void 0){i=new I("ItemName")}return new Promise((function(r,s){var l;var a="".concat(o.requestUrl,"GetFolderContent?folderId=").concat(e,"&startIndex=").concat(t,"&numItems=").concat(n,"&sorting=").concat(i.sortKey);var d=o.sf.getModuleHeaders();d.append("groupId",o.getGroupId());(l=o.abortController)===null||l===void 0?void 0:l.abort();o.abortController=new AbortController;fetch(a,{headers:d,signal:o.abortController.signal}).then((function(e){if(e.status==200){e.json().then((function(e){return r(e)}))}else{e.json().then((function(e){return s(e.message)}))}})).catch((function(e){return s(e)}))}))};e.prototype.getFolderIconUrl=function(e){var t=this;return new Promise((function(n,i){var o="".concat(t.requestUrl,"GetFolderIconUrl?folderId=").concat(e);fetch(o,{headers:t.sf.getModuleHeaders()}).then((function(e){if(e.status==200){e.json().then((function(e){return n(e.url)}))}else{e.json().then((function(e){return i(e)}))}})).catch((function(e){return i(e)}))}))};e.prototype.getAllowedFileExtensions=function(){var e=this;return new Promise((function(t,n){var i="".concat(e.requestUrl,"GetAllowedFileExtensions");fetch(i,{headers:e.sf.getModuleHeaders()}).then((function(e){if(e.status==200){e.json().then((function(e){return t(e)}))}else{e.json().then((function(e){return n(e)}))}})).catch((function(e){return n(e)}))}))};e.prototype.syncFolderContent=function(e,t,n,i){var o=this;if(t===void 0){t=20}if(n===void 0){n=new I("ItemName")}if(i===void 0){i=false}return new Promise((function(r,s){var l;var a="".concat(o.requestUrl,"SyncFolderContent?folderId=").concat(e,"&numItems=").concat(t,"&sorting=").concat(n.sortKey,"&recursive=").concat(i);var d=o.sf.getModuleHeaders();d.append("groupId",o.getGroupId());(l=o.abortController)===null||l===void 0?void 0:l.abort();o.abortController=new AbortController;fetch(a,{headers:d,signal:o.abortController.signal}).then((function(e){if(e.status==200){e.json().then((function(e){return r(e)}))}else{e.json().then((function(e){return s(e.message)}))}})).catch((function(e){return s(e)}))}))};e.prototype.download=function(e,t){var n=this;if(t===void 0){t=true}return new Promise((function(i,o){var r;var s="".concat(n.requestUrl,"Download?fileId=").concat(e,"&forceDownload=").concat(t);var l=n.sf.getModuleHeaders();(r=n.abortController)===null||r===void 0?void 0:r.abort();n.abortController=new AbortController;fetch(s,{headers:l,signal:n.abortController.signal}).then((function(e){if(e.status==200){var t=e.headers.get("Content-Disposition").split("filename=")[1];e.blob().then((function(e){var n=document.querySelector("#downloadLink");if(n){n.remove()}var o=document.createElement("a");o.id="downloadLink";o.href=window.URL.createObjectURL(e);o.download=t;document.body.appendChild(o);o.click();i()}))}})).catch((function(e){return o(e)}))}))};e.prototype.search=function(e,t,n,i,o,r){var s=this;if(i===void 0){i=20}if(o===void 0){o=new I("ItemName")}if(r===void 0){r=""}return new Promise((function(l,a){var d;var c="".concat(s.requestUrl,"Search?folderId=").concat(e,"&search=").concat(t,"&pageIndex=").concat(n,"&pageSize=").concat(i,"&sorting=").concat(o.sortKey,"&culture=").concat(r);var u=s.sf.getModuleHeaders();u.append("groupId",s.getGroupId());(d=s.abortController)===null||d===void 0?void 0:d.abort();s.abortController=new AbortController;fetch(c,{headers:u,signal:s.abortController.signal}).then((function(e){if(e.status==200){e.json().then((function(e){return l(e)}))}else{e.json().then((function(e){return a(e.message)}))}})).catch((function(e){return a(e)}))}))};e.prototype.getFolderMappings=function(){var e=this;return new Promise((function(t,n){var i="".concat(e.requestUrl,"GetFolderMappings");fetch(i,{headers:e.sf.getModuleHeaders()}).then((function(e){if(e.status==200){e.json().then((function(e){return t(e)}))}else{e.json().then((function(e){return n(e.message)}))}})).catch((function(e){return n(e)}))}))};e.prototype.getAddFolderTypeUrl=function(){var e=this;return new Promise((function(t,n){var i="".concat(e.requestUrl,"GetAddFolderTypeUrl");fetch(i,{headers:e.sf.getModuleHeaders()}).then((function(e){if(e.status==200){e.json().then((function(e){return t(e)}))}else{e.json().then((function(e){return n(e.message)}))}})).catch((function(e){return n(e)}))}))};e.prototype.createNewFolder=function(e){var t=this;return new Promise((function(n,i){var o="".concat(t.requestUrl,"CreateNewFolder");var r=t.sf.getModuleHeaders();r.append("groupId",t.getGroupId());r.append("Content-Type","application/json");fetch(o,{method:"POST",body:JSON.stringify(e),headers:r}).then((function(e){if(e.status==200){e.json().then((function(e){return n(e)}))}else{e.json().then((function(e){return i(e.ExceptionMessage||e.message)}))}})).catch((function(e){return i(e)}))}))};e.prototype.getFolderItem=function(e){var t=this;return new Promise((function(n,i){var o="".concat(t.requestUrl,"GetFolderItem?folderId=").concat(e);var r=t.sf.getModuleHeaders();r.append("groupId",t.getGroupId());fetch(o,{headers:r}).then((function(e){if(e.status==200){e.json().then((function(e){return n(e)}))}else{e.json().then((function(e){return i(e.ExceptionMessage||e.message)}))}})).catch((function(e){return i(e)}))}))};e.prototype.getFolderDetails=function(e){var t=this;return new Promise((function(n,i){var o="".concat(t.requestUrl,"GetFolderDetails?folderId=").concat(e);fetch(o,{headers:t.sf.getModuleHeaders()}).then((function(e){if(e.status==200){e.json().then((function(e){return n(e)}))}else{e.json().then((function(e){return i(e.ExceptionMessage||e.message)}))}})).catch((function(e){return i(e)}))}))};e.prototype.getFileDetails=function(e){var t=this;return new Promise((function(n,i){var o="".concat(t.requestUrl,"GetFileDetails?fileId=").concat(e);fetch(o,{headers:t.sf.getModuleHeaders()}).then((function(e){if(e.status==200){e.json().then((function(e){return n(e)}))}else{e.json().then((function(e){return i(e.ExceptionMessage||e.message)}))}})).catch((function(e){return i(e)}))}))};e.prototype.getRoleGroups=function(){var e=this;return new Promise((function(t,n){var i="".concat(e.requestUrl,"GetRoleGroups");fetch(i,{headers:e.sf.getModuleHeaders()}).then((function(e){if(e.status==200){e.json().then((function(e){return t(e)}))}else{e.json().then((function(e){return n(e.ExceptionMessage||e.message)}))}})).catch((function(e){return n(e)}))}))};e.prototype.getRoles=function(){var e=this;return new Promise((function(t,n){var i="".concat(e.requestUrl,"GetRoles");fetch(i,{headers:e.sf.getModuleHeaders()}).then((function(e){if(e.status==200){e.json().then((function(e){return t(e)}))}else{e.json().then((function(e){return n(e.ExceptionMessage||e.message)}))}})).catch((function(e){return n(e)}))}))};e.prototype.searchUsers=function(e){var t=this;return new Promise((function(n,i){var o="".concat(t.requestUrl,"GetSuggestionUsers?keyword=").concat(e,"&count=50");fetch(o,{headers:t.sf.getModuleHeaders()}).then((function(e){if(e.status==200){e.json().then((function(e){return n(e)}))}else{e.json().then((function(e){return i(e.ExceptionMessage||e.message)}))}})).catch((function(e){return i(e)}))}))};e.prototype.saveFolderDetails=function(e){var t=this;return new Promise((function(n,i){var o="".concat(t.requestUrl,"SaveFolderDetails");var r=t.sf.getModuleHeaders();r.append("Content-Type","application/json");fetch(o,{method:"POST",body:JSON.stringify(e),headers:r}).then((function(e){if(e.status==200){n()}else{e.json().then((function(e){return i(e.ExceptionMessage||e.message)}))}})).catch((function(e){return i(e)}))}))};e.prototype.saveFileDetails=function(e){var t=this;return new Promise((function(n,i){var o="".concat(t.requestUrl,"SaveFileDetails");var r=t.sf.getModuleHeaders();r.append("Content-Type","application/json");fetch(o,{method:"POST",body:JSON.stringify(e),headers:r}).then((function(e){if(e.status==200){n()}else{e.json().then((function(e){return i(e.ExceptionMessage||e.message)}))}})).catch((function(e){return i(e)}))}))};e.prototype.moveFile=function(e){var t=this;return new Promise((function(n,i){var o="".concat(t.requestUrl,"MoveFile");var r=t.sf.getModuleHeaders();r.append("Content-Type","application/json");r.append("groupId",t.getGroupId());fetch(o,{method:"POST",body:JSON.stringify(e),headers:r}).then((function(e){if(e.status==200){n()}else{e.json().then((function(e){return i(e.ExceptionMessage||e.message)}))}})).catch((function(e){return i(e)}))}))};e.prototype.moveFolder=function(e){var t=this;return new Promise((function(n,i){var o="".concat(t.requestUrl,"MoveFolder");var r=t.sf.getModuleHeaders();r.append("Content-Type","application/json");r.append("groupId",t.getGroupId());fetch(o,{method:"POST",body:JSON.stringify(e),headers:r}).then((function(e){if(e.status==200){n()}else{e.json().then((function(e){return i(e.ExceptionMessage||e.message)}))}})).catch((function(e){return i(e)}))}))};e.prototype.deleteFolder=function(e){var t=this;return new Promise((function(n,i){var o="".concat(t.requestUrl,"DeleteFolder");var r=t.sf.getModuleHeaders();r.append("Content-Type","application/json");r.append("groupId",t.getGroupId());fetch(o,{method:"POST",body:JSON.stringify(e),headers:r}).then((function(e){if(e.status==200){n()}else{e.json().then((function(e){return i(e.ExceptionMessage||e.message)}))}})).catch((function(e){return i(e)}))}))};e.prototype.deleteFile=function(e){var t=this;return new Promise((function(n,i){var o="".concat(t.requestUrl,"DeleteFile");var r=t.sf.getModuleHeaders();r.append("Content-Type","application/json");r.append("groupId",t.getGroupId());fetch(o,{method:"POST",body:JSON.stringify(e),headers:r}).then((function(e){if(e.status==200){n()}else{e.json().then((function(e){return i(e.ExceptionMessage||e.message)}))}})).catch((function(e){return i(e)}))}))};e.prototype.getGroupId=function(){var e="-1";if(window.location.pathname.indexOf("/groupid/")>-1){var t=window.location.pathname.split("/");var n=t.indexOf("groupid");e=t[n+1];return e}var i=new URLSearchParams(window.location.search);var o=i.get("groupid");if(o){e=o}return e};return e}();var z=":host{display:-ms-inline-flexbox;display:inline-flex}button{cursor:pointer;border:none;background-color:transparent;margin:0;padding:0;display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center}button svg{fill:var(--dnn-color-primary)}";var D=e("dnn_action_create_folder",function(){function e(e){i(this,e);this.itemsClient=new M(x.moduleId)}e.prototype.handleClick=function(){var e=this;if(this.parentFolderId){this.itemsClient.getFolderContent(this.parentFolderId,0,0).then((function(t){x.currentItems=t;e.showModal()})).catch((function(e){return alert(e)}));return}this.showModal()};e.prototype.showModal=function(){var e=document.createElement("dnn-modal");e.backdropDismiss=false;e.showCloseButton=false;var t=document.createElement("dnn-rm-create-folder");e.appendChild(t);document.body.appendChild(e);e.show()};e.prototype.render=function(){var e=this;return o(r,null,o("button",{onClick:function(){return e.handleClick()}},o("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"#000000"},o("path",{d:"M0 0h24v24H0V0z",fill:"none"}),o("path",{d:"M20 6h-8l-2-2H4c-1.11 0-1.99.89-1.99 2L2 18c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V8c0-1.11-.89-2-2-2zm-1 8h-3v3h-2v-3h-3v-2h3V9h2v3h3v2z"})),o("span",null,x.localization.AddFolder)))};return e}());D.style=z;var _=":host{display:-ms-inline-flexbox;display:inline-flex}button{cursor:pointer;border:none;background-color:transparent;margin:0;padding:0;display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center}button svg{fill:var(--dnn-color-primary)}";var S=e("dnn_action_delete_items",function(){function e(e){i(this,e)}e.prototype.handleClick=function(){this.showModal()};e.prototype.showModal=function(){var e=document.createElement("dnn-modal");e.backdropDismiss=false;e.showCloseButton=false;var t=document.createElement("dnn-rm-delete-items");t.items=this.items;e.appendChild(t);document.body.appendChild(e);e.show()};e.prototype.render=function(){var e=this;return o(r,null,o("button",{onClick:function(){return e.handleClick()}},o("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"#000000"},o("path",{d:"M0 0h24v24H0V0z",fill:"none"}),o("path",{d:"M16 9v10H8V9h8m-1.5-6h-5l-1 1H5v2h14V4h-3.5l-1-1zM18 7H6v12c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7z"})),o("span",null,x.localization.Delete)))};return e}());S.style=_;var R=":host{display:-ms-inline-flexbox;display:inline-flex}button{cursor:pointer;border:none;background-color:transparent;margin:0;padding:0;display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center}button svg{fill:var(--dnn-color-primary)}";var j=e("dnn_action_download_item",function(){function e(e){i(this,e);this.itemsClient=new M(x.moduleId)}e.prototype.handleClick=function(){this.itemsClient.download(this.item.itemId,true)};e.prototype.render=function(){var e=this;return o(r,null,o("button",{onClick:function(){return e.handleClick()}},o("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"#000000"},o("path",{d:"M0 0h24v24H0V0z",fill:"none"}),o("path",{xmlns:"http://www.w3.org/2000/svg",d:"M12 16 7 11 8.4 9.55 11 12.15V4H13V12.15L15.6 9.55L17 11ZM6 20Q5.175 20 4.588 19.413Q4 18.825 4 18V15H6V18Q6 18 6 18Q6 18 6 18H18Q18 18 18 18Q18 18 18 18V15H20V18Q20 18.825 19.413 19.413Q18.825 20 18 20Z"})),o("span",null,x.localization.Download)))};return e}());j.style=R;var P=":host{display:-ms-inline-flexbox;display:inline-flex}button{cursor:pointer;border:none;background-color:transparent;margin:0;padding:0;display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center}button svg{fill:var(--dnn-color-primary)}";var E=e("dnn_action_edit_item",function(){function e(e){i(this,e)}e.prototype.handleClick=function(){this.showModal()};e.prototype.showModal=function(){var e=document.createElement("dnn-modal");e.backdropDismiss=false;e.showCloseButton=false;if(this.item.isFolder){var t=document.createElement("dnn-rm-edit-folder");t.folderId=this.item.itemId;e.appendChild(t)}else{var t=document.createElement("dnn-rm-edit-file");t.fileId=this.item.itemId;e.appendChild(t)}document.body.appendChild(e);e.show()};e.prototype.render=function(){var e=this;return o(r,null,o("button",{onClick:function(){return e.handleClick()}},o("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"#000000"},o("path",{d:"M0 0h24v24H0V0z",fill:"none"}),o("path",{d:"M14.06 9.02l.92.92L5.92 19H5v-.92l9.06-9.06M17.66 3c-.25 0-.51.1-.7.29l-1.83 1.83 3.75 3.75 1.83-1.83c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.2-.2-.45-.29-.71-.29zm-3.6 3.19L3 17.25V21h3.75L17.81 9.94l-3.75-3.75z"})),o("span",null,x.localization.Edit)))};return e}());E.style=P;var O=":host{display:-ms-inline-flexbox;display:inline-flex}button{cursor:pointer;border:none;background-color:transparent;margin:0;padding:0;display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center}button svg{fill:var(--dnn-color-primary)}";var U=e("dnn_action_move_items",function(){function e(e){i(this,e)}e.prototype.handleClick=function(){this.showModal()};e.prototype.showModal=function(){var e=document.createElement("dnn-modal");e.backdropDismiss=false;e.showCloseButton=false;var t=document.createElement("dnn-rm-move-items");t.items=this.items;e.appendChild(t);document.body.appendChild(e);e.show()};e.prototype.render=function(){var e=this;return o(r,null,o("button",{onClick:function(){return e.handleClick()}},o("svg",{xmlns:"http://www.w3.org/2000/svg","enable-background":"new 0 0 24 24",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"#000000"},o("g",null,o("rect",{fill:"none",height:"24",width:"24"})),o("g",null,o("path",{d:"M20,6h-8l-2-2H4C2.9,4,2,4.9,2,6v12c0,1.1,0.9,2,2,2h16c1.1,0,2-0.9,2-2V8C22,6.9,21.1,6,20,6z M20,18H4V6h5.17l1.41,1.41 L11.17,8H20V18z M12.16,12H8v2h4.16l-1.59,1.59L11.99,17L16,13.01L11.99,9l-1.41,1.41L12.16,12z"}))),o("span",null,x.localization.Move)))};return e}());U.style=O;var H=":host{display:-ms-inline-flexbox;display:inline-flex}button{cursor:pointer;border:none;background-color:transparent;margin:0;padding:0;display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center}button svg{fill:var(--dnn-color-primary)}";var L=e("dnn_action_unlink_items",function(){function e(e){i(this,e)}e.prototype.handleClick=function(){this.showModal()};e.prototype.showModal=function(){var e=document.createElement("dnn-modal");e.backdropDismiss=false;e.showCloseButton=false;var t=document.createElement("dnn-rm-unlink-items");t.items=this.items;e.appendChild(t);document.body.appendChild(e);e.show()};e.prototype.render=function(){var e=this;return o(r,null,o("button",{onClick:function(){return e.handleClick()}},o("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"#000000"},o("path",{d:"M0 0h24v24H0V0z",fill:"none"}),o("path",{d:"M14.39 11L16 12.61V11zM17 7h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1 0 1.27-.77 2.37-1.87 2.84l1.4 1.4C21.05 15.36 22 13.79 22 12c0-2.76-2.24-5-5-5zM2 4.27l3.11 3.11C3.29 8.12 2 9.91 2 12c0 2.76 2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1 0-1.59 1.21-2.9 2.76-3.07L8.73 11H8v2h2.73L13 15.27V17h1.73l4.01 4.01 1.41-1.41L3.41 2.86 2 4.27z"})),o("span",null,x.localization.Unlink)))};return e}());L.style=H;var q=":host{display:-ms-inline-flexbox;display:inline-flex}button{cursor:pointer;border:none;background-color:transparent;margin:0;padding:0;display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center}button svg{fill:var(--dnn-color-primary)}";var T=e("dnn_action_upload_file",function(){function e(e){i(this,e);this.dnnRmFoldersChanged=s(this,"dnnRmFoldersChanged",7)}e.prototype.handleClick=function(){this.showModal()};e.prototype.showModal=function(){var e=this;var t=document.createElement("dnn-modal");t.backdropDismiss=true;t.showCloseButton=true;var n=document.createElement("div");n.style.overflowY="auto";n.style.maxHeight="70vh";var i=document.createElement("dnn-rm-upload-file");n.appendChild(i);t.appendChild(n);document.body.appendChild(t);t.show();t.addEventListener("dismissed",(function(){e.dnnRmFoldersChanged.emit()}))};e.prototype.render=function(){var e=this;return o(r,null,o("button",{onClick:function(){return e.handleClick()}},o("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24",width:"24"},o("path",{d:"M6 20q-.825 0-1.412-.587Q4 18.825 4 18v-3h2v3h12v-3h2v3q0 .825-.587 1.413Q18.825 20 18 20Zm5-4V7.85l-2.6 2.6L7 9l5-5 5 5-1.4 1.45-2.6-2.6V16Z"})),o("span",null,x.localization.Upload)))};return e}());T.style=q;var A=":host{--background-color:transparent;--color:#333;--border-size:1px;--border-color:var(--backround-color);--border-radius:var(--dnn-controls-radius, 5px);--padding:var(--dnn-controls-padding, 5px);display:inline-block;width:auto}:host(.disabled){pointer-events:none}:host(.primary){--background-color:var(--dnn-color-primary, blue);--color:var(--dnn-color-primary-contrast, white);--focus-color:var(--background-color)}:host(.primary.reversed){--background-color:var(--dnn-color-primary-contrast, white);--color:var(--dnn-color-primary, blue);--border-color:var(--dnn-color-primary, blue);--focus-color:var(--color)}:host(.secondary){--background-color:var(--dnn-color-secondary, green);--color:var(--dnn-color-secondary-contrast, white);--focus-color:var(--background-color)}:host(.secondary.reversed){--background-color:var(--dnn-color-secondary-contrast, white);--color:var(--dnn-color-secondary, blue);--border-color:var(--dnn-color-secondary, blue);--focus-color:var(--color)}:host(.tertiary){--background-color:var(--dnn-color-tertiary, yellow);--color:var(--dnn-color-tertiary-contrast, black);--focus-color:var(--background-color)}:host(.tertiary.reversed){--background-color:var(--dnn-color-tertiary-contrast, white);--color:var(--dnn-color-tertiary, blue);--border-color:var(--dnn-color-tertiary, blue);--focus-color:var(--color)}:host(.hydrated) button{border:var(--border-size) solid var(--border-color);border-radius:var(--border-radius);padding:var(--padding) calc(var(--padding) * 2);background-color:transparent;background-color:var(--background-color);color:var(--color);outline:none}:host(.hydrated) button:focus,:host(.hydrated) button:hover{-webkit-box-shadow:0 0 2px 2px var(--focus-color);box-shadow:0 0 2px 2px var(--focus-color)}:host(:disabled,[disabled]) button{pointer-events:none;opacity:0.5}:host(.small) button{padding:calc(var(--padding) / 2) var(--padding);font-size:0.7em}:host(.large) button{padding:calc(var(--padding) * 1.5) calc(var(--padding) * 3);font-size:1.2em}button{height:100%;width:100%;cursor:pointer}";var N=e("dnn_button",function(){function e(e){i(this,e);this.confirmed=s(this,"confirmed",7);this.canceled=s(this,"canceled",7);this.type="primary";this.reversed=false;this.size="normal";this.confirm=false;this.confirmYesText="Yes";this.confirmNoText="No";this.confirmMessage="Are you sure ?";this.disabled=false;this.modalVisible=false}e.prototype.componentDidLoad=function(){this.modal=this.el.shadowRoot.querySelector("dnn-modal")};e.prototype.handleConfirm=function(){this.modal.hide();this.modalVisible=false;this.confirmed.emit()};e.prototype.handleCancel=function(){this.modal.hide();this.modalVisible=false;this.canceled.emit()};e.prototype.handleClick=function(){if(this.confirm&&!this.modalVisible){this.modal.show();this.modalVisible=true}};e.prototype.getElementClasses=function(){var e=[];e.push(this.type);if(this.reversed){e.push("reversed")}if(this.size!=="normal"){e.push(this.size)}return e.join(" ")};e.prototype.render=function(){var e=this;return o(r,{class:this.getElementClasses(),disabled:this.disabled,style:{"pointer-events":this.disabled?"none":"all"}},o("button",{class:"button",onClick:function(){return e.handleClick()},disabled:this.disabled},o("slot",null)),this.confirm&&o("dnn-modal",{showCloseButton:false,backdropDismiss:false},o("p",null,this.confirmMessage),o("div",{style:{display:"flex",justifyContent:"flex-end"}},o("dnn-button",{type:"primary",style:{margin:"5px"},onClick:function(){return e.handleConfirm()}},this.confirmYesText),o("dnn-button",{type:"secondary",style:{margin:"5px"},onClick:function(){return e.handleCancel()}},this.confirmNoText))))};Object.defineProperty(e.prototype,"el",{get:function(){return l(this)},enumerable:false,configurable:true});return e}());N.style=A;var B=":host{--focus-color:var(--dnn-color-primary, #3792ED);display:-ms-inline-flexbox;display:inline-flex;-ms-flex-align:center;align-items:center;gap:0.25rem;margin:3px}button{background-color:transparent;border:0;padding:0;margin:0;outline:none;display:-ms-flexbox;display:flex;-ms-flex-pack:center;justify-content:center;-ms-flex-align:center;align-items:center}button .unchecked,button .checked,button .intermediate{display:none}button.checked .checked,button.unchecked .unchecked,button.intermediate .intermediate{display:block}button svg.undefined{opacity:0.45}button:focus{-webkit-box-shadow:0 0 2px 2px var(--focus-color);box-shadow:0 0 2px 2px var(--focus-color)}";var V=e("dnn_checkbox",function(){function e(e){i(this,e);this.checkedchange=s(this,"checkedchange",7);this.checked="unchecked";this.useIntermediate=false}e.prototype.changeState=function(){if(!this.useIntermediate){switch(this.checked){case"checked":this.checked="unchecked";break;case"unchecked":case"intermediate":this.checked="checked";break}this.checkedchange.emit(this.checked);return}switch(this.checked){case"checked":this.checked="intermediate";break;case"intermediate":this.checked="unchecked";break;case"unchecked":this.checked="checked";break}this.checkedchange.emit(this.checked)};e.prototype.render=function(){var e=this;return o(r,null,o("button",{class:"icon ".concat(this.checked),onClick:function(){return e.changeState()}},o("div",{class:"unchecked"},o("slot",{name:"uncheckedicon"},o("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"#000000"},o("path",{d:"M0 0h24v24H0z",fill:"none"}),o("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"})))),o("div",{class:"checked"},o("slot",{name:"checkedicon"},o("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"#000000"},o("path",{d:"M0 0h24v24H0z",fill:"none"}),o("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"})))),o("div",{class:"intermediate"},o("slot",{name:"intermediateicon"},o("svg",{class:"undefined",xmlns:"http://www.w3.org/2000/svg","enable-background":"new 0 0 24 24",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"#000000"},o("g",null,o("rect",{fill:"none",height:"24",width:"24"})),o("g",null,o("g",null,o("g",null,o("path",{d:"M19,3H5C3.9,3,3,3.9,3,5v14c0,1.1,0.9,2,2,2h14c1.1,0,2-0.9,2-2V5C21,3.9,20.1,3,19,3z M17,13H7v-2h10V13z"})))))))),o("label",{htmlFor:this.el.id,onClick:function(){return e.changeState()}},o("slot",null)))};Object.defineProperty(e.prototype,"el",{get:function(){return l(this)},enumerable:false,configurable:true});return e}());V.style=B;var Q=":host{display:block}#container{max-height:0;overflow:hidden;-webkit-transition:max-height 300ms ease-in-out;transition:max-height 300ms ease-in-out}";var W=e("dnn_collapsible",function(){function e(e){i(this,e);this.dnnCollapsibleHeightChanged=s(this,"dnnCollapsibleHeightChanged",7);this.expanded=false;this.transitionDuration=150}e.prototype.handleHeightChanged=function(){var e=this;requestAnimationFrame((function(){e.updateSize()}))};e.prototype.updateSize=function(){return __awaiter(this,void 0,void 0,(function(){var e=this;return __generator(this,(function(t){if(this.expanded){requestAnimationFrame((function(){e.container.style.maxHeight="".concat(e.container.scrollHeight,"px")}));setTimeout((function(){e.container.style.maxHeight="none"}),this.transitionDuration)}return[2]}))}))};e.prototype.handledExpandedChanged=function(e){var t=this;if(e){this.updateSize()}else{requestAnimationFrame((function(){t.container.style.maxHeight="".concat(t.container.scrollHeight,"px");requestAnimationFrame((function(){t.container.style.maxHeight="0px"}))}))}setTimeout((function(){requestAnimationFrame((function(){t.dnnCollapsibleHeightChanged.emit()}))}),this.transitionDuration)};e.prototype.componentDidLoad=function(){this.container.style.transition="max-height ".concat(this.transitionDuration,"ms ease-in-out")};e.prototype.render=function(){var e=this;return o(r,null,o("div",{id:"container",class:this.expanded&&"expanded",ref:function(t){return e.container=t},style:{transition:"max-height ".concat(this.transitionDuration,"ms ease-in-out")}},o("slot",null)))};Object.defineProperty(e.prototype,"el",{get:function(){return l(this)},enumerable:false,configurable:true});Object.defineProperty(e,"watchers",{get:function(){return{expanded:["handledExpandedChanged"]}},enumerable:false,configurable:true});return e}());W.style=Q;var G=":host{--border-color:var(--dnn-color-tertiary-contrast, lightgray);--border-radius:var(--dnn-controls-radius, 5px);--drop-background-color:var(--dnn-color-tertiary, lightblue);display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;gap:1rem;text-align:center;border:2px dashed var(--border-color);border-radius:var(--border-radius);padding:1rem;-webkit-transition:all 300ms ease-in-out;transition:all 300ms ease-in-out}:host(.dropping){background-color:var(--drop-background-color)}p{margin:0;padding:0}button{display:-ms-flexbox;display:flex;-ms-flex-pack:center;justify-content:center;-ms-flex-align:center;align-items:center;border:0px;margin:0;padding:0;background-color:transparent}button:hover{cursor:pointer}button svg{margin-right:0.5rem}label.upload-file{display:-ms-flexbox;display:flex;-ms-flex-pack:center;justify-content:center;-ms-flex-align:center;align-items:center;cursor:pointer}label.upload-file input{display:none}.video-preview{display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;-ms-flex-align:center;align-items:center}.video-preview button{margin:1rem}";var K=e("dnn_dropzone",function(){function e(e){var t=this;i(this,e);this.filesSelected=s(this,"filesSelected",7);this.resx={dragAndDropFile:"Drag and drop a file",capture:"Capture",or:"or",takePicture:"Take a picture",uploadFile:"Upload a file"};this.allowCameraMode=false;this.captureQuality=.8;this.canTakeSnapshots=false;this.takingPicture=false;this.handleDragOver=function(e){e.stopPropagation();e.preventDefault();e.dataTransfer.dropEffect="copy";t.dropzone.classList.add("dropping")};this.handleDrop=function(e){e.stopPropagation();e.preventDefault();var n=e.dataTransfer.files;if(t.hasInvalidExtensions(n)){return}var i=t.getFilesFromFileList(n);t.filesSelected.emit(i)}}e.prototype.componentDidLoad=function(){var e=this;if(this.allowCameraMode){this.checkIfBrowserCanTakeSnapshots().then((function(t){return e.canTakeSnapshots=t}))}if(this.allowedExtensions!=undefined&&this.allowedExtensions.length>0){var t=this.allowedExtensions.map((function(e){return".".concat(e)}));var n=t.join(",");this.fileInput.accept=n}};e.prototype.checkIfBrowserCanTakeSnapshots=function(){return new Promise((function(e){var t=navigator.mediaDevices;if(t==undefined||t.enumerateDevices==undefined){e(false)}t.enumerateDevices().then((function(t){var n=t.some((function(e){return e.kind=="videoinput"}));e(n)}))}))};e.prototype.getFilesFromFileList=function(e){var t=[];for(var n=0;n<e.length;n++){var i=e[n];t.push(i)}return t};e.prototype.handleUploadButton=function(e){var t=this.getFilesFromFileList(e.files);this.filesSelected.emit(t)};e.prototype.hasInvalidExtensions=function(e){var t=false;for(var n=0;n<e.length;n++){var i=e[n];var o=/(?:\.([^.]+))?$/;var r=o.exec(i.name)[1];if(r==undefined){t=true}if(this.allowedExtensions!=undefined&&!this.allowedExtensions.includes(r)){t=true}return t}};e.prototype.takeSnapshot=function(){var e=this;this.takingPicture=true;navigator.mediaDevices.getUserMedia({video:true,audio:false}).then((function(t){e.videoPreview.srcObject=t;e.videoPreview.play().then((function(){e.videoSettings=t.getVideoTracks()[0].getSettings()}))})).catch((function(e){return alert(e)}))};e.prototype.applySnapshot=function(){var e=this;var t=document.createElement("canvas");var n=t.getContext("2d");t.width=this.videoSettings.width;t.height=this.videoSettings.height;n.drawImage(this.videoPreview,0,0);t.toBlob((function(t){var n=new File([t],"image.jpeg",{type:"image/jpeg"});e.takingPicture=false;var i=[n];e.filesSelected.emit(i)}),"image/jpeg",this.captureQuality)};e.prototype.render=function(){var e=this;var t,n,i,s,l,a;return o(r,{ref:function(t){return e.dropzone=t},class:"dropzone",onDragOver:this.handleDragOver,onDrop:this.handleDrop,onDragLeave:function(){return e.dropzone.classList.remove("dropping")}},!this.takingPicture&&[o("p",null,(t=this.resx)===null||t===void 0?void 0:t.dragAndDropFile),o("p",null,"- ",(n=this.resx)===null||n===void 0?void 0:n.or," -"),o("label",{class:"upload-file"},o("input",{type:"file",ref:function(t){return e.fileInput=t},onChange:function(t){return e.handleUploadButton(t.target)}}),o("span",null,o("svg",{xmlns:"http://www.w3.org/2000/svg","enable-background":"new 0 0 24 24",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"#000000"},o("g",null,o("rect",{fill:"none",height:"24",width:"24"})),o("g",null,o("path",{d:"M5,20h14v-2H5V20z M5,10h4v6h6v-6h4l-7-7L5,10z"}))))," ",(i=this.resx)===null||i===void 0?void 0:i.uploadFile),this.canTakeSnapshots&&[o("p",null,"- ",(s=this.resx)===null||s===void 0?void 0:s.or," -"),o("button",{onClick:function(){return e.takeSnapshot()}},o("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"#000000"},o("path",{d:"M0 0h24v24H0z",fill:"none"}),o("circle",{cx:"12",cy:"12",r:"3.2"}),o("path",{d:"M9 2L7.17 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2h-3.17L15 2H9zm3 15c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5z"})),(l=this.resx)===null||l===void 0?void 0:l.takePicture)]],this.takingPicture&&o("div",{class:"video-preview"},o("video",{ref:function(t){return e.videoPreview=t}}),o("button",{onClick:function(){return e.applySnapshot()}},o("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"#000000"},o("path",{d:"M0 0h24v24H0z",fill:"none"}),o("circle",{cx:"12",cy:"12",r:"3.2"}),o("path",{d:"M9 2L7.17 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2h-3.17L15 2H9zm3 15c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5z"}))," ",(a=this.resx)===null||a===void 0?void 0:a.capture)))};return e}());K.style=G;var Z=":host{display:block}:host .overlay{background-color:rgba(0, 0, 0, 0.5);position:fixed;top:0;left:0;width:100%;height:100%;z-index:1002;display:-ms-flexbox;display:flex;-ms-flex-pack:center;justify-content:center;-ms-flex-align:center;align-items:center;-webkit-backdrop-filter:blur(2px);backdrop-filter:blur(2px);-webkit-transition:all 300ms ease-in-out;transition:all 300ms ease-in-out;visibility:hidden;opacity:0}:host .overlay .modal{max-width:var(--max-width, 1200px);background-color:white;padding:30px;-webkit-transform:scale(2);transform:scale(2);-webkit-transition:all 300ms ease-in-out;transition:all 300ms ease-in-out;z-index:2;position:relative;margin:10%;max-height:80%;border-radius:var(--dnn-controls-radius, 5px);-webkit-box-shadow:10px 10px 20px 0 rgba(0, 0, 0, 0.5);box-shadow:10px 10px 20px 0 rgba(0, 0, 0, 0.5);display:block}:host .overlay .modal .close{position:absolute;background-color:white;border:2px solid white;border-radius:50%;padding:0;margin:0;top:-12px;right:-12px;outline:none;display:-ms-flexbox;display:flex;-ms-flex-pack:center;justify-content:center;-ms-flex-align:center;align-items:center}:host .overlay .modal .close:focus,:host .overlay .modal .close:hover{-webkit-box-shadow:0 0 2px 2px var(--dnn-color-primary, blue);box-shadow:0 0 2px 2px var(--dnn-color-primary, blue)}:host .overlay .modal .close svg{width:24px;height:24px;color:grey}:host .overlay.visible{visibility:visible;opacity:1}:host .overlay.visible .modal{-webkit-transform:scale(1);transform:scale(1);-webkit-box-shadow:4px 4px 10px 0px rgba(0, 0, 0, 0.5);box-shadow:4px 4px 10px 0px rgba(0, 0, 0, 0.5);display:block}";var Y=e("dnn_modal",function(){function e(e){i(this,e);this.dismissed=s(this,"dismissed",7);this.backdropDismiss=true;this.closeText="Close modal";this.showCloseButton=true;this.visible=false}e.prototype.show=function(){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(e){this.visible=true;return[2]}))}))};e.prototype.hide=function(){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(e){this.visible=false;return[2]}))}))};e.prototype.handleDismiss=function(){this.visible=false;this.dismissed.emit()};e.prototype.handleBackdropClick=function(e){var t=e.target;if(t.id==="backdrop"&&this.backdropDismiss){this.handleDismiss()}};e.prototype.render=function(){var e=this;return o(r,null,o("div",{id:"backdrop",class:this.visible?"overlay visible":"overlay",onClick:function(t){return e.handleBackdropClick(t)}},o("div",{class:"modal"},this.showCloseButton&&o("button",{class:"close","aria-label":this.closeText,onClick:function(){return e.handleDismiss()}},o("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"#000000"},o("path",{d:"M0 0h24v24H0z",fill:"none"}),o("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z"}))),o("slot",null))))};Object.defineProperty(e.prototype,"el",{get:function(){return l(this)},enumerable:false,configurable:true});return e}());Y.style=Z;var J=":host{display:block}.add-role-row{display:-ms-flexbox;display:flex;gap:1em;-ms-flex-align:center;align-items:center;-ms-flex-wrap:wrap;flex-wrap:wrap}.add-role-row label{margin-right:0.5em}.search-user{display:-ms-flexbox;display:flex;gap:1em;margin-top:1em}.search-user .search-control{position:relative}.search-user .search-control dnn-collapsible{position:absolute;left:0;top:calc(100% - 2px);width:100%;-webkit-box-shadow:0px 4px 4px;box-shadow:0px 4px 4px}.search-user .search-control dnn-collapsible .dropdown{background-color:white;border:1px solid lightgray;display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column}.search-user .search-control dnn-collapsible .dropdown button{background-color:transparent;border:none;border-bottom:1px solid lightgray;padding:0.25em;margin:0;text-align:left}table{border:1px solid lightgray;border-collapse:collapse;margin-top:1em}table thead{text-align:center}table thead tr{border-bottom:1px solid lightgray}table thead th{background-color:lightgray;padding:0.25em 0.5em}table thead th:first-child{border-right:1px solid lightgray}table tbody tr{border-bottom:1px dotted lightgray}table tbody tr th{text-align:left;border-right:1px solid lightgray;padding:0 0.5em}table tbody tr td{text-align:center}table tbody tr td dnn-checkbox span{display:none}table tbody tr td button{background-color:transparent;border:0;padding:0;margin:0;margin-right:1em}";var X=e("dnn_permissions_grid",function(){function e(e){i(this,e);this.userSearchQueryChanged=s(this,"userSearchQueryChanged",7);this.permissionsChanged=s(this,"permissionsChanged",7);this.resx={Add:"Add",AllRoles:"All Roles",FilterByGroup:"Filter By Group",GlobalRoles:"Global Roles",Role:"Role",RolePermissions:"Role Permissions",SelectRole:"Select Role",User:"User",UserPermissions:"User Permissions"};this.foundUsers=[];this.selectedRoleGroupId=-1}e.prototype.handleFoundUsersChanged=function(e){var t=this;if((e===null||e===void 0?void 0:e.length)>0){setTimeout((function(){t.userCollapsible.expanded=true}),100)}};e.prototype.componentWillLoad=function(){document.addEventListener("click",this.dismissUserResults.bind(this))};e.prototype.disconnectedCallback=function(){document.removeEventListener("click",this.disconnectedCallback.bind(this))};e.prototype.dismissUserResults=function(e){var t=this.roleDropDown.getBoundingClientRect();if(e.pageX>t.right||e.pageX<t.left||e.pageY>t.bottom||e.pageY<t.top){this.userCollapsible.expanded=false}};e.prototype.handleRoleGroupChanged=function(e){var t=e.selectedIndex;var n=Number.parseInt(e.options[t].value);this.selectedRoleGroupId=n};e.prototype.addRole=function(){var e=Number.parseInt(this.roleDropDown.options[this.roleDropDown.selectedIndex].value);var t=this.roles.filter((function(t){return t.RoleId==e}))[0];this.permissions=Object.assign(Object.assign({},this.permissions),{rolePermissions:__spreadArray(__spreadArray([],this.permissions.rolePermissions,true),[{default:false,locked:false,permissions:[],roleId:t.RoleId,roleName:t.RoleName}],false)});this.permissionsChanged.emit(this.permissions)};e.prototype.addUser=function(){if(this.pickedUser!=undefined){this.permissions=Object.assign(Object.assign({},this.permissions),{userPermissions:__spreadArray(__spreadArray([],this.permissions.userPermissions,true),[{displayName:this.pickedUser.displayName,permissions:[],userId:this.pickedUser.userId}],false)});this.pickedUser=undefined;this.userQuery="";this.permissionsChanged.emit(this.permissions)}};e.prototype.getRoles=function(){var e=this;var t=this.roles.filter((function(t){return!e.permissions.rolePermissions.some((function(e){return e.roleId==t.RoleId}))}));if(this.selectedRoleGroupId==-2){return t}if(this.selectedRoleGroupId==-1){return t.filter((function(e){return e.IsSystemRole}))}return t.filter((function(t){return t.RoleGroupId==e.selectedRoleGroupId}))};e.prototype.renderRoleCheckBox=function(e,t){var n=this;var i=e.permissions.filter((function(e){return e.permissionId==t.permissionId}))[0];if(e.locked){return o("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"#000000"},o("g",{fill:"none"},o("path",{d:"M0 0h24v24H0V0z"}),o("path",{d:"M0 0h24v24H0V0z",opacity:".87"})),o("path",{d:"M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zM9 6c0-1.66 1.34-3 3-3s3 1.34 3 3v2H9V6zm9 14H6V10h12v10zm-6-3c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2z"}))}var r=i==undefined?"intermediate":i.allowAccess?"checked":"unchecked";return o("dnn-checkbox",{"use-intermediate":true,checked:r,onCheckedchange:function(i){return n.handleRoleChanged(i.detail,e,t)}},o("div",{slot:"intermediateicon"},o("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"#000000"},o("path",{d:"M0 0h24v24H0V0z",fill:"none"}),o("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"}))),o("div",{slot:"uncheckedicon"},o("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"#000000"},o("path",{d:"M0 0h24v24H0V0z",fill:"none"}),o("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zM4 12c0-4.42 3.58-8 8-8 1.85 0 3.55.63 4.9 1.69L5.69 16.9C4.63 15.55 4 13.85 4 12zm8 8c-1.85 0-3.55-.63-4.9-1.69L18.31 7.1C19.37 8.45 20 10.15 20 12c0 4.42-3.58 8-8 8z"}))),o("span",null,t.permissionName))};e.prototype.renderUserCheckBox=function(e,t){var n=this;var i=e.permissions.filter((function(e){return e.permissionId==t.permissionId}))[0];var r=i==undefined?"intermediate":i.allowAccess?"checked":"unchecked";return o("dnn-checkbox",{"use-intermediate":true,checked:r,onCheckedchange:function(i){return n.handleUserChanged(i.detail,e,t)}},o("div",{slot:"intermediateicon"},o("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"#000000"},o("path",{d:"M0 0h24v24H0V0z",fill:"none"}),o("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"}))),o("div",{slot:"uncheckedicon"},o("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"#000000"},o("path",{d:"M0 0h24v24H0V0z",fill:"none"}),o("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zM4 12c0-4.42 3.58-8 8-8 1.85 0 3.55.63 4.9 1.69L5.69 16.9C4.63 15.55 4 13.85 4 12zm8 8c-1.85 0-3.55-.63-4.9-1.69L18.31 7.1C19.37 8.45 20 10.15 20 12c0 4.42-3.58 8-8 8z"}))),o("span",null,t.permissionName))};e.prototype.handleRoleChanged=function(e,t,n){switch(e){case"unchecked":this.permissions=Object.assign(Object.assign({},this.permissions),{rolePermissions:__spreadArray([],this.permissions.rolePermissions.map((function(e){if(e.roleId!=t.roleId){return e}var i=Object.assign({},e);i.permissions=__spreadArray(__spreadArray([],i.permissions.filter((function(e){return e.permissionId!=n.permissionId})),true),[{allowAccess:false,fullControl:false,permissionCode:n.permissionCode,permissionId:n.permissionId,permissionKey:n.permissionKey,permissionName:n.permissionName,view:false}],false);return i})),true)});break;case"checked":this.permissions=Object.assign(Object.assign({},this.permissions),{rolePermissions:__spreadArray([],this.permissions.rolePermissions.map((function(e){if(e.roleId!=t.roleId){return e}var i=Object.assign({},e);i.permissions=__spreadArray(__spreadArray([],i.permissions.filter((function(e){return e.permissionId!=n.permissionId})),true),[{allowAccess:true,fullControl:false,permissionCode:n.permissionCode,permissionId:n.permissionId,permissionKey:n.permissionKey,permissionName:n.permissionName,view:false}],false);return i})),true)});break;case"intermediate":this.permissions=Object.assign(Object.assign({},this.permissions),{rolePermissions:__spreadArray([],this.permissions.rolePermissions.map((function(e){if(e.roleId!=t.roleId){return e}var i=Object.assign({},e);i.permissions=__spreadArray([],i.permissions.filter((function(e){return e.permissionId!=n.permissionId})),true);return i})),true)});break}this.permissionsChanged.emit(this.permissions)};e.prototype.handleUserChanged=function(e,t,n){switch(e){case"unchecked":this.permissions=Object.assign(Object.assign({},this.permissions),{userPermissions:__spreadArray([],this.permissions.userPermissions.map((function(e){if(e.userId!=t.userId){return e}var i=Object.assign({},e);i.permissions=__spreadArray(__spreadArray([],i.permissions.filter((function(e){return e.permissionId!=n.permissionId})),true),[{allowAccess:false,fullControl:false,permissionCode:n.permissionCode,permissionId:n.permissionId,permissionKey:n.permissionKey,permissionName:n.permissionName,view:false}],false);return i})),true)});break;case"checked":this.permissions=Object.assign(Object.assign({},this.permissions),{userPermissions:__spreadArray([],this.permissions.userPermissions.map((function(e){if(e.userId!=t.userId){return e}var i=Object.assign({},e);i.permissions=__spreadArray(__spreadArray([],i.permissions.filter((function(e){return e.permissionId!=n.permissionId})),true),[{allowAccess:true,fullControl:false,permissionCode:n.permissionCode,permissionId:n.permissionId,permissionKey:n.permissionKey,permissionName:n.permissionName,view:false}],false);return i})),true)});break;case"intermediate":this.permissions=Object.assign(Object.assign({},this.permissions),{userPermissions:__spreadArray([],this.permissions.userPermissions.map((function(e){if(e.userId!=t.userId){return e}var i=Object.assign({},e);i.permissions=__spreadArray([],i.permissions.filter((function(e){return e.permissionId!=n.permissionId})),true);return i})),true)});break}this.permissionsChanged.emit(this.permissions)};e.prototype.removeRole=function(e){this.permissions=Object.assign(Object.assign({},this.permissions),{rolePermissions:__spreadArray([],this.permissions.rolePermissions.filter((function(t){return t.roleId!=e.roleId})),true)});this.permissionsChanged.emit()};e.prototype.removeUser=function(e){this.permissions=Object.assign(Object.assign({},this.permissions),{userPermissions:__spreadArray([],this.permissions.userPermissions.filter((function(t){return t.userId!=e.userId})),true)});this.permissionsChanged.emit(this.permissions)};e.prototype.handleQueryChanged=function(e){this.userQuery=e;if(e==undefined||e.length==0){this.userCollapsible.expanded=false;this.pickedUser=undefined;this.foundUsers=[];return}this.userSearchQueryChanged.emit(e)};e.prototype.handleSearchUserFieldKeyDown=function(e){if(e.key!="ArrowDown"){return}e.preventDefault();var t=this.userCollapsible.querySelector("button");if(t!=undefined){t.focus()}};e.prototype.handleSearchedUserKeyDown=function(e){var t=e.target;switch(e.key){case"ArrowDown":e.preventDefault();var n=t.nextElementSibling;n===null||n===void 0?void 0:n.focus();break;case"ArrowUp":e.preventDefault();var i=t.previousElementSibling;i===null||i===void 0?void 0:i.focus();break}};e.prototype.handleUserPicked=function(e){this.userQuery=e.displayName;this.pickedUser=e};e.prototype.getFilteredUsers=function(){var e=this;return this.foundUsers.filter((function(t){return!e.permissions.userPermissions.some((function(e){return e.userId==t.userId}))}))};e.prototype.render=function(){var e=this;var t=this.getRoles();return o(r,null,o("div",{class:"add-role-row"},o("div",{class:"dropdown"},o("label",null,this.resx.FilterByGroup," :"),o("select",{onChange:function(t){return e.handleRoleGroupChanged(t.target)}},o("option",{value:-2,selected:this.selectedRoleGroupId==-2},this.resx.AllRoles),o("option",{value:-1,selected:this.selectedRoleGroupId==-1},this.resx.GlobalRoles),this.roleGroups.map((function(t){return o("option",{value:t.id,selected:e.selectedRoleGroupId==t.id},t.name)})))),t&&t.length>0&&[o("div",{class:"dropdown"},o("label",null,this.resx.SelectRole," :"),o("select",{ref:function(t){return e.roleDropDown=t}},this.getRoles().map((function(e){return o("option",{value:e.RoleId},e.RoleName)})))),o("dnn-button",{type:"primary",onClick:function(){return e.addRole()}},this.resx.Add)]),o("table",{class:"roles-table"},o("caption",null,this.resx.RolePermissions),o("thead",null,o("tr",null,o("th",null,this.resx.Role),this.permissions.permissionDefinitions.map((function(e){return o("th",null,e.permissionName)})),o("th",null," "))),o("tbody",null,this.permissions.rolePermissions.map((function(t){return o("tr",null,o("th",null,t.roleName),e.permissions.permissionDefinitions.map((function(n){return o("td",null,e.renderRoleCheckBox(t,n))})),o("td",null,!t.default&&o("button",{onClick:function(){return e.removeRole(t)}},o("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"#000000"},o("path",{d:"M0 0h24v24H0V0z",fill:"none"}),o("path",{d:"M14.59 8L12 10.59 9.41 8 8 9.41 10.59 12 8 14.59 9.41 16 12 13.41 14.59 16 16 14.59 13.41 12 16 9.41 14.59 8zM12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"})))))})))),o("div",{class:"search-user"},o("div",{class:"search-control"},o("dnn-searchbox",{placeholder:this.resx.User,debounced:true,onQueryChanged:function(t){return e.handleQueryChanged(t.detail)},onKeyDown:function(t){return e.handleSearchUserFieldKeyDown(t)},query:this.userQuery}),o("dnn-collapsible",{ref:function(t){return e.userCollapsible=t}},o("div",{class:"dropdown"},this.getFilteredUsers().map((function(t){return o("button",{onKeyDown:function(t){return e.handleSearchedUserKeyDown(t)},onClick:function(){return e.handleUserPicked(t)}},t.displayName)}))))),this.pickedUser&&o("dnn-button",{onClick:function(){return e.addUser()}},this.resx.Add)),this.permissions.userPermissions&&this.permissions.userPermissions.length>0&&o("table",{class:"users-table"},o("caption",null,this.resx.UserPermissions),o("thead",null,o("tr",null,o("th",null,this.resx.User),this.permissions.permissionDefinitions.map((function(e){return o("th",null,e.permissionName)})),o("th",null," "))),o("tbody",null,this.permissions.userPermissions.map((function(t){return o("tr",null,o("th",null,t.displayName),e.permissions.permissionDefinitions.map((function(n){return o("td",null,e.renderUserCheckBox(t,n))})),o("td",null,o("button",{onClick:function(){return e.removeUser(t)}},o("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"#000000"},o("path",{d:"M0 0h24v24H0V0z",fill:"none"}),o("path",{d:"M14.59 8L12 10.59 9.41 8 8 9.41 10.59 12 8 14.59 9.41 16 12 13.41 14.59 16 16 14.59 13.41 12 16 9.41 14.59 8zM12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"})))))})))))};Object.defineProperty(e,"watchers",{get:function(){return{foundUsers:["handleFoundUsersChanged"]}},enumerable:false,configurable:true});return e}());X.style=J;var $=function(){function e(e){this.sf=new c(e);this.requestUrl="".concat(this.sf.getServiceRoot("ResourceManager"),"Localization/")}e.prototype.getResources=function(){var e=this;return new Promise((function(t,n){var i="ResourceManagerLocalization";var o=sessionStorage.getItem(i);if(o){t(JSON.parse(o));return}var r="".concat(e.requestUrl,"GetResources");fetch(r,{headers:e.sf.getModuleHeaders()}).then((function(e){if(e.status==200){e.json().then((function(e){sessionStorage.setItem(i,JSON.stringify(e));t(e)}))}else{e.json().then((function(e){return n(e)}))}})).catch((function(e){return n(e)}))}))};return e}();var ee=":host{display:block;width:100%}.container{border:1px solid lightgray;display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column}.container dnn-vertical-splitview{width:100%;height:400px;--left-pane-background-color:lightgray;--right-pane-background-color:white}.container dnn-vertical-splitview .splitter{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-webkit-box-shadow:inset 8px 0 8px -8px grey;box-shadow:inset 8px 0 8px -8px grey;height:100%}.container dnn-vertical-splitview .splitter button{margin:0;padding:0;width:32px;height:32px;border:1px solid lightgray;border-radius:50%;background-color:white;-webkit-box-shadow:2px 2px 4px rgba(0, 0, 0, 0.2);box-shadow:2px 2px 4px rgba(0, 0, 0, 0.2);position:relative;left:-12px;display:-ms-flexbox;display:flex;-ms-flex-pack:center;justify-content:center;-ms-flex-align:center;align-items:center;cursor:pointer}.container dnn-vertical-splitview .splitter button svg{-webkit-transition:all 300ms ease-in-out;transition:all 300ms ease-in-out}.container dnn-vertical-splitview .splitter button.expanded svg{-webkit-transform:rotate(180deg);transform:rotate(180deg)}.container dnn-vertical-splitview .folder-mappings{position:absolute;bottom:0;left:0;border:0;background-color:transparent;cursor:pointer}";var te="dnn-resource-manager-last-folders-width";var ne=e("dnn_resource_manager",function(){function e(e){i(this,e);this.foldersExpanded=true;x.moduleId=this.moduleId;this.localizationClient=new $(this.moduleId)}e.prototype.foldersExpandedChanged=function(e){return __awaiter(this,void 0,void 0,(function(){var t;return __generator(this,(function(n){t=parseFloat(localStorage.getItem(te))||30;if(e){this.splitView.setSplitWidthPercentage(t);return[2]}this.splitView.setSplitWidthPercentage(0);return[2]}))}))};e.prototype.componentWillLoad=function(){var e=this;return new Promise((function(t,n){e.localizationClient.getResources().then((function(e){x.localization=e;x.sortField=F.itemName;t()})).catch((function(e){console.error(e);n()}))}))};e.prototype.handleSplitWidthChanged=function(e){if(e.detail!=0){localStorage.setItem(te,e.detail.toString())}};e.prototype.render=function(){var e=this;var t;return o(r,null,o("div",{class:"container"},o("dnn-rm-top-bar",null),o("dnn-vertical-splitview",{ref:function(t){return e.splitView=t},onWidthChanged:this.handleSplitWidthChanged},o("div",{class:"splitter"},o("button",{class:this.foldersExpanded&&"expanded",onClick:function(){return e.foldersExpanded=!e.foldersExpanded}},o("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"#000000"},o("path",{d:"M0 0h24v24H0V0z",fill:"none"}),o("path",{d:"M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6-6-6z"})))),o("dnn-rm-left-pane",{slot:"left"}),o("button",{slot:"left",class:"folder-mappings",title:(t=x.localization)===null||t===void 0?void 0:t.EditFolderMappings,onClick:function(){return e.folderMappingsModal.show()}},o("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24",width:"24"},o("path",{d:"m9.25 22-.4-3.2q-.325-.125-.612-.3-.288-.175-.563-.375L4.7 19.375l-2.75-4.75 2.575-1.95Q4.5 12.5 4.5 12.337v-.675q0-.162.025-.337L1.95 9.375l2.75-4.75 2.975 1.25q.275-.2.575-.375.3-.175.6-.3l.4-3.2h5.5l.4 3.2q.325.125.613.3.287.175.562.375l2.975-1.25 2.75 4.75-2.575 1.95q.025.175.025.337v.675q0 .163-.05.338l2.575 1.95-2.75 4.75-2.95-1.25q-.275.2-.575.375-.3.175-.6.3l-.4 3.2Zm2.8-6.5q1.45 0 2.475-1.025Q15.55 13.45 15.55 12q0-1.45-1.025-2.475Q13.5 8.5 12.05 8.5q-1.475 0-2.488 1.025Q8.55 10.55 8.55 12q0 1.45 1.012 2.475Q10.575 15.5 12.05 15.5Zm0-2q-.625 0-1.062-.438-.438-.437-.438-1.062t.438-1.062q.437-.438 1.062-.438t1.063.438q.437.437.437 1.062t-.437 1.062q-.438.438-1.063.438ZM12 12Zm-1 8h1.975l.35-2.65q.775-.2 1.438-.588.662-.387 1.212-.937l2.475 1.025.975-1.7-2.15-1.625q.125-.35.175-.738.05-.387.05-.787t-.05-.788q-.05-.387-.175-.737l2.15-1.625-.975-1.7-2.475 1.05q-.55-.575-1.212-.963-.663-.387-1.438-.587L13 4h-1.975l-.35 2.65q-.775.2-1.437.587-.663.388-1.213.938L5.55 7.15l-.975 1.7 2.15 1.6q-.125.375-.175.75-.05.375-.05.8 0 .4.05.775t.175.75l-2.15 1.625.975 1.7 2.475-1.05q.55.575 1.213.962.662.388 1.437.588Z"}))),o("dnn-rm-right-pane",{slot:"right"})),o("dnn-modal",{ref:function(t){return e.folderMappingsModal=t}},o("dnn-rm-folder-mappings",null))))};Object.defineProperty(e.prototype,"el",{get:function(){return l(this)},enumerable:false,configurable:true});Object.defineProperty(e,"watchers",{get:function(){return{foldersExpanded:["foldersExpandedChanged"]}},enumerable:false,configurable:true});return e}());ne.style=ee;var ie=function(){function e(e){this.sf=new c(e);this.requestUrl="".concat(this.sf.getServiceRoot("InternalServices"),"ItemListService/")}e.prototype.getFolders=function(){var e=this;return new Promise((function(t,n){var i="".concat(e.requestUrl,"GetFolders");fetch(i,{headers:e.sf.getModuleHeaders()}).then((function(e){if(e.status==200){e.json().then((function(e){return t(e)}))}else{e.json().then((function(e){return n(e)}))}})).catch((function(e){return n(e)}))}))};e.prototype.getFolderDescendants=function(e,t,n,i,o){var r=this;if(t===void 0){t=0}if(n===void 0){n=""}if(i===void 0){i=""}if(o===void 0){o=-1}return new Promise((function(s,l){var a="".concat(r.requestUrl,"GetFolderDescendants?parentId=").concat(e,"&sortOrder=").concat(t,"&searchText=").concat(n,"&permission=").concat(i);if(o>-1){a+="&portalId=${portalId}"}fetch(a,{headers:r.sf.getModuleHeaders()}).then((function(e){if(e.status==200){e.json().then((function(e){return s(e)}))}else{e.json().then((function(e){return l(e.message)}))}})).catch((function(e){return l(e)}))}))};return e}();var oe=":host{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-webkit-box-shadow:0px 4px 8px -4px black;box-shadow:0px 4px 8px -4px black}button{padding:0;margin:0;background-color:transparent;display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;border:0;padding:0;margin:0;cursor:pointer}button svg{fill:var(--dnn-color-primary)}.right-controls{display:-ms-flexbox;display:flex;margin:0 1em;gap:1em}.right-controls .sort,.right-controls .sync{position:relative}.right-controls .sort dnn-collapsible,.right-controls .sync dnn-collapsible{position:absolute;top:100%;right:0;background-color:white}.right-controls .sort dnn-collapsible[expanded],.right-controls .sync dnn-collapsible[expanded]{border:1px solid lightgray;-webkit-box-shadow:2px 2px 4px -2px;box-shadow:2px 2px 4px -2px}.right-controls .sort dnn-collapsible .dropdown,.right-controls .sync dnn-collapsible .dropdown{display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;background-color:white}.right-controls .sort dnn-collapsible .dropdown button,.right-controls .sync dnn-collapsible .dropdown button{background-color:transparent;border:none;padding:0.5em 1em;margin:0;border-bottom:1px solid lightgray;white-space:nowrap}.right-controls .sort dnn-collapsible .dropdown button svg,.right-controls .sync dnn-collapsible .dropdown button svg{height:1em;width:1em;margin-right:0.5em}dnn-vertical-overflow-menu{-ms-flex-positive:1;flex-grow:1;margin-left:24px}dnn-collapsible{z-index:1}";var re=e("dnn_rm_actions_bar",function(){function e(e){i(this,e);this.sortDropdownExpanded=false;this.syncDropdownExpanded=false;this.internalServicesClient=new ie(x.moduleId);this.itemsClient=new M(x.moduleId)}e.prototype.changeLayout=function(){if(x.layout=="card"){x.layout="list";return}x.layout="card"};e.prototype.renderSortButton=function(e){var t=this;return o("button",{onClick:function(){x.sortField=e;x.currentItems=Object.assign(Object.assign({},x.currentItems),{items:[]});t.sortDropdownExpanded=!t.sortDropdownExpanded}},this.renderRadioButton(x.sortField==e),o("span",null,e.localizedName))};e.prototype.renderRadioButton=function(e){if(e===void 0){e=false}if(e){return o("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"#000000"},o("path",{d:"M0 0h24v24H0z",fill:"none"}),o("path",{d:"M12 7c-2.76 0-5 2.24-5 5s2.24 5 5 5 5-2.24 5-5-2.24-5-5-5zm0-5C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}))}else{return o("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"#000000"},o("path",{d:"M0 0h24v24H0z",fill:"none"}),o("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}))}};e.prototype.syncFolderContent=function(e){var t=this;if(e===void 0){e=false}this.itemsClient.syncFolderContent(x.currentItems.folder.folderId,0,x.sortField,e).then((function(){t.getFolderContent()})).catch((function(e){return console.log(e)}))};e.prototype.getFolderContent=function(){var e=this;this.getFolders().then((function(){e.itemsClient.getFolderContent(x.currentItems.folder.folderId,0,x.pageSize,x.sortField).then((function(e){return x.currentItems=e})).catch((function(e){return console.error(e)}))})).catch((function(e){return alert(e.Message)}))};e.prototype.getFolders=function(){var e=this;return new Promise((function(t,n){e.internalServicesClient.getFolders().then((function(e){x.rootFolders=e;t(e)})).catch((function(e){return n(e)}))}))};e.prototype.render=function(){var e=this;return o(r,null,o("dnn-vertical-overflow-menu",null,x.selectedItems&&x.selectedItems.length==0&&x.currentItems&&x.currentItems.hasAddFoldersPermission&&o("dnn-action-create-folder",null),x.selectedItems&&x.selectedItems.length==0&&x.currentItems&&x.currentItems.hasAddFilesPermission&&o("dnn-action-upload-file",null),x.selectedItems.length==1&&x.currentItems.hasManagePermission&&o("dnn-action-edit-item",{item:x.selectedItems[0]}),x.selectedItems.length>0&&x.currentItems.hasDeletePermission&&[o("dnn-action-move-items",{items:x.selectedItems}),o("dnn-action-delete-items",{items:x.selectedItems})],x.selectedItems.length>0&&x.selectedItems.every((function(e){return e.isFolder&&e.unlinkAllowedStatus&&e.unlinkAllowedStatus!="false"}))&&o("dnn-action-unlink-items",{items:x.selectedItems}),x.selectedItems.length==1&&!x.selectedItems[0].isFolder&&location.protocol=="https:"&&o("dnn-action-copy-url",{items:x.selectedItems}),x.selectedItems.length==1&&!x.selectedItems[0].isFolder&&o("dnn-action-download-item",{item:x.selectedItems[0]})),o("div",{class:"right-controls"},x.selectedItems.length>0&&o("button",{onClick:function(){return x.selectedItems=[]}},o("span",null,x.selectedItems.length," ",x.localization.Items),o("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"#000000"},o("path",{d:"M0 0h24v24H0z",fill:"none"}),o("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}))),o("div",{class:"sort"},o("button",{onClick:function(){e.syncDropdownExpanded=false;e.sortDropdownExpanded=!e.sortDropdownExpanded}},o("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"#000000"},o("path",{d:"M0 0h24v24H0z",fill:"none"}),o("path",{d:"M3 18h6v-2H3v2zM3 6v2h18V6H3zm0 7h12v-2H3v2z"})),o("span",null,x.localization.Sort),o("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"#000000"},o("path",{d:"M0 0h24v24H0z",fill:"none"}),o("path",{d:"M7 10l5 5 5-5z"}))),o("dnn-collapsible",{expanded:this.sortDropdownExpanded},o("div",{class:"dropdown"},this.renderSortButton(F.itemName),this.renderSortButton(F.createdOnDate),this.renderSortButton(F.lastModifiedOnDate),this.renderSortButton(F.size)))),o("div",{class:"sync"},o("button",{onClick:function(){e.sortDropdownExpanded=false;e.syncDropdownExpanded=!e.syncDropdownExpanded}},o("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"#000000"},o("path",{d:"M0 0h24v24H0z",fill:"none"}),o("path",{xmlns:"http://www.w3.org/2000/svg",d:"M14 4H20V6H17.25L17.65 6.35Q18.875 7.575 19.438 9.012Q20 10.45 20 11.95Q20 14.725 18.337 16.887Q16.675 19.05 14 19.75V17.65Q15.8 17 16.9 15.438Q18 13.875 18 11.95Q18 10.825 17.575 9.762Q17.15 8.7 16.25 7.8L16 7.55V10H14ZM10 20H4V18H6.75L6.35 17.65Q5.05 16.5 4.525 15.025Q4 13.55 4 12.05Q4 9.275 5.662 7.112Q7.325 4.95 10 4.25V6.35Q8.2 7 7.1 8.562Q6 10.125 6 12.05Q6 13.175 6.425 14.237Q6.85 15.3 7.75 16.2L8 16.45V14H10Z"})),o("span",null,x.localization.Sync),o("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"#000000"},o("path",{d:"M0 0h24v24H0z",fill:"none"}),o("path",{d:"M7 10l5 5 5-5z"}))),o("dnn-collapsible",{expanded:this.syncDropdownExpanded},o("div",{class:"dropdown"},o("button",{onClick:function(){e.getFolderContent();e.syncDropdownExpanded=!e.syncDropdownExpanded}},o("span",null,x.localization.Refresh)),o("button",{onClick:function(){e.syncFolderContent();e.syncDropdownExpanded=!e.syncDropdownExpanded}},o("span",null,x.localization.SyncThisFolder)),o("button",{onClick:function(){e.syncFolderContent(true);e.syncDropdownExpanded=!e.syncDropdownExpanded}},o("span",null,x.localization.SyncThisFolderAndSubfolders))))),o("button",{onClick:function(){return e.changeLayout()}},x.layout=="card"&&o("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"#000000"},o("path",{d:"M0 0h24v24H0z",fill:"none"}),o("path",{d:"M3 13h2v-2H3v2zm0 4h2v-2H3v2zm0-8h2V7H3v2zm4 4h14v-2H7v2zm0 4h14v-2H7v2zM7 7v2h14V7H7z"})),x.layout=="list"&&o("svg",{xmlns:"http://www.w3.org/2000/svg","enable-background":"new 0 0 24 24",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"#000000"},o("rect",{fill:"none",height:"24",width:"24"}),o("g",null,o("path",{d:"M14.67,5v6.5H9.33V5H14.67z M15.67,11.5H21V5h-5.33V11.5z M14.67,19v-6.5H9.33V19H14.67z M15.67,12.5V19H21v-6.5H15.67z M8.33,12.5H3V19h5.33V12.5z M8.33,11.5V5H3v6.5H8.33z"}))))))};return e}());re.style=oe;var se=":host{display:block}.form{display:grid;grid-template-columns:1fr}.form label{font-weight:bold;margin-top:0.5em}.controls{margin-top:2em;display:-ms-flexbox;display:flex;-ms-flex-pack:end;justify-content:flex-end;gap:1em}";var le=e("dnn_rm_create_folder",function(){function e(e){i(this,e);this.dnnRmFoldersChanged=s(this,"dnnRmFoldersChanged",7);this.newFolderRequest={FolderMappingId:-1,FolderName:"",ParentFolderId:x.currentItems.folder.folderId};this.itemsClient=new M(x.moduleId)}e.prototype.componentWillLoad=function(){var e=this;this.itemsClient.getFolderMappings().then((function(t){e.folderMappings=t.sort((function(e,t){return e.FolderMappingID-t.FolderMappingID}));e.newFolderRequest=Object.assign(Object.assign({},e.newFolderRequest),{FolderMappingId:e.folderMappings[0].FolderMappingID,ParentFolderId:x.currentItems.folder.folderId})})).catch((function(e){return console.error(e)}))};e.prototype.componentDidLoad=function(){var e=this;setTimeout((function(){e.nameField.focus()}),350)};e.prototype.handleCancel=function(){var e=this.el.parentElement;e.hide().then((function(){setTimeout((function(){document.body.removeChild(e)}),300)}))};e.prototype.handleTypeChanged=function(e){var t=e.target;var n=t.options[t.selectedIndex];var i=Number.parseInt(n.value);this.newFolderRequest=Object.assign(Object.assign({},this.newFolderRequest),{FolderMappingId:i})};e.prototype.handleSave=function(){var e=this;this.itemsClient.createNewFolder(this.newFolderRequest).then((function(){e.dnnRmFoldersChanged.emit();x.currentItems=Object.assign(Object.assign({},x.currentItems),{items:[]});var t=e.el.parentElement;t.hide().then((function(){setTimeout((function(){document.body.removeChild(t)}),300)}))})).catch((function(e){return alert(e)}))};e.prototype.canChooseFolderProvider=function(){return this.folderMappings&&this.folderMappings.find((function(e){return e.FolderMappingID==x.currentItems.folder.folderMappingId})).IsDefault};e.prototype.render=function(){var e=this;var t;return o(r,null,o("h2",null,x.localization.AddFolder),o("div",{class:"form"},x.currentItems.folder.folderName.length>0&&[o("label",null,x.localization.FolderParent),o("span",null,x.currentItems.folder.folderName)],o("label",null,x.localization.Name),o("input",{type:"text",required:true,ref:function(t){return e.nameField=t},value:this.newFolderRequest.FolderName,onInput:function(t){return e.newFolderRequest=Object.assign(Object.assign({},e.newFolderRequest),{FolderName:t.target.value})}}),!this.newFolderRequest.FolderName&&o("span",null,x.localization.FolderNameRequiredMessage),this.canChooseFolderProvider()&&[o("label",null,x.localization.Type),o("select",{onChange:function(t){return e.handleTypeChanged(t)}},(t=this.folderMappings)===null||t===void 0?void 0:t.map((function(e,t){return o("option",{value:e.FolderMappingID,selected:t==0},e.MappingName)})))],this.canChooseFolderProvider()&&this.folderMappings.find((function(t){return t.FolderMappingID==e.newFolderRequest.FolderMappingId})).IsDefault==false&&[o("label",null,x.localization.MappedPath),o("input",{type:"text",value:this.newFolderRequest.MappedName,onInput:function(t){return e.newFolderRequest=Object.assign(Object.assign({},e.newFolderRequest),{MappedName:t.target.value})}})]),o("div",{class:"controls"},o("dnn-button",{type:"primary",reversed:true,onClick:function(){return e.handleCancel()}},x.localization.Cancel),o("dnn-button",{type:"primary",disabled:this.newFolderRequest.FolderMappingId<0||this.newFolderRequest.FolderName.length<1,onClick:function(){return e.handleSave()}},x.localization.Save)))};Object.defineProperty(e.prototype,"el",{get:function(){return l(this)},enumerable:false,configurable:true});return e}());le.style=se;var ae=':host{display:block}.general{display:-ms-flexbox;display:flex}.general .left{max-width:256px;border-right:1px solid lightgray;padding:1em}.general .left img{width:100%}.general .right{padding:1em}.form{display:grid;grid-template-columns:1fr 2fr;-ms-flex-align:end;align-items:flex-end}.form label{font-weight:bold;text-align:right;margin-right:0.5em;-ms-flex-item-align:start;align-self:flex-start}.form label::after{content:":"}.form input,.form textarea{margin-top:0.5em}.controls{margin-top:2em;display:-ms-flexbox;display:flex;-ms-flex-pack:end;justify-content:flex-end;gap:1em}';var de=e("dnn_rm_delete_items",function(){function e(e){i(this,e);this.dnnRmFoldersChanged=s(this,"dnnRmFoldersChanged",7);this.deletedCount=0;this.itemsClient=new M(x.moduleId)}e.prototype.closeModal=function(){var e=this.el.parentElement;e.hide().then((function(){setTimeout((function(){document.body.removeChild(e)}),300)}))};e.prototype.handleDelete=function(){var e=this;this.deleting=true;this.items.forEach((function(t){if(t.isFolder){e.itemsClient.deleteFolder({FolderId:t.itemId,UnlinkAllowedStatus:false}).then((function(){e.handleItemDeleted(t)})).catch((function(e){return alert(e)}))}else{e.itemsClient.deleteFile({FileId:t.itemId}).then((function(){e.handleItemDeleted(t)})).catch((function(e){return alert(e)}))}}))};e.prototype.handleItemDeleted=function(e){this.deletedCount++;this.currentItemName=e.itemName;if(this.deletedCount==this.items.length){this.deleting=false;this.dnnRmFoldersChanged.emit();this.closeModal()}};e.prototype.render=function(){var e=this;var t,n,i,s;return o(r,null,o("h2",null,(t=x.localization)===null||t===void 0?void 0:t.DeleteItems),o("p",null,(n=x.localization)===null||n===void 0?void 0:n.ConfirmDeleteMessage),o("ul",null,this.items.map((function(e){return o("li",null,e.itemName)}))),this.deleting&&o("div",null,o("p",null,(i=x.localization)===null||i===void 0?void 0:i.DeletingItems," ",this.deletedCount+1,"/",x.selectedItems.length," (",this.currentItemName,")"),o("dnn-rm-progress-bar",{max:x.selectedItems.length,value:this.deletedCount})),o("div",{class:"controls"},o("dnn-button",{type:"primary",reversed:true,disabled:this.deleting,onClick:function(){return e.closeModal()}},x.localization.Cancel),o("dnn-button",{type:"primary",onClick:function(){return e.handleDelete()},disabled:this.deleting},(s=x.localization)===null||s===void 0?void 0:s.Delete)))};Object.defineProperty(e.prototype,"el",{get:function(){return l(this)},enumerable:false,configurable:true});return e}());de.style=ae;var ce=':host{display:block}.general{display:-ms-flexbox;display:flex}.general .left{max-width:256px;border-right:1px solid lightgray;padding:1em}.general .left img{width:100%}.general .right{padding:1em}.form{display:grid;grid-template-columns:1fr 2fr;-ms-flex-align:end;align-items:flex-end}.form label{font-weight:bold;text-align:right;margin-right:0.5em;-ms-flex-item-align:start;align-self:flex-start}.form label::after{content:":"}.form input,.form textarea{margin-top:0.5em}.controls{margin-top:2em;display:-ms-flexbox;display:flex;-ms-flex-pack:end;justify-content:flex-end;gap:1em}';var ue=e("dnn_rm_edit_file",function(){function e(e){i(this,e);this.dnnRmFoldersChanged=s(this,"dnnRmFoldersChanged",7);this.itemsClient=new M(x.moduleId)}e.prototype.componentWillLoad=function(){var e=this;this.itemsClient.getFileDetails(this.fileId).then((function(t){e.fileDetails=t})).catch((function(e){return alert(e)}))};e.prototype.closeModal=function(){var e=this.el.parentElement;e.hide().then((function(){setTimeout((function(){document.body.removeChild(e)}),300)}))};e.prototype.handleSave=function(){var e=this;var t={fileId:this.fileId,fileName:this.fileDetails.fileName,title:this.fileDetails.title,description:this.fileDetails.description};this.itemsClient.saveFileDetails(t).then((function(){return e.closeModal()})).catch((function(e){return alert(e)}))};e.prototype.render=function(){var e=this;var t,n,i,s,l,a,d,c,u,p,h,f,m;return o(r,null,o("h2",null,(t=x.localization)===null||t===void 0?void 0:t.Edit),o("dnn-tabs",null,o("dnn-tab",{tabTitle:(n=x.localization)===null||n===void 0?void 0:n.General},o("div",{class:"general"},o("div",{class:"left"},this.fileDetails&&this.fileDetails.iconUrl&&o("img",{src:this.fileDetails.iconUrl}),this.fileDetails&&o("div",{class:"form"},o("label",null,(i=x.localization)===null||i===void 0?void 0:i.FileId),o("span",null,this.fileDetails.fileId),o("label",null,(s=x.localization)===null||s===void 0?void 0:s.Created),o("span",null,this.fileDetails.createdBy),o("label",null,(l=x.localization)===null||l===void 0?void 0:l.CreatedOnDate),o("span",null,this.fileDetails.createdOnDate),o("label",null,(a=x.localization)===null||a===void 0?void 0:a.LastModified),o("span",null,this.fileDetails.lastModifiedBy),o("label",null,(d=x.localization)===null||d===void 0?void 0:d.LastModifiedOnDate),o("span",null,this.fileDetails.lastModifiedOnDate))),o("div",{class:"right"},o("div",{class:"form"},o("label",null,(c=x.localization)===null||c===void 0?void 0:c.Name),o("input",{type:"text",value:(u=this.fileDetails)===null||u===void 0?void 0:u.fileName,onInput:function(t){return e.fileDetails=Object.assign(Object.assign({},e.fileDetails),{fileName:t.target.value})}}),o("label",null,(p=x.localization)===null||p===void 0?void 0:p.Title),o("input",{type:"text",value:(h=this.fileDetails)===null||h===void 0?void 0:h.title,onInput:function(t){return e.fileDetails=Object.assign(Object.assign({},e.fileDetails),{title:t.target.value.substring(0,255)})}}),o("label",null,(f=x.localization)===null||f===void 0?void 0:f.Description),o("textarea",{value:(m=this.fileDetails)===null||m===void 0?void 0:m.description,onInput:function(t){return e.fileDetails=Object.assign(Object.assign({},e.fileDetails),{description:t.target.value.substring(0,499)})}})))))),o("div",{class:"controls"},o("dnn-button",{type:"primary",reversed:true,onClick:function(){return e.closeModal()}},x.localization.Cancel),o("dnn-button",{type:"primary",onClick:function(){return e.handleSave()}},x.localization.Save)))};Object.defineProperty(e.prototype,"el",{get:function(){return l(this)},enumerable:false,configurable:true});return e}());ue.style=ce;var pe=':host{display:block}.general{display:-ms-flexbox;display:flex}.general .left{max-width:256px;border-right:1px solid lightgray;padding:1em}.general .left img{width:100%}.general .right{padding:1em}.form{display:grid;grid-template-columns:1fr 2fr;-ms-flex-align:end;align-items:flex-end}.form label{font-weight:bold;text-align:right;margin-right:0.5em}.form label::after{content:":"}.controls{margin-top:2em;display:-ms-flexbox;display:flex;-ms-flex-pack:end;justify-content:flex-end;gap:1em}';var he=e("dnn_rm_edit_folder",function(){function e(e){i(this,e);this.dnnRmFoldersChanged=s(this,"dnnRmFoldersChanged",7);this.roleGroups=[];this.roles=[];this.itemsClient=new M(x.moduleId)}e.prototype.componentWillLoad=function(){var e=this;this.itemsClient.getFolderDetails(this.folderId).then((function(t){e.folderDetails=Object.assign(Object.assign({},t),{permissions:Object.assign(Object.assign({},t.permissions),{permissionDefinitions:t.permissions.permissionDefinitions.sort((function(e){switch(e.permissionName){case"View Folder":return-1;case"Browse Folder":return 0;case"Write to Folder":return 1}})),rolePermissions:__spreadArray([],t.permissions.rolePermissions.map((function(e){return Object.assign(Object.assign({},e),{permissions:e.permissions.sort((function(e){switch(e.permissionName){case"View Folder":return-1;case"Browse Folder":return 0;case"Write to Folder":return 1}}))})})),true),userPermissions:__spreadArray([],t.permissions.userPermissions.map((function(e){return Object.assign(Object.assign({},e),{permissions:e.permissions.sort((function(e){switch(e.permissionName){case"View Folder":return-1;case"Browse Folder":return 0;case"Write to Folder":return 1}}))})})),true)})})})).catch((function(e){return alert(e)}));this.itemsClient.getFolderIconUrl(this.folderId).then((function(t){return e.folderIconUrl=t})).catch((function(e){return alert(e)}));this.itemsClient.getRoleGroups().then((function(t){return e.roleGroups=t})).catch((function(e){return alert(e)}));this.itemsClient.getRoles().then((function(t){return e.roles=t})).catch((function(e){return alert(e)}))};e.prototype.closeModal=function(){var e=this.el.parentElement;e.hide().then((function(){setTimeout((function(){document.body.removeChild(e)}),300)}))};e.prototype.handleSave=function(){var e=this;var t={folderId:this.folderId,folderName:this.folderDetails.folderName,permissions:this.folderDetails.permissions};this.itemsClient.saveFolderDetails(t).then((function(){e.dnnRmFoldersChanged.emit();e.closeModal()})).catch((function(e){return alert(e)}))};e.prototype.handlePermissionsChanged=function(e){var t=this;e.rolePermissions.forEach((function(e){return t.adjustRelatedPermissions(e)}));e.userPermissions.forEach((function(e){return t.adjustRelatedPermissions(e)}));this.folderDetails=Object.assign(Object.assign({},this.folderDetails),{permissions:e})};e.prototype.adjustRelatedPermissions=function(e){var t={view:this.folderDetails.permissions.permissionDefinitions.find((function(e){return e.permissionName==="View Folder"})).permissionId,browse:this.folderDetails.permissions.permissionDefinitions.find((function(e){return e.permissionName==="Browse Folder"})).permissionId,write:this.folderDetails.permissions.permissionDefinitions.find((function(e){return e.permissionName==="Write to Folder"})).permissionId};var n=e.permissions.find((function(e){return e.permissionId==t.view}));if(n&&n.allowAccess==false){e.permissions=[{allowAccess:false,fullControl:false,permissionId:t.view,permissionCode:null,permissionKey:null,permissionName:"View Folder",view:false},{allowAccess:false,fullControl:false,permissionId:t.browse,permissionCode:null,permissionKey:null,permissionName:"Browse Folder",view:false},{allowAccess:false,fullControl:false,permissionId:t.write,permissionCode:null,permissionKey:null,permissionName:"Write to Folder",view:false}]}var i=e.permissions.find((function(e){return e.permissionId==t.browse}));if(i&&i.allowAccess==false){e.permissions=__spreadArray(__spreadArray([],e.permissions.filter((function(e){return e.permissionId!=t.write})),true),[{allowAccess:false,fullControl:false,permissionId:t.write,permissionCode:null,permissionKey:null,permissionName:"Write to Folder",view:false}],false)}if(i&&i.allowAccess==true){e.permissions=__spreadArray([{allowAccess:true,fullControl:false,permissionId:t.view,permissionCode:null,permissionKey:null,permissionName:"Browse Folder",view:false}],e.permissions.filter((function(e){return e.permissionId!=t.view})),true)}var o=e.permissions.find((function(e){return e.permissionId==t.write}));if(o&&o.allowAccess==true){e.permissions=[{allowAccess:true,fullControl:false,permissionId:t.view,permissionCode:null,permissionKey:null,permissionName:"View Folder",view:false},{allowAccess:true,fullControl:false,permissionId:t.browse,permissionCode:null,permissionKey:null,permissionName:"Browse Folder",view:false},{allowAccess:true,fullControl:false,permissionId:t.write,permissionCode:null,permissionKey:null,permissionName:"Write to Folder",view:false}]}};e.prototype.handleUserSearchQueryChanged=function(e){var t=this;this.itemsClient.searchUsers(e).then((function(e){return t.foundUsers=e})).catch((function(e){return alert(e)}))};e.prototype.render=function(){var e=this;var t,n,i,s,l,a,d,c,u,p;return o(r,null,o("h2",null,(t=x.localization)===null||t===void 0?void 0:t.Edit),o("dnn-tabs",null,o("dnn-tab",{tabTitle:(n=x.localization)===null||n===void 0?void 0:n.General},o("div",{class:"general"},o("div",{class:"left"},this.folderIconUrl&&o("img",{src:this.folderIconUrl}),this.folderDetails&&o("div",{class:"form"},o("label",null,(i=x.localization)===null||i===void 0?void 0:i.FolderId),o("span",null,this.folderDetails.folderId),o("label",null,(s=x.localization)===null||s===void 0?void 0:s.Created),o("span",null,this.folderDetails.createdBy),o("label",null,(l=x.localization)===null||l===void 0?void 0:l.CreatedOnDate),o("span",null,this.folderDetails.createdOnDate),o("label",null,(a=x.localization)===null||a===void 0?void 0:a.LastModified),o("span",null,this.folderDetails.lastModifiedBy),o("label",null,(d=x.localization)===null||d===void 0?void 0:d.LastModifiedOnDate),o("span",null,this.folderDetails.lastModifiedOnDate))),o("div",{class:"right"},o("div",{class:"form"},o("label",null,(c=x.localization)===null||c===void 0?void 0:c.Name),o("input",{type:"text",value:(u=this.folderDetails)===null||u===void 0?void 0:u.folderName,onInput:function(t){return e.folderDetails=Object.assign(Object.assign({},e.folderDetails),{folderName:t.target.value})}}))))),o("dnn-tab",{tabTitle:(p=x.localization)===null||p===void 0?void 0:p.Permissions},this.folderDetails&&this.folderDetails.permissions&&this.roleGroups&&this.roles&&o("dnn-permissions-grid",{permissions:this.folderDetails.permissions,roleGroups:this.roleGroups,roles:this.roles,foundUsers:this.foundUsers,onPermissionsChanged:function(t){return e.handlePermissionsChanged(t.detail)},onUserSearchQueryChanged:function(t){return e.handleUserSearchQueryChanged(t.detail)}}))),o("div",{class:"controls"},o("dnn-button",{type:"primary",reversed:true,onClick:function(){return e.closeModal()}},x.localization.Cancel),o("dnn-button",{type:"primary",onClick:function(){return e.handleSave()}},x.localization.Save)))};Object.defineProperty(e.prototype,"el",{get:function(){return l(this)},enumerable:false,configurable:true});return e}());he.style=pe;var fe=":host{display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column}:host(*){background-color:transparent;border:none;padding:0.5em 1em;margin:0;border-bottom:1px solid lightgray;white-space:nowrap}";var me=e("dnn_rm_file_context_menu",function(){function e(e){i(this,e)}e.prototype.render=function(){var e,t;return o(r,null,((e=x.currentItems)===null||e===void 0?void 0:e.hasAddFilesPermission)&&x.currentItems.hasDeletePermission&&o("dnn-action-edit-item",{item:this.item}),((t=x.currentItems)===null||t===void 0?void 0:t.hasDeletePermission)&&[o("dnn-action-move-items",{items:[this.item]}),o("dnn-action-delete-items",{items:[this.item]}),o("dnn-action-download-item",{item:this.item})],location.protocol=="https:"&&o("dnn-action-copy-url",{items:[this.item]}))};return e}());me.style=fe;var ge=":host{display:block;padding-left:32px;overflow-y:auto}";var ve=undefined&&undefined.__decorate||function(e,t,n,i){var o=arguments.length,r=o<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,n):i,s;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")r=Reflect.decorate(e,t,n,i);else for(var l=e.length-1;l>=0;l--)if(s=e[l])r=(o<3?s(r):o>3?s(t,n,r):s(t,n))||r;return o>3&&r&&Object.defineProperty(t,n,r),r};var be=e("dnn_rm_files_pane",function(){function e(e){i(this,e);this.preloadOffset=5e3;this.itemsClient=new M(x.moduleId)}e.prototype.handleScroll=function(){this.checkIfMoreItemsNeeded()};e.prototype.handleFoldersChanged=function(){x.currentItems=Object.assign(Object.assign({},x.currentItems),{items:[]});x.selectedItems=[];this.checkIfMoreItemsNeeded()};e.prototype.componentDidUpdate=function(){var e=this.loadedFilesArea.getBoundingClientRect().height;var t=e/x.currentItems.items.length;var n=t*x.currentItems.totalCount;var i=n-e;if(i<0){i=0}this.spacer.style.height="".concat(i,"px");this.checkIfMoreItemsNeeded()};e.prototype.checkIfMoreItemsNeeded=function(){var e=this.spacer.getBoundingClientRect().top;var t=this.el.getBoundingClientRect().bottom;var n=e-t;if(n<this.preloadOffset){this.loadMore()}};e.prototype.loadMore=function(){if(x.currentItems.items.length>=x.currentItems.totalCount){return}if(x.itemsSearchTerm){this.itemsClient.search(x.currentItems.folder.folderId,x.itemsSearchTerm,x.lastSearchRequestedPage+1,x.pageSize,x.sortField).then((function(e){x.lastSearchRequestedPage+=1;x.currentItems=Object.assign(Object.assign({},x.currentItems),{totalCount:e.totalCount,items:__spreadArray(__spreadArray([],x.currentItems.items,true),e.items,true)})}))}else{this.itemsClient.getFolderContent(x.currentItems.folder.folderId,x.currentItems.items.length,x.pageSize,x.sortField).then((function(e){return x.currentItems=Object.assign(Object.assign({},x.currentItems),{items:__spreadArray(__spreadArray([],x.currentItems.items,true),e.items,true)})})).catch((function(){}))}};e.prototype.render=function(){var e=this;return o(r,null,o("div",{ref:function(t){return e.loadedFilesArea=t}},x.layout=="list"&&o("dnn-rm-items-listview",{currentItems:x.currentItems}),x.layout=="card"&&o("dnn-rm-items-cardview",{currentItems:x.currentItems})),o("div",{ref:function(t){return e.spacer=t}}))};Object.defineProperty(e.prototype,"el",{get:function(){return l(this)},enumerable:false,configurable:true});return e}());ve([a(50)],be.prototype,"loadMore",null);be.style=ge;var ye=":host{display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column}:host(*){background-color:transparent;border:none;padding:0.5em 1em;margin:0;border-bottom:1px solid lightgray;white-space:nowrap}";var xe=e("dnn_rm_folder_context_menu",function(){function e(e){i(this,e)}e.prototype.render=function(){var e,t,n;return o(r,null,((e=x.currentItems)===null||e===void 0?void 0:e.hasAddFoldersPermission)&&o("dnn-action-create-folder",{parentFolderId:this.item.itemId}),((t=x.currentItems)===null||t===void 0?void 0:t.hasManagePermission)&&o("dnn-action-edit-item",{item:this.item}),((n=x.currentItems)===null||n===void 0?void 0:n.hasDeletePermission)&&[o("dnn-action-move-items",{items:[this.item]}),o("dnn-action-delete-items",{items:[this.item]})],x.currentItems.hasDeletePermission&&this.item.unlinkAllowedStatus!="false"&&o("dnn-action-unlink-items",{items:[this.item]}))};return e}());xe.style=ye;var we=":host{display:block}";var Ce=e("dnn_rm_folder_list",function(){function e(e){i(this,e);this.dnnRmFolderListFolderPicked=s(this,"dnnRmFolderListFolderPicked",7);this.internalServicesClient=new ie(x.moduleId);this.itemsClient=new M(x.moduleId)}e.prototype.handleFoldersChanged=function(){this.getFolders()};e.prototype.componentWillLoad=function(){var e=this;this.getFolders().then((function(){e.itemsClient.getFolderContent(Number.parseInt(x.rootFolders.Tree.children[0].data.key),0,x.pageSize,x.sortField).then((function(e){return x.currentItems=e})).catch((function(e){return console.error(e)}))})).catch((function(e){return alert(e.Message)}))};e.prototype.getFolders=function(){var e=this;return new Promise((function(t,n){e.internalServicesClient.getFolders().then((function(e){x.rootFolders=e;t(e)})).catch((function(e){return n(e)}))}))};e.prototype.handleFolderPicked=function(e){this.selectedFolder=e.detail;this.dnnRmFolderListFolderPicked.emit(e.detail)};e.prototype.render=function(){var e=this;return o(r,null,x.rootFolders&&x.rootFolders.Tree.children.map((function(t){return o("dnn-rm-folder-list-item",{folder:t,parentFolderId:Number.parseInt(x.rootFolders.Tree.data.key),expanded:true,onDnnRmFolderListItemClicked:function(t){return e.handleFolderPicked(t)},selectedFolder:e.selectedFolder})})))};return e}());Ce.style=we;var ke=":host{display:block;font-weight:normal;color:black;-webkit-transition:all 300ms ease-in-out;transition:all 300ms ease-in-out}:host(.selected) .item-name{font-weight:bolder;color:var(--dnn-color-primary-dark, #0D569E)}button{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;border:none;padding:0;margin:0;background-color:transparent;gap:0.5em;cursor:pointer}dnn-collapsible{position:fixed;display:none;border:1px solid lightgray;-webkit-box-shadow:2px 2px 4px -2px;box-shadow:2px 2px 4px -2px;background-color:white;z-index:1}";var Ie=e("dnn_rm_folder_list_item",function(){function e(e){i(this,e);this.dnnRmcontextMenuOpened=s(this,"dnnRmcontextMenuOpened",7);this.dnnRmFolderListItemClicked=s(this,"dnnRmFolderListItemClicked",7);this.expanded=false;this.itemsClient=new M(x.moduleId);this.internalServicesClient=new ie(x.moduleId)}e.prototype.handleDnnRmContextMenuOpened=function(e){if(Number.parseInt(this.folder.data.key)!=e.detail){this.dismissContextMenu()}};e.prototype.componentWillLoad=function(){var e=this;this.itemsClient.getFolderIconUrl(Number.parseInt(this.folder.data.key)).then((function(t){return e.folderIconUrl=t})).catch((function(e){return console.error(e)}));document.addEventListener("click",this.dismissContextMenu.bind(this))};e.prototype.disconnectedCallback=function(){document.removeEventListener("click",this.dismissContextMenu.bind(this))};e.prototype.handleUserExpanded=function(){var e=this;var t=Array.from(this.el.shadowRoot.querySelectorAll("dnn-rm-folder-list-item"));t.forEach((function(e){e.shadowRoot.querySelectorAll("dnn-treeview-item").forEach((function(e){return e.removeAttribute("expanded")}))}));this.internalServicesClient.getFolderDescendants(this.folder.data.key).then((function(t){e.folder=Object.assign(Object.assign({},e.folder),{children:t.Items.map((function(e){return{data:{hasChildren:e.hasChildren,key:e.key,selectable:e.selectable,value:e.value}}}))})})).catch((function(e){return console.error(e)}))};e.prototype.handleContextMenu=function(e){var t=this;e.preventDefault();this.itemsClient.getFolderItem(Number.parseInt(this.folder.data.key)).then((function(n){var i=document.createElement("dnn-collapsible");var o=document.createElement("dnn-rm-folder-context-menu");i.appendChild(o);o.item=n;i.style.left="".concat(e.pageX,"px");i.style.top="".concat(e.pageY,"px");i.style.display="block";t.el.shadowRoot.appendChild(i);setTimeout((function(){i.expanded=true}),100);t.dnnRmcontextMenuOpened.emit(Number.parseInt(t.folder.data.key))})).catch((function(e){return console.error(e)}))};e.prototype.dismissContextMenu=function(){var e=this;var t=this.el.shadowRoot.querySelectorAll("dnn-collapsible");t===null||t===void 0?void 0:t.forEach((function(t){return e.el.shadowRoot.removeChild(t)}))};e.prototype.getItemClasses=function(){var e,t;if(((t=(e=this.selectedFolder)===null||e===void 0?void 0:e.data)===null||t===void 0?void 0:t.key)==this.folder.data.key){return"selected"}return""};e.prototype.render=function(){var e=this;return o(r,{class:this.getItemClasses()},o("dnn-treeview-item",{expanded:this.expanded,onUserExpanded:function(){return e.handleUserExpanded()}},o("button",{title:"".concat(this.folder.data.value," (ID: ").concat(this.folder.data.key,")"),onClick:function(){return e.dnnRmFolderListItemClicked.emit(e.folder)},onContextMenu:function(t){return e.handleContextMenu(t)}},this.folderIconUrl?o("img",{src:this.folderIconUrl,alt:this.folder.data.value}):o("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"#000000"},o("path",{d:"M0 0h24v24H0z",fill:"none"}),o("path",{d:"M10 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2h-8l-2-2z"})),o("span",{class:"item-name"},this.folder.data.value)),this.folder.data.hasChildren&&[o("div",{slot:"children"}),this.folder.children&&this.folder.children.length>0&&this.folder.children.map((function(t){return o("dnn-rm-folder-list-item",{slot:"children",parentFolderId:Number.parseInt(e.folder.data.key),folder:t,selectedFolder:e.selectedFolder})}))]))};Object.defineProperty(e.prototype,"el",{get:function(){return l(this)},enumerable:false,configurable:true});return e}());Ie.style=ke;var Fe=":host{display:block}table{border-collapse:collapse}table thead tr th{padding:0.5em;text-align:left;font-size:1.2em}table tr:nth-child(even){background-color:#f2f2f2}table tr td{padding:0.5em;font-size:1.1em}.controls{display:-ms-flexbox;display:flex;-ms-flex-pack:end;justify-content:flex-end;margin-top:1em}.controls dnn-button{margin-left:1em}";var Me=e("dnn_rm_folder_mappings",function(){function e(e){i(this,e);this.itemsClient=new M(x.moduleId)}e.prototype.componentWillLoad=function(){var e=this;this.itemsClient.getFolderMappings().then((function(t){e.folderMappings=t})).catch((function(e){return console.error(e)}));this.itemsClient.getAddFolderTypeUrl().then((function(t){e.addFolderTypeUrl=t})).catch((function(e){return console.error(e)}))};e.prototype.dismiss=function(){this.el.closest("dnn-modal").hide()};e.prototype.render=function(){var e=this;var t,n;return o(r,null,o("h2",null,x.localization.EditFolderMappings),this.folderMappings&&o("table",null,o("thead",null,o("tr",null,o("th",null," "),o("th",null,x.localization.Name),o("th",null,x.localization.FolderProvider))),o("tbody",null,this.folderMappings.map((function(e){return o("tr",null,o("td",null,!e.IsDefault&&o("a",{href:e.editUrl},o("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24",width:"24"},o("path",{d:"M5 19h1.4l8.625-8.625-1.4-1.4L5 17.6ZM19.3 8.925l-4.25-4.2 1.4-1.4q.575-.575 1.413-.575.837 0 1.412.575l1.4 1.4q.575.575.6 1.388.025.812-.55 1.387ZM17.85 10.4 7.25 21H3v-4.25l10.6-10.6Zm-3.525-.725-.7-.7 1.4 1.4Z"})))),o("td",null,e.MappingName),o("td",null,e.FolderProviderType))})))),this.addFolderTypeUrl&&o("div",{class:"controls"},o("dnn-button",{reversed:true,onClick:function(){return e.dismiss()}},(t=x.localization)===null||t===void 0?void 0:t.Cancel),o("dnn-button",{onClick:function(){return window.location.href=e.addFolderTypeUrl}},(n=x.localization)===null||n===void 0?void 0:n.AddFolderType)))};Object.defineProperty(e.prototype,"el",{get:function(){return l(this)},enumerable:false,configurable:true});return e}());Me.style=Fe;var ze=function(){function e(){}e.prototype.isItemSelected=function(e){return x.selectedItems&&x.selectedItems.includes(e)};e.prototype.toggleItemSelected=function(e){if(this.isItemSelected(e)){x.selectedItems=x.selectedItems.filter((function(t){return t!=e}))}else{x.selectedItems=__spreadArray(__spreadArray([],x.selectedItems,true),[e],false)}};return e}();var De=new ze;var _e=":host{display:block;padding-right:2em}.container{display:-ms-flexbox;display:flex;gap:1em;margin-top:1em;-ms-flex-wrap:wrap;flex-wrap:wrap}.container .card{cursor:pointer;display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;-ms-flex-align:center;align-items:center;gap:0.25em;border:none;background-color:transparent;-webkit-transition:all 100ms ease-in-out;transition:all 100ms ease-in-out;width:calc(110px + 2em);-ms-flex-pack:end;justify-content:flex-end;position:relative}.container .card:hover,.container .card:focus{-webkit-transform:scale3d(1.1, 1.1, 1.1);transform:scale3d(1.1, 1.1, 1.1)}.container .card:hover .radio,.container .card:focus .radio{opacity:1}.container .card .radio{position:absolute;top:0;left:-16px;opacity:0;-webkit-transition:all 100ms ease-in-out;transition:all 100ms ease-in-out}.container .card .radio.selected{opacity:1}.container .card img{width:110px;max-height:110px;margin:auto}.container .card .item-name{line-break:anywhere}dnn-collapsible{position:fixed;display:none;border:1px solid lightgray;-webkit-box-shadow:2px 2px 4px -2px;box-shadow:2px 2px 4px -2px;background-color:white;z-index:1}";var Se=e("dnn_rm_items_cardview",function(){function e(e){i(this,e)}e.prototype.componentWillLoad=function(){document.addEventListener("click",this.dismissContextMenu.bind(this))};e.prototype.disconnectedCallback=function(){document.removeEventListener("click",this.disconnectedCallback.bind(this))};e.prototype.dismissContextMenu=function(){var e=this;var t=this.el.shadowRoot.querySelectorAll("dnn-collapsible");t===null||t===void 0?void 0:t.forEach((function(t){return e.el.shadowRoot.removeChild(t)}))};e.prototype.handleContextMenu=function(e,t){e.preventDefault();x.selectedItems=[t];this.dismissContextMenu();var n=document.createElement("dnn-collapsible");var i=t.isFolder?document.createElement("dnn-rm-folder-context-menu"):document.createElement("dnn-rm-file-context-menu");n.appendChild(i);i.item=t;n.style.left="".concat(e.pageX,"px");n.style.top="".concat(e.pageY,"px");n.style.display="block";this.el.shadowRoot.appendChild(n);setTimeout((function(){n.expanded=true}),100);return};e.prototype.render=function(){var e=this;var t;return o(r,null,this.currentItems&&o("div",{class:"container"},(t=this.currentItems.items)===null||t===void 0?void 0:t.map((function(t){return o("button",{class:"card",onClick:function(){return De.toggleItemSelected(t)},onContextMenu:function(n){return e.handleContextMenu(n,t)}},o("div",{class:De.isItemSelected(t)?"radio selected":"radio"},De.isItemSelected(t)&&o("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"#000000"},o("path",{d:"M0 0h24v24H0z",fill:"none"}),o("path",{d:"M12 7c-2.76 0-5 2.24-5 5s2.24 5 5 5 5-2.24 5-5-2.24-5-5-5zm0-5C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"})),!De.isItemSelected(t)&&o("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"#000000"},o("path",{d:"M0 0h24v24H0z",fill:"none"}),o("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}))),o("img",{src:t.thumbnailAvailable?t.thumbnailUrl:t.iconUrl,alt:"".concat(t.itemName," (ID: ").concat(t.itemId,")")}),o("span",{class:"item-name"},t.itemName))}))))};Object.defineProperty(e.prototype,"el",{get:function(){return l(this)},enumerable:false,configurable:true});return e}());Se.style=_e;function Re(e){if(e==undefined||e==undefined){return""}if(e<1024){return e.toString()+" B"}if(e<1048576){return Math.round(e/1024).toString()+" KB"}return Math.round(e/1048576).toString()+" MB"}var je=":host{display:block;margin-right:1em}table{width:100%;border-collapse:collapse}table thead{font-weight:bold}table thead tr{border-bottom:2px solid lightgray}table tbody tr{border-bottom:1px solid lightgray;-webkit-transition:all 100ms ease-in-out;transition:all 100ms ease-in-out}table tbody tr:hover,table tbody tr:focus{background-color:#eee}table tbody tr td.radio{opacity:0;-webkit-transition:all 100ms ease-in-out;transition:all 100ms ease-in-out}table tbody tr td img{height:2.5em;display:block;margin:0 auto}table tbody tr td .date{display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column}table tbody tr td.size{text-align:right}table tbody tr:hover td.radio,table tbody tr:focus td.radio,table tbody tr.selected td.radio{opacity:1}dnn-collapsible{position:fixed;display:none;border:1px solid lightgray;-webkit-box-shadow:2px 2px 4px -2px;box-shadow:2px 2px 4px -2px;background-color:white;z-index:1}";var Pe=e("dnn_rm_items_listview",function(){function e(e){i(this,e)}e.prototype.componentWillLoad=function(){document.addEventListener("click",this.dismissContextMenu.bind(this))};e.prototype.disconnectedCallback=function(){document.removeEventListener("click",this.disconnectedCallback.bind(this))};e.prototype.dismissContextMenu=function(){var e=this;var t=this.el.shadowRoot.querySelectorAll("dnn-collapsible");t===null||t===void 0?void 0:t.forEach((function(t){return e.el.shadowRoot.removeChild(t)}))};e.prototype.getLocalDateString=function(e){var t=new Date(e);return o("div",{class:"date"},o("span",null,t.toLocaleDateString()),o("span",null,t.toLocaleTimeString()))};e.prototype.handleRowKeyDown=function(e,t){var n,i;switch(e.key){case"ArrowDown":e.preventDefault();(n=e.target.nextElementSibling)===null||n===void 0?void 0:n.focus();break;case"ArrowUp":e.preventDefault();(i=e.target.previousElementSibling)===null||i===void 0?void 0:i.focus();break;case" ":case"Enter":e.preventDefault();De.toggleItemSelected(t);break}};e.prototype.handleContextMenu=function(e,t){e.preventDefault();x.selectedItems=[t];this.dismissContextMenu();var n;n=t.isFolder?document.createElement("dnn-rm-folder-context-menu"):document.createElement("dnn-rm-file-context-menu");var i=document.createElement("dnn-collapsible");n.item=t;i.appendChild(n);i.style.left="".concat(e.pageX,"px");i.style.top="".concat(e.pageY,"px");i.style.display="block";this.el.shadowRoot.appendChild(i);setTimeout((function(){i.expanded=true}),100);return};e.prototype.render=function(){var e=this;var t,n,i,s,l;return o(r,null,this.currentItems&&o("table",null,o("thead",null,o("tr",null,o("td",null),o("td",null),o("td",null,(t=x.localization)===null||t===void 0?void 0:t.Name),o("td",null,(n=x.localization)===null||n===void 0?void 0:n.Created),o("td",null,(i=x.localization)===null||i===void 0?void 0:i.LastModified),o("td",null,(s=x.localization)===null||s===void 0?void 0:s.Size))),o("tbody",null,(l=this.currentItems.items)===null||l===void 0?void 0:l.map((function(t){return o("tr",{class:De.isItemSelected(t)?"selected":"",tabIndex:0,onKeyDown:function(n){return e.handleRowKeyDown(n,t)},onClick:function(){return De.toggleItemSelected(t)},onContextMenu:function(n){return e.handleContextMenu(n,t)}},o("td",{class:"radio"},De.isItemSelected(t)&&o("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"#000000"},o("path",{d:"M0 0h24v24H0z",fill:"none"}),o("path",{d:"M12 7c-2.76 0-5 2.24-5 5s2.24 5 5 5 5-2.24 5-5-2.24-5-5-5zm0-5C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"})),!De.isItemSelected(t)&&o("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"#000000"},o("path",{d:"M0 0h24v24H0z",fill:"none"}),o("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}))),o("td",null,o("img",{src:t.iconUrl})),o("td",null,t.itemName),o("td",null,e.getLocalDateString(t.createdOn)),o("td",null,e.getLocalDateString(t.modifiedOn)),o("td",{class:"size"},Re(t.fileSize)))})))))};Object.defineProperty(e.prototype,"el",{get:function(){return l(this)},enumerable:false,configurable:true});return e}());Pe.style=je;var Ee=":host{display:block;padding:0.5em 1em;padding-left:0px}";var Oe=e("dnn_rm_left_pane",function(){function e(e){i(this,e);this.itemsClient=new M(x.moduleId)}e.prototype.handleFolderClicked=function(e){this.itemsClient.getFolderContent(Number.parseInt(e.detail.data.key),0,x.pageSize,x.sortField).then((function(e){return x.currentItems=e})).catch((function(e){return console.error(e)}))};e.prototype.render=function(){var e=this;return o(r,null,o("dnn-rm-folder-list",{onDnnRmFolderListFolderPicked:function(t){return e.handleFolderClicked(t)}}))};return e}());Oe.style=Ee;var Ue=':host{display:block}.general{display:-ms-flexbox;display:flex}.general .left{max-width:256px;border-right:1px solid lightgray;padding:1em}.general .left img{width:100%}.general .right{padding:1em}.form{display:grid;grid-template-columns:1fr 2fr;-ms-flex-align:end;align-items:flex-end}.form label{font-weight:bold;text-align:right;margin-right:0.5em;-ms-flex-item-align:start;align-self:flex-start}.form label::after{content:":"}.form input,.form textarea{margin-top:0.5em}.controls{margin-top:2em;display:-ms-flexbox;display:flex;-ms-flex-pack:end;justify-content:flex-end;gap:1em}';var He=e("dnn_rm_move_items",function(){function e(e){i(this,e);this.dnnRmFoldersChanged=s(this,"dnnRmFoldersChanged",7);this.movedCount=0;this.itemsClient=new M(x.moduleId)}e.prototype.closeModal=function(){var e=this.el.parentElement;e.hide().then((function(){setTimeout((function(){document.body.removeChild(e)}),300)}))};e.prototype.handleMove=function(){var e=this;this.moving=true;this.items.forEach((function(t){if(t.isFolder){e.itemsClient.moveFolder({SourceFolderId:t.itemId,DestinationFolderId:Number.parseInt(e.selectedFolder.data.key)}).then((function(){e.handleItemMoved(t)})).catch((function(e){return alert(e)}))}else{e.itemsClient.moveFile({SourceFileId:t.itemId,DestinationFolderId:Number.parseInt(e.selectedFolder.data.key)}).then((function(){e.handleItemMoved(t)})).catch((function(e){return alert(e)}))}}))};e.prototype.handleItemMoved=function(e){this.movedCount++;this.currentItemName=e.itemName;if(this.movedCount==this.items.length){this.moving=false;this.dnnRmFoldersChanged.emit();this.closeModal()}};e.prototype.getMoveButtonText=function(){var e,t;return this.selectedFolder==undefined?(e=x.localization)===null||e===void 0?void 0:e.NoFolderSelected:(t=x.localization)===null||t===void 0?void 0:t.Move};e.prototype.render=function(){var e=this;var t,n,i,s,l,a;return o(r,null,o("h2",null,(t=x.localization)===null||t===void 0?void 0:t.MoveItems),o("p",null,(n=x.localization)===null||n===void 0?void 0:n.SelectDestinationFolder),o("dnn-rm-folder-list",{onDnnRmFolderListFolderPicked:function(t){return e.selectedFolder=t.detail}}),this.moving&&o("div",null,o("p",null,(i=x.localization)===null||i===void 0?void 0:i.MovingItems," ",this.movedCount+1,"/",x.selectedItems.length," (",this.currentItemName,")"),o("dnn-rm-progress-bar",{max:x.selectedItems.length,value:this.movedCount})),o("div",{class:"controls"},o("dnn-button",{type:"primary",reversed:true,disabled:this.moving,onClick:function(){return e.closeModal()}},x.localization.Cancel),o("dnn-button",{type:"primary",onConfirmed:function(){return e.handleMove()},confirm:true,confirmMessage:(s=x.localization)===null||s===void 0?void 0:s.ConfirmMoveMessage,confirmYesText:(l=x.localization)===null||l===void 0?void 0:l.Yes,confirmNoText:(a=x.localization)===null||a===void 0?void 0:a.No,disabled:this.moving},this.getMoveButtonText())))};Object.defineProperty(e.prototype,"el",{get:function(){return l(this)},enumerable:false,configurable:true});return e}());He.style=Ue;var Le=":host{display:block;--progress-height:20px;--progress-background:var(--dnn-color-primary-contrast, lightgray);--progress-color:var(--dnn-color-primary, #3792ED)}.progress-container{display:-ms-flexbox;display:flex;height:var(--progress-height);background:var(--progress-background);overflow:hidden}.progress-container .progress-bar{-webkit-transition:all 300ms ease-in-out;transition:all 300ms ease-in-out;background:var(--progress-color);width:calc(var(--current-value, 0) * 100% / var(--max-value, 100))}.progress-container .progress-bar-remainder{-ms-flex:1;flex:1}";var qe=e("dnn_rm_progress_bar",function(){function e(e){i(this,e);this.value=0;this.max=100}e.prototype.componentDidLoad=function(){this.adjustProgress()};e.prototype.componentDidUpdate=function(){this.adjustProgress()};e.prototype.adjustProgress=function(){this.el.style.setProperty("--current-value",this.value.toString());this.el.style.setProperty("--max-value",this.max.toString())};e.prototype.render=function(){return o(r,null,o("div",{class:"progress-container"},o("div",{class:"progress-bar"}," "),o("div",{class:"progress-bar-remainder"})))};Object.defineProperty(e.prototype,"el",{get:function(){return l(this)},enumerable:false,configurable:true});return e}());qe.style=Le;var Te=":host{display:block;border:2px solid gray;border-radius:var(--dnn-controls-radius, 5px);margin-top:1em}.container{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center}.container .preview{width:32px;height:32px;padding:0.5em}.container .file{-ms-flex-positive:1;flex-grow:1;display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;padding:0.5em}.container .file .success{color:green;margin-top:0.25em;font-weight:bold}.container .file .warning{display:-ms-flexbox;display:flex;-ms-flex-pack:end;justify-content:flex-end;-ms-flex-align:center;align-items:center;gap:1em;margin-top:0.5em}.container .file .warning span{color:red;margin-right:auto}.container .progress{width:100%;background-color:lightgray;border-radius:var(--dnn-controls-radius, 5px)}.container .progress .progress-bar{height:1em;background-color:var(--dnn-color-primary, #0078d7);border-radius:var(--dnn-controls-radius, 5px);-webkit-transition:width 0.5s ease-in-out;transition:width 0.5s ease-in-out}.container .warning{margin:0.25em;font-weight:bold}.container .dismiss button{margin:0;padding:0;background-color:transparent;border:none;cursor:pointer}.container .uploaded .success{fill:green}";var Ae=e("dnn_rm_queued_file",function(){function e(e){i(this,e);this.extract=false;this.overwrite=false;this.xhr=new XMLHttpRequest;this.servicesFramework=new c(x.moduleId)}e.prototype.componentDidLoad=function(){var e=this;this.uploadFile().then((function(t){e.fileUploadResults=JSON.parse(t);if(e.fileUploadResults.message===null){e.successMessage=x.localization.FileUploadedMessage;setTimeout((function(){e.dismiss()}),3e3);return}})).catch((function(e){return console.log(e)}))};e.prototype.dismiss=function(){var e=this;return new Promise((function(t,n){try{e.el.style.transition="all 1s ease-in-out";e.el.style.overflow="hidden";e.el.style.height=e.el.offsetHeight.toFixed(2)+"px";requestAnimationFrame((function(){e.el.style.height="0";e.el.style.opacity="0";e.el.style.border="0"}));setTimeout((function(){t()}),1e3)}catch(e){n(e)}}))};e.prototype.uploadFile=function(){var e=this;return new Promise((function(t,n){var i=e.file.name.split(".").pop();if(e.filter.split(",").indexOf(i)===-1){var o="'.".concat(i,"' ").concat(x.localization.InvalidExtensionMessage);e.fileUploadResults={alreadyExists:false,message:o,fileIconUrl:undefined,fileName:e.file.name,fileId:-1,orientation:0};n(o);return}if(e.file.size>e.maxUploadFileSize){var o="".concat(e.file.name," ").concat(x.localization.FileSizeErrorMessage," ").concat(Re(e.maxUploadFileSize));e.fileUploadResults={alreadyExists:false,message:o,fileIconUrl:undefined,fileName:e.file.name,fileId:-1,orientation:0};n(o);return}var r=e.servicesFramework.getModuleHeaders();var s=new FormData;s.append("folder",x.currentItems.folder.folderPath);s.append("filter",e.filter);s.append("extract",e.extract?"true":"false");s.append("overwrite",e.overwrite?"true":"false");s.append("validationCode",e.validationCode);s.append("isHostPortal","false");s.append("postfile",e.file);e.xhr.onload=function(){if(e.xhr.status===200){t(e.xhr.response)}else{n(e.xhr.statusText)}};e.xhr.upload.onprogress=function(t){if(t.lengthComputable){var n=Math.round(t.loaded/t.total*100);e.progress=n}};e.xhr.onabort=function(){e.dismiss()};var l=e.servicesFramework.getServiceRoot("InternalServices")+"FileUpload/UploadFromLocal";e.xhr.open("POST",l);r.forEach((function(t,n){e.xhr.setRequestHeader(n,t)}));e.xhr.send(s)}))};e.prototype.handleOvewrite=function(){var e=this;this.overwrite=true;this.fileUploadResults=null;this.uploadFile().then((function(t){e.fileUploadResults=JSON.parse(t);return e.dismiss()})).catch((function(e){return alert(e)}))};e.prototype.render=function(){var e=this;return o(r,null,o("div",{class:"container"},o("div",{class:"preview"},this.fileUploadResults&&this.fileUploadResults.fileIconUrl&&o("img",{src:this.fileUploadResults.fileIconUrl})),o("div",{class:"file"},o("span",null,this.file.name," (",Re(this.file.size),")"),this.progress>0&&o("div",{class:"progress"},o("div",{class:"progress-bar",style:{width:"".concat(this.progress,"%")}})),this.fileUploadResults&&this.fileUploadResults.message&&o("div",{class:"warning"},o("span",null,this.fileUploadResults.message),this.fileUploadResults.alreadyExists&&[o("dnn-button",{type:"primary",onClick:function(){return e.handleOvewrite()}},x.localization.Overwrite),o("dnn-button",{type:"primary",reversed:true,onClick:function(){return e.dismiss()}},x.localization.Cancel)]),this.successMessage&&o("div",{class:"success"},this.successMessage)),this.successMessage===undefined&&o("div",{class:"dismiss"},o("button",{title:x.localization.Cancel,onClick:function(){e.xhr.abort();e.dismiss()}},o("svg",{xmlns:"http://www.w3.org/2000/svg",height:"48",width:"48"},o("path",{d:"m28.55 44-2.15-2.15 5.7-5.65-5.7-5.65 2.15-2.15 5.65 5.7 5.65-5.7L42 30.55l-5.7 5.65 5.7 5.65L39.85 44l-5.65-5.7ZM6 31.5v-3h15v3Zm0-8.25v-3h23.5v3ZM6 15v-3h23.5v3Z"})))),this.successMessage&&o("div",{class:"uploaded"},o("svg",{xmlns:"http://www.w3.org/2000/svg",height:"48",width:"48",class:"success"},o("path",{d:"M21.05 33.1 35.2 18.95l-2.3-2.25-11.85 11.85-6-6-2.25 2.25ZM24 44q-4.1 0-7.75-1.575-3.65-1.575-6.375-4.3-2.725-2.725-4.3-6.375Q4 28.1 4 24q0-4.15 1.575-7.8 1.575-3.65 4.3-6.35 2.725-2.7 6.375-4.275Q19.9 4 24 4q4.15 0 7.8 1.575 3.65 1.575 6.35 4.275 2.7 2.7 4.275 6.35Q44 19.85 44 24q0 4.1-1.575 7.75-1.575 3.65-4.275 6.375t-6.35 4.3Q28.15 44 24 44Zm0-3q7.1 0 12.05-4.975Q41 31.05 41 24q0-7.1-4.95-12.05Q31.1 7 24 7q-7.05 0-12.025 4.95Q7 16.9 7 24q0 7.05 4.975 12.025Q16.95 41 24 41Zm0-17Z"})))))};Object.defineProperty(e.prototype,"el",{get:function(){return l(this)},enumerable:false,configurable:true});return e}());Ae.style=Te;var Ne=":host{display:block;display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;height:100%}dnn-rm-files-pane{-ms-flex-positive:1;flex-grow:1}";var Be=e("dnn_rm_right_pane",function(){function e(e){i(this,e)}e.prototype.render=function(){return o(r,null,o("dnn-rm-actions-bar",null),o("dnn-rm-files-pane",null),o("dnn-rm-status-bar",null))};return e}());Be.style=Ne;var Ve=":host{display:block}:host .status-bar{display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row;-ms-flex-align:center;align-items:center;-ms-flex-pack:start;justify-content:flex-start;padding:0.3rem 0.5rem;background-color:#f5f5f5;border-bottom:1px solid #e5e5e5;-webkit-box-shadow:0 1px 0 rgba(0, 0, 0, 0.05);box-shadow:0 1px 0 rgba(0, 0, 0, 0.05);z-index:1}";var Qe=e("dnn_rm_status_bar",function(){function e(e){i(this,e)}e.prototype.getLocalizedStatusBarMessage=function(){var e,t;return x.localization.StatusBarMessage.replace("{0}",(e=x.currentItems)===null||e===void 0?void 0:e.items.length.toString()).replace("{1}",(t=x.currentItems)===null||t===void 0?void 0:t.totalCount.toString())};e.prototype.render=function(){return o(r,null,o("div",{class:"status-bar"},this.getLocalizedStatusBarMessage()))};return e}());Qe.style=Ve;var We=":host{display:-ms-flexbox;display:flex;-ms-flex-pack:end;justify-content:flex-end;background-color:var(--dnn-color-primary);color:var(--dnn-color-primary-contrast);padding:0.5em 1em;gap:1em}button{display:-ms-flexbox;display:flex;-ms-flex-pack:center;justify-content:center;-ms-flex-align:center;align-items:center;border:none;padding:0;margin:0;background-color:transparent;cursor:pointer}button svg{fill:var(--dnn-color-primary-contrast)}";var Ge=e("dnn_rm_top_bar",function(){function e(e){i(this,e);this.itemsClient=new M(x.moduleId)}e.prototype.handleSearchChanged=function(e){if(e.detail!=""){x.itemsSearchTerm=e.detail;this.itemsClient.search(x.currentItems.folder.folderId,e.detail,0,x.pageSize,x.sortField).then((function(e){x.currentItems=Object.assign(Object.assign({},x.currentItems),{totalCount:e.totalCount,items:e.items});x.lastSearchRequestedPage=1})).catch((function(e){return console.error(e)}))}else{this.itemsClient.getFolderContent(x.currentItems.folder.folderId,0,x.pageSize,x.sortField).then((function(e){x.lastSearchRequestedPage=1;x.itemsSearchTerm=undefined;x.currentItems=e}))}};e.prototype.render=function(){var e=this;return o(r,null,o("dnn-searchbox",{onQueryChanged:function(t){return e.handleSearchChanged(t)}}))};return e}());Ge.style=We;var Ke=':host{display:block}.general{display:-ms-flexbox;display:flex}.general .left{max-width:256px;border-right:1px solid lightgray;padding:1em}.general .left img{width:100%}.general .right{padding:1em}.form{display:grid;grid-template-columns:1fr 2fr;-ms-flex-align:end;align-items:flex-end}.form label{font-weight:bold;text-align:right;margin-right:0.5em;-ms-flex-item-align:start;align-self:flex-start}.form label::after{content:":"}.form input,.form textarea{margin-top:0.5em}.controls{margin-top:2em;display:-ms-flexbox;display:flex;-ms-flex-pack:end;justify-content:flex-end;gap:1em}';var Ze=e("dnn_rm_unlink_items",function(){function e(e){i(this,e);this.dnnRmFoldersChanged=s(this,"dnnRmFoldersChanged",7);this.unlinkedCount=0;this.itemsClient=new M(x.moduleId)}e.prototype.closeModal=function(){var e=this.el.parentElement;e.hide().then((function(){setTimeout((function(){document.body.removeChild(e)}),300)}))};e.prototype.handleUnlink=function(){var e=this;this.unlinking=true;this.items.forEach((function(t){e.itemsClient.deleteFolder({FolderId:t.itemId,UnlinkAllowedStatus:true}).then((function(){e.handleItemUnlinked(t)})).catch((function(e){return alert(e)}))}))};e.prototype.handleItemUnlinked=function(e){this.unlinkedCount++;this.currentItemName=e.itemName;if(this.unlinkedCount==this.items.length){this.unlinking=false;this.dnnRmFoldersChanged.emit();this.closeModal()}};e.prototype.render=function(){var e=this;var t,n,i,s;return o(r,null,o("h2",null,(t=x.localization)===null||t===void 0?void 0:t.UnlinkFolders),o("p",null,(n=x.localization)===null||n===void 0?void 0:n.ConfirmUnlinkMessage),o("ul",null,this.items.map((function(e){return o("li",null,e.itemName)}))),this.unlinking&&o("div",null,o("p",null,(i=x.localization)===null||i===void 0?void 0:i.UnlinkFolders," ",this.unlinkedCount+1,"/",x.selectedItems.length," (",this.currentItemName,")"),o("dnn-rm-progress-bar",{max:x.selectedItems.length,value:this.unlinkedCount})),o("div",{class:"controls"},o("dnn-button",{type:"primary",reversed:true,disabled:this.unlinking,onClick:function(){return e.closeModal()}},x.localization.Cancel),o("dnn-button",{type:"primary",onClick:function(){return e.handleUnlink()},disabled:this.unlinking},(s=x.localization)===null||s===void 0?void 0:s.Unlink)))};Object.defineProperty(e.prototype,"el",{get:function(){return l(this)},enumerable:false,configurable:true});return e}());Ze.style=Ke;var Ye=":host{display:block}dnn-dropzone{min-width:65vw}";var Je=e("dnn_rm_upload_file",function(){function e(e){i(this,e);this.dnnRmFoldersChanged=s(this,"dnnRmFoldersChanged",7);this.queuedFiles=[];this.alreadyExistingFilesCount=0;this.uploadingFilesCount=0;this.uploadedFilesCount=0;this.failedFilesCount=0;this.extract=false;this.itemsClient=new M(x.moduleId)}e.prototype.componentWillLoad=function(){var e=this;this.itemsClient.getAllowedFileExtensions().then((function(t){e.allowedExtensions=t.allowedExtensions;e.validationCode=t.validationCode;e.maxUploadFileSize=t.maxUploadFileSize})).catch((function(e){return alert(e)}))};e.prototype.handleFilesDropped=function(e){var t=this;e.forEach((function(e){t.queuedFiles=__spreadArray(__spreadArray([],t.queuedFiles,true),[e],false)}))};e.prototype.render=function(){var e=this;return o(r,null,o("h2",null,x.localization.Upload),o("label",null,o("dnn-checkbox",{onClick:function(){return e.extract=!e.extract}},x.localization.ExtractUploads)),o("dnn-dropzone",{onFilesSelected:function(t){return e.handleFilesDropped(t.detail)}}),this.allowedExtensions&&this.validationCode&&this.queuedFiles.map((function(t){return o("dnn-rm-queued-file",{file:t,validationCode:e.validationCode,filter:e.allowedExtensions,extract:e.extract,maxUploadFileSize:e.maxUploadFileSize})})))};Object.defineProperty(e.prototype,"el",{get:function(){return l(this)},enumerable:false,configurable:true});return e}());Je.style=Ye;var Xe=":host{position:relative;display:-ms-flexbox;display:flex;-ms-flex-pack:justify;justify-content:space-between;--background-color:transparent;--color:#333;--border-size:1px;--border-color:grey;--border-active-color:black;--border-radius:var(--dnn-controls-radius, 5px);--padding:var(--dnn-controls-padding, 5px);--focus-color:var(--dnn-color-primary, blue)}:host input{width:100%;border:var(--border-size) solid var(--border-color);outline:none;border-radius:var(--border-radius);padding:var(--padding);padding-right:32px;-webkit-transition:all 300ms ease-in-out;transition:all 300ms ease-in-out}:host input:focus,:host input:hover{outline:none;-webkit-box-shadow:0 0 2px 2px var(--focus-color);box-shadow:0 0 2px 2px var(--focus-color)}:host svg{position:absolute;top:0;right:0;height:100%;-webkit-transform:scale(0.7);transform:scale(0.7);fill:var(--color);outline:var(--color);color:var(--color);-webkit-transition:all 300ms ease-in-out;transition:all 300ms ease-in-out}:host button{background:transparent;border:0;margin:0;padding:0}:host button:focus svg,:host button:hover svg{fill:var(--focus-color);outline:var(--focus-color);color:var(--focus-color)}";var $e=undefined&&undefined.__decorate||function(e,t,n,i){var o=arguments.length,r=o<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,n):i,s;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")r=Reflect.decorate(e,t,n,i);else for(var l=e.length-1;l>=0;l--)if(s=e[l])r=(o<3?s(r):o>3?s(t,n,r):s(t,n))||r;return o>3&&r&&Object.defineProperty(t,n,r),r};var et=e("dnn_searchbox",function(){function e(e){i(this,e);this.queryChanged=s(this,"queryChanged",7);this.placeholder="";this.debounced=true;this.query=""}e.prototype.fireQueryChanged=function(){if(this.debounced){this.debouncedHandleQueryChanged()}else{this.handleQueryChanged()}};e.prototype.handleQueryChanged=function(){this.queryChanged.emit(this.query)};e.prototype.debouncedHandleQueryChanged=function(){this.handleQueryChanged()};e.prototype.render=function(){var e=this;return o(r,null,o("input",{type:"text",value:this.query,placeholder:this.placeholder,onInput:function(t){return e.query=t.target.value}}),this.query!==""?o("button",{class:"svg clear",onClick:function(){return e.query=""}},o("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"#000000"},o("path",{d:"M0 0h24v24H0z",fill:"none"}),o("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z"}))):o("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"#000000"},o("path",{d:"M0 0h24v24H0z",fill:"none"}),o("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"})))};Object.defineProperty(e,"watchers",{get:function(){return{query:["fireQueryChanged"]}},enumerable:false,configurable:true});return e}());$e([a(500)],et.prototype,"debouncedHandleQueryChanged",null);et.style=Xe;var tt="";var nt=e("dnn_tab",function(){function e(e){i(this,e);this.visible=false}e.prototype.show=function(){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(e){this.visible=true;return[2]}))}))};e.prototype.hide=function(){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(e){this.visible=false;return[2]}))}))};e.prototype.render=function(){return o(r,null,this.visible&&o("slot",null))};return e}());nt.style=tt;var it=":host{display:block;--color-background:var(--dnn-color-secondary-dark, lightgray);--color-text:var(--dnn-color-secondary-contrast, #333);--color-visible:var(--dnn-color-primary, #3792ED);--color-visible-text:var(--dnn-color-primary-contrast, #FFF);--color-focus:var(--dnn-color-primary, #3792ed)}.tabTitles{display:-ms-flexbox;display:flex;background-color:var(--color-background);color:var(--color-text)}.tabTitles button{padding:0.5rem 1rem;border:0;margin:0;background-color:transparent}.tabTitles button.visible{background-color:var(--color-visible);color:var(--color-bisible-text)}.tabTitles button:focus,.tabTitles button:hover{outline:none;-webkit-box-shadow:0 0 2px 2px var(--color-focus);box-shadow:0 0 2px 2px var(--color-focus)}.currentTab{border:1px solid var(--color-background)}";var ot=e("dnn_tabs",function(){function e(e){i(this,e);this.tabTitles=[];this.selectedTabTitle=""}e.prototype.componentDidLoad=function(){var e=this;requestAnimationFrame((function(){e.updateTitles();e.showFirstTab()}))};e.prototype.getTabs=function(){return this.component.shadowRoot.querySelector("slot").assignedElements()};e.prototype.updateTitles=function(){var e=this;var t=this.getTabs();t.forEach((function(t){return e.tabTitles=__spreadArray(__spreadArray([],e.tabTitles,true),[t.tabTitle],false)}))};e.prototype.showFirstTab=function(){var e=this.getTabs()[0];e.show();this.selectedTabTitle=e.tabTitle};e.prototype.showTab=function(e){var t=this.getTabs();t.forEach((function(t){if(t.tabTitle==e){t.show();return}t.hide()}));this.selectedTabTitle=e};e.prototype.render=function(){var e=this;return o(r,{ref:function(t){return e.component=t}},o("div",{class:"tabTitles"},this.tabTitles.map((function(t){return o("button",{class:e.selectedTabTitle==t?"visible":"",onClick:function(){return e.showTab(t)}},t)}))),o("div",{class:"currentTab"},o("slot",null)))};return e}());ot.style=it;var rt=":host{display:-ms-flexbox;display:flex;overflow:visible}.expander{width:24px;height:24px}.expander button{-webkit-transition:all 150ms ease-in-out;transition:all 150ms ease-in-out;background-color:transparent;border:none;padding:0;margin:0;height:1em;display:-ms-flexbox;display:flex;-ms-flex-pack:center;justify-content:center;-ms-flex-align:center;align-items:center;cursor:pointer;position:relative;top:2px}.expander button svg :first-child{-webkit-transition:all 150ms ease-in-out;transition:all 150ms ease-in-out;fill:white;stroke:black}.expander.expanded button{-webkit-transform:rotate(45deg);transform:rotate(45deg)}.expander.expanded button svg :first-child{fill:black;stroke:black}div.item .item-slot{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;gap:0.25em;min-height:24px}div.item div.children{overflow:hidden;height:0;-webkit-transition:all 150ms ease-in-out;transition:all 150ms ease-in-out}";var st=e("dnn_treeview_item",function(){function e(e){i(this,e);this.userExpanded=s(this,"userExpanded",3);this.userCollapsed=s(this,"userCollapsed",3);this.expanded=false;this.hasChildren=false}e.prototype.watchExpanded=function(e){if(e){this.expander.classList.add("expanded");this.collapsible.expanded=true;return}this.expander.classList.remove("expanded");this.collapsible.expanded=false};e.prototype.componentDidLoad=function(){var e=this;requestAnimationFrame((function(){var t=e.childElement.children[0];var n=t.assignedElements().length;if(n>0){e.hasChildren=true}if(e.expanded){e.expander.classList.add("expanded");e.collapsible.expanded=false;setTimeout((function(){e.collapsible.expanded=true}),300)}}))};e.prototype.toggleCollapse=function(){this.expanded=!this.expanded;if(this.expanded){this.expander.classList.add("expanded");this.userExpanded.emit();return}this.expander.classList.remove("expanded");this.userCollapsed.emit()};e.prototype.render=function(){var e=this;return o(r,null,o("div",{class:"expander",ref:function(t){return e.expander=t}},this.hasChildren&&o("button",{onClick:function(){return e.toggleCollapse()}},o("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"#000000"},o("path",{d:"M10 17l5-5-5-5v10z"}),o("path",{d:"M0 24V0h24v24H0z",fill:"none"})))),o("div",{class:"item"},o("div",{class:"item-slot"},o("slot",null)),o("dnn-collapsible",{ref:function(t){return e.collapsible=t},expanded:this.expanded},o("div",{ref:function(t){return e.childElement=t}},o("slot",{name:"children"})))))};Object.defineProperty(e.prototype,"el",{get:function(){return l(this)},enumerable:false,configurable:true});Object.defineProperty(e,"watchers",{get:function(){return{expanded:["watchExpanded"]}},enumerable:false,configurable:true});return e}());st.style=rt;var lt=":host{--background-color:var(--dnn-color-primary-contrast, white);--foreground-color:var(--dnn-color-primary, #3792ED);display:block}.menu-container{display:-ms-flexbox;display:flex;-ms-flex-pack:start;justify-content:flex-start;-ms-flex-align:center;align-items:center;background-color:var(--background-color)}.menu-container .menu{margin:0.5em;display:-ms-flexbox;display:flex;gap:1em;-ms-flex-pack:start;justify-content:flex-start;-ms-flex-align:center;align-items:center;white-space:nowrap;width:100%}.menu-container .overflow{margin-left:auto;position:relative}.menu-container .overflow button{cursor:pointer;padding:0;margin:0;background-color:transparent;border:none}.menu-container .overflow button svg{fill:var(--foreground-color)}.menu-container .overflow .dropdown{position:absolute;display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;white-space:nowrap;right:0;-webkit-transition:100ms ease-in-out;transition:100ms ease-in-out;height:0;overflow:hidden}.menu-container .overflow .dropdown.visible{padding:1em;gap:0.5em;background-color:var(--background-color);-webkit-box-shadow:2px 2px 4px rgba(0, 0, 0, 0.7);box-shadow:2px 2px 4px rgba(0, 0, 0, 0.7)}";var at=e("dnn_vertical_overflow_menu",function(){function e(e){i(this,e);this.showDropdownButton=false;this.showDropdownMenu=false;this.previousMenuWidth=0}e.prototype.componentDidRender=function(){var e=this;requestAnimationFrame((function(){e.moveItemsToDropDownIfNecessery();e.resizeObserver=new ResizeObserver((function(t){for(var n=0,i=t;n<i.length;n++){var o=i[n];if(o.contentRect.width<e.previousMenuWidth){e.moveItemsToDropDownIfNecessery()}if(e.previousMenuWidth>0&&o.contentRect.width>e.previousMenuWidth){e.moveItemsToMenuIfPossible()}e.previousMenuWidth=o.contentRect.width}}));e.resizeObserver.observe(e.element)}))};e.prototype.moveItemsToDropDownIfNecessery=function(){var e=this;var t=Array.from(this.menu.querySelector("slot").assignedElements());var n=this.menu.getBoundingClientRect().width;var i=parseFloat(getComputedStyle(this.element).fontSize)*2;t.forEach((function(t){return i+=e.getFullWidth(t)}));i+=(t.length-1)*parseFloat(getComputedStyle(this.element).fontSize);if(i>n){this.showDropdownButton=true;var o=t[t.length-1];if(this.dropdown==undefined){return}o.slot="dropdown";this.moveItemsToDropDownIfNecessery()}};e.prototype.moveItemsToMenuIfPossible=function(){var e=this;if(this.dropdown==undefined||!this.dropdown.hasChildNodes()){return}var t=Array.from(this.menu.querySelector("slot").assignedElements());var n=this.menu.getBoundingClientRect().width;var i=parseFloat(getComputedStyle(this.element).fontSize)*2;i+=(t.length-1)*parseFloat(getComputedStyle(this.element).fontSize);t.forEach((function(t){return i+=e.getFullWidth(t)}));var o=this.dropdown.querySelector("slot").assignedElements()[0];if(o!=undefined){i+=this.getFullWidth(o)}if(i<n){if(o!=undefined){o.slot=""}if(o==undefined){this.dropdown.classList.remove("visible");this.showDropdownMenu=false;this.showDropdownButton=false}}};e.prototype.getFullWidth=function(e){var t=e.getBoundingClientRect().width;var n=getComputedStyle(e);t+=parseFloat(n.marginLeft);t+=parseFloat(n.marginRight);t+=parseFloat(n.paddingLeft);t+=parseFloat(n.paddingRight);return t};e.prototype.toggleOverflowMenu=function(){var e=this;this.showDropdownMenu=!this.showDropdownMenu;if(this.showDropdownMenu){this.dropdown.classList.add("visible");var t=0;var n=Array.from(this.dropdown.querySelector("slot").assignedElements());n.forEach((function(e){return t+=e.getBoundingClientRect().height}));var i=parseFloat(getComputedStyle(this.dropdown).fontSize);var o=i*(this.dropdown.children.length-1)/2;t+=o;var r=i*2;t+=r;this.dropdown.style.height="".concat(t,"px");var s=function(t){var n=e.button.getBoundingClientRect();if(t.clientX<n.left||t.clientX>n.right||t.clientY<n.top||t.clientY>n.bottom){e.toggleOverflowMenu()}document.removeEventListener("click",s)};setTimeout((function(){document.addEventListener("click",s,false)}),100)}else{this.dropdown.classList.remove("visible");this.dropdown.style.height="0px"}};e.prototype.render=function(){var e=this;return o(r,null,o("div",{class:"menu-container"},o("div",{class:"menu",ref:function(t){return e.menu=t}},o("slot",null)),this.showDropdownButton&&o("div",{class:"overflow"},o("button",{ref:function(t){return e.button=t},class:"icon",onClick:function(){return e.toggleOverflowMenu()}},o("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"#000000"},o("path",{d:"M0 0h24v24H0z",fill:"none"}),o("path",{d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"}))),o("div",{class:"dropdown",ref:function(t){return e.dropdown=t}},o("slot",{name:"dropdown"})))))};Object.defineProperty(e.prototype,"element",{get:function(){return l(this)},enumerable:false,configurable:true});return e}());at.style=lt;var dt=":host{display:-ms-flexbox;display:flex;-ms-flex-align:stretch;align-items:stretch;margin:0 auto;position:relative;--left-pane-background-color:transparent;--right-pane-background-color:transparent}button{border:none;margin:0;padding:0;cursor:ew-resize;position:absolute;height:100%;background-color:transparent}button.transition{-webkit-transition:all 300ms ease-in-out;transition:all 300ms ease-in-out}.pane{overflow-y:auto}.pane.transition{-webkit-transition:all 300ms ease-in-out;transition:all 300ms ease-in-out}.pane.left{background-color:var(--left-pane-background-color)}.pane.right{background-color:var(--right-pane-background-color);-ms-flex-positive:1;flex-grow:1}";var ct=e("dnn_vertical_splitview",function(){function e(e){i(this,e);this.widthChanged=s(this,"widthChanged",7);this.splitterWidth=16;this.splitWidthPercentage=30;this.leftWidth=0;this.rightWidth=0}e.prototype.setSplitWidthPercentage=function(e){return __awaiter(this,void 0,void 0,(function(){var t;var n=this;return __generator(this,(function(i){t=this.element.shadowRoot.querySelectorAll(".pane");requestAnimationFrame((function(){t.forEach((function(e){return e.classList.add("transition")}));n.splitter.classList.add("transition");requestAnimationFrame((function(){var i=n.element.getBoundingClientRect().width;var o=i*e/100;if(o<0){o=0}if(o>i){o=i}n.leftWidth=o;n.rightWidth=i-o;setTimeout((function(){t.forEach((function(e){return e.classList.remove("transition")}));n.splitter.classList.remove("transition")}),300)}))}));return[2]}))}))};e.prototype.getSplitWidthPercentage=function(){return __awaiter(this,void 0,void 0,(function(){var e;return __generator(this,(function(t){e=this.element.getBoundingClientRect().width;return[2,this.leftWidth/e]}))}))};e.prototype.componentDidLoad=function(){var e=this;requestAnimationFrame((function(){e.resizeObserver=new ResizeObserver((function(){var t=e.element.getBoundingClientRect().width;e.leftWidth=t*e.splitWidthPercentage/100;e.rightWidth=t-e.leftWidth;e.widthChanged.emit(e.splitWidthPercentage)}));e.resizeObserver.observe(e.element)}))};e.prototype.handleMouseDown=function(e){var t=this;e.preventDefault();var n=function(e){requestAnimationFrame((function(){var n=t.element.getBoundingClientRect().width;var i=d(e,t.previousTouch).movementX;var o=t.leftWidth+i;if(o<0){o=0}if(o>n){o=n}t.leftWidth=o;t.rightWidth=n-o;t.splitWidthPercentage=t.leftWidth/n*100}))};var i=function(){document.removeEventListener("mousemove",n);document.removeEventListener("touchmove",n);var e=t.element.getBoundingClientRect().width;var i=t.leftWidth/e*100;t.widthChanged.emit(i)};document.addEventListener("mouseup",i);document.addEventListener("touchend",i);document.addEventListener("mousemove",n);document.addEventListener("touchmove",n)};e.prototype.handleKeyDown=function(e){var t=0;switch(e.key){case"ArrowLeft":t=-10;break;case"ArrowRight":t=10;break;default:return}if(e.shiftKey){t=t*10}var n=this.element.getBoundingClientRect().width;var i=this.leftWidth+t;if(i<0){i=0}if(i>n){i=n}this.leftWidth=i;this.rightWidth=n-this.leftWidth};e.prototype.render=function(){var e=this;return o(r,null,o("div",{class:"left pane",style:{width:"".concat(this.leftWidth,"px")}},o("slot",{name:"left"})),o("button",{onMouseDown:function(t){return e.handleMouseDown(t)},onTouchStart:function(t){return e.handleMouseDown(t)},onKeyDown:function(t){return e.handleKeyDown(t)},ref:function(t){return e.splitter=t},style:{minWidth:"".concat(this.splitterWidth.toString(),"px"),left:"".concat(this.leftWidth-2,"px")}},o("slot",null)),o("div",{class:"right pane",style:{width:"".concat(this.rightWidth,"px")}},o("slot",{name:"right"})))};Object.defineProperty(e.prototype,"element",{get:function(){return l(this)},enumerable:false,configurable:true});return e}());ct.style=dt}}}));
//# sourceMappingURL=p-8615670f.system.entry.js.map